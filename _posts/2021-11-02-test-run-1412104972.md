<!--more-->

# Index

| Name | Result | Duration |
| ---- | ------ | -------- |
| [init::web::test::test_web_destroy](#initwebtesttest_web_destroy) | ✅ | 3.872010348s | 
| [init::web::test::test_web_test](#initwebtesttest_web_test) | ✅ | 5.168994005s | 
| [tests::api::test_create_api_key_web](#testsapitest_create_api_key_web) | ❌ | 39.358054104s | 
| [tests::coap::command::test_command::version_1](#testscoapcommandtest_commandversion_1) | ❌ | 312.08894879s | 
| [tests::coap::command::test_command::version_2](#testscoapcommandtest_commandversion_2) | ❌ | 311.820021674s | 
| [tests::coap::command::test_command::version_3](#testscoapcommandtest_commandversion_3) | ❌ | 311.533362274s | 
| [tests::coap::telemetry::test_send_telemetry_pass::version_1](#testscoaptelemetrytest_send_telemetry_passversion_1) | ❌ | 312.670470477s | 
| [tests::coap::telemetry::test_send_telemetry_pass::version_2](#testscoaptelemetrytest_send_telemetry_passversion_2) | ❌ | 311.345564017s | 
| [tests::coap::telemetry::test_send_telemetry_pass::version_3](#testscoaptelemetrytest_send_telemetry_passversion_3) | ❌ | 311.200171383s | 
| [tests::coap::telemetry::test_send_telemetry_user::version_1](#testscoaptelemetrytest_send_telemetry_userversion_1) | ❌ | 311.269786185s | 
| [tests::coap::telemetry::test_send_telemetry_user::version_2](#testscoaptelemetrytest_send_telemetry_userversion_2) | ❌ | 311.626824593s | 
| [tests::coap::telemetry::test_send_telemetry_user::version_3](#testscoaptelemetrytest_send_telemetry_userversion_3) | ❌ | 311.315728464s | 
| [tests::coap::telemetry::test_send_telemetry_user_alias::version_1](#testscoaptelemetrytest_send_telemetry_user_aliasversion_1) | ❌ | 311.759169319s | 
| [tests::coap::telemetry::test_send_telemetry_user_alias::version_2](#testscoaptelemetrytest_send_telemetry_user_aliasversion_2) | ❌ | 311.099484824s | 
| [tests::coap::telemetry::test_send_telemetry_user_alias::version_3](#testscoaptelemetrytest_send_telemetry_user_aliasversion_3) | ❌ | 312.853165501s | 
| [tests::coap::telemetry::test_send_telemetry_user_only::version_1](#testscoaptelemetrytest_send_telemetry_user_onlyversion_1) | ❌ | 312.971777191s | 


# Details

## ✅ init::web::test::test_web_destroy

**Duration**: 3.872010348s

## ✅ init::web::test::test_web_test

**Duration**: 5.168994005s

## ❌ tests::api::test_create_api_key_web

**Duration**: 39.358054104s

<details>

<summary>Test output</summary>

<pre>
[2021-11-02T12:25:53Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:25:56Z INFO  drogue_cloud_tests::init::login] Performing console login
thread 'main' panicked at 'Get API key: Failed to wait for API key value control

Caused by:
    timeout waiting on condition: ', src/tests/api/mod.rs:7:46

</pre>

</details>

## ❌ tests::coap::command::test_command::version_1

**Duration**: 312.08894879s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:26:33Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:26:35Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:26:37Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:26:38Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTc3OTgsImlhdCI6MTYzNTg1NTk5OCwianRpIjoiMGRkZWQ5NDQtY2Q4OS00MWQzLTkzOWEtMTQ4NTg4ZTMxMDc2IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDM1YzNmZGMtMTI0MS00NjVkLTkzMmItZmQzMzlkNDY5YjhlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImQzNWMzZmRjLTEyNDEtNDY1ZC05MzJiLWZkMzM5ZDQ2OWI4ZSJ9.eoxw7Ve8KedrYRYPJhT6lWQMbo5nNxO_EUsd7OUtso4
[2021-11-02T12:26:38Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:26:38Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(256)), stdout: "", stderr: "Error: Error loading config file\n\nCaused by:\n    0: Unable to open configuration file. Did you log into a drogue cloud cluster ?\n    1: No such file or directory (os error 2)\n" })
[2021-11-02T12:26:38Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTc3OTgsImlhdCI6MTYzNTg1NTk5OCwianRpIjoiMGRkZWQ5NDQtY2Q4OS00MWQzLTkzOWEtMTQ4NTg4ZTMxMDc2IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDM1YzNmZGMtMTI0MS00NjVkLTkzMmItZmQzMzlkNDY5YjhlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImQzNWMzZmRjLTEyNDEtNDY1ZC05MzJiLWZkMzM5ZDQ2OWI4ZSJ9.eoxw7Ve8KedrYRYPJhT6lWQMbo5nNxO_EUsd7OUtso4" "--context" "system-tests"
[2021-11-02T12:26:38Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:26:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:26:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:26:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTYyOTgsImlhdCI6MTYzNTg1NTk5OCwiYXV0aF90aW1lIjoxNjM1ODU1OTk2LCJqdGkiOiJkMmY1MDgyMC1hM2Q5LTQxMDUtYmNmNy0yNDNhMDliYmFlN2YiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImQzNWMzZmRjLTEyNDEtNDY1ZC05MzJiLWZkMzM5ZDQ2OWI4ZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJkMzVjM2ZkYy0xMjQxLTQ2NWQtOTMyYi1mZDMzOWQ0NjliOGUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.J494oekNJotvMJ0b8lCFBMv_XLfHjmkINVGs8a0GKivQrKXxqi_mIZHCDFeEBJmACAzLScD3IaBqIsH5QvuKEcFVID9JIkT5g6FIwRHrr-bgc5-Xo6iLomkOSxXcG3OKke0--K5zFO4sUScL7mKF0__hdcQwnfpQ2Akog0JM9ZP2RzLL3rToyV_Z_TXnp0K7ZB1wJblJwwGiZ00cw6BN5spd7qR2XfypVyrSK7Qxhf86imCyyoiJnNk6wrskJSnc8FtRHH0qcW70gQTygPz7SeaN2CfyqEv2CCG8gKn0NW7djoJUcQjufiZpjBQctvNdXbsyBPkqlMmk660-2icL8g\n", stderr: "" })
[2021-11-02T12:26:39Z INFO  drogue_cloud_tests::resources::apps] Create application: 15475ecb-2213-414f-a34c-dda6d6cfb52d
[2021-11-02T12:26:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "15475ecb-2213-414f-a34c-dda6d6cfb52d"
[2021-11-02T12:26:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 15475ecb-2213-414f-a34c-dda6d6cfb52d created.\n", stderr: "" })
[2021-11-02T12:26:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "15475ecb-2213-414f-a34c-dda6d6cfb52d"
[2021-11-02T12:26:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:26:39.178167Z\",\n    \"generation\": 0,\n    \"name\": \"15475ecb-2213-414f-a34c-dda6d6cfb52d\",\n    \"resourceVersion\": \"f3bd669b-3345-405a-8f36-35d4007a6248\",\n    \"uid\": \"a9a6c4e8-4c40-4cf3-9888-b155e629050a\"\n  }\n}\n", stderr: "" })
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "15475ecb-2213-414f-a34c-dda6d6cfb52d"
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:26:39.178167Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"15475ecb-2213-414f-a34c-dda6d6cfb52d\",\n    \"resourceVersion\": \"87d35dab-72a6-479b-b3f1-b3f687ccb7ab\",\n    \"uid\": \"a9a6c4e8-4c40-4cf3-9888-b155e629050a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:26:39.728843384Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:26:39.728807817Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:26:39.361947023Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:26:39.374424747Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:26:39.552757133Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:26:39.562358189Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:26:39.728780375Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:26:39.728781688Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"CW5mZTFD5ubC\",\n        \"username\": \"user-15475ecb-2213-414f-a34c-dda6d6cfb52d\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "15475ecb-2213-414f-a34c-dda6d6cfb52d"
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:26:39.178167Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"15475ecb-2213-414f-a34c-dda6d6cfb52d\",\n    \"resourceVersion\": \"87d35dab-72a6-479b-b3f1-b3f687ccb7ab\",\n    \"uid\": \"a9a6c4e8-4c40-4cf3-9888-b155e629050a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:26:39.728843384Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:26:39.728807817Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:26:39.361947023Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:26:39.374424747Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:26:39.552757133Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:26:39.562358189Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:26:39.728780375Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:26:39.728781688Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"CW5mZTFD5ubC\",\n        \"username\": \"user-15475ecb-2213-414f-a34c-dda6d6cfb52d\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "15475ecb-2213-414f-a34c-dda6d6cfb52d" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::tests::coap::command] Sending payload
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::tests::coap::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTYyOTgsImlhdCI6MTYzNTg1NTk5OCwiYXV0aF90aW1lIjoxNjM1ODU1OTk2LCJqdGkiOiJkMmY1MDgyMC1hM2Q5LTQxMDUtYmNmNy0yNDNhMDliYmFlN2YiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImQzNWMzZmRjLTEyNDEtNDY1ZC05MzJiLWZkMzM5ZDQ2OWI4ZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJkMzVjM2ZkYy0xMjQxLTQ2NWQtOTMyYi1mZDMzOWQ0NjliOGUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.J494oekNJotvMJ0b8lCFBMv_XLfHjmkINVGs8a0GKivQrKXxqi_mIZHCDFeEBJmACAzLScD3IaBqIsH5QvuKEcFVID9JIkT5g6FIwRHrr-bgc5-Xo6iLomkOSxXcG3OKke0--K5zFO4sUScL7mKF0__hdcQwnfpQ2Akog0JM9ZP2RzLL3rToyV_Z_TXnp0K7ZB1wJblJwwGiZ00cw6BN5spd7qR2XfypVyrSK7Qxhf86imCyyoiJnNk6wrskJSnc8FtRHH0qcW70gQTygPz7SeaN2CfyqEv2CCG8gKn0NW7djoJUcQjufiZpjBQctvNdXbsyBPkqlMmk660-2icL8g\n", stderr: "" })
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:26:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:31:42Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:31:42Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:31:42Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:31:42Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:31:42Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "15475ecb-2213-414f-a34c-dda6d6cfb52d" "device1"
[2021-11-02T12:31:42Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:31:42Z INFO  drogue_cloud_tests::resources::apps] Destroy application '15475ecb-2213-414f-a34c-dda6d6cfb52d'
[2021-11-02T12:31:42Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "15475ecb-2213-414f-a34c-dda6d6cfb52d"
[2021-11-02T12:31:42Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 15475ecb-2213-414f-a34c-dda6d6cfb52d deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::command::test_command::version_2

**Duration**: 311.820021674s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:31:44Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:31:47Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:31:49Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:31:50Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTgxMTAsImlhdCI6MTYzNTg1NjMxMCwianRpIjoiOTQ0ZDllNGMtNDUyYi00NjllLThiNDAtM2QwM2Q0MmFiMjU4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOWY0ZjdlZmUtNjg2Ny00OWFhLWI4ZTUtMTZkOGY4ZDc4YmVkIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjlmNGY3ZWZlLTY4NjctNDlhYS1iOGU1LTE2ZDhmOGQ3OGJlZCJ9.RkuGY1K6Wy0r4kucWvM582fBXTP2JR0OYI3Wc68kMyI
[2021-11-02T12:31:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:31:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:31:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTgxMTAsImlhdCI6MTYzNTg1NjMxMCwianRpIjoiOTQ0ZDllNGMtNDUyYi00NjllLThiNDAtM2QwM2Q0MmFiMjU4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOWY0ZjdlZmUtNjg2Ny00OWFhLWI4ZTUtMTZkOGY4ZDc4YmVkIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjlmNGY3ZWZlLTY4NjctNDlhYS1iOGU1LTE2ZDhmOGQ3OGJlZCJ9.RkuGY1K6Wy0r4kucWvM582fBXTP2JR0OYI3Wc68kMyI" "--context" "system-tests"
[2021-11-02T12:31:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:31:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:31:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:31:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTY2MTAsImlhdCI6MTYzNTg1NjMxMCwiYXV0aF90aW1lIjoxNjM1ODU2MzA4LCJqdGkiOiIyMTFjYmYxMy01NTJiLTQxYjQtOTMxZC1iZTdiMGJiZDg0NTAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjlmNGY3ZWZlLTY4NjctNDlhYS1iOGU1LTE2ZDhmOGQ3OGJlZCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI5ZjRmN2VmZS02ODY3LTQ5YWEtYjhlNS0xNmQ4ZjhkNzhiZWQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.sH_xmjzCa5gOaOQhFghGlhuSANlN8YsY60u4qH6PnM4HVUdmVr00lfmzy6O_hCNnQia2OtQR0mTxkVH_yETTtHlKSU2cUPmydpXBvO36asy-8zjnS48Ii8jmQFGRxnwEM6zYWCOmR3K9ewvIFv8oZbjqNZaLAMUnina_u-OtfjWxpYsc8hV5hlpSzimj9JpYQ0Pko-xuXRuvVkA7o9W8tfzF3GkuehwigotlXo3rYbqWUD8S_zsgawyN3g9-N78CP7mdSF1ap7YczTfby2H6f1icV00arIrC_8NoOiveq3p3H00jUMx9XmPxvQaF8jlGRYvl871ov-f0vLzMDtGJ2A\n", stderr: "" })
[2021-11-02T12:31:51Z INFO  drogue_cloud_tests::resources::apps] Create application: 8934744b-1def-47e9-bf95-0ad7581d427a
[2021-11-02T12:31:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "8934744b-1def-47e9-bf95-0ad7581d427a"
[2021-11-02T12:31:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 8934744b-1def-47e9-bf95-0ad7581d427a created.\n", stderr: "" })
[2021-11-02T12:31:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "8934744b-1def-47e9-bf95-0ad7581d427a"
[2021-11-02T12:31:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:31:51.064805Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"8934744b-1def-47e9-bf95-0ad7581d427a\",\n    \"resourceVersion\": \"b81f5600-a8b7-472f-8681-8cf1381ca525\",\n    \"uid\": \"cf2392d1-f4c2-49c5-b9cd-08475bfc8ecb\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:31:51.089655825Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:31:51.089638802Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.089579201Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.089579982Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.089580493Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.089581104Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.089581755Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.089583178Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "8934744b-1def-47e9-bf95-0ad7581d427a"
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:31:51.064805Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"8934744b-1def-47e9-bf95-0ad7581d427a\",\n    \"resourceVersion\": \"71d2ced3-340c-4f8a-9923-36f69c2f9d16\",\n    \"uid\": \"cf2392d1-f4c2-49c5-b9cd-08475bfc8ecb\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:31:51.371848376Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:31:51.371812650Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.130420993Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.135727018Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.233597759Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.240528686Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.371782984Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.371784306Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"olOqRi90BaKk\",\n        \"username\": \"user-8934744b-1def-47e9-bf95-0ad7581d427a\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "8934744b-1def-47e9-bf95-0ad7581d427a"
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:31:51.064805Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"8934744b-1def-47e9-bf95-0ad7581d427a\",\n    \"resourceVersion\": \"71d2ced3-340c-4f8a-9923-36f69c2f9d16\",\n    \"uid\": \"cf2392d1-f4c2-49c5-b9cd-08475bfc8ecb\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:31:51.371848376Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:31:51.371812650Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.130420993Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.135727018Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.233597759Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.240528686Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.371782984Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:31:51.371784306Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"olOqRi90BaKk\",\n        \"username\": \"user-8934744b-1def-47e9-bf95-0ad7581d427a\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "8934744b-1def-47e9-bf95-0ad7581d427a" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::tests::coap::command] Sending payload
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::tests::coap::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTY2MTAsImlhdCI6MTYzNTg1NjMxMCwiYXV0aF90aW1lIjoxNjM1ODU2MzA4LCJqdGkiOiIyMTFjYmYxMy01NTJiLTQxYjQtOTMxZC1iZTdiMGJiZDg0NTAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjlmNGY3ZWZlLTY4NjctNDlhYS1iOGU1LTE2ZDhmOGQ3OGJlZCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI5ZjRmN2VmZS02ODY3LTQ5YWEtYjhlNS0xNmQ4ZjhkNzhiZWQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.sH_xmjzCa5gOaOQhFghGlhuSANlN8YsY60u4qH6PnM4HVUdmVr00lfmzy6O_hCNnQia2OtQR0mTxkVH_yETTtHlKSU2cUPmydpXBvO36asy-8zjnS48Ii8jmQFGRxnwEM6zYWCOmR3K9ewvIFv8oZbjqNZaLAMUnina_u-OtfjWxpYsc8hV5hlpSzimj9JpYQ0Pko-xuXRuvVkA7o9W8tfzF3GkuehwigotlXo3rYbqWUD8S_zsgawyN3g9-N78CP7mdSF1ap7YczTfby2H6f1icV00arIrC_8NoOiveq3p3H00jUMx9XmPxvQaF8jlGRYvl871ov-f0vLzMDtGJ2A\n", stderr: "" })
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:31:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:36:53Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:36:53Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:36:53Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:36:54Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:36:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "8934744b-1def-47e9-bf95-0ad7581d427a" "device1"
[2021-11-02T12:36:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:36:54Z INFO  drogue_cloud_tests::resources::apps] Destroy application '8934744b-1def-47e9-bf95-0ad7581d427a'
[2021-11-02T12:36:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "8934744b-1def-47e9-bf95-0ad7581d427a"
[2021-11-02T12:36:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 8934744b-1def-47e9-bf95-0ad7581d427a deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::command::test_command::version_3

**Duration**: 311.533362274s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:36:56Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:36:59Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:37:01Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:37:02Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTg0MjIsImlhdCI6MTYzNTg1NjYyMiwianRpIjoiZDJmYWYyMzctNzc1MS00ZTNjLWJjNWUtMDE1YWQ5MjYxMjEyIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNmUzM2EwNWEtNWVmOC00MzhlLWJiOWEtMzhhNWFmZGMxMTcwIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjZlMzNhMDVhLTVlZjgtNDM4ZS1iYjlhLTM4YTVhZmRjMTE3MCJ9.3m1s0Mwdjdj671nuXh5Qh755q41d2L0J0PyQ5VxCpzs
[2021-11-02T12:37:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:37:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:37:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTg0MjIsImlhdCI6MTYzNTg1NjYyMiwianRpIjoiZDJmYWYyMzctNzc1MS00ZTNjLWJjNWUtMDE1YWQ5MjYxMjEyIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNmUzM2EwNWEtNWVmOC00MzhlLWJiOWEtMzhhNWFmZGMxMTcwIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjZlMzNhMDVhLTVlZjgtNDM4ZS1iYjlhLTM4YTVhZmRjMTE3MCJ9.3m1s0Mwdjdj671nuXh5Qh755q41d2L0J0PyQ5VxCpzs" "--context" "system-tests"
[2021-11-02T12:37:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:37:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:37:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:37:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTY5MjIsImlhdCI6MTYzNTg1NjYyMiwiYXV0aF90aW1lIjoxNjM1ODU2NjIwLCJqdGkiOiJjMmY4OWY1MS0zYzQ1LTQxM2EtYTM2NC04MDg0ZWIzNGZjYTgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjZlMzNhMDVhLTVlZjgtNDM4ZS1iYjlhLTM4YTVhZmRjMTE3MCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI2ZTMzYTA1YS01ZWY4LTQzOGUtYmI5YS0zOGE1YWZkYzExNzAiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.r7k5YQgeL8RMST6ZN0pjDcezEptyKIRfI6-Kv_sx7LSmCqp6JA9wY1lt1X_7WXjVtsSlr86lcNLx0AD2beM2PDzEhIceXBO7rkcEX7vSxfl3b-GM6fRtJsp1anxk9Dwed8nwaNwyUojIngmNtwcIZTp6UwGGKn9zqfBN-hQDJJjeM1zTgCNiQjLOfGvHTU0KfWJM6_kgDmcY96u9f2YvYMQH5vO6nOJB8SENiQ-DVHFdus-3_PKKPpIIuRzj6ccPJtXFpdjC6GfFOS0BqQao0cHZIWrMGlgHoRnWeQHeJqRHn5TQ1hljM8xGeCBil7Z9CFWq9YAjcLbh_2v6IFidUQ\n", stderr: "" })
[2021-11-02T12:37:03Z INFO  drogue_cloud_tests::resources::apps] Create application: 13213cde-b1a0-4cc8-a9da-9a6426543875
[2021-11-02T12:37:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "13213cde-b1a0-4cc8-a9da-9a6426543875"
[2021-11-02T12:37:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 13213cde-b1a0-4cc8-a9da-9a6426543875 created.\n", stderr: "" })
[2021-11-02T12:37:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "13213cde-b1a0-4cc8-a9da-9a6426543875"
[2021-11-02T12:37:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:37:03.281050Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"13213cde-b1a0-4cc8-a9da-9a6426543875\",\n    \"resourceVersion\": \"a5e3c276-a140-48e7-a78b-511109ed2d3a\",\n    \"uid\": \"bd9e6c5b-8de1-4fc7-9643-aef69a263140\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:37:03.306339471Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:37:03.306321497Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.306286191Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.306287513Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.306288025Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.306288896Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.306289597Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.306291361Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "13213cde-b1a0-4cc8-a9da-9a6426543875"
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:37:03.281050Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"13213cde-b1a0-4cc8-a9da-9a6426543875\",\n    \"resourceVersion\": \"908c06d1-15ac-4fce-8f94-63765e8e58db\",\n    \"uid\": \"bd9e6c5b-8de1-4fc7-9643-aef69a263140\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:37:03.624136228Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:37:03.624101312Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.334053262Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.343687101Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.465498559Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.479369811Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.624075534Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.624076757Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"jEBrpX3lOfH7\",\n        \"username\": \"user-13213cde-b1a0-4cc8-a9da-9a6426543875\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "13213cde-b1a0-4cc8-a9da-9a6426543875"
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:37:03.281050Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"13213cde-b1a0-4cc8-a9da-9a6426543875\",\n    \"resourceVersion\": \"908c06d1-15ac-4fce-8f94-63765e8e58db\",\n    \"uid\": \"bd9e6c5b-8de1-4fc7-9643-aef69a263140\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:37:03.624136228Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:37:03.624101312Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.334053262Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.343687101Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.465498559Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.479369811Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.624075534Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:37:03.624076757Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"jEBrpX3lOfH7\",\n        \"username\": \"user-13213cde-b1a0-4cc8-a9da-9a6426543875\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "13213cde-b1a0-4cc8-a9da-9a6426543875" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::tests::coap::command] Sending payload
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::tests::coap::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTY5MjIsImlhdCI6MTYzNTg1NjYyMiwiYXV0aF90aW1lIjoxNjM1ODU2NjIwLCJqdGkiOiJjMmY4OWY1MS0zYzQ1LTQxM2EtYTM2NC04MDg0ZWIzNGZjYTgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjZlMzNhMDVhLTVlZjgtNDM4ZS1iYjlhLTM4YTVhZmRjMTE3MCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI2ZTMzYTA1YS01ZWY4LTQzOGUtYmI5YS0zOGE1YWZkYzExNzAiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.r7k5YQgeL8RMST6ZN0pjDcezEptyKIRfI6-Kv_sx7LSmCqp6JA9wY1lt1X_7WXjVtsSlr86lcNLx0AD2beM2PDzEhIceXBO7rkcEX7vSxfl3b-GM6fRtJsp1anxk9Dwed8nwaNwyUojIngmNtwcIZTp6UwGGKn9zqfBN-hQDJJjeM1zTgCNiQjLOfGvHTU0KfWJM6_kgDmcY96u9f2YvYMQH5vO6nOJB8SENiQ-DVHFdus-3_PKKPpIIuRzj6ccPJtXFpdjC6GfFOS0BqQao0cHZIWrMGlgHoRnWeQHeJqRHn5TQ1hljM8xGeCBil7Z9CFWq9YAjcLbh_2v6IFidUQ\n", stderr: "" })
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:37:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:42:05Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:42:05Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:42:05Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:42:06Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:42:06Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "13213cde-b1a0-4cc8-a9da-9a6426543875" "device1"
[2021-11-02T12:42:06Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:42:06Z INFO  drogue_cloud_tests::resources::apps] Destroy application '13213cde-b1a0-4cc8-a9da-9a6426543875'
[2021-11-02T12:42:06Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "13213cde-b1a0-4cc8-a9da-9a6426543875"
[2021-11-02T12:42:06Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 13213cde-b1a0-4cc8-a9da-9a6426543875 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_pass::version_1

**Duration**: 312.670470477s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:42:06Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T12:42:08Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:42:11Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:42:13Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTg3MzQsImlhdCI6MTYzNTg1NjkzNCwianRpIjoiM2JhMDFhMWItNTBjZS00ZGU0LWE4NzYtNzZkZDQwYjhmNzZhIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNTJmZWI2NmMtNWQyMC00MzA4LWI4ZDYtZDJlOGUwNmM1YTIyIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjUyZmViNjZjLTVkMjAtNDMwOC1iOGQ2LWQyZThlMDZjNWEyMiJ9.pdG5BPMD0gZIUfwQNjTUhpl9OXn53tqAwzwL88w9RO0
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTg3MzQsImlhdCI6MTYzNTg1NjkzNCwianRpIjoiM2JhMDFhMWItNTBjZS00ZGU0LWE4NzYtNzZkZDQwYjhmNzZhIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNTJmZWI2NmMtNWQyMC00MzA4LWI4ZDYtZDJlOGUwNmM1YTIyIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjUyZmViNjZjLTVkMjAtNDMwOC1iOGQ2LWQyZThlMDZjNWEyMiJ9.pdG5BPMD0gZIUfwQNjTUhpl9OXn53tqAwzwL88w9RO0" "--context" "system-tests"
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTcyMzQsImlhdCI6MTYzNTg1NjkzNCwiYXV0aF90aW1lIjoxNjM1ODU2OTMxLCJqdGkiOiIyMGFlZGQzMi1mYWI2LTQ3ZmUtOTk0Ny1kZDM0NWJkOWY3MTEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjUyZmViNjZjLTVkMjAtNDMwOC1iOGQ2LWQyZThlMDZjNWEyMiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI1MmZlYjY2Yy01ZDIwLTQzMDgtYjhkNi1kMmU4ZTA2YzVhMjIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.NQTPpruTh4U67crnlpc-M0M68KFKgB6qbQ9dbdvLwBwXAMHLiIVLGRHxqD30RwJH54ah6VDz1Fj83mD-wIXn5KxgE85HjviQO3eYOHOlxkhxuOXi1Xza2udnhx5Qe1HLiTu--0MRNgyT-0Cc-OnGTvN1voTg7tAoHMkoGIRaSf7RciqSxRnmINnG6BHPbAC0FCoOm_D8LmiE6Wt4Ms7YPpUQkX4_Fqpxhwm3rmcH-4Fj0g_eS4aXuQkFrUC81ovwm0asZXul0_Qukwt4lUIHT_TfSFS1rEknnnCkPMOCwuyUsH6ykd4o8LYXlDQZArDJXCLYThL63xibqkSz9JPyWg\n", stderr: "" })
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::resources::apps] Create application: 1f31b904-e29e-4270-b42c-20af0ba9c3c0
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "1f31b904-e29e-4270-b42c-20af0ba9c3c0"
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 1f31b904-e29e-4270-b42c-20af0ba9c3c0 created.\n", stderr: "" })
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1f31b904-e29e-4270-b42c-20af0ba9c3c0"
[2021-11-02T12:42:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:42:14.832488Z\",\n    \"generation\": 1,\n    \"name\": \"1f31b904-e29e-4270-b42c-20af0ba9c3c0\",\n    \"resourceVersion\": \"0293ddd2-81e3-46e9-b0e0-fce58ae08f2e\",\n    \"uid\": \"60a77592-bc78-4617-bb9d-87704458f6d5\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:42:14.865180594Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}\n", stderr: "" })
[2021-11-02T12:42:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1f31b904-e29e-4270-b42c-20af0ba9c3c0"
[2021-11-02T12:42:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:42:14.832488Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"1f31b904-e29e-4270-b42c-20af0ba9c3c0\",\n    \"resourceVersion\": \"9808b2ff-3f76-4ede-8e60-c80b5879559c\",\n    \"uid\": \"60a77592-bc78-4617-bb9d-87704458f6d5\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:42:15.194885286Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:42:15.194848036Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:42:14.911950334Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:42:14.923565882Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:42:15.050139236Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:42:15.061272151Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:42:15.194822558Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:42:15.194824031Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"QNtzgtfYEPWA\",\n        \"username\": \"user-1f31b904-e29e-4270-b42c-20af0ba9c3c0\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:42:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1f31b904-e29e-4270-b42c-20af0ba9c3c0"
[2021-11-02T12:42:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:42:14.832488Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"1f31b904-e29e-4270-b42c-20af0ba9c3c0\",\n    \"resourceVersion\": \"9808b2ff-3f76-4ede-8e60-c80b5879559c\",\n    \"uid\": \"60a77592-bc78-4617-bb9d-87704458f6d5\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:42:15.194885286Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:42:15.194848036Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:42:14.911950334Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:42:14.923565882Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:42:15.050139236Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:42:15.061272151Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:42:15.194822558Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:42:15.194824031Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"QNtzgtfYEPWA\",\n        \"username\": \"user-1f31b904-e29e-4270-b42c-20af0ba9c3c0\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:42:15Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:42:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "1f31b904-e29e-4270-b42c-20af0ba9c3c0" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T12:42:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:42:15Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:42:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:42:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTcyMzQsImlhdCI6MTYzNTg1NjkzNCwiYXV0aF90aW1lIjoxNjM1ODU2OTMxLCJqdGkiOiIyMGFlZGQzMi1mYWI2LTQ3ZmUtOTk0Ny1kZDM0NWJkOWY3MTEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjUyZmViNjZjLTVkMjAtNDMwOC1iOGQ2LWQyZThlMDZjNWEyMiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI1MmZlYjY2Yy01ZDIwLTQzMDgtYjhkNi1kMmU4ZTA2YzVhMjIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.NQTPpruTh4U67crnlpc-M0M68KFKgB6qbQ9dbdvLwBwXAMHLiIVLGRHxqD30RwJH54ah6VDz1Fj83mD-wIXn5KxgE85HjviQO3eYOHOlxkhxuOXi1Xza2udnhx5Qe1HLiTu--0MRNgyT-0Cc-OnGTvN1voTg7tAoHMkoGIRaSf7RciqSxRnmINnG6BHPbAC0FCoOm_D8LmiE6Wt4Ms7YPpUQkX4_Fqpxhwm3rmcH-4Fj0g_eS4aXuQkFrUC81ovwm0asZXul0_Qukwt4lUIHT_TfSFS1rEknnnCkPMOCwuyUsH6ykd4o8LYXlDQZArDJXCLYThL63xibqkSz9JPyWg\n", stderr: "" })
[2021-11-02T12:42:16Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T12:42:16Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:42:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:42:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:47:17Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:47:17Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:47:17Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:47:18Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:47:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "1f31b904-e29e-4270-b42c-20af0ba9c3c0" "device1"
[2021-11-02T12:47:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:47:18Z INFO  drogue_cloud_tests::resources::apps] Destroy application '1f31b904-e29e-4270-b42c-20af0ba9c3c0'
[2021-11-02T12:47:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "1f31b904-e29e-4270-b42c-20af0ba9c3c0"
[2021-11-02T12:47:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 1f31b904-e29e-4270-b42c-20af0ba9c3c0 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_pass::version_2

**Duration**: 311.345564017s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:47:18Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T12:47:20Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:47:23Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:47:25Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:47:26Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTkwNDYsImlhdCI6MTYzNTg1NzI0NiwianRpIjoiMmQ5MGQwOTItNjFlYy00ZjE1LTg1YWQtZjNhZjAxOTM2YjY3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYmQ0ZDU3NjQtYTM5YS00NjYzLWE2YWEtZTU2NDYxYzkxYmZiIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImJkNGQ1NzY0LWEzOWEtNDY2My1hNmFhLWU1NjQ2MWM5MWJmYiJ9.uPuZBaZ6NKQKYIxiAr6ROBKxuJdRWvaQANaJZ8NJ9Sk
[2021-11-02T12:47:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:47:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:47:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTkwNDYsImlhdCI6MTYzNTg1NzI0NiwianRpIjoiMmQ5MGQwOTItNjFlYy00ZjE1LTg1YWQtZjNhZjAxOTM2YjY3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYmQ0ZDU3NjQtYTM5YS00NjYzLWE2YWEtZTU2NDYxYzkxYmZiIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImJkNGQ1NzY0LWEzOWEtNDY2My1hNmFhLWU1NjQ2MWM5MWJmYiJ9.uPuZBaZ6NKQKYIxiAr6ROBKxuJdRWvaQANaJZ8NJ9Sk" "--context" "system-tests"
[2021-11-02T12:47:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:47:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:47:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:47:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTc1NDYsImlhdCI6MTYzNTg1NzI0NiwiYXV0aF90aW1lIjoxNjM1ODU3MjQ0LCJqdGkiOiJjMWVkYWQ1Yy1lZjJhLTQ4NDAtOGNjZC0zMDkyNzFmOGJjYWUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImJkNGQ1NzY0LWEzOWEtNDY2My1hNmFhLWU1NjQ2MWM5MWJmYiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJiZDRkNTc2NC1hMzlhLTQ2NjMtYTZhYS1lNTY0NjFjOTFiZmIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.SoZEh5F3WaJ5nrQHElbGIRnSlgv7WQ-hqRlbCBQIqUf0M4s3OMu10AgLDNsf9oGCnjoPD63rutyXdp4N-arjOpi0S8cKUTPtJmw_jQ6ulWR6X4Rv_bXtr7_dpYPAvhbpBy3jHCJHWwaTARUreXfrQNA5TG5Xft6BAQITGgUwaszwNw69UTr5y-F1lFX9yY16GNqc9zqvPWiPeM_Y5iphfBIZxKvcHdDlS_K7v4WEPepCBalsWDOpWe1idZc_1be06CjccACHLGZCf50dsIOtSDZ5zEPM7i7kS1raXUzcXh-MWkQ-PDGE6jtoZYpPhqIhrNYnciXgRF_3_-DkzV1HqQ\n", stderr: "" })
[2021-11-02T12:47:27Z INFO  drogue_cloud_tests::resources::apps] Create application: 65249c8c-c38c-4a13-9ed7-0ccee69e8557
[2021-11-02T12:47:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "65249c8c-c38c-4a13-9ed7-0ccee69e8557"
[2021-11-02T12:47:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 65249c8c-c38c-4a13-9ed7-0ccee69e8557 created.\n", stderr: "" })
[2021-11-02T12:47:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "65249c8c-c38c-4a13-9ed7-0ccee69e8557"
[2021-11-02T12:47:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:47:27.228972Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"65249c8c-c38c-4a13-9ed7-0ccee69e8557\",\n    \"resourceVersion\": \"52d71913-aae5-4b13-afae-c04dd4df6cd9\",\n    \"uid\": \"556269db-28d6-44f1-95f4-b9d2fe6331a5\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:47:27.259332726Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:47:27.259318881Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.259294024Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.259294765Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.259295216Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.259295687Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.259296258Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.259297521Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "65249c8c-c38c-4a13-9ed7-0ccee69e8557"
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:47:27.228972Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"65249c8c-c38c-4a13-9ed7-0ccee69e8557\",\n    \"resourceVersion\": \"710b5d49-71bf-472c-ab88-11be57cf62a8\",\n    \"uid\": \"556269db-28d6-44f1-95f4-b9d2fe6331a5\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:47:27.518675816Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:47:27.518642904Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.291146664Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.298648821Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.393912821Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.404576638Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.518616745Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.518618027Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"R9O0J0UjZWAt\",\n        \"username\": \"user-65249c8c-c38c-4a13-9ed7-0ccee69e8557\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "65249c8c-c38c-4a13-9ed7-0ccee69e8557"
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:47:27.228972Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"65249c8c-c38c-4a13-9ed7-0ccee69e8557\",\n    \"resourceVersion\": \"710b5d49-71bf-472c-ab88-11be57cf62a8\",\n    \"uid\": \"556269db-28d6-44f1-95f4-b9d2fe6331a5\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:47:27.518675816Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:47:27.518642904Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.291146664Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.298648821Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.393912821Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.404576638Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.518616745Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:47:27.518618027Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"R9O0J0UjZWAt\",\n        \"username\": \"user-65249c8c-c38c-4a13-9ed7-0ccee69e8557\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "65249c8c-c38c-4a13-9ed7-0ccee69e8557" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTc1NDYsImlhdCI6MTYzNTg1NzI0NiwiYXV0aF90aW1lIjoxNjM1ODU3MjQ0LCJqdGkiOiJjMWVkYWQ1Yy1lZjJhLTQ4NDAtOGNjZC0zMDkyNzFmOGJjYWUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImJkNGQ1NzY0LWEzOWEtNDY2My1hNmFhLWU1NjQ2MWM5MWJmYiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJiZDRkNTc2NC1hMzlhLTQ2NjMtYTZhYS1lNTY0NjFjOTFiZmIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.SoZEh5F3WaJ5nrQHElbGIRnSlgv7WQ-hqRlbCBQIqUf0M4s3OMu10AgLDNsf9oGCnjoPD63rutyXdp4N-arjOpi0S8cKUTPtJmw_jQ6ulWR6X4Rv_bXtr7_dpYPAvhbpBy3jHCJHWwaTARUreXfrQNA5TG5Xft6BAQITGgUwaszwNw69UTr5y-F1lFX9yY16GNqc9zqvPWiPeM_Y5iphfBIZxKvcHdDlS_K7v4WEPepCBalsWDOpWe1idZc_1be06CjccACHLGZCf50dsIOtSDZ5zEPM7i7kS1raXUzcXh-MWkQ-PDGE6jtoZYpPhqIhrNYnciXgRF_3_-DkzV1HqQ\n", stderr: "" })
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:47:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:52:29Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:52:29Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:52:29Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:52:30Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:52:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "65249c8c-c38c-4a13-9ed7-0ccee69e8557" "device1"
[2021-11-02T12:52:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:52:30Z INFO  drogue_cloud_tests::resources::apps] Destroy application '65249c8c-c38c-4a13-9ed7-0ccee69e8557'
[2021-11-02T12:52:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "65249c8c-c38c-4a13-9ed7-0ccee69e8557"
[2021-11-02T12:52:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 65249c8c-c38c-4a13-9ed7-0ccee69e8557 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_pass::version_3

**Duration**: 311.200171383s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:52:30Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T12:52:32Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:52:35Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:52:36Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:52:37Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTkzNTcsImlhdCI6MTYzNTg1NzU1NywianRpIjoiM2VkYmYwMDYtZTdkNi00OGViLThhMTYtNDlmYThjODFmYzJjIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMTdlYjE0MTQtMTlhOC00MmE2LWIzMTYtZDJhMGNlYWVkZjY0Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjE3ZWIxNDE0LTE5YTgtNDJhNi1iMzE2LWQyYTBjZWFlZGY2NCJ9.UhjCjz3_sXgQ2QRlG5FLh5Mhcs59UeYE5TiiGJt5h2A
[2021-11-02T12:52:37Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:52:37Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:52:37Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTkzNTcsImlhdCI6MTYzNTg1NzU1NywianRpIjoiM2VkYmYwMDYtZTdkNi00OGViLThhMTYtNDlmYThjODFmYzJjIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMTdlYjE0MTQtMTlhOC00MmE2LWIzMTYtZDJhMGNlYWVkZjY0Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjE3ZWIxNDE0LTE5YTgtNDJhNi1iMzE2LWQyYTBjZWFlZGY2NCJ9.UhjCjz3_sXgQ2QRlG5FLh5Mhcs59UeYE5TiiGJt5h2A" "--context" "system-tests"
[2021-11-02T12:52:37Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:52:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:52:38Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:52:38Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTc4NTcsImlhdCI6MTYzNTg1NzU1NywiYXV0aF90aW1lIjoxNjM1ODU3NTU1LCJqdGkiOiI5OGMzNTNhMC1kYzJiLTQ4ZjctYjlhZS1iNDI3NGJmMDFkNWYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjE3ZWIxNDE0LTE5YTgtNDJhNi1iMzE2LWQyYTBjZWFlZGY2NCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIxN2ViMTQxNC0xOWE4LTQyYTYtYjMxNi1kMmEwY2VhZWRmNjQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.qVe4zGbGj-dxuJU4BvVlV9wPDwfpyUggXwe3aCEWSxg1P8djeNaHWLPGnX30wO_J9ICSPMhWt22FOYx5cQa5zvKlSOm5SsTBMZoYReLWNM63WH0vpqwdxPmf4JKfE_BD3FYe7VwGTI3Uhou0Pv4sujUVkf47shdY1znA7KXYymOsR3gpNJYvLKu3dupDuAcKnzXJ-aYVIPCYVshhMg6p0cSEvheIelXpBfv1JvI0MIzKI7_1C-W1WxJRIDvDkTtlqHG2ttTsQSlUHdVedL7HWlfnYrXmjDo1BkZF3qY4uh-wgde1Lq75g9VU7l2brgmVg9KY0LjyppCjd4CACT5pOA\n", stderr: "" })
[2021-11-02T12:52:38Z INFO  drogue_cloud_tests::resources::apps] Create application: 6bb02664-99c6-4e99-8b6a-060848498caf
[2021-11-02T12:52:38Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "6bb02664-99c6-4e99-8b6a-060848498caf"
[2021-11-02T12:52:38Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 6bb02664-99c6-4e99-8b6a-060848498caf created.\n", stderr: "" })
[2021-11-02T12:52:38Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "6bb02664-99c6-4e99-8b6a-060848498caf"
[2021-11-02T12:52:38Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:52:38.505667Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"6bb02664-99c6-4e99-8b6a-060848498caf\",\n    \"resourceVersion\": \"d93bf4e6-6690-4de4-b4f7-03733f8de9df\",\n    \"uid\": \"81d7659a-cdbd-4157-9028-628fae659a86\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:52:38.519256905Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:52:38.519280910Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.519154133Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.519156097Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.519156708Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.519157790Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.519158401Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.519161587Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "6bb02664-99c6-4e99-8b6a-060848498caf"
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:52:38.505667Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"6bb02664-99c6-4e99-8b6a-060848498caf\",\n    \"resourceVersion\": \"776fc07f-d915-4da9-9165-1849d30ebf66\",\n    \"uid\": \"81d7659a-cdbd-4157-9028-628fae659a86\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:52:38.810585503Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:52:38.810628684Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.550051774Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.560092355Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.677498023Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.689275214Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.810558332Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.810559624Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"lC7uMXXFW7pm\",\n        \"username\": \"user-6bb02664-99c6-4e99-8b6a-060848498caf\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "6bb02664-99c6-4e99-8b6a-060848498caf"
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:52:38.505667Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"6bb02664-99c6-4e99-8b6a-060848498caf\",\n    \"resourceVersion\": \"776fc07f-d915-4da9-9165-1849d30ebf66\",\n    \"uid\": \"81d7659a-cdbd-4157-9028-628fae659a86\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:52:38.810585503Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:52:38.810628684Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.550051774Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.560092355Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.677498023Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.689275214Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.810558332Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:52:38.810559624Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"lC7uMXXFW7pm\",\n        \"username\": \"user-6bb02664-99c6-4e99-8b6a-060848498caf\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "6bb02664-99c6-4e99-8b6a-060848498caf" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTc4NTcsImlhdCI6MTYzNTg1NzU1NywiYXV0aF90aW1lIjoxNjM1ODU3NTU1LCJqdGkiOiI5OGMzNTNhMC1kYzJiLTQ4ZjctYjlhZS1iNDI3NGJmMDFkNWYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjE3ZWIxNDE0LTE5YTgtNDJhNi1iMzE2LWQyYTBjZWFlZGY2NCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIxN2ViMTQxNC0xOWE4LTQyYTYtYjMxNi1kMmEwY2VhZWRmNjQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.qVe4zGbGj-dxuJU4BvVlV9wPDwfpyUggXwe3aCEWSxg1P8djeNaHWLPGnX30wO_J9ICSPMhWt22FOYx5cQa5zvKlSOm5SsTBMZoYReLWNM63WH0vpqwdxPmf4JKfE_BD3FYe7VwGTI3Uhou0Pv4sujUVkf47shdY1znA7KXYymOsR3gpNJYvLKu3dupDuAcKnzXJ-aYVIPCYVshhMg6p0cSEvheIelXpBfv1JvI0MIzKI7_1C-W1WxJRIDvDkTtlqHG2ttTsQSlUHdVedL7HWlfnYrXmjDo1BkZF3qY4uh-wgde1Lq75g9VU7l2brgmVg9KY0LjyppCjd4CACT5pOA\n", stderr: "" })
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:52:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:57:40Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:57:40Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:57:40Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:57:41Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:57:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "6bb02664-99c6-4e99-8b6a-060848498caf" "device1"
[2021-11-02T12:57:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:57:41Z INFO  drogue_cloud_tests::resources::apps] Destroy application '6bb02664-99c6-4e99-8b6a-060848498caf'
[2021-11-02T12:57:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "6bb02664-99c6-4e99-8b6a-060848498caf"
[2021-11-02T12:57:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 6bb02664-99c6-4e99-8b6a-060848498caf deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user::version_1

**Duration**: 311.269786185s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:57:41Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T12:57:43Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:57:46Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:57:47Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTk2NjgsImlhdCI6MTYzNTg1Nzg2OCwianRpIjoiMTk0MTg2NWYtZWNhYi00ZDcxLWEyZmUtOTdmY2E2ODc4NWI1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDY2NTU4NjItNDM1ZC00OGQ0LWFiOWQtZTEyODc2MzI4Njc4Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImQ2NjU1ODYyLTQzNWQtNDhkNC1hYjlkLWUxMjg3NjMyODY3OCJ9.4VkGXUpf4Of5LWEQWicVZkf19VYmcql4fOmk7sv1Zkw
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTk2NjgsImlhdCI6MTYzNTg1Nzg2OCwianRpIjoiMTk0MTg2NWYtZWNhYi00ZDcxLWEyZmUtOTdmY2E2ODc4NWI1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDY2NTU4NjItNDM1ZC00OGQ0LWFiOWQtZTEyODc2MzI4Njc4Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImQ2NjU1ODYyLTQzNWQtNDhkNC1hYjlkLWUxMjg3NjMyODY3OCJ9.4VkGXUpf4Of5LWEQWicVZkf19VYmcql4fOmk7sv1Zkw" "--context" "system-tests"
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTgxNjksImlhdCI6MTYzNTg1Nzg2OSwiYXV0aF90aW1lIjoxNjM1ODU3ODY2LCJqdGkiOiI1YTY3ZGMzMi04ZTY5LTRkNzktOTg5OS02ZTNkZDJjZWRhMjYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImQ2NjU1ODYyLTQzNWQtNDhkNC1hYjlkLWUxMjg3NjMyODY3OCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJkNjY1NTg2Mi00MzVkLTQ4ZDQtYWI5ZC1lMTI4NzYzMjg2NzgiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.1-NdTfbWZ_8W5v7rhJsdHTXQDtRbwEwWIwC9PxETf8XsHfXycor0wE6Hy0Chn6uIo34kXay1TUhqmMsO23wjSV726qxl02WvQLAhYmMoe_yOnHr5SyvOKkFR3ZQ3cC5fNHN4jR0afTSICVlVTBWuwBzd_-MOd-fNA8rOYLUG_rsKXD2RRK6yrOaqfURbRlrQxTeWUt9ZLVc988o4Z8ltfByPJlbx6ujexy6TiH-mkc-MEsDYvTUvWS1qVl2ijVz0sGJAQTC97euRvDafF_x43_Yop0TdQ6LgEZtoiKcP_7E3xjrsjjWSAvdhhnySfPcRotWSzQanzyaIoXrCm3reXQ\n", stderr: "" })
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::resources::apps] Create application: a37ba092-d62a-4d76-98eb-6b7662cbb794
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "a37ba092-d62a-4d76-98eb-6b7662cbb794"
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App a37ba092-d62a-4d76-98eb-6b7662cbb794 created.\n", stderr: "" })
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a37ba092-d62a-4d76-98eb-6b7662cbb794"
[2021-11-02T12:57:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:57:49.794292Z\",\n    \"generation\": 1,\n    \"name\": \"a37ba092-d62a-4d76-98eb-6b7662cbb794\",\n    \"resourceVersion\": \"153e1759-9f33-407f-81e2-166fa3344e82\",\n    \"uid\": \"344e55c4-2c9f-4a0a-8be5-4694574cf0b5\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:57:49.809265032Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}\n", stderr: "" })
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a37ba092-d62a-4d76-98eb-6b7662cbb794"
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:57:49.794292Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"a37ba092-d62a-4d76-98eb-6b7662cbb794\",\n    \"resourceVersion\": \"f48b43cf-7959-4d48-9d4c-eb050e4b9aca\",\n    \"uid\": \"344e55c4-2c9f-4a0a-8be5-4694574cf0b5\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:57:50.169292091Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:57:50.169244092Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:57:49.866293537Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:57:49.875505931Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:57:49.996401407Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:57:50.009521230Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:57:50.169216642Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:57:50.169218084Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"GFrxiGWJA1eB\",\n        \"username\": \"user-a37ba092-d62a-4d76-98eb-6b7662cbb794\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a37ba092-d62a-4d76-98eb-6b7662cbb794"
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:57:49.794292Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"a37ba092-d62a-4d76-98eb-6b7662cbb794\",\n    \"resourceVersion\": \"f48b43cf-7959-4d48-9d4c-eb050e4b9aca\",\n    \"uid\": \"344e55c4-2c9f-4a0a-8be5-4694574cf0b5\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:57:50.169292091Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:57:50.169244092Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:57:49.866293537Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:57:49.875505931Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:57:49.996401407Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:57:50.009521230Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:57:50.169216642Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:57:50.169218084Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"GFrxiGWJA1eB\",\n        \"username\": \"user-a37ba092-d62a-4d76-98eb-6b7662cbb794\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "a37ba092-d62a-4d76-98eb-6b7662cbb794" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTgxNjksImlhdCI6MTYzNTg1Nzg2OSwiYXV0aF90aW1lIjoxNjM1ODU3ODY2LCJqdGkiOiI1YTY3ZGMzMi04ZTY5LTRkNzktOTg5OS02ZTNkZDJjZWRhMjYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImQ2NjU1ODYyLTQzNWQtNDhkNC1hYjlkLWUxMjg3NjMyODY3OCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJkNjY1NTg2Mi00MzVkLTQ4ZDQtYWI5ZC1lMTI4NzYzMjg2NzgiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.1-NdTfbWZ_8W5v7rhJsdHTXQDtRbwEwWIwC9PxETf8XsHfXycor0wE6Hy0Chn6uIo34kXay1TUhqmMsO23wjSV726qxl02WvQLAhYmMoe_yOnHr5SyvOKkFR3ZQ3cC5fNHN4jR0afTSICVlVTBWuwBzd_-MOd-fNA8rOYLUG_rsKXD2RRK6yrOaqfURbRlrQxTeWUt9ZLVc988o4Z8ltfByPJlbx6ujexy6TiH-mkc-MEsDYvTUvWS1qVl2ijVz0sGJAQTC97euRvDafF_x43_Yop0TdQ6LgEZtoiKcP_7E3xjrsjjWSAvdhhnySfPcRotWSzQanzyaIoXrCm3reXQ\n", stderr: "" })
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:57:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:02:51Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:02:51Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:02:51Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:02:52Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:02:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "a37ba092-d62a-4d76-98eb-6b7662cbb794" "device1"
[2021-11-02T13:02:52Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:02:52Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'a37ba092-d62a-4d76-98eb-6b7662cbb794'
[2021-11-02T13:02:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "a37ba092-d62a-4d76-98eb-6b7662cbb794"
[2021-11-02T13:02:52Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App a37ba092-d62a-4d76-98eb-6b7662cbb794 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user::version_2

**Duration**: 311.626824593s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:02:52Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T13:02:54Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:02:57Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:02:59Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:03:00Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTk5ODAsImlhdCI6MTYzNTg1ODE4MCwianRpIjoiMmM3YmIzNzItYmJkZC00NDc3LTk0OWMtMTQwMjI2MmYzOTFlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODA2NTllZmQtMGEzMC00YWE4LWEzZTQtODc1YzNhZTkzZDZlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjgwNjU5ZWZkLTBhMzAtNGFhOC1hM2U0LTg3NWMzYWU5M2Q2ZSJ9.gBgHNjngpMaPTXnjV3c2DbjBSXQm3v7s9oNY8QIP_YM
[2021-11-02T13:03:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:03:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:03:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NTk5ODAsImlhdCI6MTYzNTg1ODE4MCwianRpIjoiMmM3YmIzNzItYmJkZC00NDc3LTk0OWMtMTQwMjI2MmYzOTFlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODA2NTllZmQtMGEzMC00YWE4LWEzZTQtODc1YzNhZTkzZDZlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjgwNjU5ZWZkLTBhMzAtNGFhOC1hM2U0LTg3NWMzYWU5M2Q2ZSJ9.gBgHNjngpMaPTXnjV3c2DbjBSXQm3v7s9oNY8QIP_YM" "--context" "system-tests"
[2021-11-02T13:03:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:03:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:03:01Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:03:01Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTg0ODAsImlhdCI6MTYzNTg1ODE4MCwiYXV0aF90aW1lIjoxNjM1ODU4MTc4LCJqdGkiOiI5ZjU5ZTE1NS02NjUyLTRhZjMtYjcyYS03MDAyMmY1OTc1ZWQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjgwNjU5ZWZkLTBhMzAtNGFhOC1hM2U0LTg3NWMzYWU5M2Q2ZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4MDY1OWVmZC0wYTMwLTRhYTgtYTNlNC04NzVjM2FlOTNkNmUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.U-4tv5i48LlP1nHeQhrd62TBWebOQBu1TpmR8pLJTbREv_F0SXwYHkHJSqgGLOkbc25XIYqTquH5VYpLrIni2IAh3Vz1yX5vLu1LYhNN6Qagy6eWXVEVKQpVN5pjB4l5L20ypdDnug75pwXR1LCFAPUW3zw61lVL9Xvd6FzToq1_4ZQbyCcuRTaI73mzw2NVF2IH8HI20HdTsmrdl18hWr_pwOMP01dpUt9A29vwyBxx45Nwt_9qxCbT5NLQ38EoJFTbNnmKJzuL901MdiNUoqkBCdDqaSa-_j2Aw83o0p7i_bNFP_h90fAZk8EboUabmmaOUKixjGecpZMLxy4Lsg\n", stderr: "" })
[2021-11-02T13:03:01Z INFO  drogue_cloud_tests::resources::apps] Create application: e6c2aff6-0d99-4407-80ad-3d6505c7e24d
[2021-11-02T13:03:01Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "e6c2aff6-0d99-4407-80ad-3d6505c7e24d"
[2021-11-02T13:03:01Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App e6c2aff6-0d99-4407-80ad-3d6505c7e24d created.\n", stderr: "" })
[2021-11-02T13:03:01Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e6c2aff6-0d99-4407-80ad-3d6505c7e24d"
[2021-11-02T13:03:01Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:03:01.262365Z\",\n    \"generation\": 0,\n    \"name\": \"e6c2aff6-0d99-4407-80ad-3d6505c7e24d\",\n    \"resourceVersion\": \"5de4a83f-337e-41dd-b22f-b80adee6401c\",\n    \"uid\": \"3f959403-6c45-4446-84bb-5f0befe297e6\"\n  }\n}\n", stderr: "" })
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e6c2aff6-0d99-4407-80ad-3d6505c7e24d"
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:03:01.262365Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"e6c2aff6-0d99-4407-80ad-3d6505c7e24d\",\n    \"resourceVersion\": \"bdb34ff8-b53e-40c7-8241-6a73180d3633\",\n    \"uid\": \"3f959403-6c45-4446-84bb-5f0befe297e6\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:03:01.564035219Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:03:01.563988403Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:03:01.309339349Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:03:01.319763697Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:03:01.426841452Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:03:01.435615500Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:03:01.563956373Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:03:01.563958127Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"ykaSi74KHQj6\",\n        \"username\": \"user-e6c2aff6-0d99-4407-80ad-3d6505c7e24d\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e6c2aff6-0d99-4407-80ad-3d6505c7e24d"
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:03:01.262365Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"e6c2aff6-0d99-4407-80ad-3d6505c7e24d\",\n    \"resourceVersion\": \"bdb34ff8-b53e-40c7-8241-6a73180d3633\",\n    \"uid\": \"3f959403-6c45-4446-84bb-5f0befe297e6\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:03:01.564035219Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:03:01.563988403Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:03:01.309339349Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:03:01.319763697Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:03:01.426841452Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:03:01.435615500Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:03:01.563956373Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:03:01.563958127Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"ykaSi74KHQj6\",\n        \"username\": \"user-e6c2aff6-0d99-4407-80ad-3d6505c7e24d\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "e6c2aff6-0d99-4407-80ad-3d6505c7e24d" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTg0ODAsImlhdCI6MTYzNTg1ODE4MCwiYXV0aF90aW1lIjoxNjM1ODU4MTc4LCJqdGkiOiI5ZjU5ZTE1NS02NjUyLTRhZjMtYjcyYS03MDAyMmY1OTc1ZWQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjgwNjU5ZWZkLTBhMzAtNGFhOC1hM2U0LTg3NWMzYWU5M2Q2ZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4MDY1OWVmZC0wYTMwLTRhYTgtYTNlNC04NzVjM2FlOTNkNmUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.U-4tv5i48LlP1nHeQhrd62TBWebOQBu1TpmR8pLJTbREv_F0SXwYHkHJSqgGLOkbc25XIYqTquH5VYpLrIni2IAh3Vz1yX5vLu1LYhNN6Qagy6eWXVEVKQpVN5pjB4l5L20ypdDnug75pwXR1LCFAPUW3zw61lVL9Xvd6FzToq1_4ZQbyCcuRTaI73mzw2NVF2IH8HI20HdTsmrdl18hWr_pwOMP01dpUt9A29vwyBxx45Nwt_9qxCbT5NLQ38EoJFTbNnmKJzuL901MdiNUoqkBCdDqaSa-_j2Aw83o0p7i_bNFP_h90fAZk8EboUabmmaOUKixjGecpZMLxy4Lsg\n", stderr: "" })
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:03:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:08:04Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:08:04Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:08:04Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:08:04Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:08:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "e6c2aff6-0d99-4407-80ad-3d6505c7e24d" "device1"
[2021-11-02T13:08:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:08:04Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'e6c2aff6-0d99-4407-80ad-3d6505c7e24d'
[2021-11-02T13:08:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "e6c2aff6-0d99-4407-80ad-3d6505c7e24d"
[2021-11-02T13:08:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App e6c2aff6-0d99-4407-80ad-3d6505c7e24d deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user::version_3

**Duration**: 311.315728464s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:08:04Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T13:08:06Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:08:09Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:08:10Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:08:11Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NjAyOTEsImlhdCI6MTYzNTg1ODQ5MSwianRpIjoiYzNlM2UxZWQtM2JhMC00MGQyLTlkMjMtMzNmY2UzOWExNzY4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMWFkYzYzMzUtMWNiMS00YjQ5LWI0NDgtNjQ5OWRmMmFmNDdmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjFhZGM2MzM1LTFjYjEtNGI0OS1iNDQ4LTY0OTlkZjJhZjQ3ZiJ9.GjBO8tKZo_26M1MGS0Ym5j19LKk4NuwyHk6e1EshGsE
[2021-11-02T13:08:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:08:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:08:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NjAyOTEsImlhdCI6MTYzNTg1ODQ5MSwianRpIjoiYzNlM2UxZWQtM2JhMC00MGQyLTlkMjMtMzNmY2UzOWExNzY4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMWFkYzYzMzUtMWNiMS00YjQ5LWI0NDgtNjQ5OWRmMmFmNDdmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjFhZGM2MzM1LTFjYjEtNGI0OS1iNDQ4LTY0OTlkZjJhZjQ3ZiJ9.GjBO8tKZo_26M1MGS0Ym5j19LKk4NuwyHk6e1EshGsE" "--context" "system-tests"
[2021-11-02T13:08:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:08:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:08:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:08:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTg3OTEsImlhdCI6MTYzNTg1ODQ5MSwiYXV0aF90aW1lIjoxNjM1ODU4NDg5LCJqdGkiOiJmYmYxZTRkMS1jYTNkLTQzOGEtOWYwYi0yNDRlMmE0MzBhZGIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjFhZGM2MzM1LTFjYjEtNGI0OS1iNDQ4LTY0OTlkZjJhZjQ3ZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIxYWRjNjMzNS0xY2IxLTRiNDktYjQ0OC02NDk5ZGYyYWY0N2YiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.ptBk11fXuO-Wv-gjZ_n-pdriIwAy4bjXyTl_CckGozuMDFXpvORqFs2mZ7xSSGDxORex_i1UpYc2QTLIlafQobocDvzakgs2AzGj-GuHnVpX74GyWBJEkyHOFaza6l1uhGSWQ2u321aBoO7az6ZSyL-pJL8eYQ5k3f4WF_3tP_FrWCAYECQD01EIOLS2ns3OfQGHbEKX1LAZJufy72XG4jVPYTqmKboZGyafMP0MBdR8bj82_3v66tVse-EQ31aPAOu-Hk-mUu0SnleesKSx_U6m348Q2OL9WARVoANkxA9TxlwfvHcPGacEZgIZLxskiHpqJfkBkgH5mFCtb1cA4g\n", stderr: "" })
[2021-11-02T13:08:12Z INFO  drogue_cloud_tests::resources::apps] Create application: 89aa16b2-1796-4839-b364-d79393145ef1
[2021-11-02T13:08:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "89aa16b2-1796-4839-b364-d79393145ef1"
[2021-11-02T13:08:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 89aa16b2-1796-4839-b364-d79393145ef1 created.\n", stderr: "" })
[2021-11-02T13:08:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "89aa16b2-1796-4839-b364-d79393145ef1"
[2021-11-02T13:08:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:08:12.616572Z\",\n    \"generation\": 0,\n    \"name\": \"89aa16b2-1796-4839-b364-d79393145ef1\",\n    \"resourceVersion\": \"5f497bb7-9ec3-4fd2-bd49-ab4f6dbe8284\",\n    \"uid\": \"32e55a2c-06b0-439d-bd07-143eabc509fd\"\n  }\n}\n", stderr: "" })
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "89aa16b2-1796-4839-b364-d79393145ef1"
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:08:12.616572Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"89aa16b2-1796-4839-b364-d79393145ef1\",\n    \"resourceVersion\": \"99095e68-764a-4d55-9534-75af5880724d\",\n    \"uid\": \"32e55a2c-06b0-439d-bd07-143eabc509fd\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:08:12.913312600Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:08:12.913271955Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:08:12.722126515Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:08:12.728838817Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:08:12.813912005Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:08:12.823411183Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:08:12.913243210Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:08:12.913244503Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"dFG6bcUYWcse\",\n        \"username\": \"user-89aa16b2-1796-4839-b364-d79393145ef1\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "89aa16b2-1796-4839-b364-d79393145ef1"
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:08:12.616572Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"89aa16b2-1796-4839-b364-d79393145ef1\",\n    \"resourceVersion\": \"99095e68-764a-4d55-9534-75af5880724d\",\n    \"uid\": \"32e55a2c-06b0-439d-bd07-143eabc509fd\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:08:12.913312600Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:08:12.913271955Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:08:12.722126515Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:08:12.728838817Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:08:12.813912005Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:08:12.823411183Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:08:12.913243210Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:08:12.913244503Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"dFG6bcUYWcse\",\n        \"username\": \"user-89aa16b2-1796-4839-b364-d79393145ef1\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "89aa16b2-1796-4839-b364-d79393145ef1" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTg3OTEsImlhdCI6MTYzNTg1ODQ5MSwiYXV0aF90aW1lIjoxNjM1ODU4NDg5LCJqdGkiOiJmYmYxZTRkMS1jYTNkLTQzOGEtOWYwYi0yNDRlMmE0MzBhZGIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjFhZGM2MzM1LTFjYjEtNGI0OS1iNDQ4LTY0OTlkZjJhZjQ3ZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIxYWRjNjMzNS0xY2IxLTRiNDktYjQ0OC02NDk5ZGYyYWY0N2YiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.ptBk11fXuO-Wv-gjZ_n-pdriIwAy4bjXyTl_CckGozuMDFXpvORqFs2mZ7xSSGDxORex_i1UpYc2QTLIlafQobocDvzakgs2AzGj-GuHnVpX74GyWBJEkyHOFaza6l1uhGSWQ2u321aBoO7az6ZSyL-pJL8eYQ5k3f4WF_3tP_FrWCAYECQD01EIOLS2ns3OfQGHbEKX1LAZJufy72XG4jVPYTqmKboZGyafMP0MBdR8bj82_3v66tVse-EQ31aPAOu-Hk-mUu0SnleesKSx_U6m348Q2OL9WARVoANkxA9TxlwfvHcPGacEZgIZLxskiHpqJfkBkgH5mFCtb1cA4g\n", stderr: "" })
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:08:13Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:13:15Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:13:15Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:13:15Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:13:15Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:13:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "89aa16b2-1796-4839-b364-d79393145ef1" "device1"
[2021-11-02T13:13:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:13:15Z INFO  drogue_cloud_tests::resources::apps] Destroy application '89aa16b2-1796-4839-b364-d79393145ef1'
[2021-11-02T13:13:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "89aa16b2-1796-4839-b364-d79393145ef1"
[2021-11-02T13:13:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 89aa16b2-1796-4839-b364-d79393145ef1 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_alias::version_1

**Duration**: 311.759169319s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:13:15Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T13:13:17Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:13:20Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:13:22Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:13:23Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NjA2MDMsImlhdCI6MTYzNTg1ODgwMywianRpIjoiNmE4MWIwYjItY2FhNi00ZTM4LTliYmUtMjdhM2RhZTc2MjZiIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDkzOGQ5N2MtNDllZC00MGY3LWE3YjctZGNhNzg4ZTk4M2EyIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImQ5MzhkOTdjLTQ5ZWQtNDBmNy1hN2I3LWRjYTc4OGU5ODNhMiJ9.dI_5-6dIHG_GPLqqcMFq-s6rCV5a4aK7ceO1CzOyy7Y
[2021-11-02T13:13:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:13:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:13:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NjA2MDMsImlhdCI6MTYzNTg1ODgwMywianRpIjoiNmE4MWIwYjItY2FhNi00ZTM4LTliYmUtMjdhM2RhZTc2MjZiIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDkzOGQ5N2MtNDllZC00MGY3LWE3YjctZGNhNzg4ZTk4M2EyIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImQ5MzhkOTdjLTQ5ZWQtNDBmNy1hN2I3LWRjYTc4OGU5ODNhMiJ9.dI_5-6dIHG_GPLqqcMFq-s6rCV5a4aK7ceO1CzOyy7Y" "--context" "system-tests"
[2021-11-02T13:13:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:13:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:13:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:13:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTkxMDMsImlhdCI6MTYzNTg1ODgwMywiYXV0aF90aW1lIjoxNjM1ODU4ODAwLCJqdGkiOiI5YTUyZWJmMC1iNDk0LTRlMGItOWU4My00NmNlYzRjNjBjN2EiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImQ5MzhkOTdjLTQ5ZWQtNDBmNy1hN2I3LWRjYTc4OGU5ODNhMiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJkOTM4ZDk3Yy00OWVkLTQwZjctYTdiNy1kY2E3ODhlOTgzYTIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.l3SBx0ovkME9wBx0nbuvXMAEbyTYqGqqa98QRUvf40XQayKzdQ_R5LzKCy76x8T-o7dtjKrdZD-km5W-O5x6zAMmNeTkhipYkQ7BVvlHCA6S8xaJ8KVJtpffPiblaZ6RqgUxeYl2pLy1pDySKs6NmkD4VAExnnie_VmEBv7Mug7TAre4G58MxCsTg5w_M6zKU3fiUBbEArpUGfZR2fmx9vRk3mi1J-K7NZxhOIruLrs8TLoRfqivqvsG_OG3t1h_U0-vm9VOXsjiJrgnRyQrSQuX6bfwxWCtQ5weHFRJ8phUQTsE-wPTZVTTI5Pvn9r-t_vAnz6Xn-eTqhAyTOlu7Q\n", stderr: "" })
[2021-11-02T13:13:24Z INFO  drogue_cloud_tests::resources::apps] Create application: 77ed4f57-6d65-4a08-8f78-e66ae5983641
[2021-11-02T13:13:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "77ed4f57-6d65-4a08-8f78-e66ae5983641"
[2021-11-02T13:13:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 77ed4f57-6d65-4a08-8f78-e66ae5983641 created.\n", stderr: "" })
[2021-11-02T13:13:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "77ed4f57-6d65-4a08-8f78-e66ae5983641"
[2021-11-02T13:13:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:13:24.306686Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"77ed4f57-6d65-4a08-8f78-e66ae5983641\",\n    \"resourceVersion\": \"ec2145d2-5630-4163-ae88-59bb2f77c739\",\n    \"uid\": \"986d2fae-bf33-4c92-b516-f38dd918633d\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:13:24.328555132Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:13:24.328540003Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.328513053Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.328513934Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.328514425Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.328515087Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.328515597Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.328516860Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "77ed4f57-6d65-4a08-8f78-e66ae5983641"
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:13:24.306686Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"77ed4f57-6d65-4a08-8f78-e66ae5983641\",\n    \"resourceVersion\": \"ca706704-7fcf-45d8-ba1f-085952e12422\",\n    \"uid\": \"986d2fae-bf33-4c92-b516-f38dd918633d\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:13:24.543092355Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:13:24.543052451Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.355178017Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.363619782Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.426251329Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.433432160Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.543026192Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.543027534Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"ZtxWdiAnClXq\",\n        \"username\": \"user-77ed4f57-6d65-4a08-8f78-e66ae5983641\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "77ed4f57-6d65-4a08-8f78-e66ae5983641"
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:13:24.306686Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"77ed4f57-6d65-4a08-8f78-e66ae5983641\",\n    \"resourceVersion\": \"ca706704-7fcf-45d8-ba1f-085952e12422\",\n    \"uid\": \"986d2fae-bf33-4c92-b516-f38dd918633d\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:13:24.543092355Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:13:24.543052451Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.355178017Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.363619782Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.426251329Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.433432160Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.543026192Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:13:24.543027534Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"ZtxWdiAnClXq\",\n        \"username\": \"user-77ed4f57-6d65-4a08-8f78-e66ae5983641\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "77ed4f57-6d65-4a08-8f78-e66ae5983641" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\",\"unique\":true}}]}}"
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTkxMDMsImlhdCI6MTYzNTg1ODgwMywiYXV0aF90aW1lIjoxNjM1ODU4ODAwLCJqdGkiOiI5YTUyZWJmMC1iNDk0LTRlMGItOWU4My00NmNlYzRjNjBjN2EiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImQ5MzhkOTdjLTQ5ZWQtNDBmNy1hN2I3LWRjYTc4OGU5ODNhMiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJkOTM4ZDk3Yy00OWVkLTQwZjctYTdiNy1kY2E3ODhlOTgzYTIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.l3SBx0ovkME9wBx0nbuvXMAEbyTYqGqqa98QRUvf40XQayKzdQ_R5LzKCy76x8T-o7dtjKrdZD-km5W-O5x6zAMmNeTkhipYkQ7BVvlHCA6S8xaJ8KVJtpffPiblaZ6RqgUxeYl2pLy1pDySKs6NmkD4VAExnnie_VmEBv7Mug7TAre4G58MxCsTg5w_M6zKU3fiUBbEArpUGfZR2fmx9vRk3mi1J-K7NZxhOIruLrs8TLoRfqivqvsG_OG3t1h_U0-vm9VOXsjiJrgnRyQrSQuX6bfwxWCtQ5weHFRJ8phUQTsE-wPTZVTTI5Pvn9r-t_vAnz6Xn-eTqhAyTOlu7Q\n", stderr: "" })
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:13:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:18:27Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:18:27Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:18:27Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:18:27Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:18:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "77ed4f57-6d65-4a08-8f78-e66ae5983641" "device1"
[2021-11-02T13:18:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:18:27Z INFO  drogue_cloud_tests::resources::apps] Destroy application '77ed4f57-6d65-4a08-8f78-e66ae5983641'
[2021-11-02T13:18:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "77ed4f57-6d65-4a08-8f78-e66ae5983641"
[2021-11-02T13:18:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 77ed4f57-6d65-4a08-8f78-e66ae5983641 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_alias::version_2

**Duration**: 311.099484824s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:18:27Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T13:18:29Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:18:32Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:18:33Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:18:34Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NjA5MTQsImlhdCI6MTYzNTg1OTExNCwianRpIjoiMTIzMjU0ZjYtM2I2MS00ZGE4LWFmNDYtYWFiMjljYTAzZWUzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzY0MTUwNjUtYWViYy00MTdkLThkOGQtOGQ5NTJhODZiODliIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc2NDE1MDY1LWFlYmMtNDE3ZC04ZDhkLThkOTUyYTg2Yjg5YiJ9.9rYATHLPqNrTKWYtwElfJxcBRon2dJo-THQoAhn6SGs
[2021-11-02T13:18:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:18:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:18:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NjA5MTQsImlhdCI6MTYzNTg1OTExNCwianRpIjoiMTIzMjU0ZjYtM2I2MS00ZGE4LWFmNDYtYWFiMjljYTAzZWUzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzY0MTUwNjUtYWViYy00MTdkLThkOGQtOGQ5NTJhODZiODliIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc2NDE1MDY1LWFlYmMtNDE3ZC04ZDhkLThkOTUyYTg2Yjg5YiJ9.9rYATHLPqNrTKWYtwElfJxcBRon2dJo-THQoAhn6SGs" "--context" "system-tests"
[2021-11-02T13:18:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:18:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:18:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:18:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTk0MTQsImlhdCI6MTYzNTg1OTExNCwiYXV0aF90aW1lIjoxNjM1ODU5MTEyLCJqdGkiOiJjN2UyNTEyNy1kNThlLTRiODQtOWY4MC00Y2U0YWI2MGNhNGYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc2NDE1MDY1LWFlYmMtNDE3ZC04ZDhkLThkOTUyYTg2Yjg5YiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3NjQxNTA2NS1hZWJjLTQxN2QtOGQ4ZC04ZDk1MmE4NmI4OWIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.i0eQPuxHBKrFu9S9z5JSwRlJYj5CXYfxyjFNXZ4g9-MPWIdO4gG9Bmx_rHxfzh0K6WHPqA89A4-m3izkWp7e7SLRpapCZKUs7sz5BaIHtN7hbmqLdpHk3YbRVp80kVmfJw14ZXpZXORdcQ43yaArrpmDVSPfmSOdixFxBrVNTll006_2Wbf9OiXUA1prCPyUUWiG3icH5Jvusfo6lNTWtYdyULom4qECsw1Z7mwU2ktKjDMH2I14VAWpdgenxKK6NoHDZmjHsgIs872GlGEKvf6e2RtCwurbiNTtAcrEwnMBcdhTkJPF9ogbg28fWs__aDxV0N-afdnM4kJdVbH5ZQ\n", stderr: "" })
[2021-11-02T13:18:35Z INFO  drogue_cloud_tests::resources::apps] Create application: ada21a8a-750c-4ce3-be49-1cacdff203c0
[2021-11-02T13:18:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "ada21a8a-750c-4ce3-be49-1cacdff203c0"
[2021-11-02T13:18:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App ada21a8a-750c-4ce3-be49-1cacdff203c0 created.\n", stderr: "" })
[2021-11-02T13:18:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ada21a8a-750c-4ce3-be49-1cacdff203c0"
[2021-11-02T13:18:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:18:35.593677Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"ada21a8a-750c-4ce3-be49-1cacdff203c0\",\n    \"resourceVersion\": \"83112e38-272b-4907-8766-069b2df7cced\",\n    \"uid\": \"13dd0b6c-bdb9-4874-92ef-a36064184964\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:18:35.616647226Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:18:35.616629412Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.616594919Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.616596111Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.616596862Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.616597423Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.616598726Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.616600528Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ada21a8a-750c-4ce3-be49-1cacdff203c0"
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:18:35.593677Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"ada21a8a-750c-4ce3-be49-1cacdff203c0\",\n    \"resourceVersion\": \"6cd5b1dc-9b96-48d6-9aec-0c654277b179\",\n    \"uid\": \"13dd0b6c-bdb9-4874-92ef-a36064184964\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:18:35.876146457Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:18:35.876097786Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.647650384Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.658760722Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.726783393Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.735315747Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.876068721Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.876070104Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"kBlU287ypi1m\",\n        \"username\": \"user-ada21a8a-750c-4ce3-be49-1cacdff203c0\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ada21a8a-750c-4ce3-be49-1cacdff203c0"
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:18:35.593677Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"ada21a8a-750c-4ce3-be49-1cacdff203c0\",\n    \"resourceVersion\": \"6cd5b1dc-9b96-48d6-9aec-0c654277b179\",\n    \"uid\": \"13dd0b6c-bdb9-4874-92ef-a36064184964\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:18:35.876146457Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:18:35.876097786Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.647650384Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.658760722Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.726783393Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.735315747Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.876068721Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:18:35.876070104Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"kBlU287ypi1m\",\n        \"username\": \"user-ada21a8a-750c-4ce3-be49-1cacdff203c0\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "ada21a8a-750c-4ce3-be49-1cacdff203c0" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\",\"unique\":true}}]}}"
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTk0MTQsImlhdCI6MTYzNTg1OTExNCwiYXV0aF90aW1lIjoxNjM1ODU5MTEyLCJqdGkiOiJjN2UyNTEyNy1kNThlLTRiODQtOWY4MC00Y2U0YWI2MGNhNGYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc2NDE1MDY1LWFlYmMtNDE3ZC04ZDhkLThkOTUyYTg2Yjg5YiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3NjQxNTA2NS1hZWJjLTQxN2QtOGQ4ZC04ZDk1MmE4NmI4OWIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.i0eQPuxHBKrFu9S9z5JSwRlJYj5CXYfxyjFNXZ4g9-MPWIdO4gG9Bmx_rHxfzh0K6WHPqA89A4-m3izkWp7e7SLRpapCZKUs7sz5BaIHtN7hbmqLdpHk3YbRVp80kVmfJw14ZXpZXORdcQ43yaArrpmDVSPfmSOdixFxBrVNTll006_2Wbf9OiXUA1prCPyUUWiG3icH5Jvusfo6lNTWtYdyULom4qECsw1Z7mwU2ktKjDMH2I14VAWpdgenxKK6NoHDZmjHsgIs872GlGEKvf6e2RtCwurbiNTtAcrEwnMBcdhTkJPF9ogbg28fWs__aDxV0N-afdnM4kJdVbH5ZQ\n", stderr: "" })
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:18:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:23:38Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:23:38Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:23:38Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:23:38Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:23:38Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "ada21a8a-750c-4ce3-be49-1cacdff203c0" "device1"
[2021-11-02T13:23:38Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:23:38Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'ada21a8a-750c-4ce3-be49-1cacdff203c0'
[2021-11-02T13:23:38Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "ada21a8a-750c-4ce3-be49-1cacdff203c0"
[2021-11-02T13:23:38Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App ada21a8a-750c-4ce3-be49-1cacdff203c0 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_alias::version_3

**Duration**: 312.853165501s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:23:38Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T13:23:40Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:23:43Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:23:45Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:23:46Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NjEyMjYsImlhdCI6MTYzNTg1OTQyNiwianRpIjoiMGU1YzBmMDAtNjY0ZC00MjRmLWFlZTYtZDQ5ZTNmZjYxYTNlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzQ2NDM0MDAtZTYxZC00NGE5LTg4YTctZmM2ODBlODI1NTFmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc0NjQzNDAwLWU2MWQtNDRhOS04OGE3LWZjNjgwZTgyNTUxZiJ9.9-FtBB2EL7CieUhYlFEaZFqkhFTJBcyTfeRXU_t2jNI
[2021-11-02T13:23:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:23:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:23:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NjEyMjYsImlhdCI6MTYzNTg1OTQyNiwianRpIjoiMGU1YzBmMDAtNjY0ZC00MjRmLWFlZTYtZDQ5ZTNmZjYxYTNlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzQ2NDM0MDAtZTYxZC00NGE5LTg4YTctZmM2ODBlODI1NTFmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc0NjQzNDAwLWU2MWQtNDRhOS04OGE3LWZjNjgwZTgyNTUxZiJ9.9-FtBB2EL7CieUhYlFEaZFqkhFTJBcyTfeRXU_t2jNI" "--context" "system-tests"
[2021-11-02T13:23:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:23:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:23:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:23:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTk3MjYsImlhdCI6MTYzNTg1OTQyNiwiYXV0aF90aW1lIjoxNjM1ODU5NDIzLCJqdGkiOiI1MDE1NmI2ZC03MmY3LTQyYTctOWI2Zi0xYTU0ZmU0YjhhMTMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc0NjQzNDAwLWU2MWQtNDRhOS04OGE3LWZjNjgwZTgyNTUxZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3NDY0MzQwMC1lNjFkLTQ0YTktODhhNy1mYzY4MGU4MjU1MWYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.hSuG140378pA3_ij91UVzk8m6-gbFvBVl2Hc8sWVr2DmqW36TQvpHPL27pbDuAEa0C3yqMQEOMxRpZyONmnEV0ZGHSBEFm7bgo8juS1Ycx_38qy0z0BliNV51C7r_6NmO5e90-1b5xlE3jIOQJBiuUlCqMY9AGCbRYjvVPuYuAnH6JQvh_88e6RuP0b2KKEFeu2MvrG8FNBY2CuQY-wWlrZVQyotE64rN10JC1aWSdOmXOOvLE8KhLu079831nejL14n89m8Tdq1u6Ts-wLsdYtggJqc_5WGuUsMnS0QCRIXyoEeV25GSJTBj4W8s4jBOw4iPR-OG-tMEn2lRJrxpA\n", stderr: "" })
[2021-11-02T13:23:47Z INFO  drogue_cloud_tests::resources::apps] Create application: 2037b838-36be-4b67-ae6a-65c2ebd1d768
[2021-11-02T13:23:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "2037b838-36be-4b67-ae6a-65c2ebd1d768"
[2021-11-02T13:23:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 2037b838-36be-4b67-ae6a-65c2ebd1d768 created.\n", stderr: "" })
[2021-11-02T13:23:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "2037b838-36be-4b67-ae6a-65c2ebd1d768"
[2021-11-02T13:23:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:23:47.227429Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"2037b838-36be-4b67-ae6a-65c2ebd1d768\",\n    \"resourceVersion\": \"d048b175-4052-4069-adeb-8b2f004d2c89\",\n    \"uid\": \"c99f5f4e-3d5e-48fc-bd65-7fd9a55caf32\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:23:47.251405015Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:23:47.251386310Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.251331277Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.251332449Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.251333010Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.251333802Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.251334413Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.251336797Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "2037b838-36be-4b67-ae6a-65c2ebd1d768"
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:23:47.227429Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"2037b838-36be-4b67-ae6a-65c2ebd1d768\",\n    \"resourceVersion\": \"4eaa502b-d640-4c1e-a502-c15f7eefe8f1\",\n    \"uid\": \"c99f5f4e-3d5e-48fc-bd65-7fd9a55caf32\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:23:47.476838779Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:23:47.476804605Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.278754046Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.285797194Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.343498960Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.359356955Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.476779388Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.476780780Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"nWSqakvKubuB\",\n        \"username\": \"user-2037b838-36be-4b67-ae6a-65c2ebd1d768\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "2037b838-36be-4b67-ae6a-65c2ebd1d768"
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:23:47.227429Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"2037b838-36be-4b67-ae6a-65c2ebd1d768\",\n    \"resourceVersion\": \"4eaa502b-d640-4c1e-a502-c15f7eefe8f1\",\n    \"uid\": \"c99f5f4e-3d5e-48fc-bd65-7fd9a55caf32\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:23:47.476838779Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:23:47.476804605Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.278754046Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.285797194Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.343498960Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.359356955Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.476779388Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:23:47.476780780Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"nWSqakvKubuB\",\n        \"username\": \"user-2037b838-36be-4b67-ae6a-65c2ebd1d768\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "2037b838-36be-4b67-ae6a-65c2ebd1d768" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\",\"unique\":true}}]}}"
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NTk3MjYsImlhdCI6MTYzNTg1OTQyNiwiYXV0aF90aW1lIjoxNjM1ODU5NDIzLCJqdGkiOiI1MDE1NmI2ZC03MmY3LTQyYTctOWI2Zi0xYTU0ZmU0YjhhMTMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc0NjQzNDAwLWU2MWQtNDRhOS04OGE3LWZjNjgwZTgyNTUxZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3NDY0MzQwMC1lNjFkLTQ0YTktODhhNy1mYzY4MGU4MjU1MWYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.hSuG140378pA3_ij91UVzk8m6-gbFvBVl2Hc8sWVr2DmqW36TQvpHPL27pbDuAEa0C3yqMQEOMxRpZyONmnEV0ZGHSBEFm7bgo8juS1Ycx_38qy0z0BliNV51C7r_6NmO5e90-1b5xlE3jIOQJBiuUlCqMY9AGCbRYjvVPuYuAnH6JQvh_88e6RuP0b2KKEFeu2MvrG8FNBY2CuQY-wWlrZVQyotE64rN10JC1aWSdOmXOOvLE8KhLu079831nejL14n89m8Tdq1u6Ts-wLsdYtggJqc_5WGuUsMnS0QCRIXyoEeV25GSJTBj4W8s4jBOw4iPR-OG-tMEn2lRJrxpA\n", stderr: "" })
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:23:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:28:50Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:28:50Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:28:50Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:28:51Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:28:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "2037b838-36be-4b67-ae6a-65c2ebd1d768" "device1"
[2021-11-02T13:28:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:28:51Z INFO  drogue_cloud_tests::resources::apps] Destroy application '2037b838-36be-4b67-ae6a-65c2ebd1d768'
[2021-11-02T13:28:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "2037b838-36be-4b67-ae6a-65c2ebd1d768"
[2021-11-02T13:28:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 2037b838-36be-4b67-ae6a-65c2ebd1d768 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_only::version_1

**Duration**: 312.971777191s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:28:51Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T13:28:53Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:28:56Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:28:58Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:28:59Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NjE1MzksImlhdCI6MTYzNTg1OTczOSwianRpIjoiNDIxNTYzNzQtN2U2ZS00OTkwLWFlNWQtNWI5MDAxZjY0ZGZkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMWE4MThlNjEtODcxNi00YTY4LWE4MjctMjAwZDE0OTQ4NTc4Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjFhODE4ZTYxLTg3MTYtNGE2OC1hODI3LTIwMGQxNDk0ODU3OCJ9.s1Zk3JzNeSy1-Co4P0XV6tkIp05EZQn1HdgAVULBiGE
[2021-11-02T13:28:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:28:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:28:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzYmZjNDNlMC0zMWE4LTQ5ZDMtODE1My1jYTAxOTk5ODMyMGUifQ.eyJleHAiOjE2MzU4NjE1MzksImlhdCI6MTYzNTg1OTczOSwianRpIjoiNDIxNTYzNzQtN2U2ZS00OTkwLWFlNWQtNWI5MDAxZjY0ZGZkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjY5NzM0ODEzLWQ5Y2QtNGUzOC05NjlhLTM2ZTExOTFmNjZmNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMWE4MThlNjEtODcxNi00YTY4LWE4MjctMjAwZDE0OTQ4NTc4Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjFhODE4ZTYxLTg3MTYtNGE2OC1hODI3LTIwMGQxNDk0ODU3OCJ9.s1Zk3JzNeSy1-Co4P0XV6tkIp05EZQn1HdgAVULBiGE" "--context" "system-tests"
[2021-11-02T13:28:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:29:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:29:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:29:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NjAwMzksImlhdCI6MTYzNTg1OTczOSwiYXV0aF90aW1lIjoxNjM1ODU5NzM2LCJqdGkiOiJjNjhhMGM3Yy1jMGRkLTRkZjItYjM3ZC1hNmQ2NjFmN2JjMWIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjFhODE4ZTYxLTg3MTYtNGE2OC1hODI3LTIwMGQxNDk0ODU3OCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIxYTgxOGU2MS04NzE2LTRhNjgtYTgyNy0yMDBkMTQ5NDg1NzgiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Yq0F50dr9nnCOcpMNoIsHE8hPRkM1GzoltEGhuezn2QOlMMyRuARmPU9LjeqMRJwxVXrRkT8YMG7a_KsT4TwBB1Xty_WnvhN6NcxnHcm_2sFVBOwzFHbcD0jtAz55QDny3XNyWgIxN6Kwjv1EThBSkSrUiUfI_vjMxv4XvCENM-G1L_dEL_TPaysZzrQpap0aDS_d-nwai44OeAHs6sCi5n2k3VFV5AvJcRJ6-7VICPTcGNPbMd1MyAWL6cgz13SqonuZE2IGn8poYykkWr8BLMR6E173xoqCIGNQfd204gsDRuJ0ZrFJmUiPcxOZ8W-_2yItmzpcS3yTKNfwZh6Bg\n", stderr: "" })
[2021-11-02T13:29:00Z INFO  drogue_cloud_tests::resources::apps] Create application: 9f155c3b-089d-4746-98c1-67cbbba889c8
[2021-11-02T13:29:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "9f155c3b-089d-4746-98c1-67cbbba889c8"
[2021-11-02T13:29:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 9f155c3b-089d-4746-98c1-67cbbba889c8 created.\n", stderr: "" })
[2021-11-02T13:29:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "9f155c3b-089d-4746-98c1-67cbbba889c8"
[2021-11-02T13:29:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:29:00.241081Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"9f155c3b-089d-4746-98c1-67cbbba889c8\",\n    \"resourceVersion\": \"765c415a-082b-4c6e-85bc-bf7a16301c73\",\n    \"uid\": \"90e7f1f2-746c-4c27-8c4c-8f5618c187f8\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:29:00.258674185Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:29:00.258693892Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.258636164Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.258638878Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.258639660Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.258640521Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.258641103Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.258643928Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "9f155c3b-089d-4746-98c1-67cbbba889c8"
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:29:00.241081Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"9f155c3b-089d-4746-98c1-67cbbba889c8\",\n    \"resourceVersion\": \"e035f71b-bb80-476b-863f-faeb32325755\",\n    \"uid\": \"90e7f1f2-746c-4c27-8c4c-8f5618c187f8\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:29:00.466500220Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:29:00.466561035Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.289857040Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.299842177Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.363795395Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.370038361Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.466469803Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.466471206Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Uv3JZq3Lg0Gx\",\n        \"username\": \"user-9f155c3b-089d-4746-98c1-67cbbba889c8\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "9f155c3b-089d-4746-98c1-67cbbba889c8"
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:29:00.241081Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"9f155c3b-089d-4746-98c1-67cbbba889c8\",\n    \"resourceVersion\": \"e035f71b-bb80-476b-863f-faeb32325755\",\n    \"uid\": \"90e7f1f2-746c-4c27-8c4c-8f5618c187f8\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:29:00.466500220Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:29:00.466561035Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.289857040Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.299842177Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.363795395Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.370038361Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.466469803Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:29:00.466471206Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Uv3JZq3Lg0Gx\",\n        \"username\": \"user-9f155c3b-089d-4746-98c1-67cbbba889c8\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "9f155c3b-089d-4746-98c1-67cbbba889c8" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlZ1hzc2EycG9yNkVMNDAwWUw4bTAtT2w3Z1BRaFVOMmFueHEzbzQ3YzlZIn0.eyJleHAiOjE2MzU4NjAwMzksImlhdCI6MTYzNTg1OTczOSwiYXV0aF90aW1lIjoxNjM1ODU5NzM2LCJqdGkiOiJjNjhhMGM3Yy1jMGRkLTRkZjItYjM3ZC1hNmQ2NjFmN2JjMWIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiNjk3MzQ4MTMtZDljZC00ZTM4LTk2OWEtMzZlMTE5MWY2NmY2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjFhODE4ZTYxLTg3MTYtNGE2OC1hODI3LTIwMGQxNDk0ODU3OCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIxYTgxOGU2MS04NzE2LTRhNjgtYTgyNy0yMDBkMTQ5NDg1NzgiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Yq0F50dr9nnCOcpMNoIsHE8hPRkM1GzoltEGhuezn2QOlMMyRuARmPU9LjeqMRJwxVXrRkT8YMG7a_KsT4TwBB1Xty_WnvhN6NcxnHcm_2sFVBOwzFHbcD0jtAz55QDny3XNyWgIxN6Kwjv1EThBSkSrUiUfI_vjMxv4XvCENM-G1L_dEL_TPaysZzrQpap0aDS_d-nwai44OeAHs6sCi5n2k3VFV5AvJcRJ6-7VICPTcGNPbMd1MyAWL6cgz13SqonuZE2IGn8poYykkWr8BLMR6E173xoqCIGNQfd204gsDRuJ0ZrFJmUiPcxOZ8W-_2yItmzpcS3yTKNfwZh6Bg\n", stderr: "" })
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:29:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:34:03Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:34:03Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:34:03Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:34:04Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:34:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "9f155c3b-089d-4746-98c1-67cbbba889c8" "device1"
[2021-11-02T13:34:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:34:04Z INFO  drogue_cloud_tests::resources::apps] Destroy application '9f155c3b-089d-4746-98c1-67cbbba889c8'
[2021-11-02T13:34:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "9f155c3b-089d-4746-98c1-67cbbba889c8"
[2021-11-02T13:34:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 9f155c3b-089d-4746-98c1-67cbbba889c8 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>
