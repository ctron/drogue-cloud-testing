---
title: "❌ Test Result 2021-11-02 14:49 UTC"
date: 2021-11-02T14:49:56.526861743+00:00
categories: test-report
excerpt_separator: <!--more-->
---


| | Total | Passed | Failed | Ignored | Filtered | Duration |
| --- | ----- | -------| ------ | ------- | -------- | -------- |
| ❌ | 53 | 10 | 43 | 0 | 0 | 12315.904299585s |


**Git:** `https://github.com/drogue-iot/drogue-cloud` @ `refs/heads/drogue-server-binary`

    Commit: 18372c71bf8584eb06f7d6bfe40bdaad09a24a08
    Author: Ulf Lilleengen <ulf.lilleengen@gmail.com>
    Date: Tue, 02 Nov 2021 06:59:51 -0100

        Add README

**Job:** [https://github.com/drogue-iot/drogue-cloud-testing/actions/runs/1411906231](https://github.com/drogue-iot/drogue-cloud-testing/actions/runs/1411906231)

<!--more-->

# Index

| Name | Result | Duration |
| ---- | ------ | -------- |
| [init::web::test::test_web_destroy](#initwebtesttest_web_destroy) | ✅ | 3.739889641s | 
| [init::web::test::test_web_test](#initwebtesttest_web_test) | ✅ | 5.975083184s | 
| [tests::api::test_create_api_key_web](#testsapitest_create_api_key_web) | ❌ | 39.853329935s | 
| [tests::coap::command::test_command::version_1](#testscoapcommandtest_commandversion_1) | ❌ | 311.352299293s | 
| [tests::coap::command::test_command::version_2](#testscoapcommandtest_commandversion_2) | ❌ | 311.718950977s | 
| [tests::coap::command::test_command::version_3](#testscoapcommandtest_commandversion_3) | ❌ | 312.062022354s | 
| [tests::coap::telemetry::test_send_telemetry_pass::version_1](#testscoaptelemetrytest_send_telemetry_passversion_1) | ❌ | 311.209257748s | 
| [tests::coap::telemetry::test_send_telemetry_pass::version_2](#testscoaptelemetrytest_send_telemetry_passversion_2) | ❌ | 311.831069779s | 
| [tests::coap::telemetry::test_send_telemetry_pass::version_3](#testscoaptelemetrytest_send_telemetry_passversion_3) | ❌ | 312.056269821s | 
| [tests::coap::telemetry::test_send_telemetry_user::version_1](#testscoaptelemetrytest_send_telemetry_userversion_1) | ❌ | 311.417818287s | 
| [tests::coap::telemetry::test_send_telemetry_user::version_2](#testscoaptelemetrytest_send_telemetry_userversion_2) | ❌ | 310.956017519s | 
| [tests::coap::telemetry::test_send_telemetry_user::version_3](#testscoaptelemetrytest_send_telemetry_userversion_3) | ❌ | 311.031155534s | 
| [tests::coap::telemetry::test_send_telemetry_user_alias::version_1](#testscoaptelemetrytest_send_telemetry_user_aliasversion_1) | ❌ | 311.831788851s | 
| [tests::coap::telemetry::test_send_telemetry_user_alias::version_2](#testscoaptelemetrytest_send_telemetry_user_aliasversion_2) | ❌ | 312.042461075s | 
| [tests::coap::telemetry::test_send_telemetry_user_alias::version_3](#testscoaptelemetrytest_send_telemetry_user_aliasversion_3) | ❌ | 311.953399548s | 
| [tests::coap::telemetry::test_send_telemetry_user_only::version_1](#testscoaptelemetrytest_send_telemetry_user_onlyversion_1) | ❌ | 311.323724348s | 
| [tests::coap::telemetry::test_send_telemetry_user_only::version_2](#testscoaptelemetrytest_send_telemetry_user_onlyversion_2) | ❌ | 310.98145597s | 
| [tests::coap::telemetry::test_send_telemetry_user_only::version_3](#testscoaptelemetrytest_send_telemetry_user_onlyversion_3) | ❌ | 311.83671824s | 
| [tests::drg::test_drg_version](#testsdrgtest_drg_version) | ✅ | 7.789555852s | 
| [tests::http::command::test_command::version_1](#testshttpcommandtest_commandversion_1) | ❌ | 312.054294066s | 
| [tests::http::command::test_command::version_2](#testshttpcommandtest_commandversion_2) | ❌ | 310.762224124s | 
| [tests::http::command::test_command::version_3](#testshttpcommandtest_commandversion_3) | ❌ | 310.955117228s | 
| [tests::http::telemetry::test_send_telemetry_pass::version_1](#testshttptelemetrytest_send_telemetry_passversion_1) | ❌ | 310.840870953s | 
| [tests::http::telemetry::test_send_telemetry_pass::version_2](#testshttptelemetrytest_send_telemetry_passversion_2) | ❌ | 312.005302923s | 
| [tests::http::telemetry::test_send_telemetry_pass::version_3](#testshttptelemetrytest_send_telemetry_passversion_3) | ❌ | 311.934875714s | 
| [tests::http::telemetry::test_send_telemetry_user::version_1](#testshttptelemetrytest_send_telemetry_userversion_1) | ❌ | 312.072450029s | 
| [tests::http::telemetry::test_send_telemetry_user::version_2](#testshttptelemetrytest_send_telemetry_userversion_2) | ❌ | 311.958924617s | 
| [tests::http::telemetry::test_send_telemetry_user::version_3](#testshttptelemetrytest_send_telemetry_userversion_3) | ❌ | 312.160468806s | 
| [tests::http::telemetry::test_send_telemetry_user_alias::version_1](#testshttptelemetrytest_send_telemetry_user_aliasversion_1) | ❌ | 311.841647108s | 
| [tests::http::telemetry::test_send_telemetry_user_alias::version_2](#testshttptelemetrytest_send_telemetry_user_aliasversion_2) | ❌ | 311.442166572s | 
| [tests::http::telemetry::test_send_telemetry_user_alias::version_3](#testshttptelemetrytest_send_telemetry_user_aliasversion_3) | ❌ | 311.945632822s | 
| [tests::http::telemetry::test_send_telemetry_user_only::version_1](#testshttptelemetrytest_send_telemetry_user_onlyversion_1) | ❌ | 311.951423521s | 
| [tests::http::telemetry::test_send_telemetry_user_only::version_2](#testshttptelemetrytest_send_telemetry_user_onlyversion_2) | ❌ | 311.271202233s | 
| [tests::http::telemetry::test_send_telemetry_user_only::version_3](#testshttptelemetrytest_send_telemetry_user_onlyversion_3) | ❌ | 311.458450228s | 
| [tests::mqtt::command::test_command::version_1](#testsmqttcommandtest_commandversion_1) | ❌ | 15.410742657s | 
| [tests::mqtt::command::test_command::version_2](#testsmqttcommandtest_commandversion_2) | ❌ | 14.042514959s | 
| [tests::mqtt::command::test_command::version_3](#testsmqttcommandtest_commandversion_3) | ❌ | 14.779663183s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_1](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_1integration_version_1) | ❌ | 310.657350641s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_2](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_1integration_version_2) | ❌ | 310.870123223s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_3](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_1integration_version_3) | ❌ | 311.042105071s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_1](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_2integration_version_1) | ❌ | 311.104477126s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_2](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_2integration_version_2) | ❌ | 311.824086376s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_3](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_2integration_version_3) | ❌ | 310.753945935s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_1](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_3integration_version_1) | ❌ | 310.624778398s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_2](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_3integration_version_2) | ❌ | 312.858187419s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_3](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_3integration_version_3) | ❌ | 312.074270863s | 
| [tests::registry::api::test_registry_create_app](#testsregistryapitest_registry_create_app) | ✅ | 10.240282267s | 
| [tests::registry::drg::test_registry_create_and_delete](#testsregistrydrgtest_registry_create_and_delete) | ✅ | 9.28280241s | 
| [tests::registry::drg::test_registry_create_app](#testsregistrydrgtest_registry_create_app) | ✅ | 8.80772638s | 
| [tests::registry::drg::test_registry_create_app_and_device](#testsregistrydrgtest_registry_create_app_and_device) | ✅ | 8.925056463s | 
| [tests::registry::drg::test_registry_create_app_and_device_twice](#testsregistrydrgtest_registry_create_app_and_device_twice) | ✅ | 9.038861188s | 
| [tests::registry::drg::test_registry_create_app_twice](#testsregistrydrgtest_registry_create_app_twice) | ✅ | 8.983978773s | 
| [tests::registry::drg::test_registry_device_create_and_delete](#testsregistrydrgtest_registry_device_create_and_delete) | ✅ | 8.946537616s | 


# Details

## ✅ init::web::test::test_web_destroy

**Duration**: 3.739889641s

## ✅ init::web::test::test_web_test

**Duration**: 5.975083184s

## ❌ tests::api::test_create_api_key_web

**Duration**: 39.853329935s

<details>

<summary>Test output</summary>

<pre>
[2021-11-02T11:24:47Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:24:50Z INFO  drogue_cloud_tests::init::login] Performing console login
thread 'main' panicked at 'Get API key: Failed to wait for API key value control

Caused by:
    timeout waiting on condition: ', src/tests/api/mod.rs:7:46

</pre>

</details>

## ❌ tests::coap::command::test_command::version_1

**Duration**: 311.352299293s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T11:25:27Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:25:30Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T11:25:31Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:25:33Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTQxMzIsImlhdCI6MTYzNTg1MjMzMiwianRpIjoiNDA4NGQ2MDktOWU1OS00MjMxLWIwYjgtZWM4ZjY4NzI4ODNkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOGI2YmI1NDUtNGIzNS00YzNkLTk2MWEtZDUwYmQ5OTBlYjkyIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjhiNmJiNTQ1LTRiMzUtNGMzZC05NjFhLWQ1MGJkOTkwZWI5MiJ9.ROeSCvHgmxjBWdiv6SYmZZ8BHihAEccNrzXaItin0i4
[2021-11-02T11:25:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T11:25:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(256)), stdout: "", stderr: "Error: Error loading config file\n\nCaused by:\n    0: Unable to open configuration file. Did you log into a drogue cloud cluster ?\n    1: No such file or directory (os error 2)\n" })
[2021-11-02T11:25:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTQxMzIsImlhdCI6MTYzNTg1MjMzMiwianRpIjoiNDA4NGQ2MDktOWU1OS00MjMxLWIwYjgtZWM4ZjY4NzI4ODNkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOGI2YmI1NDUtNGIzNS00YzNkLTk2MWEtZDUwYmQ5OTBlYjkyIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjhiNmJiNTQ1LTRiMzUtNGMzZC05NjFhLWQ1MGJkOTkwZWI5MiJ9.ROeSCvHgmxjBWdiv6SYmZZ8BHihAEccNrzXaItin0i4" "--context" "system-tests"
[2021-11-02T11:25:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T11:25:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:25:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:25:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTI2MzMsImlhdCI6MTYzNTg1MjMzMywiYXV0aF90aW1lIjoxNjM1ODUyMzMwLCJqdGkiOiJmZjI4ZDAzYy03OGRhLTQ0NGEtYmIzNS0zNDJhNGUyZjU2OTMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50Il0sInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImRyb2d1ZSIsInNlc3Npb25fc3RhdGUiOiI4YjZiYjU0NS00YjM1LTRjM2QtOTYxYS1kNTBiZDk5MGViOTIiLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbImh0dHA6Ly9jb25zb2xlLjE3Mi4xOC4wLjIubmlwLmlvIiwiaHR0cDovL2xvY2FsaG9zdDoqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkcm9ndWUtdXNlciIsImRyb2d1ZS1hZG1pbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19fSwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjhiNmJiNTQ1LTRiMzUtNGMzZC05NjFhLWQ1MGJkOTkwZWI5MiIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwibmFtZSI6IlN5c3RlbSBBZG1pbiIsInByZWZlcnJlZF91c2VybmFtZSI6ImFkbWluIiwiZ2l2ZW5fbmFtZSI6IlN5c3RlbSIsImZhbWlseV9uYW1lIjoiQWRtaW4iLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20ifQ.IM5Mhch4BYBG2mi2S1IhhkB_V6kVT7zkoonRpBaPbBngF8aHgST0I91SlkblBjZbh11gGTG107tCat9sjVXEZMg5fNK3fJS_-2eW7UMWlh4CxaJc7zz9leJ_QeXFa74O-RSzeoO67ELUGyl3Vcr9QDt65jHrTHHbK3xI9HWbcgWhQKAlrQYieaHMTZqjNP-6kUqtrhtCvjfmdvVWttCmBnMYSIQejUqnOpV0VlgZrJqLVkBA3KXzctQeOalVXg1mmc3Iu4PMpBhQoTlYPQUGu8K_U7BFHre1czyXsJptFe2mYq038j-oJoBKmNqBmQPPCFNu7CRglV1MuB8PC-W1Ew\n", stderr: "" })
[2021-11-02T11:25:33Z INFO  drogue_cloud_tests::resources::apps] Create application: be3459b5-e6a2-4bb0-87de-ea5760107439
[2021-11-02T11:25:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "be3459b5-e6a2-4bb0-87de-ea5760107439"
[2021-11-02T11:25:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App be3459b5-e6a2-4bb0-87de-ea5760107439 created.\n", stderr: "" })
[2021-11-02T11:25:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "be3459b5-e6a2-4bb0-87de-ea5760107439"
[2021-11-02T11:25:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:25:33.674019Z\",\n    \"generation\": 0,\n    \"name\": \"be3459b5-e6a2-4bb0-87de-ea5760107439\",\n    \"resourceVersion\": \"4ca7b362-f54f-4a94-9b9a-4565b5f759be\",\n    \"uid\": \"9dd4d3d3-9ea0-435b-9570-863c067d33a4\"\n  }\n}\n", stderr: "" })
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "be3459b5-e6a2-4bb0-87de-ea5760107439"
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:25:33.674019Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"be3459b5-e6a2-4bb0-87de-ea5760107439\",\n    \"resourceVersion\": \"3e18c183-6eae-43ee-ad43-1ef68ea65033\",\n    \"uid\": \"9dd4d3d3-9ea0-435b-9570-863c067d33a4\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:25:34.361709383Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:25:34.361747424Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:25:34.045466136Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:25:34.060416550Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:25:34.193735345Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:25:34.203014195Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:25:34.361681711Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:25:34.361683154Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"KUanMDI3s8T8\",\n        \"username\": \"user-be3459b5-e6a2-4bb0-87de-ea5760107439\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "be3459b5-e6a2-4bb0-87de-ea5760107439"
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:25:33.674019Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"be3459b5-e6a2-4bb0-87de-ea5760107439\",\n    \"resourceVersion\": \"3e18c183-6eae-43ee-ad43-1ef68ea65033\",\n    \"uid\": \"9dd4d3d3-9ea0-435b-9570-863c067d33a4\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:25:34.361709383Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:25:34.361747424Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:25:34.045466136Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:25:34.060416550Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:25:34.193735345Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:25:34.203014195Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:25:34.361681711Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:25:34.361683154Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"KUanMDI3s8T8\",\n        \"username\": \"user-be3459b5-e6a2-4bb0-87de-ea5760107439\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "be3459b5-e6a2-4bb0-87de-ea5760107439" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::tests::coap::command] Sending payload
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::tests::coap::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTI2MzMsImlhdCI6MTYzNTg1MjMzMywiYXV0aF90aW1lIjoxNjM1ODUyMzMwLCJqdGkiOiJmZjI4ZDAzYy03OGRhLTQ0NGEtYmIzNS0zNDJhNGUyZjU2OTMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50Il0sInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImRyb2d1ZSIsInNlc3Npb25fc3RhdGUiOiI4YjZiYjU0NS00YjM1LTRjM2QtOTYxYS1kNTBiZDk5MGViOTIiLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbImh0dHA6Ly9jb25zb2xlLjE3Mi4xOC4wLjIubmlwLmlvIiwiaHR0cDovL2xvY2FsaG9zdDoqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkcm9ndWUtdXNlciIsImRyb2d1ZS1hZG1pbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19fSwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjhiNmJiNTQ1LTRiMzUtNGMzZC05NjFhLWQ1MGJkOTkwZWI5MiIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwibmFtZSI6IlN5c3RlbSBBZG1pbiIsInByZWZlcnJlZF91c2VybmFtZSI6ImFkbWluIiwiZ2l2ZW5fbmFtZSI6IlN5c3RlbSIsImZhbWlseV9uYW1lIjoiQWRtaW4iLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20ifQ.IM5Mhch4BYBG2mi2S1IhhkB_V6kVT7zkoonRpBaPbBngF8aHgST0I91SlkblBjZbh11gGTG107tCat9sjVXEZMg5fNK3fJS_-2eW7UMWlh4CxaJc7zz9leJ_QeXFa74O-RSzeoO67ELUGyl3Vcr9QDt65jHrTHHbK3xI9HWbcgWhQKAlrQYieaHMTZqjNP-6kUqtrhtCvjfmdvVWttCmBnMYSIQejUqnOpV0VlgZrJqLVkBA3KXzctQeOalVXg1mmc3Iu4PMpBhQoTlYPQUGu8K_U7BFHre1czyXsJptFe2mYq038j-oJoBKmNqBmQPPCFNu7CRglV1MuB8PC-W1Ew\n", stderr: "" })
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T11:25:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T11:30:36Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T11:30:36Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T11:30:36Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T11:30:36Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T11:30:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "be3459b5-e6a2-4bb0-87de-ea5760107439" "device1"
[2021-11-02T11:30:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T11:30:36Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'be3459b5-e6a2-4bb0-87de-ea5760107439'
[2021-11-02T11:30:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "be3459b5-e6a2-4bb0-87de-ea5760107439"
[2021-11-02T11:30:37Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App be3459b5-e6a2-4bb0-87de-ea5760107439 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::command::test_command::version_2

**Duration**: 311.718950977s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T11:30:38Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:30:41Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T11:30:43Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:30:44Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTQ0NDQsImlhdCI6MTYzNTg1MjY0NCwianRpIjoiN2ViOTE1ZjItNTMyYy00NGMyLTk0YzEtMTY3MmQwMWMxM2I5IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOWYxOTU1MmMtMjliZC00M2JkLWE0MDAtMjMxMmIxMTE4MDIyIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjlmMTk1NTJjLTI5YmQtNDNiZC1hNDAwLTIzMTJiMTExODAyMiJ9.bSjsloeWxGI0GoX8OvCutvEIrX34VHW2Oo-ck_Qv7KQ
[2021-11-02T11:30:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T11:30:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T11:30:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTQ0NDQsImlhdCI6MTYzNTg1MjY0NCwianRpIjoiN2ViOTE1ZjItNTMyYy00NGMyLTk0YzEtMTY3MmQwMWMxM2I5IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOWYxOTU1MmMtMjliZC00M2JkLWE0MDAtMjMxMmIxMTE4MDIyIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjlmMTk1NTJjLTI5YmQtNDNiZC1hNDAwLTIzMTJiMTExODAyMiJ9.bSjsloeWxGI0GoX8OvCutvEIrX34VHW2Oo-ck_Qv7KQ" "--context" "system-tests"
[2021-11-02T11:30:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T11:30:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:30:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:30:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTI5NDQsImlhdCI6MTYzNTg1MjY0NCwiYXV0aF90aW1lIjoxNjM1ODUyNjQyLCJqdGkiOiJhZjgwN2FlZi0xNmM1LTRlYWEtYmQ0NC0xMDI0NDc0NThiZWMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjlmMTk1NTJjLTI5YmQtNDNiZC1hNDAwLTIzMTJiMTExODAyMiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI5ZjE5NTUyYy0yOWJkLTQzYmQtYTQwMC0yMzEyYjExMTgwMjIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.MSrSY5mmHoqK5tnv424d4TKA3xQxoYHmXysFi8HDxvaFAHcl1yavwBH0_z87dk2BdnomcSUBEQPh1ijpHGS1xX-3LVCyZF4Imp9z-SZ_Eh0KbEpZKfbN6Ibf1S5UB2QVUzcKt4WnpIZ8D4-c-ll-x6TOBVmzBIfVg-JkQS79onhS8ud1Hmjgx7x8Zxqfi7DCdFqSkfCJqptUWdRbLvePpEd35foZIcOpX9PQlN00V1WaWqTLI78u7hisqvNHKbjErFOTlf4eFP_30fOAGs39WKtaocE8sXyllEwlaCh5eYnPTlWRwOAL2kBOJ7AmNujmzk5i7hiKezpcKES2Lkqsag\n", stderr: "" })
[2021-11-02T11:30:45Z INFO  drogue_cloud_tests::resources::apps] Create application: add15185-5326-40b4-b692-97e9e7a25523
[2021-11-02T11:30:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "add15185-5326-40b4-b692-97e9e7a25523"
[2021-11-02T11:30:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App add15185-5326-40b4-b692-97e9e7a25523 created.\n", stderr: "" })
[2021-11-02T11:30:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "add15185-5326-40b4-b692-97e9e7a25523"
[2021-11-02T11:30:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:30:45.041389Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"add15185-5326-40b4-b692-97e9e7a25523\",\n    \"resourceVersion\": \"5b2631dd-7c0c-472f-8ea5-6b413d5db1d4\",\n    \"uid\": \"a43840e3-3972-44ca-8af5-0bda0172e8d2\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:30:45.060806309Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:30:45.060822349Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.060741187Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.060773958Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.060775040Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.060776032Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.060776713Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.060780039Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "add15185-5326-40b4-b692-97e9e7a25523"
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:30:45.041389Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"add15185-5326-40b4-b692-97e9e7a25523\",\n    \"resourceVersion\": \"2c4c564b-8a01-4180-903e-92ad9d943f0a\",\n    \"uid\": \"a43840e3-3972-44ca-8af5-0bda0172e8d2\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:30:45.548426104Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:30:45.548468233Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.095979107Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.104101820Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.274125923Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.283210543Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.548395496Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.548396969Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"eJMoNaK7lICs\",\n        \"username\": \"user-add15185-5326-40b4-b692-97e9e7a25523\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "add15185-5326-40b4-b692-97e9e7a25523"
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:30:45.041389Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"add15185-5326-40b4-b692-97e9e7a25523\",\n    \"resourceVersion\": \"2c4c564b-8a01-4180-903e-92ad9d943f0a\",\n    \"uid\": \"a43840e3-3972-44ca-8af5-0bda0172e8d2\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:30:45.548426104Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:30:45.548468233Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.095979107Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.104101820Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.274125923Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.283210543Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.548395496Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:30:45.548396969Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"eJMoNaK7lICs\",\n        \"username\": \"user-add15185-5326-40b4-b692-97e9e7a25523\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "add15185-5326-40b4-b692-97e9e7a25523" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::tests::coap::command] Sending payload
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::tests::coap::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTI5NDQsImlhdCI6MTYzNTg1MjY0NCwiYXV0aF90aW1lIjoxNjM1ODUyNjQyLCJqdGkiOiJhZjgwN2FlZi0xNmM1LTRlYWEtYmQ0NC0xMDI0NDc0NThiZWMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjlmMTk1NTJjLTI5YmQtNDNiZC1hNDAwLTIzMTJiMTExODAyMiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI5ZjE5NTUyYy0yOWJkLTQzYmQtYTQwMC0yMzEyYjExMTgwMjIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.MSrSY5mmHoqK5tnv424d4TKA3xQxoYHmXysFi8HDxvaFAHcl1yavwBH0_z87dk2BdnomcSUBEQPh1ijpHGS1xX-3LVCyZF4Imp9z-SZ_Eh0KbEpZKfbN6Ibf1S5UB2QVUzcKt4WnpIZ8D4-c-ll-x6TOBVmzBIfVg-JkQS79onhS8ud1Hmjgx7x8Zxqfi7DCdFqSkfCJqptUWdRbLvePpEd35foZIcOpX9PQlN00V1WaWqTLI78u7hisqvNHKbjErFOTlf4eFP_30fOAGs39WKtaocE8sXyllEwlaCh5eYnPTlWRwOAL2kBOJ7AmNujmzk5i7hiKezpcKES2Lkqsag\n", stderr: "" })
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T11:30:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T11:35:47Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T11:35:47Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T11:35:47Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T11:35:48Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T11:35:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "add15185-5326-40b4-b692-97e9e7a25523" "device1"
[2021-11-02T11:35:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T11:35:48Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'add15185-5326-40b4-b692-97e9e7a25523'
[2021-11-02T11:35:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "add15185-5326-40b4-b692-97e9e7a25523"
[2021-11-02T11:35:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App add15185-5326-40b4-b692-97e9e7a25523 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::command::test_command::version_3

**Duration**: 312.062022354s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T11:35:50Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:35:53Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T11:35:54Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:35:55Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTQ3NTUsImlhdCI6MTYzNTg1Mjk1NSwianRpIjoiMGVkMTZiN2UtMmMxNi00ODVhLThjOGItNDY2YzYxYmVhNmU0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjZiMDVlZDktNzNmOC00ZDFmLWEyM2MtMGNhNzU3MTQ5MjYyIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImY2YjA1ZWQ5LTczZjgtNGQxZi1hMjNjLTBjYTc1NzE0OTI2MiJ9.vB4yOymDPt9QHoVsfU8KwS7MbuD04KPnV_8165FE3wk
[2021-11-02T11:35:55Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T11:35:55Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T11:35:55Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTQ3NTUsImlhdCI6MTYzNTg1Mjk1NSwianRpIjoiMGVkMTZiN2UtMmMxNi00ODVhLThjOGItNDY2YzYxYmVhNmU0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjZiMDVlZDktNzNmOC00ZDFmLWEyM2MtMGNhNzU3MTQ5MjYyIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImY2YjA1ZWQ5LTczZjgtNGQxZi1hMjNjLTBjYTc1NzE0OTI2MiJ9.vB4yOymDPt9QHoVsfU8KwS7MbuD04KPnV_8165FE3wk" "--context" "system-tests"
[2021-11-02T11:35:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T11:35:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:35:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:35:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTMyNTYsImlhdCI6MTYzNTg1Mjk1NiwiYXV0aF90aW1lIjoxNjM1ODUyOTUzLCJqdGkiOiIwNDFiNzc5Ny1hZGRlLTRjMjAtYjdiOS1mOGU1MTk4ZDdmM2EiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImY2YjA1ZWQ5LTczZjgtNGQxZi1hMjNjLTBjYTc1NzE0OTI2MiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJmNmIwNWVkOS03M2Y4LTRkMWYtYTIzYy0wY2E3NTcxNDkyNjIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Xw4dUcP4rDhBYYYmgxbhnN6678q4082XyY0Awp0uusW2Wcihruiwy6eGm7wEleZxvHPXoQVeZPvAr4UYDmTa7rKJK3L_NDu8GskU-0VzmC49AvtldtsQ-K5_4ma80GuTRXhNTeopqmsTzdkKqrXhshR_egh5dsW4tlPmDS2SU9JSw_94V2GrNE1rfYQmGSIfiS_FpIUrW4uZKJWkbG8ALn4n6dCPG4od-vljoYDoRko1vBhNKg09KrqYPrG1UcVoY6Gt3nvWLAvNqs0FfkCRhR_2KWQ-5yKP7-3BNzb5f2leQEgKvQ7WePjDM2EHG9rHwOqwCzvMiALfHJtc3AZ5mQ\n", stderr: "" })
[2021-11-02T11:35:56Z INFO  drogue_cloud_tests::resources::apps] Create application: 88ed8f3d-cdbb-4665-b181-617b5ee6e5c9
[2021-11-02T11:35:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "88ed8f3d-cdbb-4665-b181-617b5ee6e5c9"
[2021-11-02T11:35:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 88ed8f3d-cdbb-4665-b181-617b5ee6e5c9 created.\n", stderr: "" })
[2021-11-02T11:35:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "88ed8f3d-cdbb-4665-b181-617b5ee6e5c9"
[2021-11-02T11:35:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:35:56.707049Z\",\n    \"generation\": 1,\n    \"name\": \"88ed8f3d-cdbb-4665-b181-617b5ee6e5c9\",\n    \"resourceVersion\": \"b9e4fe70-6656-4907-963c-3e8505665635\",\n    \"uid\": \"62d5201c-d5a2-4962-8cb8-06d9bd8de0fe\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:35:56.726952365Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}\n", stderr: "" })
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "88ed8f3d-cdbb-4665-b181-617b5ee6e5c9"
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:35:56.707049Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"88ed8f3d-cdbb-4665-b181-617b5ee6e5c9\",\n    \"resourceVersion\": \"458c77ff-894f-43d9-a61b-f47808bc5049\",\n    \"uid\": \"62d5201c-d5a2-4962-8cb8-06d9bd8de0fe\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:35:57.090385583Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:35:57.090339667Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:35:56.765988395Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:35:56.772774625Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:35:56.906911400Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:35:56.915736205Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:35:57.090311875Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:35:57.090313198Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"d7qVd97mQ067\",\n        \"username\": \"user-88ed8f3d-cdbb-4665-b181-617b5ee6e5c9\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "88ed8f3d-cdbb-4665-b181-617b5ee6e5c9"
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:35:56.707049Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"88ed8f3d-cdbb-4665-b181-617b5ee6e5c9\",\n    \"resourceVersion\": \"458c77ff-894f-43d9-a61b-f47808bc5049\",\n    \"uid\": \"62d5201c-d5a2-4962-8cb8-06d9bd8de0fe\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:35:57.090385583Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:35:57.090339667Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:35:56.765988395Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:35:56.772774625Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:35:56.906911400Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:35:56.915736205Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:35:57.090311875Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:35:57.090313198Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"d7qVd97mQ067\",\n        \"username\": \"user-88ed8f3d-cdbb-4665-b181-617b5ee6e5c9\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "88ed8f3d-cdbb-4665-b181-617b5ee6e5c9" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::tests::coap::command] Sending payload
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::tests::coap::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTMyNTYsImlhdCI6MTYzNTg1Mjk1NiwiYXV0aF90aW1lIjoxNjM1ODUyOTUzLCJqdGkiOiIwNDFiNzc5Ny1hZGRlLTRjMjAtYjdiOS1mOGU1MTk4ZDdmM2EiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImY2YjA1ZWQ5LTczZjgtNGQxZi1hMjNjLTBjYTc1NzE0OTI2MiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJmNmIwNWVkOS03M2Y4LTRkMWYtYTIzYy0wY2E3NTcxNDkyNjIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Xw4dUcP4rDhBYYYmgxbhnN6678q4082XyY0Awp0uusW2Wcihruiwy6eGm7wEleZxvHPXoQVeZPvAr4UYDmTa7rKJK3L_NDu8GskU-0VzmC49AvtldtsQ-K5_4ma80GuTRXhNTeopqmsTzdkKqrXhshR_egh5dsW4tlPmDS2SU9JSw_94V2GrNE1rfYQmGSIfiS_FpIUrW4uZKJWkbG8ALn4n6dCPG4od-vljoYDoRko1vBhNKg09KrqYPrG1UcVoY6Gt3nvWLAvNqs0FfkCRhR_2KWQ-5yKP7-3BNzb5f2leQEgKvQ7WePjDM2EHG9rHwOqwCzvMiALfHJtc3AZ5mQ\n", stderr: "" })
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:35:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T11:40:59Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T11:40:59Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T11:40:59Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T11:41:00Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T11:41:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "88ed8f3d-cdbb-4665-b181-617b5ee6e5c9" "device1"
[2021-11-02T11:41:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T11:41:00Z INFO  drogue_cloud_tests::resources::apps] Destroy application '88ed8f3d-cdbb-4665-b181-617b5ee6e5c9'
[2021-11-02T11:41:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "88ed8f3d-cdbb-4665-b181-617b5ee6e5c9"
[2021-11-02T11:41:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 88ed8f3d-cdbb-4665-b181-617b5ee6e5c9 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_pass::version_1

**Duration**: 311.209257748s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T11:41:00Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T11:41:02Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:41:05Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T11:41:06Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:41:08Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTUwNjgsImlhdCI6MTYzNTg1MzI2OCwianRpIjoiMzVmNDBiODEtN2JiOC00ZDcyLTlhOWEtNTdjMWU4Y2JhZGEwIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNTlkODJkYTctNjU2Yi00MjVjLTk3ZjktYjFmZTFiYzA2MThhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjU5ZDgyZGE3LTY1NmItNDI1Yy05N2Y5LWIxZmUxYmMwNjE4YSJ9.W2SffjtYZkDvViaFj9UO_o1v8bPDL6SMPbnoaRf7gLA
[2021-11-02T11:41:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T11:41:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T11:41:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTUwNjgsImlhdCI6MTYzNTg1MzI2OCwianRpIjoiMzVmNDBiODEtN2JiOC00ZDcyLTlhOWEtNTdjMWU4Y2JhZGEwIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNTlkODJkYTctNjU2Yi00MjVjLTk3ZjktYjFmZTFiYzA2MThhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjU5ZDgyZGE3LTY1NmItNDI1Yy05N2Y5LWIxZmUxYmMwNjE4YSJ9.W2SffjtYZkDvViaFj9UO_o1v8bPDL6SMPbnoaRf7gLA" "--context" "system-tests"
[2021-11-02T11:41:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T11:41:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:41:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:41:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTM1NjgsImlhdCI6MTYzNTg1MzI2OCwiYXV0aF90aW1lIjoxNjM1ODUzMjY1LCJqdGkiOiIwOTUyYjc1MC1kMDliLTRhYzYtOWQ4My1iNDRkNTM2NGM5MjgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjU5ZDgyZGE3LTY1NmItNDI1Yy05N2Y5LWIxZmUxYmMwNjE4YSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI1OWQ4MmRhNy02NTZiLTQyNWMtOTdmOS1iMWZlMWJjMDYxOGEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.gSKXOPARMXVCKue9ywTCb7jUv9MYY-uR8RaEvn5VKVMMHtqP2RdTSPgW96ulQIj-Kl5QCrLr5inChv-aHS7hkPq-0G-tE6Bdkxl7lSsRv6V2cjksP3hC5cSMltzLKOmWOB8ROTuSEThdm2Y02-psi7ztyvOrkz2elCAE2UCILqoQd5OAFz98H1ZoFpqoxjusH6_qMX5svZmGjgyNWI28QcDiNeEWH7A8fvhqvZZiqRHcrvH5CdWq6xRbhV0lZwkxpbPKLVRcAOMVF2GkVy_0EGbHcm8PIacC_sQMLPmzekqkCwzK7RGyL-Z1iz1Q_ZcQHxpJigpOMeORRpvlaz8O6Q\n", stderr: "" })
[2021-11-02T11:41:08Z INFO  drogue_cloud_tests::resources::apps] Create application: 73a811d9-6d6a-448d-8137-81b62f4828e0
[2021-11-02T11:41:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "73a811d9-6d6a-448d-8137-81b62f4828e0"
[2021-11-02T11:41:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 73a811d9-6d6a-448d-8137-81b62f4828e0 created.\n", stderr: "" })
[2021-11-02T11:41:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "73a811d9-6d6a-448d-8137-81b62f4828e0"
[2021-11-02T11:41:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:41:08.991219Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"73a811d9-6d6a-448d-8137-81b62f4828e0\",\n    \"resourceVersion\": \"f715c11c-20f8-41b6-bf37-99ac2b64ec9b\",\n    \"uid\": \"ad4a1e32-bf39-4c84-8b41-e379d6368224\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:41:09.015941116Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:41:09.015925788Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.015869763Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.015870595Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.015871085Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.015871797Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.015872388Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.015874391Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "73a811d9-6d6a-448d-8137-81b62f4828e0"
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:41:08.991219Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"73a811d9-6d6a-448d-8137-81b62f4828e0\",\n    \"resourceVersion\": \"1c63621d-7ec0-4404-8849-26d3a31b63d8\",\n    \"uid\": \"ad4a1e32-bf39-4c84-8b41-e379d6368224\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:41:09.286408362Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:41:09.286380029Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.053260913Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.061376143Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.145746753Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.154653715Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.286356485Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.286357777Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Ob1naohYFy4y\",\n        \"username\": \"user-73a811d9-6d6a-448d-8137-81b62f4828e0\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "73a811d9-6d6a-448d-8137-81b62f4828e0"
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:41:08.991219Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"73a811d9-6d6a-448d-8137-81b62f4828e0\",\n    \"resourceVersion\": \"1c63621d-7ec0-4404-8849-26d3a31b63d8\",\n    \"uid\": \"ad4a1e32-bf39-4c84-8b41-e379d6368224\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:41:09.286408362Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:41:09.286380029Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.053260913Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.061376143Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.145746753Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.154653715Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.286356485Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:41:09.286357777Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Ob1naohYFy4y\",\n        \"username\": \"user-73a811d9-6d6a-448d-8137-81b62f4828e0\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "73a811d9-6d6a-448d-8137-81b62f4828e0" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTM1NjgsImlhdCI6MTYzNTg1MzI2OCwiYXV0aF90aW1lIjoxNjM1ODUzMjY1LCJqdGkiOiIwOTUyYjc1MC1kMDliLTRhYzYtOWQ4My1iNDRkNTM2NGM5MjgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjU5ZDgyZGE3LTY1NmItNDI1Yy05N2Y5LWIxZmUxYmMwNjE4YSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI1OWQ4MmRhNy02NTZiLTQyNWMtOTdmOS1iMWZlMWJjMDYxOGEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.gSKXOPARMXVCKue9ywTCb7jUv9MYY-uR8RaEvn5VKVMMHtqP2RdTSPgW96ulQIj-Kl5QCrLr5inChv-aHS7hkPq-0G-tE6Bdkxl7lSsRv6V2cjksP3hC5cSMltzLKOmWOB8ROTuSEThdm2Y02-psi7ztyvOrkz2elCAE2UCILqoQd5OAFz98H1ZoFpqoxjusH6_qMX5svZmGjgyNWI28QcDiNeEWH7A8fvhqvZZiqRHcrvH5CdWq6xRbhV0lZwkxpbPKLVRcAOMVF2GkVy_0EGbHcm8PIacC_sQMLPmzekqkCwzK7RGyL-Z1iz1Q_ZcQHxpJigpOMeORRpvlaz8O6Q\n", stderr: "" })
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T11:41:10Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T11:46:11Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T11:46:11Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T11:46:11Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T11:46:11Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T11:46:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "73a811d9-6d6a-448d-8137-81b62f4828e0" "device1"
[2021-11-02T11:46:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T11:46:11Z INFO  drogue_cloud_tests::resources::apps] Destroy application '73a811d9-6d6a-448d-8137-81b62f4828e0'
[2021-11-02T11:46:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "73a811d9-6d6a-448d-8137-81b62f4828e0"
[2021-11-02T11:46:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 73a811d9-6d6a-448d-8137-81b62f4828e0 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_pass::version_2

**Duration**: 311.831069779s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T11:46:12Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T11:46:13Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:46:16Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T11:46:17Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTUzNzgsImlhdCI6MTYzNTg1MzU3OCwianRpIjoiODY1MWViZDQtYzE0OC00N2EwLWI0NzEtMjI1M2UwNjRkZTRjIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMTRlYWY5MmUtODFhYy00NTg4LWE1OTMtZTNkM2Q0NGEyOGJjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjE0ZWFmOTJlLTgxYWMtNDU4OC1hNTkzLWUzZDNkNDRhMjhiYyJ9.miuRiKm--uIldMzN6ya7_O5AWjajg8-SKD4fT9ljue4
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTUzNzgsImlhdCI6MTYzNTg1MzU3OCwianRpIjoiODY1MWViZDQtYzE0OC00N2EwLWI0NzEtMjI1M2UwNjRkZTRjIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMTRlYWY5MmUtODFhYy00NTg4LWE1OTMtZTNkM2Q0NGEyOGJjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjE0ZWFmOTJlLTgxYWMtNDU4OC1hNTkzLWUzZDNkNDRhMjhiYyJ9.miuRiKm--uIldMzN6ya7_O5AWjajg8-SKD4fT9ljue4" "--context" "system-tests"
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTM4NzksImlhdCI6MTYzNTg1MzU3OSwiYXV0aF90aW1lIjoxNjM1ODUzNTc3LCJqdGkiOiI5OGZmYjY4ZC0zYjAyLTRhZjItYThiYi1iYjI4ZTgzMjhjODAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjE0ZWFmOTJlLTgxYWMtNDU4OC1hNTkzLWUzZDNkNDRhMjhiYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIxNGVhZjkyZS04MWFjLTQ1ODgtYTU5My1lM2QzZDQ0YTI4YmMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.nz0Ppt141eYpRjFj03_KaA-eL78Xwx6jpFvB66qoL9ArdCsrF3ReiwgMWlYW0A6pbWElBfHJk5SYLGWuvSFotpyS1m5WZU3fWXOkijj32KDOnOZEzDM1vfNLXUGpiIl0VAzOCLtdFfNg8ouAIINrQIAiXsPCz1nTXujiVCqesGpy5VYSoe4edV7qUXEp85J4WF7_0v7pJtR_dbuv6Jci4LLGRZm4HBOBSLMvHiYbXUe5m0e55N0P6C10FaAJL55pl7_LkkTo7ILPmmSA1z81j4CaZLCWSec0cM7lgL8_J9mb4a_n3Ob4g8iwLjzdLBb18dRAiHgXZQBmb1Xzlw69og\n", stderr: "" })
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::resources::apps] Create application: b087d3e7-ba27-47c1-b360-53e6a003de0f
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "b087d3e7-ba27-47c1-b360-53e6a003de0f"
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b087d3e7-ba27-47c1-b360-53e6a003de0f created.\n", stderr: "" })
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b087d3e7-ba27-47c1-b360-53e6a003de0f"
[2021-11-02T11:46:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:46:19.812369Z\",\n    \"generation\": 1,\n    \"name\": \"b087d3e7-ba27-47c1-b360-53e6a003de0f\",\n    \"resourceVersion\": \"3a9255e2-3114-4a8b-b72b-3384ea05802c\",\n    \"uid\": \"a25d0867-12a2-4585-8552-8fa0aabb7cb6\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:46:19.826072915Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}\n", stderr: "" })
[2021-11-02T11:46:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b087d3e7-ba27-47c1-b360-53e6a003de0f"
[2021-11-02T11:46:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:46:19.812369Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"b087d3e7-ba27-47c1-b360-53e6a003de0f\",\n    \"resourceVersion\": \"60529d2c-49ae-428e-81b4-caa4a6d21477\",\n    \"uid\": \"a25d0867-12a2-4585-8552-8fa0aabb7cb6\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:46:20.119393973Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:46:20.119357625Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:46:19.877094493Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:46:19.886897040Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:46:19.978046784Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:46:19.984962172Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:46:20.119327348Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:46:20.119328750Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"AxpJbPTabV9o\",\n        \"username\": \"user-b087d3e7-ba27-47c1-b360-53e6a003de0f\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:46:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b087d3e7-ba27-47c1-b360-53e6a003de0f"
[2021-11-02T11:46:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:46:19.812369Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"b087d3e7-ba27-47c1-b360-53e6a003de0f\",\n    \"resourceVersion\": \"60529d2c-49ae-428e-81b4-caa4a6d21477\",\n    \"uid\": \"a25d0867-12a2-4585-8552-8fa0aabb7cb6\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:46:20.119393973Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:46:20.119357625Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:46:19.877094493Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:46:19.886897040Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:46:19.978046784Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:46:19.984962172Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:46:20.119327348Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:46:20.119328750Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"AxpJbPTabV9o\",\n        \"username\": \"user-b087d3e7-ba27-47c1-b360-53e6a003de0f\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:46:20Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T11:46:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "b087d3e7-ba27-47c1-b360-53e6a003de0f" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T11:46:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T11:46:20Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T11:46:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:46:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTM4NzksImlhdCI6MTYzNTg1MzU3OSwiYXV0aF90aW1lIjoxNjM1ODUzNTc3LCJqdGkiOiI5OGZmYjY4ZC0zYjAyLTRhZjItYThiYi1iYjI4ZTgzMjhjODAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjE0ZWFmOTJlLTgxYWMtNDU4OC1hNTkzLWUzZDNkNDRhMjhiYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIxNGVhZjkyZS04MWFjLTQ1ODgtYTU5My1lM2QzZDQ0YTI4YmMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.nz0Ppt141eYpRjFj03_KaA-eL78Xwx6jpFvB66qoL9ArdCsrF3ReiwgMWlYW0A6pbWElBfHJk5SYLGWuvSFotpyS1m5WZU3fWXOkijj32KDOnOZEzDM1vfNLXUGpiIl0VAzOCLtdFfNg8ouAIINrQIAiXsPCz1nTXujiVCqesGpy5VYSoe4edV7qUXEp85J4WF7_0v7pJtR_dbuv6Jci4LLGRZm4HBOBSLMvHiYbXUe5m0e55N0P6C10FaAJL55pl7_LkkTo7ILPmmSA1z81j4CaZLCWSec0cM7lgL8_J9mb4a_n3Ob4g8iwLjzdLBb18dRAiHgXZQBmb1Xzlw69og\n", stderr: "" })
[2021-11-02T11:46:21Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T11:46:21Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T11:46:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:46:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T11:51:22Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T11:51:22Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T11:51:22Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T11:51:23Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T11:51:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "b087d3e7-ba27-47c1-b360-53e6a003de0f" "device1"
[2021-11-02T11:51:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T11:51:23Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'b087d3e7-ba27-47c1-b360-53e6a003de0f'
[2021-11-02T11:51:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "b087d3e7-ba27-47c1-b360-53e6a003de0f"
[2021-11-02T11:51:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b087d3e7-ba27-47c1-b360-53e6a003de0f deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_pass::version_3

**Duration**: 312.056269821s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T11:51:23Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T11:51:25Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:51:28Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T11:51:29Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTU2OTAsImlhdCI6MTYzNTg1Mzg5MCwianRpIjoiNWFmMDg4NjgtM2RkNy00MDA1LTk3YzItYWExOTUxYjU1MDU4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNjc3NWNjMjQtMDVlYS00NTU4LTg0Y2EtMjdlOGM0MGY5ZTI4Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjY3NzVjYzI0LTA1ZWEtNDU1OC04NGNhLTI3ZThjNDBmOWUyOCJ9.BtC1h9iZ6gQoO4xQ1g06kGNPC5K9OeRtP07hr_DMXVI
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTU2OTAsImlhdCI6MTYzNTg1Mzg5MCwianRpIjoiNWFmMDg4NjgtM2RkNy00MDA1LTk3YzItYWExOTUxYjU1MDU4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNjc3NWNjMjQtMDVlYS00NTU4LTg0Y2EtMjdlOGM0MGY5ZTI4Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjY3NzVjYzI0LTA1ZWEtNDU1OC04NGNhLTI3ZThjNDBmOWUyOCJ9.BtC1h9iZ6gQoO4xQ1g06kGNPC5K9OeRtP07hr_DMXVI" "--context" "system-tests"
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTQxOTEsImlhdCI6MTYzNTg1Mzg5MSwiYXV0aF90aW1lIjoxNjM1ODUzODg4LCJqdGkiOiJmNGVmMzUyOC00YjE4LTRhNmItYWZhMS1kYTZmZTA5ODgzZjYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjY3NzVjYzI0LTA1ZWEtNDU1OC04NGNhLTI3ZThjNDBmOWUyOCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI2Nzc1Y2MyNC0wNWVhLTQ1NTgtODRjYS0yN2U4YzQwZjllMjgiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.A8y1yJg7pd5d9smTp7SToZWy3SzFJUDpp0NIQjgveT2Nw3lUEi4LQLurVJyok8Ov18lhW0S3D5gk8T_mw4W6Ts2-N4AlXFTcDYKk_VVjYF7lShNy5GIiJHIJYETKM4Oa-1XDP-j9CwJ3sIsUcWNaD0oxajwDJSj6NN7Eat4ISerC1Zu75qejidh00TejsN8clsiugiFBRfa0_n2CwbsCEHHV34vc0hsep6kxj_6AMObMKtIQbCQt7LtncSjP-4EhpC6IRMYWDsHFowrqeoFfkrRrpCMlg17ozCDkTd7-4Gzi8hiE5OKPPA3bI3q-LCFOxy65DMazBW-N8MYKUluXbA\n", stderr: "" })
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::resources::apps] Create application: 769ffb53-8451-4f98-83dc-cd8ab5dd076c
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "769ffb53-8451-4f98-83dc-cd8ab5dd076c"
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 769ffb53-8451-4f98-83dc-cd8ab5dd076c created.\n", stderr: "" })
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "769ffb53-8451-4f98-83dc-cd8ab5dd076c"
[2021-11-02T11:51:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:51:31.882030Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"769ffb53-8451-4f98-83dc-cd8ab5dd076c\",\n    \"resourceVersion\": \"ea827441-39d1-415c-8c35-0eefc72981f3\",\n    \"uid\": \"a7c73052-6a8a-4edb-9060-133f4ab8544e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:51:31.895302760Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:51:31.895343887Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:31.895264749Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:31.895267083Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:31.895267814Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:31.895268636Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:31.895269247Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:31.895272724Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:51:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "769ffb53-8451-4f98-83dc-cd8ab5dd076c"
[2021-11-02T11:51:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:51:31.882030Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"769ffb53-8451-4f98-83dc-cd8ab5dd076c\",\n    \"resourceVersion\": \"7b9a80d5-b215-4bea-a210-a8e869c6eee1\",\n    \"uid\": \"a7c73052-6a8a-4edb-9060-133f4ab8544e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:51:32.205930780Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:51:32.206059682Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:31.924742832Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:31.932203976Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:32.018842313Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:32.026820013Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:32.205903128Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:32.205904591Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"wwfreAP9HRcI\",\n        \"username\": \"user-769ffb53-8451-4f98-83dc-cd8ab5dd076c\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:51:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "769ffb53-8451-4f98-83dc-cd8ab5dd076c"
[2021-11-02T11:51:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:51:31.882030Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"769ffb53-8451-4f98-83dc-cd8ab5dd076c\",\n    \"resourceVersion\": \"7b9a80d5-b215-4bea-a210-a8e869c6eee1\",\n    \"uid\": \"a7c73052-6a8a-4edb-9060-133f4ab8544e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:51:32.205930780Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:51:32.206059682Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:31.924742832Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:31.932203976Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:32.018842313Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:32.026820013Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:32.205903128Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:51:32.205904591Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"wwfreAP9HRcI\",\n        \"username\": \"user-769ffb53-8451-4f98-83dc-cd8ab5dd076c\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:51:32Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T11:51:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "769ffb53-8451-4f98-83dc-cd8ab5dd076c" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T11:51:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T11:51:32Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T11:51:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:51:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTQxOTEsImlhdCI6MTYzNTg1Mzg5MSwiYXV0aF90aW1lIjoxNjM1ODUzODg4LCJqdGkiOiJmNGVmMzUyOC00YjE4LTRhNmItYWZhMS1kYTZmZTA5ODgzZjYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjY3NzVjYzI0LTA1ZWEtNDU1OC04NGNhLTI3ZThjNDBmOWUyOCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI2Nzc1Y2MyNC0wNWVhLTQ1NTgtODRjYS0yN2U4YzQwZjllMjgiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.A8y1yJg7pd5d9smTp7SToZWy3SzFJUDpp0NIQjgveT2Nw3lUEi4LQLurVJyok8Ov18lhW0S3D5gk8T_mw4W6Ts2-N4AlXFTcDYKk_VVjYF7lShNy5GIiJHIJYETKM4Oa-1XDP-j9CwJ3sIsUcWNaD0oxajwDJSj6NN7Eat4ISerC1Zu75qejidh00TejsN8clsiugiFBRfa0_n2CwbsCEHHV34vc0hsep6kxj_6AMObMKtIQbCQt7LtncSjP-4EhpC6IRMYWDsHFowrqeoFfkrRrpCMlg17ozCDkTd7-4Gzi8hiE5OKPPA3bI3q-LCFOxy65DMazBW-N8MYKUluXbA\n", stderr: "" })
[2021-11-02T11:51:33Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T11:51:33Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T11:51:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:51:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T11:56:34Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T11:56:34Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T11:56:34Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T11:56:35Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T11:56:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "769ffb53-8451-4f98-83dc-cd8ab5dd076c" "device1"
[2021-11-02T11:56:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T11:56:35Z INFO  drogue_cloud_tests::resources::apps] Destroy application '769ffb53-8451-4f98-83dc-cd8ab5dd076c'
[2021-11-02T11:56:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "769ffb53-8451-4f98-83dc-cd8ab5dd076c"
[2021-11-02T11:56:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 769ffb53-8451-4f98-83dc-cd8ab5dd076c deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user::version_1

**Duration**: 311.417818287s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T11:56:35Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T11:56:37Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:56:40Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T11:56:42Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T11:56:43Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTYwMDMsImlhdCI6MTYzNTg1NDIwMywianRpIjoiY2QyYjZlNzEtZDYzMy00OWFkLWIyMzktNTZjZWE0NjgwMDQ3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMmVmMTNiZmItZDA5Ny00MzAyLTk4YzMtM2I1ZTg3OWM2OWFhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjJlZjEzYmZiLWQwOTctNDMwMi05OGMzLTNiNWU4NzljNjlhYSJ9.a0yQfHl1ppt4Uj7HZdf7JZlmslR2FZaFhlzrTzNQ9Qg
[2021-11-02T11:56:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T11:56:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T11:56:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTYwMDMsImlhdCI6MTYzNTg1NDIwMywianRpIjoiY2QyYjZlNzEtZDYzMy00OWFkLWIyMzktNTZjZWE0NjgwMDQ3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMmVmMTNiZmItZDA5Ny00MzAyLTk4YzMtM2I1ZTg3OWM2OWFhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjJlZjEzYmZiLWQwOTctNDMwMi05OGMzLTNiNWU4NzljNjlhYSJ9.a0yQfHl1ppt4Uj7HZdf7JZlmslR2FZaFhlzrTzNQ9Qg" "--context" "system-tests"
[2021-11-02T11:56:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T11:56:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:56:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:56:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTQ1MDMsImlhdCI6MTYzNTg1NDIwMywiYXV0aF90aW1lIjoxNjM1ODU0MjAxLCJqdGkiOiI4ODg2ODRiNC05ODk1LTRmNWItYjNlYi1kNDYzNWJiMjE1YTkiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjJlZjEzYmZiLWQwOTctNDMwMi05OGMzLTNiNWU4NzljNjlhYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIyZWYxM2JmYi1kMDk3LTQzMDItOThjMy0zYjVlODc5YzY5YWEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.nBsGIXyI3-aU_786LhtCgMfaUj3avRMVNK2A0QeQ2bkOd3nVEuYDBpvem0WgzkhKTyzdkz8M6wY5KQ3Y0jv7XA3HzMWnOvfOOzpbJ0jrK2k3mZtK579kAx_SjHrj_yVhfSQOW4w0yW9bOBFUMzwrQATKtdg-bT5XC_g6XZOvpsgdRC3xdmrp2bEAjawPm5cdLKibl_6XwDYJAWhldVHB3bRxs6QFgHEJJzq1whVZtQZ9Ve7JYleoVYPRGFlTf5Ib5XQpodMHooR2j-Zmkmz-y9X4up9Z-I02vAksjD59XcRTsxjUvm8WSXrp6F-j613hG0bzSHYA9oYDvAVnrWoZYA\n", stderr: "" })
[2021-11-02T11:56:44Z INFO  drogue_cloud_tests::resources::apps] Create application: b98e2377-45f9-40af-b149-5ca37eba23cb
[2021-11-02T11:56:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "b98e2377-45f9-40af-b149-5ca37eba23cb"
[2021-11-02T11:56:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b98e2377-45f9-40af-b149-5ca37eba23cb created.\n", stderr: "" })
[2021-11-02T11:56:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b98e2377-45f9-40af-b149-5ca37eba23cb"
[2021-11-02T11:56:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:56:44.362748Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"b98e2377-45f9-40af-b149-5ca37eba23cb\",\n    \"resourceVersion\": \"88988ac8-9be9-4893-b43b-3bed1cba92ab\",\n    \"uid\": \"150ef003-70d5-40da-8c46-f62094958687\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:56:44.378309796Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:56:44.378329994Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.378242790Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.378245235Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.378245977Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.378246728Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.378247319Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.378250776Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b98e2377-45f9-40af-b149-5ca37eba23cb"
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:56:44.362748Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"b98e2377-45f9-40af-b149-5ca37eba23cb\",\n    \"resourceVersion\": \"97c8f38a-8d1b-4858-8aac-82deeac4a1cb\",\n    \"uid\": \"150ef003-70d5-40da-8c46-f62094958687\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:56:44.691206086Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:56:44.691253796Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.413538726Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.424747294Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.543226208Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.550688876Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.691173896Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.691175218Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"PnSNR0TrtXdL\",\n        \"username\": \"user-b98e2377-45f9-40af-b149-5ca37eba23cb\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b98e2377-45f9-40af-b149-5ca37eba23cb"
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T11:56:44.362748Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"b98e2377-45f9-40af-b149-5ca37eba23cb\",\n    \"resourceVersion\": \"97c8f38a-8d1b-4858-8aac-82deeac4a1cb\",\n    \"uid\": \"150ef003-70d5-40da-8c46-f62094958687\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:56:44.691206086Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T11:56:44.691253796Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.413538726Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.424747294Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.543226208Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.550688876Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.691173896Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T11:56:44.691175218Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"PnSNR0TrtXdL\",\n        \"username\": \"user-b98e2377-45f9-40af-b149-5ca37eba23cb\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "b98e2377-45f9-40af-b149-5ca37eba23cb" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTQ1MDMsImlhdCI6MTYzNTg1NDIwMywiYXV0aF90aW1lIjoxNjM1ODU0MjAxLCJqdGkiOiI4ODg2ODRiNC05ODk1LTRmNWItYjNlYi1kNDYzNWJiMjE1YTkiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjJlZjEzYmZiLWQwOTctNDMwMi05OGMzLTNiNWU4NzljNjlhYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIyZWYxM2JmYi1kMDk3LTQzMDItOThjMy0zYjVlODc5YzY5YWEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.nBsGIXyI3-aU_786LhtCgMfaUj3avRMVNK2A0QeQ2bkOd3nVEuYDBpvem0WgzkhKTyzdkz8M6wY5KQ3Y0jv7XA3HzMWnOvfOOzpbJ0jrK2k3mZtK579kAx_SjHrj_yVhfSQOW4w0yW9bOBFUMzwrQATKtdg-bT5XC_g6XZOvpsgdRC3xdmrp2bEAjawPm5cdLKibl_6XwDYJAWhldVHB3bRxs6QFgHEJJzq1whVZtQZ9Ve7JYleoVYPRGFlTf5Ib5XQpodMHooR2j-Zmkmz-y9X4up9Z-I02vAksjD59XcRTsxjUvm8WSXrp6F-j613hG0bzSHYA9oYDvAVnrWoZYA\n", stderr: "" })
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T11:56:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:01:46Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:01:46Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:01:46Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:01:47Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:01:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "b98e2377-45f9-40af-b149-5ca37eba23cb" "device1"
[2021-11-02T12:01:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:01:47Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'b98e2377-45f9-40af-b149-5ca37eba23cb'
[2021-11-02T12:01:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "b98e2377-45f9-40af-b149-5ca37eba23cb"
[2021-11-02T12:01:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b98e2377-45f9-40af-b149-5ca37eba23cb deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user::version_2

**Duration**: 310.956017519s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:01:47Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T12:01:49Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:01:52Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:01:53Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:01:54Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTYzMTQsImlhdCI6MTYzNTg1NDUxNCwianRpIjoiNWVlYWQ5N2ItMWMxZC00ODIyLTk2YzUtMDY5ZDRmMDBiZWI1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNjJjN2JiMmMtM2Y1MC00MjEyLWIxOWMtNGFiZjZkMmZkODk0Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjYyYzdiYjJjLTNmNTAtNDIxMi1iMTljLTRhYmY2ZDJmZDg5NCJ9.ZryoeIxnJ_EiTzZkfC0xJgV5ap2F0VM_NvnleoQ2Zrw
[2021-11-02T12:01:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:01:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:01:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTYzMTQsImlhdCI6MTYzNTg1NDUxNCwianRpIjoiNWVlYWQ5N2ItMWMxZC00ODIyLTk2YzUtMDY5ZDRmMDBiZWI1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNjJjN2JiMmMtM2Y1MC00MjEyLWIxOWMtNGFiZjZkMmZkODk0Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjYyYzdiYjJjLTNmNTAtNDIxMi1iMTljLTRhYmY2ZDJmZDg5NCJ9.ZryoeIxnJ_EiTzZkfC0xJgV5ap2F0VM_NvnleoQ2Zrw" "--context" "system-tests"
[2021-11-02T12:01:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:01:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:01:55Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:01:55Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTQ4MTQsImlhdCI6MTYzNTg1NDUxNCwiYXV0aF90aW1lIjoxNjM1ODU0NTEyLCJqdGkiOiIwMmQ5ZGU0YS05OWQwLTRmZWQtYjdmYy1jMTFmZGE3OWUzZmIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjYyYzdiYjJjLTNmNTAtNDIxMi1iMTljLTRhYmY2ZDJmZDg5NCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI2MmM3YmIyYy0zZjUwLTQyMTItYjE5Yy00YWJmNmQyZmQ4OTQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.YHLtHjggK01VuWtB2O1tX7Cur6P1ft8Xh8hrNRzAL1-4N4XdIw3S35weHhVwZHp9YUnDz24ZCb1NJ2JCui_3SybUykO1fur-Z0b1hMTRMaBVLqQpmqKaii7HMjKAYho-2oS8EmGIo-uFFWS-OB0snkrP-t1TsAEPHA43R_cemPiF3ioezNaYJSm4AugbXRkChxhleMN9sVgpx6cwKNg4MnRCcxKbo4EqlSq6H6I-MkTGe78Hdx_qOnQow13kF_oHVwh6Oeb4OQl0i8DGWrpGBM85HVlIUsKh7txiCmpAkoafmRXo1VTRLt7Jq3hTmjYkCtkCwJ_Vf6aC0yo9CiEM9w\n", stderr: "" })
[2021-11-02T12:01:55Z INFO  drogue_cloud_tests::resources::apps] Create application: ca9d8185-98af-4e28-b4df-7bd89f40d7d7
[2021-11-02T12:01:55Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "ca9d8185-98af-4e28-b4df-7bd89f40d7d7"
[2021-11-02T12:01:55Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App ca9d8185-98af-4e28-b4df-7bd89f40d7d7 created.\n", stderr: "" })
[2021-11-02T12:01:55Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ca9d8185-98af-4e28-b4df-7bd89f40d7d7"
[2021-11-02T12:01:55Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:01:55.398030Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"ca9d8185-98af-4e28-b4df-7bd89f40d7d7\",\n    \"resourceVersion\": \"ce9741c6-c66b-4093-8718-f007c88febc5\",\n    \"uid\": \"77c7b1ee-82cb-4aa6-a19a-b25e7a7565b7\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:01:55.420752172Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:01:55.420736863Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.420688503Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.420689425Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.420689836Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.420690307Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.420690858Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.420692321Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ca9d8185-98af-4e28-b4df-7bd89f40d7d7"
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:01:55.398030Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"ca9d8185-98af-4e28-b4df-7bd89f40d7d7\",\n    \"resourceVersion\": \"c916701b-ef9e-4990-8c73-45582f78e963\",\n    \"uid\": \"77c7b1ee-82cb-4aa6-a19a-b25e7a7565b7\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:01:55.698480060Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:01:55.698430237Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.449346565Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.457941536Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.565375551Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.580405028Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.698399440Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.698400923Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"QkJpQZPxDTH7\",\n        \"username\": \"user-ca9d8185-98af-4e28-b4df-7bd89f40d7d7\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ca9d8185-98af-4e28-b4df-7bd89f40d7d7"
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:01:55.398030Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"ca9d8185-98af-4e28-b4df-7bd89f40d7d7\",\n    \"resourceVersion\": \"c916701b-ef9e-4990-8c73-45582f78e963\",\n    \"uid\": \"77c7b1ee-82cb-4aa6-a19a-b25e7a7565b7\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:01:55.698480060Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:01:55.698430237Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.449346565Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.457941536Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.565375551Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.580405028Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.698399440Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:01:55.698400923Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"QkJpQZPxDTH7\",\n        \"username\": \"user-ca9d8185-98af-4e28-b4df-7bd89f40d7d7\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "ca9d8185-98af-4e28-b4df-7bd89f40d7d7" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTQ4MTQsImlhdCI6MTYzNTg1NDUxNCwiYXV0aF90aW1lIjoxNjM1ODU0NTEyLCJqdGkiOiIwMmQ5ZGU0YS05OWQwLTRmZWQtYjdmYy1jMTFmZGE3OWUzZmIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjYyYzdiYjJjLTNmNTAtNDIxMi1iMTljLTRhYmY2ZDJmZDg5NCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI2MmM3YmIyYy0zZjUwLTQyMTItYjE5Yy00YWJmNmQyZmQ4OTQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.YHLtHjggK01VuWtB2O1tX7Cur6P1ft8Xh8hrNRzAL1-4N4XdIw3S35weHhVwZHp9YUnDz24ZCb1NJ2JCui_3SybUykO1fur-Z0b1hMTRMaBVLqQpmqKaii7HMjKAYho-2oS8EmGIo-uFFWS-OB0snkrP-t1TsAEPHA43R_cemPiF3ioezNaYJSm4AugbXRkChxhleMN9sVgpx6cwKNg4MnRCcxKbo4EqlSq6H6I-MkTGe78Hdx_qOnQow13kF_oHVwh6Oeb4OQl0i8DGWrpGBM85HVlIUsKh7txiCmpAkoafmRXo1VTRLt7Jq3hTmjYkCtkCwJ_Vf6aC0yo9CiEM9w\n", stderr: "" })
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:01:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:06:57Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:06:57Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:06:57Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:06:58Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:06:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "ca9d8185-98af-4e28-b4df-7bd89f40d7d7" "device1"
[2021-11-02T12:06:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:06:58Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'ca9d8185-98af-4e28-b4df-7bd89f40d7d7'
[2021-11-02T12:06:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "ca9d8185-98af-4e28-b4df-7bd89f40d7d7"
[2021-11-02T12:06:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App ca9d8185-98af-4e28-b4df-7bd89f40d7d7 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user::version_3

**Duration**: 311.031155534s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:06:58Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T12:07:00Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:07:03Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:07:04Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:07:05Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTY2MjUsImlhdCI6MTYzNTg1NDgyNSwianRpIjoiNzAwZTNhODYtNjk0Yi00YmYyLWJiZDMtMmE1Mzg1OGI0Y2RkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjhlMmQ3ODAtYTU4Ny00MTBkLWI5MjAtOGMyNDYwMmRlZTljIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjI4ZTJkNzgwLWE1ODctNDEwZC1iOTIwLThjMjQ2MDJkZWU5YyJ9.b99d814RGHutiOZmZMVCYDjyzwUBWAJCFpc0h7g_uYQ
[2021-11-02T12:07:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:07:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:07:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTY2MjUsImlhdCI6MTYzNTg1NDgyNSwianRpIjoiNzAwZTNhODYtNjk0Yi00YmYyLWJiZDMtMmE1Mzg1OGI0Y2RkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjhlMmQ3ODAtYTU4Ny00MTBkLWI5MjAtOGMyNDYwMmRlZTljIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjI4ZTJkNzgwLWE1ODctNDEwZC1iOTIwLThjMjQ2MDJkZWU5YyJ9.b99d814RGHutiOZmZMVCYDjyzwUBWAJCFpc0h7g_uYQ" "--context" "system-tests"
[2021-11-02T12:07:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:07:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:07:06Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:07:06Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTUxMjUsImlhdCI6MTYzNTg1NDgyNSwiYXV0aF90aW1lIjoxNjM1ODU0ODIzLCJqdGkiOiI5ZmZjMTY1OC0xZTAxLTQwMDAtOWY4Yy0wYzkzMmE2NDFjNTEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjI4ZTJkNzgwLWE1ODctNDEwZC1iOTIwLThjMjQ2MDJkZWU5YyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIyOGUyZDc4MC1hNTg3LTQxMGQtYjkyMC04YzI0NjAyZGVlOWMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.dMlzpxGsXIaAqL0EGw_JdTAOuzKnaDzrEBv3pkUn2W5E-BGgIzcC0glwJhhEFfrTBOYL9gl4X8IJIjjR7ipx7J8xdMVcWdiW8t9Wd-ehjIYURgUacpVf-Yd7867T_fATDsBkhOAoXEweP9N8cc3gKWl3AzX9f3a5gpk_Ujl16NMovnF6MG3gzU_ueOgbAaJUf2XQOR0PDynx5a9WHu6MJ81COA3ZQcS_DSQSyhmtPRp51klJJbvNREXYqybgwyM4WnXS6uJ8YhneV20MWEAYHsWhSwlwMXVTEO9XVTK7dxHL3fmca00FYZbKeHYX7harjP9M3Kdf_w4Sl7CpDCwUjA\n", stderr: "" })
[2021-11-02T12:07:06Z INFO  drogue_cloud_tests::resources::apps] Create application: 1c27f8a4-353e-47a5-a6bc-0d145ec1bba1
[2021-11-02T12:07:06Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "1c27f8a4-353e-47a5-a6bc-0d145ec1bba1"
[2021-11-02T12:07:06Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 1c27f8a4-353e-47a5-a6bc-0d145ec1bba1 created.\n", stderr: "" })
[2021-11-02T12:07:06Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1c27f8a4-353e-47a5-a6bc-0d145ec1bba1"
[2021-11-02T12:07:06Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:07:06.372368Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"1c27f8a4-353e-47a5-a6bc-0d145ec1bba1\",\n    \"resourceVersion\": \"9233e82b-87ee-4990-b6ed-13013b478077\",\n    \"uid\": \"1525ce1e-c233-4ac0-95da-b6a18bb6d379\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:07:06.392795217Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:07:06.392780951Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.392752497Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.392753499Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.392754240Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.392754932Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.392755442Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.392757016Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1c27f8a4-353e-47a5-a6bc-0d145ec1bba1"
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:07:06.372368Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"1c27f8a4-353e-47a5-a6bc-0d145ec1bba1\",\n    \"resourceVersion\": \"0b8320fe-b432-4215-9256-f73bcafc05e3\",\n    \"uid\": \"1525ce1e-c233-4ac0-95da-b6a18bb6d379\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:07:06.657014615Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:07:06.656973879Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.420602809Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.428524110Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.513436166Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.520003301Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.656946538Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.656948040Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"SMp0JvSV6KUm\",\n        \"username\": \"user-1c27f8a4-353e-47a5-a6bc-0d145ec1bba1\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1c27f8a4-353e-47a5-a6bc-0d145ec1bba1"
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:07:06.372368Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"1c27f8a4-353e-47a5-a6bc-0d145ec1bba1\",\n    \"resourceVersion\": \"0b8320fe-b432-4215-9256-f73bcafc05e3\",\n    \"uid\": \"1525ce1e-c233-4ac0-95da-b6a18bb6d379\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:07:06.657014615Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:07:06.656973879Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.420602809Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.428524110Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.513436166Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.520003301Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.656946538Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:07:06.656948040Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"SMp0JvSV6KUm\",\n        \"username\": \"user-1c27f8a4-353e-47a5-a6bc-0d145ec1bba1\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "1c27f8a4-353e-47a5-a6bc-0d145ec1bba1" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTUxMjUsImlhdCI6MTYzNTg1NDgyNSwiYXV0aF90aW1lIjoxNjM1ODU0ODIzLCJqdGkiOiI5ZmZjMTY1OC0xZTAxLTQwMDAtOWY4Yy0wYzkzMmE2NDFjNTEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjI4ZTJkNzgwLWE1ODctNDEwZC1iOTIwLThjMjQ2MDJkZWU5YyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIyOGUyZDc4MC1hNTg3LTQxMGQtYjkyMC04YzI0NjAyZGVlOWMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.dMlzpxGsXIaAqL0EGw_JdTAOuzKnaDzrEBv3pkUn2W5E-BGgIzcC0glwJhhEFfrTBOYL9gl4X8IJIjjR7ipx7J8xdMVcWdiW8t9Wd-ehjIYURgUacpVf-Yd7867T_fATDsBkhOAoXEweP9N8cc3gKWl3AzX9f3a5gpk_Ujl16NMovnF6MG3gzU_ueOgbAaJUf2XQOR0PDynx5a9WHu6MJ81COA3ZQcS_DSQSyhmtPRp51klJJbvNREXYqybgwyM4WnXS6uJ8YhneV20MWEAYHsWhSwlwMXVTEO9XVTK7dxHL3fmca00FYZbKeHYX7harjP9M3Kdf_w4Sl7CpDCwUjA\n", stderr: "" })
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:07:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:12:09Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:12:09Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:12:09Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:12:09Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:12:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "1c27f8a4-353e-47a5-a6bc-0d145ec1bba1" "device1"
[2021-11-02T12:12:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:12:09Z INFO  drogue_cloud_tests::resources::apps] Destroy application '1c27f8a4-353e-47a5-a6bc-0d145ec1bba1'
[2021-11-02T12:12:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "1c27f8a4-353e-47a5-a6bc-0d145ec1bba1"
[2021-11-02T12:12:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 1c27f8a4-353e-47a5-a6bc-0d145ec1bba1 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_alias::version_1

**Duration**: 311.831788851s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:12:09Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T12:12:11Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:12:14Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:12:15Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:12:16Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTY5MzYsImlhdCI6MTYzNTg1NTEzNiwianRpIjoiOWI1NTA0ZjQtNTQ4Yy00YjkwLTgxNjEtYWMwYTU1NzRmMmUxIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYjA5YTc2ZmYtOGI3Ni00ZDVhLWEwZTktZDRlY2MxYjI2NGY5Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImIwOWE3NmZmLThiNzYtNGQ1YS1hMGU5LWQ0ZWNjMWIyNjRmOSJ9.mu9JmrlZWXo2RFCahfzNxKg9rldmctT3obWjlAUBDfY
[2021-11-02T12:12:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:12:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:12:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTY5MzYsImlhdCI6MTYzNTg1NTEzNiwianRpIjoiOWI1NTA0ZjQtNTQ4Yy00YjkwLTgxNjEtYWMwYTU1NzRmMmUxIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYjA5YTc2ZmYtOGI3Ni00ZDVhLWEwZTktZDRlY2MxYjI2NGY5Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImIwOWE3NmZmLThiNzYtNGQ1YS1hMGU5LWQ0ZWNjMWIyNjRmOSJ9.mu9JmrlZWXo2RFCahfzNxKg9rldmctT3obWjlAUBDfY" "--context" "system-tests"
[2021-11-02T12:12:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:12:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:12:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:12:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTU0MzYsImlhdCI6MTYzNTg1NTEzNiwiYXV0aF90aW1lIjoxNjM1ODU1MTM0LCJqdGkiOiI5Y2UzNThmMC02MzNhLTQ3NTktOTQ1ZC00ODk4ZDAyMDIxM2MiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImIwOWE3NmZmLThiNzYtNGQ1YS1hMGU5LWQ0ZWNjMWIyNjRmOSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJiMDlhNzZmZi04Yjc2LTRkNWEtYTBlOS1kNGVjYzFiMjY0ZjkiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.aYeDsJ8AVpAt6PTBxIjzsdm2wg_VoEBoKM2kbJgFXjVea_J2PdVYwrxYaJA1k7-v--p8bSuXFtWM5VEiW8oNuCjFgM8DQJ0dXG1tgZtPlk6BFDNYeTn-tqfKJ424wJRSZ6c8oocRju7-ptKnNkd80l5Rwaj-0M4Nv3jQ5ljUhuzDQSdqCvPzIBXgT4X5LMfdDdMNi-7wNjs1utCC1sY5grtonnRfFulbN9z3W7mGDk5bPieRnsnboT4gUrWIto3uP41sa8cwdooaaB7AA7F3-u0cWrcyLp_d1NdgwSQFh-CeVp-aEfesJV7_G3OyVRK3m9UP8LENzEtVuodGEREAAA\n", stderr: "" })
[2021-11-02T12:12:17Z INFO  drogue_cloud_tests::resources::apps] Create application: d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b
[2021-11-02T12:12:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b"
[2021-11-02T12:12:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b created.\n", stderr: "" })
[2021-11-02T12:12:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b"
[2021-11-02T12:12:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:12:17.246628Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b\",\n    \"resourceVersion\": \"b7d38051-18db-4ab8-a172-d225895b8b06\",\n    \"uid\": \"5a7e245c-bc15-4aef-9ff9-7e801c5ab437\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:12:17.259879668Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:12:17.259900617Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.259825838Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.259828553Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.259829345Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.259830296Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.259830908Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.259834735Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b"
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:12:17.246628Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b\",\n    \"resourceVersion\": \"eaecdb51-29cf-4f7e-94d5-bbdcfa1b4e84\",\n    \"uid\": \"5a7e245c-bc15-4aef-9ff9-7e801c5ab437\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:12:17.520933629Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:12:17.520971681Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.294925556Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.302244104Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.381494435Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.388232959Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.520907381Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.520908654Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"i3d0HISsgCwx\",\n        \"username\": \"user-d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b"
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:12:17.246628Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b\",\n    \"resourceVersion\": \"eaecdb51-29cf-4f7e-94d5-bbdcfa1b4e84\",\n    \"uid\": \"5a7e245c-bc15-4aef-9ff9-7e801c5ab437\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:12:17.520933629Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:12:17.520971681Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.294925556Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.302244104Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.381494435Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.388232959Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.520907381Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:12:17.520908654Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"i3d0HISsgCwx\",\n        \"username\": \"user-d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\",\"unique\":true}}]}}"
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTU0MzYsImlhdCI6MTYzNTg1NTEzNiwiYXV0aF90aW1lIjoxNjM1ODU1MTM0LCJqdGkiOiI5Y2UzNThmMC02MzNhLTQ3NTktOTQ1ZC00ODk4ZDAyMDIxM2MiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImIwOWE3NmZmLThiNzYtNGQ1YS1hMGU5LWQ0ZWNjMWIyNjRmOSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJiMDlhNzZmZi04Yjc2LTRkNWEtYTBlOS1kNGVjYzFiMjY0ZjkiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.aYeDsJ8AVpAt6PTBxIjzsdm2wg_VoEBoKM2kbJgFXjVea_J2PdVYwrxYaJA1k7-v--p8bSuXFtWM5VEiW8oNuCjFgM8DQJ0dXG1tgZtPlk6BFDNYeTn-tqfKJ424wJRSZ6c8oocRju7-ptKnNkd80l5Rwaj-0M4Nv3jQ5ljUhuzDQSdqCvPzIBXgT4X5LMfdDdMNi-7wNjs1utCC1sY5grtonnRfFulbN9z3W7mGDk5bPieRnsnboT4gUrWIto3uP41sa8cwdooaaB7AA7F3-u0cWrcyLp_d1NdgwSQFh-CeVp-aEfesJV7_G3OyVRK3m9UP8LENzEtVuodGEREAAA\n", stderr: "" })
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:12:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:17:20Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:17:20Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:17:20Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:17:21Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:17:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b" "device1"
[2021-11-02T12:17:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:17:21Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'd08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b'
[2021-11-02T12:17:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b"
[2021-11-02T12:17:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App d08aa22e-fdbe-4f3c-bfd5-b76ffd3b685b deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_alias::version_2

**Duration**: 312.042461075s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:17:21Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T12:17:23Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:17:26Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:17:27Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:17:28Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTcyNDgsImlhdCI6MTYzNTg1NTQ0OCwianRpIjoiNGM4NDI0NDQtNzhmMi00MWE5LWE2YzctZGM4MTAyMjI4MzMxIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDA3N2YzMWUtMzZmMy00ZGUyLTgyMjItOTFkYTJkZTE1YWY2Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImQwNzdmMzFlLTM2ZjMtNGRlMi04MjIyLTkxZGEyZGUxNWFmNiJ9.jrYvGIxSXGzO8AkXGX903YxiewqZY2eNKrqpSpGbq9w
[2021-11-02T12:17:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:17:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:17:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTcyNDgsImlhdCI6MTYzNTg1NTQ0OCwianRpIjoiNGM4NDI0NDQtNzhmMi00MWE5LWE2YzctZGM4MTAyMjI4MzMxIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDA3N2YzMWUtMzZmMy00ZGUyLTgyMjItOTFkYTJkZTE1YWY2Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImQwNzdmMzFlLTM2ZjMtNGRlMi04MjIyLTkxZGEyZGUxNWFmNiJ9.jrYvGIxSXGzO8AkXGX903YxiewqZY2eNKrqpSpGbq9w" "--context" "system-tests"
[2021-11-02T12:17:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:17:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:17:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:17:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTU3NDgsImlhdCI6MTYzNTg1NTQ0OCwiYXV0aF90aW1lIjoxNjM1ODU1NDQ2LCJqdGkiOiI2NzAyZGMxMC1lMjI5LTQ0ZWYtOWExZS00MDBlMjA2NjE2NzciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImQwNzdmMzFlLTM2ZjMtNGRlMi04MjIyLTkxZGEyZGUxNWFmNiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJkMDc3ZjMxZS0zNmYzLTRkZTItODIyMi05MWRhMmRlMTVhZjYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.iDuOdVd_ZATkM_mcIDFbwFQlhLwrhR_QwDL-ZkE6bw8vfWvw7kBu286_xTpnAaSwX9VyqNRnGEk1iwaDccNzCQR9YdWcj2iyZHoWyYYlbr6fPXbPCz5TD5TIU69ErXWsB0rStZoM-B1wPaIjSZJvOdiKhBvool9oKpVbTtekJlXrj6LJpmqD0biWr7mVUgSv7Eu0ur3diWJHu7hwy4OePHTcg93nuKdLKrW42QW1H2XYjvG-S5rexOmm2iUEZq8aEhqHL5tY5NTNMj5sfdUVdazuA5jnydVXkF97tepTl00Mh_xPE5qSusNAGHjt4bK8c7nIqZymlnujA-MmvXL9HA\n", stderr: "" })
[2021-11-02T12:17:29Z INFO  drogue_cloud_tests::resources::apps] Create application: 413d96a2-727b-4f3a-86ea-fe8975a8bc8d
[2021-11-02T12:17:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "413d96a2-727b-4f3a-86ea-fe8975a8bc8d"
[2021-11-02T12:17:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 413d96a2-727b-4f3a-86ea-fe8975a8bc8d created.\n", stderr: "" })
[2021-11-02T12:17:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "413d96a2-727b-4f3a-86ea-fe8975a8bc8d"
[2021-11-02T12:17:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:17:29.189651Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"413d96a2-727b-4f3a-86ea-fe8975a8bc8d\",\n    \"resourceVersion\": \"d2d69583-3f17-43e5-a196-7c922e699e85\",\n    \"uid\": \"b8202b59-ac90-44b1-9e61-658657581376\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:17:29.205766456Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:17:29.205789539Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.205722665Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.205725751Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.205726602Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.205727524Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.205728215Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.205732123Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "413d96a2-727b-4f3a-86ea-fe8975a8bc8d"
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:17:29.189651Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"413d96a2-727b-4f3a-86ea-fe8975a8bc8d\",\n    \"resourceVersion\": \"c7fd7685-b960-4154-be41-ad6b751e57ca\",\n    \"uid\": \"b8202b59-ac90-44b1-9e61-658657581376\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:17:29.485288578Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:17:29.485363588Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.237946994Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.245165075Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.339128216Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.346358470Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.485259603Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.485261206Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"kyAjHoGHnNY3\",\n        \"username\": \"user-413d96a2-727b-4f3a-86ea-fe8975a8bc8d\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "413d96a2-727b-4f3a-86ea-fe8975a8bc8d"
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:17:29.189651Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"413d96a2-727b-4f3a-86ea-fe8975a8bc8d\",\n    \"resourceVersion\": \"c7fd7685-b960-4154-be41-ad6b751e57ca\",\n    \"uid\": \"b8202b59-ac90-44b1-9e61-658657581376\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:17:29.485288578Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:17:29.485363588Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.237946994Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.245165075Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.339128216Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.346358470Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.485259603Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:17:29.485261206Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"kyAjHoGHnNY3\",\n        \"username\": \"user-413d96a2-727b-4f3a-86ea-fe8975a8bc8d\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "413d96a2-727b-4f3a-86ea-fe8975a8bc8d" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\",\"unique\":true}}]}}"
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTU3NDgsImlhdCI6MTYzNTg1NTQ0OCwiYXV0aF90aW1lIjoxNjM1ODU1NDQ2LCJqdGkiOiI2NzAyZGMxMC1lMjI5LTQ0ZWYtOWExZS00MDBlMjA2NjE2NzciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImQwNzdmMzFlLTM2ZjMtNGRlMi04MjIyLTkxZGEyZGUxNWFmNiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJkMDc3ZjMxZS0zNmYzLTRkZTItODIyMi05MWRhMmRlMTVhZjYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.iDuOdVd_ZATkM_mcIDFbwFQlhLwrhR_QwDL-ZkE6bw8vfWvw7kBu286_xTpnAaSwX9VyqNRnGEk1iwaDccNzCQR9YdWcj2iyZHoWyYYlbr6fPXbPCz5TD5TIU69ErXWsB0rStZoM-B1wPaIjSZJvOdiKhBvool9oKpVbTtekJlXrj6LJpmqD0biWr7mVUgSv7Eu0ur3diWJHu7hwy4OePHTcg93nuKdLKrW42QW1H2XYjvG-S5rexOmm2iUEZq8aEhqHL5tY5NTNMj5sfdUVdazuA5jnydVXkF97tepTl00Mh_xPE5qSusNAGHjt4bK8c7nIqZymlnujA-MmvXL9HA\n", stderr: "" })
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:17:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:22:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:22:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:22:32Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:22:33Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:22:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "413d96a2-727b-4f3a-86ea-fe8975a8bc8d" "device1"
[2021-11-02T12:22:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:22:33Z INFO  drogue_cloud_tests::resources::apps] Destroy application '413d96a2-727b-4f3a-86ea-fe8975a8bc8d'
[2021-11-02T12:22:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "413d96a2-727b-4f3a-86ea-fe8975a8bc8d"
[2021-11-02T12:22:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 413d96a2-727b-4f3a-86ea-fe8975a8bc8d deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_alias::version_3

**Duration**: 311.953399548s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:22:33Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T12:22:35Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:22:38Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:22:39Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:22:40Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTc1NjAsImlhdCI6MTYzNTg1NTc2MCwianRpIjoiMTE3M2U5ZTMtYzViMC00YThiLWFiMDEtNmJlNzlmM2UyZmVkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzM0ODc5MTctYjFiZi00MTIwLWJjMjYtYjI2ZmNmMjhmNTg1Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjczNDg3OTE3LWIxYmYtNDEyMC1iYzI2LWIyNmZjZjI4ZjU4NSJ9.wIg__4CikT2RYfPE9Xezww7kpV58vWU5uPelVuG-AyI
[2021-11-02T12:22:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:22:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:22:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTc1NjAsImlhdCI6MTYzNTg1NTc2MCwianRpIjoiMTE3M2U5ZTMtYzViMC00YThiLWFiMDEtNmJlNzlmM2UyZmVkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzM0ODc5MTctYjFiZi00MTIwLWJjMjYtYjI2ZmNmMjhmNTg1Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjczNDg3OTE3LWIxYmYtNDEyMC1iYzI2LWIyNmZjZjI4ZjU4NSJ9.wIg__4CikT2RYfPE9Xezww7kpV58vWU5uPelVuG-AyI" "--context" "system-tests"
[2021-11-02T12:22:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:22:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:22:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:22:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTYwNjAsImlhdCI6MTYzNTg1NTc2MCwiYXV0aF90aW1lIjoxNjM1ODU1NzU4LCJqdGkiOiI2Yzk1OTViOC1mNDM0LTQ4ZDUtYTQ2NC0wYmFlODc2NTFjOWIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjczNDg3OTE3LWIxYmYtNDEyMC1iYzI2LWIyNmZjZjI4ZjU4NSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3MzQ4NzkxNy1iMWJmLTQxMjAtYmMyNi1iMjZmY2YyOGY1ODUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Bpf4UEZ_maBdWR3ooqqLu-utMC836lI2HXADSbpioZrl_sSMxwMHlR03W4VFqMx3n1vPRJNC22R3hFzN_sCpdkUDLHMRK_3n1gzfmIw6GVXmW4KfLngFpznCDxV6R22WY0bHhtXVWd8aXm7WWRzGqJ8ULnBpx-gXOIc2WNjVwkEE1bjQdO5U5_Q7EI9DxE1w5owk1FMYouiioS_aog5jSvIgKVNb1jgTNKgJbn-74OsqZqgK8r3uOlCOnljSb2Sh04pzXBc_dmNTK2aeZAgmgt5WcgGROMoEQnSbnErBtWqX0fEgTRrtsawOjH3t8IQ3KtSSA0v2xcR7BY8Ol9BgLA\n", stderr: "" })
[2021-11-02T12:22:41Z INFO  drogue_cloud_tests::resources::apps] Create application: ec62115c-f9e7-4c53-8c67-064fed5a9fcd
[2021-11-02T12:22:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "ec62115c-f9e7-4c53-8c67-064fed5a9fcd"
[2021-11-02T12:22:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App ec62115c-f9e7-4c53-8c67-064fed5a9fcd created.\n", stderr: "" })
[2021-11-02T12:22:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ec62115c-f9e7-4c53-8c67-064fed5a9fcd"
[2021-11-02T12:22:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:22:41.222266Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"ec62115c-f9e7-4c53-8c67-064fed5a9fcd\",\n    \"resourceVersion\": \"270ad48c-2e99-4c2c-a364-44a51a842a62\",\n    \"uid\": \"86c1e088-5774-4799-8def-5730f49ea2fd\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:22:41.243171632Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:22:41.243157215Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.243131908Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.243132669Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.243133060Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.243133421Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.243133992Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.243135173Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ec62115c-f9e7-4c53-8c67-064fed5a9fcd"
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:22:41.222266Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"ec62115c-f9e7-4c53-8c67-064fed5a9fcd\",\n    \"resourceVersion\": \"939108d3-45ae-4c7b-be6c-f09aac91e38a\",\n    \"uid\": \"86c1e088-5774-4799-8def-5730f49ea2fd\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:22:41.579359015Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:22:41.579314471Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.272950024Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.282350381Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.354719835Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.362119662Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.579283473Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.579284856Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Nz05aKvq2ral\",\n        \"username\": \"user-ec62115c-f9e7-4c53-8c67-064fed5a9fcd\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ec62115c-f9e7-4c53-8c67-064fed5a9fcd"
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:22:41.222266Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"ec62115c-f9e7-4c53-8c67-064fed5a9fcd\",\n    \"resourceVersion\": \"939108d3-45ae-4c7b-be6c-f09aac91e38a\",\n    \"uid\": \"86c1e088-5774-4799-8def-5730f49ea2fd\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:22:41.579359015Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:22:41.579314471Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.272950024Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.282350381Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.354719835Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.362119662Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.579283473Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:22:41.579284856Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Nz05aKvq2ral\",\n        \"username\": \"user-ec62115c-f9e7-4c53-8c67-064fed5a9fcd\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "ec62115c-f9e7-4c53-8c67-064fed5a9fcd" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\",\"unique\":true}}]}}"
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTYwNjAsImlhdCI6MTYzNTg1NTc2MCwiYXV0aF90aW1lIjoxNjM1ODU1NzU4LCJqdGkiOiI2Yzk1OTViOC1mNDM0LTQ4ZDUtYTQ2NC0wYmFlODc2NTFjOWIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjczNDg3OTE3LWIxYmYtNDEyMC1iYzI2LWIyNmZjZjI4ZjU4NSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3MzQ4NzkxNy1iMWJmLTQxMjAtYmMyNi1iMjZmY2YyOGY1ODUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Bpf4UEZ_maBdWR3ooqqLu-utMC836lI2HXADSbpioZrl_sSMxwMHlR03W4VFqMx3n1vPRJNC22R3hFzN_sCpdkUDLHMRK_3n1gzfmIw6GVXmW4KfLngFpznCDxV6R22WY0bHhtXVWd8aXm7WWRzGqJ8ULnBpx-gXOIc2WNjVwkEE1bjQdO5U5_Q7EI9DxE1w5owk1FMYouiioS_aog5jSvIgKVNb1jgTNKgJbn-74OsqZqgK8r3uOlCOnljSb2Sh04pzXBc_dmNTK2aeZAgmgt5WcgGROMoEQnSbnErBtWqX0fEgTRrtsawOjH3t8IQ3KtSSA0v2xcR7BY8Ol9BgLA\n", stderr: "" })
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:22:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:27:44Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:27:44Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:27:44Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:27:45Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:27:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "ec62115c-f9e7-4c53-8c67-064fed5a9fcd" "device1"
[2021-11-02T12:27:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:27:45Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'ec62115c-f9e7-4c53-8c67-064fed5a9fcd'
[2021-11-02T12:27:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "ec62115c-f9e7-4c53-8c67-064fed5a9fcd"
[2021-11-02T12:27:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App ec62115c-f9e7-4c53-8c67-064fed5a9fcd deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_only::version_1

**Duration**: 311.323724348s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:27:45Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T12:27:47Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:27:49Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:27:51Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:27:52Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTc4NzIsImlhdCI6MTYzNTg1NjA3MiwianRpIjoiNWU2MmJlOGMtMGRmNy00MTUxLTg4Y2QtYTk5ZGI2ZjkwYjVhIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzliNDMwYTAtMGMwNy00MGVhLTlmYzAtZDdiZjhhYWY1MWJhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc5YjQzMGEwLTBjMDctNDBlYS05ZmMwLWQ3YmY4YWFmNTFiYSJ9.xraAJ8SmC_WTnqfQkRydBhDjrn-3A4a0Je1vNoJAM1s
[2021-11-02T12:27:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:27:52Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:27:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTc4NzIsImlhdCI6MTYzNTg1NjA3MiwianRpIjoiNWU2MmJlOGMtMGRmNy00MTUxLTg4Y2QtYTk5ZGI2ZjkwYjVhIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzliNDMwYTAtMGMwNy00MGVhLTlmYzAtZDdiZjhhYWY1MWJhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc5YjQzMGEwLTBjMDctNDBlYS05ZmMwLWQ3YmY4YWFmNTFiYSJ9.xraAJ8SmC_WTnqfQkRydBhDjrn-3A4a0Je1vNoJAM1s" "--context" "system-tests"
[2021-11-02T12:27:52Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:27:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:27:53Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:27:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTYzNzIsImlhdCI6MTYzNTg1NjA3MiwiYXV0aF90aW1lIjoxNjM1ODU2MDcwLCJqdGkiOiIxNTVjNWVkOC0xNzllLTQxYmUtYmEyZi0zY2ExNTQzNjUxNWUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc5YjQzMGEwLTBjMDctNDBlYS05ZmMwLWQ3YmY4YWFmNTFiYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3OWI0MzBhMC0wYzA3LTQwZWEtOWZjMC1kN2JmOGFhZjUxYmEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.CM7YJ1YvfIsRDl5FT6tQXPKQhgIjGSEAQi0tSzDt1MBGwqUEGi67tLpqb2SLlGkdkvnwVgVQPkhxtK5C35ASseMlh8BhzPWBh7Mq9o3znEBFgRPtcYX4s-mziULCBotIO2O5DyK7Z9bzVUoNqssgdZXfeSHZCCjk19FD3Ini0fE_k5G2g1cNDaEZtWgI_-N08WSH_doHiHTaoXAZ07FSE9xPJiOHME8JzFxJG5hRA6yb8a6OqKw41otRsxYbpzx69GXwssHoTcE9IEc8Dn6nxt3p0T9iHAm7VPKunDTqJR6kEPuRyRxtvKBA12DvczrwPA8gDo6uZhBkPHwIQ2fmuA\n", stderr: "" })
[2021-11-02T12:27:53Z INFO  drogue_cloud_tests::resources::apps] Create application: 9e846a05-e554-44ba-b67b-17bae357a9e2
[2021-11-02T12:27:53Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "9e846a05-e554-44ba-b67b-17bae357a9e2"
[2021-11-02T12:27:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 9e846a05-e554-44ba-b67b-17bae357a9e2 created.\n", stderr: "" })
[2021-11-02T12:27:53Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "9e846a05-e554-44ba-b67b-17bae357a9e2"
[2021-11-02T12:27:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:27:53.495607Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"9e846a05-e554-44ba-b67b-17bae357a9e2\",\n    \"resourceVersion\": \"69c547e0-2636-44e4-aa0a-238cf15b7fe1\",\n    \"uid\": \"68386877-c015-4555-9611-61464c5fe223\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:27:53.520884894Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:27:53.520870206Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.520833426Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.520834479Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.520834960Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.520835460Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.520836112Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.520847513Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "9e846a05-e554-44ba-b67b-17bae357a9e2"
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:27:53.495607Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"9e846a05-e554-44ba-b67b-17bae357a9e2\",\n    \"resourceVersion\": \"9ff08344-e606-47a9-aa30-204cf6c72959\",\n    \"uid\": \"68386877-c015-4555-9611-61464c5fe223\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:27:53.821960007Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:27:53.821908601Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.570470545Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.577608345Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.710375065Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.719358617Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.821722051Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.821723544Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"z817x2NtKrS3\",\n        \"username\": \"user-9e846a05-e554-44ba-b67b-17bae357a9e2\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "9e846a05-e554-44ba-b67b-17bae357a9e2"
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:27:53.495607Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"9e846a05-e554-44ba-b67b-17bae357a9e2\",\n    \"resourceVersion\": \"9ff08344-e606-47a9-aa30-204cf6c72959\",\n    \"uid\": \"68386877-c015-4555-9611-61464c5fe223\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:27:53.821960007Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:27:53.821908601Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.570470545Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.577608345Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.710375065Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.719358617Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.821722051Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:27:53.821723544Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"z817x2NtKrS3\",\n        \"username\": \"user-9e846a05-e554-44ba-b67b-17bae357a9e2\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "9e846a05-e554-44ba-b67b-17bae357a9e2" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTYzNzIsImlhdCI6MTYzNTg1NjA3MiwiYXV0aF90aW1lIjoxNjM1ODU2MDcwLCJqdGkiOiIxNTVjNWVkOC0xNzllLTQxYmUtYmEyZi0zY2ExNTQzNjUxNWUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc5YjQzMGEwLTBjMDctNDBlYS05ZmMwLWQ3YmY4YWFmNTFiYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3OWI0MzBhMC0wYzA3LTQwZWEtOWZjMC1kN2JmOGFhZjUxYmEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.CM7YJ1YvfIsRDl5FT6tQXPKQhgIjGSEAQi0tSzDt1MBGwqUEGi67tLpqb2SLlGkdkvnwVgVQPkhxtK5C35ASseMlh8BhzPWBh7Mq9o3znEBFgRPtcYX4s-mziULCBotIO2O5DyK7Z9bzVUoNqssgdZXfeSHZCCjk19FD3Ini0fE_k5G2g1cNDaEZtWgI_-N08WSH_doHiHTaoXAZ07FSE9xPJiOHME8JzFxJG5hRA6yb8a6OqKw41otRsxYbpzx69GXwssHoTcE9IEc8Dn6nxt3p0T9iHAm7VPKunDTqJR6kEPuRyRxtvKBA12DvczrwPA8gDo6uZhBkPHwIQ2fmuA\n", stderr: "" })
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:27:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:32:56Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:32:56Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:32:56Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:32:56Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:32:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "9e846a05-e554-44ba-b67b-17bae357a9e2" "device1"
[2021-11-02T12:32:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:32:56Z INFO  drogue_cloud_tests::resources::apps] Destroy application '9e846a05-e554-44ba-b67b-17bae357a9e2'
[2021-11-02T12:32:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "9e846a05-e554-44ba-b67b-17bae357a9e2"
[2021-11-02T12:32:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 9e846a05-e554-44ba-b67b-17bae357a9e2 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_only::version_2

**Duration**: 310.98145597s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:32:56Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T12:32:58Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:33:01Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:33:02Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:33:03Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTgxODMsImlhdCI6MTYzNTg1NjM4MywianRpIjoiZTY4Y2Y2ZGQtNjQ3NS00ZGQyLTgyZjgtOGU1ZGU0MTZhZmQ4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOGRlODQ1MTYtNjk2YS00MGY1LWI0YTgtMzc2Zjc0YTUyYWNlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjhkZTg0NTE2LTY5NmEtNDBmNS1iNGE4LTM3NmY3NGE1MmFjZSJ9.Urf1uejtSitLLONYwNBs73d2wPopnYi_9bQROEVb0Qk
[2021-11-02T12:33:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:33:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:33:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTgxODMsImlhdCI6MTYzNTg1NjM4MywianRpIjoiZTY4Y2Y2ZGQtNjQ3NS00ZGQyLTgyZjgtOGU1ZGU0MTZhZmQ4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOGRlODQ1MTYtNjk2YS00MGY1LWI0YTgtMzc2Zjc0YTUyYWNlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjhkZTg0NTE2LTY5NmEtNDBmNS1iNGE4LTM3NmY3NGE1MmFjZSJ9.Urf1uejtSitLLONYwNBs73d2wPopnYi_9bQROEVb0Qk" "--context" "system-tests"
[2021-11-02T12:33:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:33:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:33:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:33:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTY2ODMsImlhdCI6MTYzNTg1NjM4MywiYXV0aF90aW1lIjoxNjM1ODU2MzgxLCJqdGkiOiI1MDg5OWRhMC1mNDJkLTRkMmMtYWVkNy0yYWRmNjhhMmI3YzEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjhkZTg0NTE2LTY5NmEtNDBmNS1iNGE4LTM3NmY3NGE1MmFjZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4ZGU4NDUxNi02OTZhLTQwZjUtYjRhOC0zNzZmNzRhNTJhY2UiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Nqhxu-a4jwNE03PjQPO61jFafspcXAJ1RkmIOgWKdC4e5nliiREyreSFoqCQavPOo_XhXbaJ3TPiKfDVmGiuuqwml0P6LskMcVNBupYKHPbYghJ9e9xOdvgBD7mf9P-V2V9qiYPyHglxInPoYKvmnhekmg18GMtoMHNk-DT-iYVVj-jMLCw9vZXqG2_20OuqCdjxpqh3kPWH7nKqEfNeTQb5JjPwZB8eYRJ6LiEINuq7g-rQh11yxDMCWJDFiW60Yi6Z1r41JtInN0KBXYiIAtjmCS_XA58t7AepEw2_l7SvhbweDyXxq0ZB8CJSkaRz-AScn3vTdgTzPyGBpPvERg\n", stderr: "" })
[2021-11-02T12:33:04Z INFO  drogue_cloud_tests::resources::apps] Create application: 72dba372-6b20-4896-88ea-8fd4afdf6451
[2021-11-02T12:33:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "72dba372-6b20-4896-88ea-8fd4afdf6451"
[2021-11-02T12:33:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 72dba372-6b20-4896-88ea-8fd4afdf6451 created.\n", stderr: "" })
[2021-11-02T12:33:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "72dba372-6b20-4896-88ea-8fd4afdf6451"
[2021-11-02T12:33:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:33:04.638990Z\",\n    \"generation\": 0,\n    \"name\": \"72dba372-6b20-4896-88ea-8fd4afdf6451\",\n    \"resourceVersion\": \"7e4271dc-8461-4179-a00e-9d3525bd67f2\",\n    \"uid\": \"fa901858-596a-4db9-91ab-183ca53b4304\"\n  }\n}\n", stderr: "" })
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "72dba372-6b20-4896-88ea-8fd4afdf6451"
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:33:04.638990Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"72dba372-6b20-4896-88ea-8fd4afdf6451\",\n    \"resourceVersion\": \"c2bbaee9-46bf-4b84-9bd0-bbe6c8246b38\",\n    \"uid\": \"fa901858-596a-4db9-91ab-183ca53b4304\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:33:04.978817321Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:33:04.978779740Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:33:04.730801282Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:33:04.737557102Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:33:04.835892158Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:33:04.842982139Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:33:04.978754934Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:33:04.978756096Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Mdjr37X78BvT\",\n        \"username\": \"user-72dba372-6b20-4896-88ea-8fd4afdf6451\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "72dba372-6b20-4896-88ea-8fd4afdf6451"
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:33:04.638990Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"72dba372-6b20-4896-88ea-8fd4afdf6451\",\n    \"resourceVersion\": \"c2bbaee9-46bf-4b84-9bd0-bbe6c8246b38\",\n    \"uid\": \"fa901858-596a-4db9-91ab-183ca53b4304\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:33:04.978817321Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:33:04.978779740Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:33:04.730801282Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:33:04.737557102Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:33:04.835892158Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:33:04.842982139Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:33:04.978754934Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:33:04.978756096Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Mdjr37X78BvT\",\n        \"username\": \"user-72dba372-6b20-4896-88ea-8fd4afdf6451\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "72dba372-6b20-4896-88ea-8fd4afdf6451" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTY2ODMsImlhdCI6MTYzNTg1NjM4MywiYXV0aF90aW1lIjoxNjM1ODU2MzgxLCJqdGkiOiI1MDg5OWRhMC1mNDJkLTRkMmMtYWVkNy0yYWRmNjhhMmI3YzEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjhkZTg0NTE2LTY5NmEtNDBmNS1iNGE4LTM3NmY3NGE1MmFjZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4ZGU4NDUxNi02OTZhLTQwZjUtYjRhOC0zNzZmNzRhNTJhY2UiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Nqhxu-a4jwNE03PjQPO61jFafspcXAJ1RkmIOgWKdC4e5nliiREyreSFoqCQavPOo_XhXbaJ3TPiKfDVmGiuuqwml0P6LskMcVNBupYKHPbYghJ9e9xOdvgBD7mf9P-V2V9qiYPyHglxInPoYKvmnhekmg18GMtoMHNk-DT-iYVVj-jMLCw9vZXqG2_20OuqCdjxpqh3kPWH7nKqEfNeTQb5JjPwZB8eYRJ6LiEINuq7g-rQh11yxDMCWJDFiW60Yi6Z1r41JtInN0KBXYiIAtjmCS_XA58t7AepEw2_l7SvhbweDyXxq0ZB8CJSkaRz-AScn3vTdgTzPyGBpPvERg\n", stderr: "" })
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:33:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:38:07Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:38:07Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:38:07Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:38:07Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:38:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "72dba372-6b20-4896-88ea-8fd4afdf6451" "device1"
[2021-11-02T12:38:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:38:07Z INFO  drogue_cloud_tests::resources::apps] Destroy application '72dba372-6b20-4896-88ea-8fd4afdf6451'
[2021-11-02T12:38:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "72dba372-6b20-4896-88ea-8fd4afdf6451"
[2021-11-02T12:38:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 72dba372-6b20-4896-88ea-8fd4afdf6451 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_only::version_3

**Duration**: 311.83671824s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:38:07Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-11-02T12:38:09Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:38:12Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:38:13Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:38:14Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTg0OTQsImlhdCI6MTYzNTg1NjY5NCwianRpIjoiZjg5YTFmNDktZjY1NC00N2ZjLWFjMDgtYTMyMDAzY2ZkYzE1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNTZhMzQ0ODgtNjhiYi00NTU4LWEyNzQtN2NkMDNhZDAwNjllIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjU2YTM0NDg4LTY4YmItNDU1OC1hMjc0LTdjZDAzYWQwMDY5ZSJ9.t4ex5buRFrNAtLrSmPqI93KBACG7SfGEZhKKBk3EoUU
[2021-11-02T12:38:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:38:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:38:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTg0OTQsImlhdCI6MTYzNTg1NjY5NCwianRpIjoiZjg5YTFmNDktZjY1NC00N2ZjLWFjMDgtYTMyMDAzY2ZkYzE1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNTZhMzQ0ODgtNjhiYi00NTU4LWEyNzQtN2NkMDNhZDAwNjllIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjU2YTM0NDg4LTY4YmItNDU1OC1hMjc0LTdjZDAzYWQwMDY5ZSJ9.t4ex5buRFrNAtLrSmPqI93KBACG7SfGEZhKKBk3EoUU" "--context" "system-tests"
[2021-11-02T12:38:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:38:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:38:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:38:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTY5OTQsImlhdCI6MTYzNTg1NjY5NCwiYXV0aF90aW1lIjoxNjM1ODU2NjkyLCJqdGkiOiI1YWI0NmJkNC0yNTcwLTQ2ZjUtYjA2NS0wZGQwYzA0MWUxOGMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjU2YTM0NDg4LTY4YmItNDU1OC1hMjc0LTdjZDAzYWQwMDY5ZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI1NmEzNDQ4OC02OGJiLTQ1NTgtYTI3NC03Y2QwM2FkMDA2OWUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.bLKoKxf3Ua5sW5tfy-jfswIBrVP-J4-UYHWzLEEnGrijPr77ciks1XMOLMHoLuzY6irLg4ySp2Gs-2WuVX80x3q2KsI9nfemf-Z_YwvXC1v8Js6OQkIy2IgIQY-HCREoeDZzjqJM4MLhWyEsvKG_jo4LPzoW4xzJV6es8lM-gn5OKIm5Xac0DoHc9OUvAf6zWZ4DjkmhV-5gkcM8gatnM00qBZcwG6aAOeUpbqq5b4gvlzlFDxmWQyqSmGgAmFKYrc-1G64Xh3MlFIbZAY28YYpoM8wNZpco6KfeXs1Z4CYg1MZ96gI_SX87UAcTaUSN1lzaAQopOVDWqj8e0iXQaA\n", stderr: "" })
[2021-11-02T12:38:15Z INFO  drogue_cloud_tests::resources::apps] Create application: ec0d3e7d-f44b-472c-9401-76b82395f489
[2021-11-02T12:38:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "ec0d3e7d-f44b-472c-9401-76b82395f489"
[2021-11-02T12:38:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App ec0d3e7d-f44b-472c-9401-76b82395f489 created.\n", stderr: "" })
[2021-11-02T12:38:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ec0d3e7d-f44b-472c-9401-76b82395f489"
[2021-11-02T12:38:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:38:15.269264Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"ec0d3e7d-f44b-472c-9401-76b82395f489\",\n    \"resourceVersion\": \"5312ba76-aae9-4ab0-be51-4fb6bfc99564\",\n    \"uid\": \"9258fdd2-6146-4712-a6e1-e521ae99dc06\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:38:15.282981Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:38:15.283006047Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.282668056Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.282670601Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.282671413Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.282672294Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.282673006Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.282677484Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ec0d3e7d-f44b-472c-9401-76b82395f489"
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:38:15.269264Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"ec0d3e7d-f44b-472c-9401-76b82395f489\",\n    \"resourceVersion\": \"61fb066f-20b1-48ee-94ff-30518902a222\",\n    \"uid\": \"9258fdd2-6146-4712-a6e1-e521ae99dc06\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:38:15.517219578Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:38:15.517256407Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.315667876Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.325816336Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.380316222Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.387537776Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.517194191Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.517195484Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Bp1YYLaZeCrS\",\n        \"username\": \"user-ec0d3e7d-f44b-472c-9401-76b82395f489\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ec0d3e7d-f44b-472c-9401-76b82395f489"
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:38:15.269264Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"ec0d3e7d-f44b-472c-9401-76b82395f489\",\n    \"resourceVersion\": \"61fb066f-20b1-48ee-94ff-30518902a222\",\n    \"uid\": \"9258fdd2-6146-4712-a6e1-e521ae99dc06\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:38:15.517219578Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:38:15.517256407Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.315667876Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.325816336Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.380316222Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.387537776Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.517194191Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:38:15.517195484Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Bp1YYLaZeCrS\",\n        \"username\": \"user-ec0d3e7d-f44b-472c-9401-76b82395f489\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "ec0d3e7d-f44b-472c-9401-76b82395f489" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTY5OTQsImlhdCI6MTYzNTg1NjY5NCwiYXV0aF90aW1lIjoxNjM1ODU2NjkyLCJqdGkiOiI1YWI0NmJkNC0yNTcwLTQ2ZjUtYjA2NS0wZGQwYzA0MWUxOGMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjU2YTM0NDg4LTY4YmItNDU1OC1hMjc0LTdjZDAzYWQwMDY5ZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI1NmEzNDQ4OC02OGJiLTQ1NTgtYTI3NC03Y2QwM2FkMDA2OWUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.bLKoKxf3Ua5sW5tfy-jfswIBrVP-J4-UYHWzLEEnGrijPr77ciks1XMOLMHoLuzY6irLg4ySp2Gs-2WuVX80x3q2KsI9nfemf-Z_YwvXC1v8Js6OQkIy2IgIQY-HCREoeDZzjqJM4MLhWyEsvKG_jo4LPzoW4xzJV6es8lM-gn5OKIm5Xac0DoHc9OUvAf6zWZ4DjkmhV-5gkcM8gatnM00qBZcwG6aAOeUpbqq5b4gvlzlFDxmWQyqSmGgAmFKYrc-1G64Xh3MlFIbZAY28YYpoM8wNZpco6KfeXs1Z4CYg1MZ96gI_SX87UAcTaUSN1lzaAQopOVDWqj8e0iXQaA\n", stderr: "" })
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:38:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:43:18Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:43:18Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:43:18Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:43:19Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:43:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "ec0d3e7d-f44b-472c-9401-76b82395f489" "device1"
[2021-11-02T12:43:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:43:19Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'ec0d3e7d-f44b-472c-9401-76b82395f489'
[2021-11-02T12:43:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "ec0d3e7d-f44b-472c-9401-76b82395f489"
[2021-11-02T12:43:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App ec0d3e7d-f44b-472c-9401-76b82395f489 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ✅ tests::drg::test_drg_version

**Duration**: 7.789555852s

## ❌ tests::http::command::test_command::version_1

**Duration**: 312.054294066s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:43:29Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:43:31Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:43:33Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:43:34Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTg4MTQsImlhdCI6MTYzNTg1NzAxNCwianRpIjoiMmQ2OGU3YjYtNjg4MC00MDFhLTlmZmQtYjQ3NmJiZTVlNmM3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMzZmZjVjMzktMzM1ZC00NjA3LWExMTUtZTNhZDFlNjU0OGZjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjM2ZmY1YzM5LTMzNWQtNDYwNy1hMTE1LWUzYWQxZTY1NDhmYyJ9.TwuTxOQQZampBdWANgh9QtdjJF1p7rPEj-FnXXPcme0
[2021-11-02T12:43:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:43:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:43:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTg4MTQsImlhdCI6MTYzNTg1NzAxNCwianRpIjoiMmQ2OGU3YjYtNjg4MC00MDFhLTlmZmQtYjQ3NmJiZTVlNmM3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMzZmZjVjMzktMzM1ZC00NjA3LWExMTUtZTNhZDFlNjU0OGZjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjM2ZmY1YzM5LTMzNWQtNDYwNy1hMTE1LWUzYWQxZTY1NDhmYyJ9.TwuTxOQQZampBdWANgh9QtdjJF1p7rPEj-FnXXPcme0" "--context" "system-tests"
[2021-11-02T12:43:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:43:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:43:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:43:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTczMTQsImlhdCI6MTYzNTg1NzAxNCwiYXV0aF90aW1lIjoxNjM1ODU3MDEyLCJqdGkiOiI4OWY0MjEwNi0wNDVkLTQ1Y2UtYTYzYi0wYTJjZjIxNDNjYTkiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjM2ZmY1YzM5LTMzNWQtNDYwNy1hMTE1LWUzYWQxZTY1NDhmYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIzNmZmNWMzOS0zMzVkLTQ2MDctYTExNS1lM2FkMWU2NTQ4ZmMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Mm92FAP-MLNl_GiIREwNyVaTFBQgLdKiIHtaJkFzv-wWsHzLdT9ZSiwK7N0eUCejJkjllSKlpbwm5gjCKHo9WLDHMVnRf11E7pE_ylbwc8s8Yvr97_4Tl7R9kukpXrEeysiUSeRT1kFLjJP2otYT1OoplS3D18VI4dV7FpcbzHuSuGl9pOs554maY66Be-aYsnnn-SVB6uVhK5JryucveogZnh_YhonHVgLpKwkKLCuwo5yIxL-J-FUxlnWuEl8WWSM_kwwWdCfkCAwCNG0HMR5HSNQNeRoxRok7rQJkubducIX7Cef19r_bPCfPrlg41lTEOG0rG-BKX1u_sgvn-g\n", stderr: "" })
[2021-11-02T12:43:35Z INFO  drogue_cloud_tests::resources::apps] Create application: 6e951a17-760b-4906-a11d-611d183405db
[2021-11-02T12:43:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "6e951a17-760b-4906-a11d-611d183405db"
[2021-11-02T12:43:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 6e951a17-760b-4906-a11d-611d183405db created.\n", stderr: "" })
[2021-11-02T12:43:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "6e951a17-760b-4906-a11d-611d183405db"
[2021-11-02T12:43:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:43:35.080853Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"6e951a17-760b-4906-a11d-611d183405db\",\n    \"resourceVersion\": \"f047d3f3-8b09-4a86-9cd0-85fb43ce76bc\",\n    \"uid\": \"5519e777-bd11-4dbd-807c-276950d836e7\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:43:35.094747079Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:43:35.094769419Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.094705580Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.094707224Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.094707905Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.094709328Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.094710881Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.094713716Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "6e951a17-760b-4906-a11d-611d183405db"
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:43:35.080853Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"6e951a17-760b-4906-a11d-611d183405db\",\n    \"resourceVersion\": \"93b42df8-dce0-4fce-a19e-8fe63af35769\",\n    \"uid\": \"5519e777-bd11-4dbd-807c-276950d836e7\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:43:35.311656042Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:43:35.311693231Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.126895551Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.135617729Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.199266953Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.205939562Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.311614093Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.311615295Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"YNutT69OVrBD\",\n        \"username\": \"user-6e951a17-760b-4906-a11d-611d183405db\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "6e951a17-760b-4906-a11d-611d183405db"
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:43:35.080853Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"6e951a17-760b-4906-a11d-611d183405db\",\n    \"resourceVersion\": \"93b42df8-dce0-4fce-a19e-8fe63af35769\",\n    \"uid\": \"5519e777-bd11-4dbd-807c-276950d836e7\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:43:35.311656042Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:43:35.311693231Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.126895551Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.135617729Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.199266953Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.205939562Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.311614093Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:43:35.311615295Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"YNutT69OVrBD\",\n        \"username\": \"user-6e951a17-760b-4906-a11d-611d183405db\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "6e951a17-760b-4906-a11d-611d183405db" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::tests::http::command] Sending payload
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::tests::http::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTczMTQsImlhdCI6MTYzNTg1NzAxNCwiYXV0aF90aW1lIjoxNjM1ODU3MDEyLCJqdGkiOiI4OWY0MjEwNi0wNDVkLTQ1Y2UtYTYzYi0wYTJjZjIxNDNjYTkiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjM2ZmY1YzM5LTMzNWQtNDYwNy1hMTE1LWUzYWQxZTY1NDhmYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIzNmZmNWMzOS0zMzVkLTQ2MDctYTExNS1lM2FkMWU2NTQ4ZmMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Mm92FAP-MLNl_GiIREwNyVaTFBQgLdKiIHtaJkFzv-wWsHzLdT9ZSiwK7N0eUCejJkjllSKlpbwm5gjCKHo9WLDHMVnRf11E7pE_ylbwc8s8Yvr97_4Tl7R9kukpXrEeysiUSeRT1kFLjJP2otYT1OoplS3D18VI4dV7FpcbzHuSuGl9pOs554maY66Be-aYsnnn-SVB6uVhK5JryucveogZnh_YhonHVgLpKwkKLCuwo5yIxL-J-FUxlnWuEl8WWSM_kwwWdCfkCAwCNG0HMR5HSNQNeRoxRok7rQJkubducIX7Cef19r_bPCfPrlg41lTEOG0rG-BKX1u_sgvn-g\n", stderr: "" })
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:43:36Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:48:38Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:48:38Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:48:38Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:48:39Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:48:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "6e951a17-760b-4906-a11d-611d183405db" "device1"
[2021-11-02T12:48:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:48:39Z INFO  drogue_cloud_tests::resources::apps] Destroy application '6e951a17-760b-4906-a11d-611d183405db'
[2021-11-02T12:48:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "6e951a17-760b-4906-a11d-611d183405db"
[2021-11-02T12:48:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 6e951a17-760b-4906-a11d-611d183405db deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::command::test_command::version_2

**Duration**: 310.762224124s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:48:41Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:48:43Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:48:45Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:48:46Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTkxMjYsImlhdCI6MTYzNTg1NzMyNiwianRpIjoiZDAyMmQ1NTItMDRhZi00Y2RjLWE4YzYtNjg5YjUwMTEyY2Q3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiN2U5MzYwMjgtZjkwMy00MzdiLTllZGEtZDM2ODQ1ZmMyOGRjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjdlOTM2MDI4LWY5MDMtNDM3Yi05ZWRhLWQzNjg0NWZjMjhkYyJ9.hnABa4tSoRdvklDizf6spmgwNv23mJntg8d-iZd8NmM
[2021-11-02T12:48:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:48:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:48:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTkxMjYsImlhdCI6MTYzNTg1NzMyNiwianRpIjoiZDAyMmQ1NTItMDRhZi00Y2RjLWE4YzYtNjg5YjUwMTEyY2Q3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiN2U5MzYwMjgtZjkwMy00MzdiLTllZGEtZDM2ODQ1ZmMyOGRjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjdlOTM2MDI4LWY5MDMtNDM3Yi05ZWRhLWQzNjg0NWZjMjhkYyJ9.hnABa4tSoRdvklDizf6spmgwNv23mJntg8d-iZd8NmM" "--context" "system-tests"
[2021-11-02T12:48:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:48:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:48:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:48:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTc2MjYsImlhdCI6MTYzNTg1NzMyNiwiYXV0aF90aW1lIjoxNjM1ODU3MzI0LCJqdGkiOiI3ODgzYzdjNi1hMGZhLTQ1YjktOTg1Zi1iMjMwYTJkM2FhMzAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjdlOTM2MDI4LWY5MDMtNDM3Yi05ZWRhLWQzNjg0NWZjMjhkYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3ZTkzNjAyOC1mOTAzLTQzN2ItOWVkYS1kMzY4NDVmYzI4ZGMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.j4ZvjUL93LsVdDIJwS1jQatkcKFmG37qIkkRH-vtDOpBxP6INIltVolPa75B_qUk5cTpFabKJKSF5XSVyJyn5X2MaNEjn0_xVWKGTel_SfDdgryyxON6aj3GqODPEoNGYiZcsVEaqLFqCbpla2uqkb5nOEvM22gjv5e2yYGVk_UvgJzdFW5sgpxix3Gf3iK27tDp7kXgeM0PuyJtDU1SxmvlTE6b9tX-AKQHZnnj_FkPVreLtKFo6X2fWKDFL87Ivrzj1VTihGqFQho5rxdzlKW13u29Z8uLuFU20JP7b5K0URR6mV2-0TT9NXB8AQHIOL0TzBwHtlHypljVf4C7hA\n", stderr: "" })
[2021-11-02T12:48:46Z INFO  drogue_cloud_tests::resources::apps] Create application: 1c088418-a8cd-4ef4-83c2-ccecaa157f0d
[2021-11-02T12:48:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "1c088418-a8cd-4ef4-83c2-ccecaa157f0d"
[2021-11-02T12:48:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 1c088418-a8cd-4ef4-83c2-ccecaa157f0d created.\n", stderr: "" })
[2021-11-02T12:48:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1c088418-a8cd-4ef4-83c2-ccecaa157f0d"
[2021-11-02T12:48:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:48:46.990662Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"1c088418-a8cd-4ef4-83c2-ccecaa157f0d\",\n    \"resourceVersion\": \"a3c46bc6-7409-4a9b-89f8-c64671a9a6c9\",\n    \"uid\": \"1490fa1b-6429-4af8-b76a-c41d481ee4b8\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:48:47.013348630Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:48:47.013333713Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.013301843Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.013302775Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.013303426Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.013304147Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.013305189Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.013306952Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1c088418-a8cd-4ef4-83c2-ccecaa157f0d"
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:48:46.990662Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"1c088418-a8cd-4ef4-83c2-ccecaa157f0d\",\n    \"resourceVersion\": \"a682d2b6-ebb8-4102-84b5-25712d7d312e\",\n    \"uid\": \"1490fa1b-6429-4af8-b76a-c41d481ee4b8\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:48:47.272601816Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:48:47.272566761Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.038583962Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.046843883Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.136709576Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.146457037Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.272538549Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.272539761Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"RIuO4mK29WKP\",\n        \"username\": \"user-1c088418-a8cd-4ef4-83c2-ccecaa157f0d\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1c088418-a8cd-4ef4-83c2-ccecaa157f0d"
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:48:46.990662Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"1c088418-a8cd-4ef4-83c2-ccecaa157f0d\",\n    \"resourceVersion\": \"a682d2b6-ebb8-4102-84b5-25712d7d312e\",\n    \"uid\": \"1490fa1b-6429-4af8-b76a-c41d481ee4b8\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:48:47.272601816Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:48:47.272566761Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.038583962Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.046843883Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.136709576Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.146457037Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.272538549Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:48:47.272539761Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"RIuO4mK29WKP\",\n        \"username\": \"user-1c088418-a8cd-4ef4-83c2-ccecaa157f0d\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "1c088418-a8cd-4ef4-83c2-ccecaa157f0d" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::tests::http::command] Sending payload
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::tests::http::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTc2MjYsImlhdCI6MTYzNTg1NzMyNiwiYXV0aF90aW1lIjoxNjM1ODU3MzI0LCJqdGkiOiI3ODgzYzdjNi1hMGZhLTQ1YjktOTg1Zi1iMjMwYTJkM2FhMzAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjdlOTM2MDI4LWY5MDMtNDM3Yi05ZWRhLWQzNjg0NWZjMjhkYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3ZTkzNjAyOC1mOTAzLTQzN2ItOWVkYS1kMzY4NDVmYzI4ZGMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.j4ZvjUL93LsVdDIJwS1jQatkcKFmG37qIkkRH-vtDOpBxP6INIltVolPa75B_qUk5cTpFabKJKSF5XSVyJyn5X2MaNEjn0_xVWKGTel_SfDdgryyxON6aj3GqODPEoNGYiZcsVEaqLFqCbpla2uqkb5nOEvM22gjv5e2yYGVk_UvgJzdFW5sgpxix3Gf3iK27tDp7kXgeM0PuyJtDU1SxmvlTE6b9tX-AKQHZnnj_FkPVreLtKFo6X2fWKDFL87Ivrzj1VTihGqFQho5rxdzlKW13u29Z8uLuFU20JP7b5K0URR6mV2-0TT9NXB8AQHIOL0TzBwHtlHypljVf4C7hA\n", stderr: "" })
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:48:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:53:49Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:53:49Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:53:49Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:53:49Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:53:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "1c088418-a8cd-4ef4-83c2-ccecaa157f0d" "device1"
[2021-11-02T12:53:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:53:49Z INFO  drogue_cloud_tests::resources::apps] Destroy application '1c088418-a8cd-4ef4-83c2-ccecaa157f0d'
[2021-11-02T12:53:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "1c088418-a8cd-4ef4-83c2-ccecaa157f0d"
[2021-11-02T12:53:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 1c088418-a8cd-4ef4-83c2-ccecaa157f0d deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::command::test_command::version_3

**Duration**: 310.955117228s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:53:51Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:53:54Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:53:56Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTk0MzcsImlhdCI6MTYzNTg1NzYzNywianRpIjoiMjQ1OTAzZDQtMTY3Ni00Njk3LWEwYjctNjYxYmUwMTFjZmJhIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYTQyNDRjNmYtNzQ5MC00M2QyLWIyNGUtZTgzNjQ1MDI3M2RhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImE0MjQ0YzZmLTc0OTAtNDNkMi1iMjRlLWU4MzY0NTAyNzNkYSJ9.cecBm1isS17blZt1yTOCi3KgyjrOQ6nPu91F5rJc34Q
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTk0MzcsImlhdCI6MTYzNTg1NzYzNywianRpIjoiMjQ1OTAzZDQtMTY3Ni00Njk3LWEwYjctNjYxYmUwMTFjZmJhIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYTQyNDRjNmYtNzQ5MC00M2QyLWIyNGUtZTgzNjQ1MDI3M2RhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImE0MjQ0YzZmLTc0OTAtNDNkMi1iMjRlLWU4MzY0NTAyNzNkYSJ9.cecBm1isS17blZt1yTOCi3KgyjrOQ6nPu91F5rJc34Q" "--context" "system-tests"
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTc5MzcsImlhdCI6MTYzNTg1NzYzNywiYXV0aF90aW1lIjoxNjM1ODU3NjM1LCJqdGkiOiIwZWFmNTU2Yi01ZjdiLTQ5ZTctYTEzMy05ZjkyMmViYmQ5YzUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImE0MjQ0YzZmLTc0OTAtNDNkMi1iMjRlLWU4MzY0NTAyNzNkYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhNDI0NGM2Zi03NDkwLTQzZDItYjI0ZS1lODM2NDUwMjczZGEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.asIEGzotkjETYWRf9Nrt2RAlemuFUzIfQpwiUoKKXFpmHOrn2LjyatYHzwdjelVNiIMIT32zBAYEXi3Jrd-nxQk6CRVaJcy69eFr88Pc7KSbDcaJiI_3PC9NvTpet47kEezzo68kyEw9xeVXusg3FSyKQWaCTWYyFhw_KfZX4FgolwIcqbNk0KE_mbG6PD0BttV0_BH3s-vB7A1Qv2dXgdbL8ob2HEam8Vr5kqOPOX9wuvAHOL3PCLIEWPQMYR5faDAbEsm4TpAb-PrdOuJx70xtLXdjVscJG0CQq3mu-e_rsKto5HoZAqS9lhai589RfaHzXBWeOaxTNkulBg88Dw\n", stderr: "" })
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::resources::apps] Create application: e65cdaee-c72f-4cd4-873a-2fdd363ae340
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "e65cdaee-c72f-4cd4-873a-2fdd363ae340"
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App e65cdaee-c72f-4cd4-873a-2fdd363ae340 created.\n", stderr: "" })
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e65cdaee-c72f-4cd4-873a-2fdd363ae340"
[2021-11-02T12:53:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:53:57.864642Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"e65cdaee-c72f-4cd4-873a-2fdd363ae340\",\n    \"resourceVersion\": \"620c57be-7375-4e57-aa2b-e057a6564da4\",\n    \"uid\": \"f6fb60c3-e801-4ea1-b800-55abfb5ccd4f\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:53:57.886584781Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:53:57.886571827Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.886548112Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.886548874Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.886549345Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.886549806Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.886550387Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.886551810Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:53:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e65cdaee-c72f-4cd4-873a-2fdd363ae340"
[2021-11-02T12:53:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:53:57.864642Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"e65cdaee-c72f-4cd4-873a-2fdd363ae340\",\n    \"resourceVersion\": \"2af378f5-f428-4294-be12-9fdc280b7745\",\n    \"uid\": \"f6fb60c3-e801-4ea1-b800-55abfb5ccd4f\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:53:58.083863323Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:53:58.083824741Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.913061102Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.920391728Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.981530066Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.987789058Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:58.083799123Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:58.083800526Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"UWJB9sbkz3Ny\",\n        \"username\": \"user-e65cdaee-c72f-4cd4-873a-2fdd363ae340\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:53:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e65cdaee-c72f-4cd4-873a-2fdd363ae340"
[2021-11-02T12:53:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:53:57.864642Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"e65cdaee-c72f-4cd4-873a-2fdd363ae340\",\n    \"resourceVersion\": \"2af378f5-f428-4294-be12-9fdc280b7745\",\n    \"uid\": \"f6fb60c3-e801-4ea1-b800-55abfb5ccd4f\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:53:58.083863323Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:53:58.083824741Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.913061102Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.920391728Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.981530066Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:57.987789058Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:58.083799123Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:53:58.083800526Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"UWJB9sbkz3Ny\",\n        \"username\": \"user-e65cdaee-c72f-4cd4-873a-2fdd363ae340\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:53:58Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:53:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "e65cdaee-c72f-4cd4-873a-2fdd363ae340" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T12:53:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:53:58Z INFO  drogue_cloud_tests::tests::http::command] Sending payload
[2021-11-02T12:53:58Z INFO  drogue_cloud_tests::tests::http::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:53:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:53:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTc5MzcsImlhdCI6MTYzNTg1NzYzNywiYXV0aF90aW1lIjoxNjM1ODU3NjM1LCJqdGkiOiIwZWFmNTU2Yi01ZjdiLTQ5ZTctYTEzMy05ZjkyMmViYmQ5YzUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImE0MjQ0YzZmLTc0OTAtNDNkMi1iMjRlLWU4MzY0NTAyNzNkYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhNDI0NGM2Zi03NDkwLTQzZDItYjI0ZS1lODM2NDUwMjczZGEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.asIEGzotkjETYWRf9Nrt2RAlemuFUzIfQpwiUoKKXFpmHOrn2LjyatYHzwdjelVNiIMIT32zBAYEXi3Jrd-nxQk6CRVaJcy69eFr88Pc7KSbDcaJiI_3PC9NvTpet47kEezzo68kyEw9xeVXusg3FSyKQWaCTWYyFhw_KfZX4FgolwIcqbNk0KE_mbG6PD0BttV0_BH3s-vB7A1Qv2dXgdbL8ob2HEam8Vr5kqOPOX9wuvAHOL3PCLIEWPQMYR5faDAbEsm4TpAb-PrdOuJx70xtLXdjVscJG0CQq3mu-e_rsKto5HoZAqS9lhai589RfaHzXBWeOaxTNkulBg88Dw\n", stderr: "" })
[2021-11-02T12:53:59Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:53:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:53:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T12:59:00Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T12:59:00Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T12:59:00Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T12:59:00Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T12:59:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "e65cdaee-c72f-4cd4-873a-2fdd363ae340" "device1"
[2021-11-02T12:59:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T12:59:00Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'e65cdaee-c72f-4cd4-873a-2fdd363ae340'
[2021-11-02T12:59:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "e65cdaee-c72f-4cd4-873a-2fdd363ae340"
[2021-11-02T12:59:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App e65cdaee-c72f-4cd4-873a-2fdd363ae340 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_pass::version_1

**Duration**: 310.840870953s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T12:59:03Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:59:05Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T12:59:07Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T12:59:08Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTk3NDgsImlhdCI6MTYzNTg1Nzk0OCwianRpIjoiYTEyMmRmMzktZGFhOC00OTE0LWE0MjItNWU2ODM3MmFhZTdlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZTI2M2U3ZmMtYTEwMy00YjJjLWIzY2ItY2Y5OTQyNWM2NDFhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImUyNjNlN2ZjLWExMDMtNGIyYy1iM2NiLWNmOTk0MjVjNjQxYSJ9.stAK57o_8c6xZKwkPVMVYojs3KiacWciRMRHemiMoME
[2021-11-02T12:59:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T12:59:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T12:59:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NTk3NDgsImlhdCI6MTYzNTg1Nzk0OCwianRpIjoiYTEyMmRmMzktZGFhOC00OTE0LWE0MjItNWU2ODM3MmFhZTdlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZTI2M2U3ZmMtYTEwMy00YjJjLWIzY2ItY2Y5OTQyNWM2NDFhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImUyNjNlN2ZjLWExMDMtNGIyYy1iM2NiLWNmOTk0MjVjNjQxYSJ9.stAK57o_8c6xZKwkPVMVYojs3KiacWciRMRHemiMoME" "--context" "system-tests"
[2021-11-02T12:59:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T12:59:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:59:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:59:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTgyNDgsImlhdCI6MTYzNTg1Nzk0OCwiYXV0aF90aW1lIjoxNjM1ODU3OTQ2LCJqdGkiOiIwNTFkNTc1Mi1hMmRhLTQ4YWQtYTkwZi1mNzA0OTE3ZmY0YTYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImUyNjNlN2ZjLWExMDMtNGIyYy1iM2NiLWNmOTk0MjVjNjQxYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJlMjYzZTdmYy1hMTAzLTRiMmMtYjNjYi1jZjk5NDI1YzY0MWEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.L9wrNFMCwq6Ca_mRNJm0PEOAwXDW7OAVmFboCVcnHcJEkMPLaGSYi4tWmnHS4FLTHOXOfVYCD9y05EHVCcNm-R3oF0A0qbT5pI4n-3h7AOsMt2LoYZafFqiK7uaJ2-RWC0z8Gx2LhjPo_GHfR8x6rlVPezdU7cnvLsQTUIemlY3WyG1nEndgn7UihCvp0kNPuQW8qcWgJKZoASdr2ia4sdrC-KPAjomq2ePpbyaFNuzmzMhNg5AglNaA--UIS0-NTvaUuSyEOCJ_RQe6RU2VRZgHRatO6Bhu9wmdAh4-bEOhiRGYF3GpbNl51yWB8qCu7S0scs52t8zvUEcifKpIjA\n", stderr: "" })
[2021-11-02T12:59:09Z INFO  drogue_cloud_tests::resources::apps] Create application: 3c45bc90-d64f-4ae1-a75a-8e77c50e58ed
[2021-11-02T12:59:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "3c45bc90-d64f-4ae1-a75a-8e77c50e58ed"
[2021-11-02T12:59:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3c45bc90-d64f-4ae1-a75a-8e77c50e58ed created.\n", stderr: "" })
[2021-11-02T12:59:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3c45bc90-d64f-4ae1-a75a-8e77c50e58ed"
[2021-11-02T12:59:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:59:09.125463Z\",\n    \"generation\": 1,\n    \"name\": \"3c45bc90-d64f-4ae1-a75a-8e77c50e58ed\",\n    \"resourceVersion\": \"8681b5b3-8b95-401c-bd55-7245451accd5\",\n    \"uid\": \"b505d2e0-361a-4325-b371-12663d354847\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:59:09.140788309Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}\n", stderr: "" })
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3c45bc90-d64f-4ae1-a75a-8e77c50e58ed"
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:59:09.125463Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"3c45bc90-d64f-4ae1-a75a-8e77c50e58ed\",\n    \"resourceVersion\": \"5985ae50-ce9e-4f76-b94b-55c95929a0e3\",\n    \"uid\": \"b505d2e0-361a-4325-b371-12663d354847\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:59:09.367463589Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:59:09.367427853Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:59:09.180460932Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:59:09.189402451Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:59:09.259202698Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:59:09.267829558Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:59:09.367401374Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:59:09.367402566Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"fNAnDjbuNHgq\",\n        \"username\": \"user-3c45bc90-d64f-4ae1-a75a-8e77c50e58ed\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3c45bc90-d64f-4ae1-a75a-8e77c50e58ed"
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T12:59:09.125463Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"3c45bc90-d64f-4ae1-a75a-8e77c50e58ed\",\n    \"resourceVersion\": \"5985ae50-ce9e-4f76-b94b-55c95929a0e3\",\n    \"uid\": \"b505d2e0-361a-4325-b371-12663d354847\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:59:09.367463589Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T12:59:09.367427853Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:59:09.180460932Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:59:09.189402451Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:59:09.259202698Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:59:09.267829558Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:59:09.367401374Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T12:59:09.367402566Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"fNAnDjbuNHgq\",\n        \"username\": \"user-3c45bc90-d64f-4ae1-a75a-8e77c50e58ed\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "3c45bc90-d64f-4ae1-a75a-8e77c50e58ed" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTgyNDgsImlhdCI6MTYzNTg1Nzk0OCwiYXV0aF90aW1lIjoxNjM1ODU3OTQ2LCJqdGkiOiIwNTFkNTc1Mi1hMmRhLTQ4YWQtYTkwZi1mNzA0OTE3ZmY0YTYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImUyNjNlN2ZjLWExMDMtNGIyYy1iM2NiLWNmOTk0MjVjNjQxYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJlMjYzZTdmYy1hMTAzLTRiMmMtYjNjYi1jZjk5NDI1YzY0MWEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.L9wrNFMCwq6Ca_mRNJm0PEOAwXDW7OAVmFboCVcnHcJEkMPLaGSYi4tWmnHS4FLTHOXOfVYCD9y05EHVCcNm-R3oF0A0qbT5pI4n-3h7AOsMt2LoYZafFqiK7uaJ2-RWC0z8Gx2LhjPo_GHfR8x6rlVPezdU7cnvLsQTUIemlY3WyG1nEndgn7UihCvp0kNPuQW8qcWgJKZoASdr2ia4sdrC-KPAjomq2ePpbyaFNuzmzMhNg5AglNaA--UIS0-NTvaUuSyEOCJ_RQe6RU2VRZgHRatO6Bhu9wmdAh4-bEOhiRGYF3GpbNl51yWB8qCu7S0scs52t8zvUEcifKpIjA\n", stderr: "" })
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T12:59:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:04:11Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:04:11Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:04:11Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:04:11Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:04:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "3c45bc90-d64f-4ae1-a75a-8e77c50e58ed" "device1"
[2021-11-02T13:04:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:04:11Z INFO  drogue_cloud_tests::resources::apps] Destroy application '3c45bc90-d64f-4ae1-a75a-8e77c50e58ed'
[2021-11-02T13:04:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "3c45bc90-d64f-4ae1-a75a-8e77c50e58ed"
[2021-11-02T13:04:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3c45bc90-d64f-4ae1-a75a-8e77c50e58ed deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_pass::version_2

**Duration**: 312.005302923s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:04:13Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:04:16Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:04:17Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjAwNTgsImlhdCI6MTYzNTg1ODI1OCwianRpIjoiZmNmYTFmMWQtNzJhOC00ODBjLWJiNmMtMjQ3OTkyNzE3MTA3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYmNmNTE5NmEtMmYzYS00N2I0LTk4MTktNmU0MjUyN2I1MzdiIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImJjZjUxOTZhLTJmM2EtNDdiNC05ODE5LTZlNDI1MjdiNTM3YiJ9.PA3OraJjI-UfNqGvISm4Nn20TUA3wmdRYgesCMi0mZs
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjAwNTgsImlhdCI6MTYzNTg1ODI1OCwianRpIjoiZmNmYTFmMWQtNzJhOC00ODBjLWJiNmMtMjQ3OTkyNzE3MTA3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYmNmNTE5NmEtMmYzYS00N2I0LTk4MTktNmU0MjUyN2I1MzdiIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImJjZjUxOTZhLTJmM2EtNDdiNC05ODE5LTZlNDI1MjdiNTM3YiJ9.PA3OraJjI-UfNqGvISm4Nn20TUA3wmdRYgesCMi0mZs" "--context" "system-tests"
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTg1NTksImlhdCI6MTYzNTg1ODI1OSwiYXV0aF90aW1lIjoxNjM1ODU4MjU2LCJqdGkiOiIyOWU2ZGE2OS01N2MyLTQ3YzItOWRmYS0yZTU2ZmU4ZmM3ZDEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImJjZjUxOTZhLTJmM2EtNDdiNC05ODE5LTZlNDI1MjdiNTM3YiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJiY2Y1MTk2YS0yZjNhLTQ3YjQtOTgxOS02ZTQyNTI3YjUzN2IiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.q2y_KZpF7rls_mxn4D_-mHNJWU2qQLqGJ5UppbS38yEsk5HOaBiq8svATWPulrn8PNjuIaZ2Ce9eSByTdz41znVVEfeoKgD3CPdJT1h_WL7ORpGVClaVr4C_B6xT5jb_r8buDhKW8uGTbwpTyxivglIv5n_zQBiYIqRhbnJvacv1MqYGffrfm22e75a3p119UI8CGJWPPLjEvzb_hWfeRzQYk6gBXomTDFnPmlKAOjg1Xj9VrWGBvstM38SCdL7qEeCO1X3tvY8QoAd_vwsnxGrS7HOcup3wZG8SnYBjt7LMj8GGZSICYhomAW3eOiqabzYaxW-9LxC_d5v8CiPZlQ\n", stderr: "" })
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::resources::apps] Create application: e522d7c3-ac9b-4163-8cf7-61277adbd00e
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "e522d7c3-ac9b-4163-8cf7-61277adbd00e"
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App e522d7c3-ac9b-4163-8cf7-61277adbd00e created.\n", stderr: "" })
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e522d7c3-ac9b-4163-8cf7-61277adbd00e"
[2021-11-02T13:04:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:04:19.756819Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"e522d7c3-ac9b-4163-8cf7-61277adbd00e\",\n    \"resourceVersion\": \"f9e33da2-4122-4698-8e45-b3c3995f177c\",\n    \"uid\": \"bf1363ea-8dbc-43bd-8a96-9ea79e16b7ae\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:04:19.778781377Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:04:19.778761079Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.778697329Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.778698562Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.778699083Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.778699824Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.778700795Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.778703400Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e522d7c3-ac9b-4163-8cf7-61277adbd00e"
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:04:19.756819Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"e522d7c3-ac9b-4163-8cf7-61277adbd00e\",\n    \"resourceVersion\": \"037f637f-d303-4537-911f-7cb6f1f1c80f\",\n    \"uid\": \"bf1363ea-8dbc-43bd-8a96-9ea79e16b7ae\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:04:20.097041582Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:04:20.097002559Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.805898294Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.888188805Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.971393464Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.978599569Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:20.096976170Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:20.096977361Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"YqcGnuQ7bS5n\",\n        \"username\": \"user-e522d7c3-ac9b-4163-8cf7-61277adbd00e\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e522d7c3-ac9b-4163-8cf7-61277adbd00e"
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:04:19.756819Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"e522d7c3-ac9b-4163-8cf7-61277adbd00e\",\n    \"resourceVersion\": \"037f637f-d303-4537-911f-7cb6f1f1c80f\",\n    \"uid\": \"bf1363ea-8dbc-43bd-8a96-9ea79e16b7ae\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:04:20.097041582Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:04:20.097002559Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.805898294Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.888188805Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.971393464Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:19.978599569Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:20.096976170Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:04:20.096977361Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"YqcGnuQ7bS5n\",\n        \"username\": \"user-e522d7c3-ac9b-4163-8cf7-61277adbd00e\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "e522d7c3-ac9b-4163-8cf7-61277adbd00e" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTg1NTksImlhdCI6MTYzNTg1ODI1OSwiYXV0aF90aW1lIjoxNjM1ODU4MjU2LCJqdGkiOiIyOWU2ZGE2OS01N2MyLTQ3YzItOWRmYS0yZTU2ZmU4ZmM3ZDEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImJjZjUxOTZhLTJmM2EtNDdiNC05ODE5LTZlNDI1MjdiNTM3YiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJiY2Y1MTk2YS0yZjNhLTQ3YjQtOTgxOS02ZTQyNTI3YjUzN2IiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.q2y_KZpF7rls_mxn4D_-mHNJWU2qQLqGJ5UppbS38yEsk5HOaBiq8svATWPulrn8PNjuIaZ2Ce9eSByTdz41znVVEfeoKgD3CPdJT1h_WL7ORpGVClaVr4C_B6xT5jb_r8buDhKW8uGTbwpTyxivglIv5n_zQBiYIqRhbnJvacv1MqYGffrfm22e75a3p119UI8CGJWPPLjEvzb_hWfeRzQYk6gBXomTDFnPmlKAOjg1Xj9VrWGBvstM38SCdL7qEeCO1X3tvY8QoAd_vwsnxGrS7HOcup3wZG8SnYBjt7LMj8GGZSICYhomAW3eOiqabzYaxW-9LxC_d5v8CiPZlQ\n", stderr: "" })
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:04:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:09:22Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:09:22Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:09:22Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:09:23Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:09:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "e522d7c3-ac9b-4163-8cf7-61277adbd00e" "device1"
[2021-11-02T13:09:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:09:23Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'e522d7c3-ac9b-4163-8cf7-61277adbd00e'
[2021-11-02T13:09:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "e522d7c3-ac9b-4163-8cf7-61277adbd00e"
[2021-11-02T13:09:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App e522d7c3-ac9b-4163-8cf7-61277adbd00e deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_pass::version_3

**Duration**: 311.934875714s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:09:25Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:09:28Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:09:29Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:09:30Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjAzNzAsImlhdCI6MTYzNTg1ODU3MCwianRpIjoiN2YzYTdiNzctZWFiNC00N2Q4LWExNTctN2YxY2FiMmUyY2Y2IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNGY3MGZhZjMtYmMzMy00ODgzLWE2NzQtNDQzOWRiZmEzMjE4Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjRmNzBmYWYzLWJjMzMtNDg4My1hNjc0LTQ0MzlkYmZhMzIxOCJ9.yCw44RNk3H0_o8A-ulptZV6lUV9d1swfLmZJs97av-U
[2021-11-02T13:09:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:09:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:09:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjAzNzAsImlhdCI6MTYzNTg1ODU3MCwianRpIjoiN2YzYTdiNzctZWFiNC00N2Q4LWExNTctN2YxY2FiMmUyY2Y2IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNGY3MGZhZjMtYmMzMy00ODgzLWE2NzQtNDQzOWRiZmEzMjE4Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjRmNzBmYWYzLWJjMzMtNDg4My1hNjc0LTQ0MzlkYmZhMzIxOCJ9.yCw44RNk3H0_o8A-ulptZV6lUV9d1swfLmZJs97av-U" "--context" "system-tests"
[2021-11-02T13:09:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:09:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:09:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:09:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTg4NzEsImlhdCI6MTYzNTg1ODU3MSwiYXV0aF90aW1lIjoxNjM1ODU4NTY4LCJqdGkiOiJjNzgwNmZhNS02NDAxLTQwODItYTM5OS00YmVkMGRiYTFmNDMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjRmNzBmYWYzLWJjMzMtNDg4My1hNjc0LTQ0MzlkYmZhMzIxOCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI0ZjcwZmFmMy1iYzMzLTQ4ODMtYTY3NC00NDM5ZGJmYTMyMTgiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.BkPX-XvX4rqVcgLaUjWDY4C7CRmC59LFro5xrFkn0bfazleY9GCU3_Qgu_ZjWAH9DScXCQ3ec7wbhlIjrgbdoMofaW6AhvMBViQLKZcXLHf4PkY_0v2c0WgqXz7Mi-OthT4qLjj8knzMVrxCcjTiFinTjHUF7W4QS8EyNWzHHn7ZKbB_TI9vqOFePKagGfUKccZo0Nrjz1n7yAvpjwvDLxmlUPPTynNj_q764ZR93uFarKBcUgTU7HVfzgKFyw1A1joXYHt3GvqTGdD3gojcol_iju-67yosMMI_ki8_WG5jHswh0quruK2KihHfl80IeaGkj0VHKLk-wdfex3OmxA\n", stderr: "" })
[2021-11-02T13:09:31Z INFO  drogue_cloud_tests::resources::apps] Create application: 3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9
[2021-11-02T13:09:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9"
[2021-11-02T13:09:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9 created.\n", stderr: "" })
[2021-11-02T13:09:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9"
[2021-11-02T13:09:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:09:31.702992Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9\",\n    \"resourceVersion\": \"cbd4f9b3-663f-4496-88e1-3488fa9dc420\",\n    \"uid\": \"edeb7a1f-71e5-4b70-bf9f-b4ae9065466b\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:09:31.718345407Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:09:31.718367558Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.718301515Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.718304621Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.718305462Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.718306604Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.718307376Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.718311303Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9"
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:09:31.702992Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9\",\n    \"resourceVersion\": \"23dabb98-94ff-43f9-9ccf-e7b13eb724a8\",\n    \"uid\": \"edeb7a1f-71e5-4b70-bf9f-b4ae9065466b\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:09:31.934723879Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:09:31.934760848Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.744822100Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.753156576Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.813623694Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.821181118Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.934697320Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.934698652Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"t9t9NN5WBIQ5\",\n        \"username\": \"user-3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9"
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:09:31.702992Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9\",\n    \"resourceVersion\": \"23dabb98-94ff-43f9-9ccf-e7b13eb724a8\",\n    \"uid\": \"edeb7a1f-71e5-4b70-bf9f-b4ae9065466b\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:09:31.934723879Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:09:31.934760848Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.744822100Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.753156576Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.813623694Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.821181118Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.934697320Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:09:31.934698652Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"t9t9NN5WBIQ5\",\n        \"username\": \"user-3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTg4NzEsImlhdCI6MTYzNTg1ODU3MSwiYXV0aF90aW1lIjoxNjM1ODU4NTY4LCJqdGkiOiJjNzgwNmZhNS02NDAxLTQwODItYTM5OS00YmVkMGRiYTFmNDMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjRmNzBmYWYzLWJjMzMtNDg4My1hNjc0LTQ0MzlkYmZhMzIxOCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI0ZjcwZmFmMy1iYzMzLTQ4ODMtYTY3NC00NDM5ZGJmYTMyMTgiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.BkPX-XvX4rqVcgLaUjWDY4C7CRmC59LFro5xrFkn0bfazleY9GCU3_Qgu_ZjWAH9DScXCQ3ec7wbhlIjrgbdoMofaW6AhvMBViQLKZcXLHf4PkY_0v2c0WgqXz7Mi-OthT4qLjj8knzMVrxCcjTiFinTjHUF7W4QS8EyNWzHHn7ZKbB_TI9vqOFePKagGfUKccZo0Nrjz1n7yAvpjwvDLxmlUPPTynNj_q764ZR93uFarKBcUgTU7HVfzgKFyw1A1joXYHt3GvqTGdD3gojcol_iju-67yosMMI_ki8_WG5jHswh0quruK2KihHfl80IeaGkj0VHKLk-wdfex3OmxA\n", stderr: "" })
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:09:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:14:34Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:14:34Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:14:34Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:14:35Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:14:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9" "device1"
[2021-11-02T13:14:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:14:35Z INFO  drogue_cloud_tests::resources::apps] Destroy application '3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9'
[2021-11-02T13:14:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9"
[2021-11-02T13:14:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3838cdb9-1ffc-4d88-8e84-6a77e15e7cc9 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user::version_1

**Duration**: 312.072450029s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:14:37Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:14:40Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:14:41Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:14:42Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjA2ODIsImlhdCI6MTYzNTg1ODg4MiwianRpIjoiMDAzNWE1N2YtMGI3Ny00OGMzLTk5ZWEtZjA5ZTU5OGY0N2RiIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODc4ZjkyNGItNDI2MC00OTRkLThhNjctYWJiM2ViYWYwOWIwIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijg3OGY5MjRiLTQyNjAtNDk0ZC04YTY3LWFiYjNlYmFmMDliMCJ9.9XYB-UY2WcuP_N07nOHT9Pm6wYIHEkvWKZM0klzsf4w
[2021-11-02T13:14:42Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:14:42Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:14:42Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjA2ODIsImlhdCI6MTYzNTg1ODg4MiwianRpIjoiMDAzNWE1N2YtMGI3Ny00OGMzLTk5ZWEtZjA5ZTU5OGY0N2RiIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODc4ZjkyNGItNDI2MC00OTRkLThhNjctYWJiM2ViYWYwOWIwIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijg3OGY5MjRiLTQyNjAtNDk0ZC04YTY3LWFiYjNlYmFmMDliMCJ9.9XYB-UY2WcuP_N07nOHT9Pm6wYIHEkvWKZM0klzsf4w" "--context" "system-tests"
[2021-11-02T13:14:42Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:14:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:14:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:14:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTkxODIsImlhdCI6MTYzNTg1ODg4MiwiYXV0aF90aW1lIjoxNjM1ODU4ODgwLCJqdGkiOiI1OTViZWRmNS1mMDQxLTRiYjEtODYyMC0yM2I1Y2IzZGE2MWQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijg3OGY5MjRiLTQyNjAtNDk0ZC04YTY3LWFiYjNlYmFmMDliMCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4NzhmOTI0Yi00MjYwLTQ5NGQtOGE2Ny1hYmIzZWJhZjA5YjAiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.dDDw-HOkmk-MV4gZ8r8aRs2Jm8yVTjnVl0yJFDfqCYDO-nlzsSvi2k6MoYmm073wZm4jOmyfxBUxDnDy4duhYByG8hQBNa_vgT1cmDTMpDuENNIsO0efDPSFpf_INn-3WBGCf-s1sgd1FUBcLi2FWNcMeGcHlpyecehz4U29hscnpSMaL2sT3eXbfpml-3W4Z_VcoRWYd01Sk8MMm3tNOYHS7I7FNbQmI-yPC_f6CjiOedYW1UsjWcRJrLcZB3fTSKcn7gq24vqnZElDhn3RiVd4o3LZ7giLQWFdirWKLltFSN1amONmvmsUKMS6prrvIpWBZLekSLfTHCwNr2NueQ\n", stderr: "" })
[2021-11-02T13:14:43Z INFO  drogue_cloud_tests::resources::apps] Create application: 3cdd6263-694e-4ddc-b2a9-9a679addbff0
[2021-11-02T13:14:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "3cdd6263-694e-4ddc-b2a9-9a679addbff0"
[2021-11-02T13:14:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3cdd6263-694e-4ddc-b2a9-9a679addbff0 created.\n", stderr: "" })
[2021-11-02T13:14:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3cdd6263-694e-4ddc-b2a9-9a679addbff0"
[2021-11-02T13:14:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:14:43.605740Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"3cdd6263-694e-4ddc-b2a9-9a679addbff0\",\n    \"resourceVersion\": \"0a5eb5a1-2e73-4dc1-aca2-8ae76524fedf\",\n    \"uid\": \"8650eeef-54a0-4b86-86b4-41181a225a7d\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:14:43.619349847Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:14:43.619390655Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.619313750Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.619316485Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.619317266Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.619318108Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.619318749Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.619321895Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3cdd6263-694e-4ddc-b2a9-9a679addbff0"
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:14:43.605740Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"3cdd6263-694e-4ddc-b2a9-9a679addbff0\",\n    \"resourceVersion\": \"8cef35fb-09c5-4bd1-bf6c-c96749fc909e\",\n    \"uid\": \"8650eeef-54a0-4b86-86b4-41181a225a7d\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:14:43.826390533Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:14:43.826441216Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.647491405Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.656684028Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.708285701Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.714922027Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.826361127Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.826362750Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"cJKlMOeMI1hK\",\n        \"username\": \"user-3cdd6263-694e-4ddc-b2a9-9a679addbff0\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3cdd6263-694e-4ddc-b2a9-9a679addbff0"
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:14:43.605740Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"3cdd6263-694e-4ddc-b2a9-9a679addbff0\",\n    \"resourceVersion\": \"8cef35fb-09c5-4bd1-bf6c-c96749fc909e\",\n    \"uid\": \"8650eeef-54a0-4b86-86b4-41181a225a7d\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:14:43.826390533Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:14:43.826441216Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.647491405Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.656684028Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.708285701Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.714922027Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.826361127Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:14:43.826362750Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"cJKlMOeMI1hK\",\n        \"username\": \"user-3cdd6263-694e-4ddc-b2a9-9a679addbff0\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "3cdd6263-694e-4ddc-b2a9-9a679addbff0" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTkxODIsImlhdCI6MTYzNTg1ODg4MiwiYXV0aF90aW1lIjoxNjM1ODU4ODgwLCJqdGkiOiI1OTViZWRmNS1mMDQxLTRiYjEtODYyMC0yM2I1Y2IzZGE2MWQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijg3OGY5MjRiLTQyNjAtNDk0ZC04YTY3LWFiYjNlYmFmMDliMCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4NzhmOTI0Yi00MjYwLTQ5NGQtOGE2Ny1hYmIzZWJhZjA5YjAiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.dDDw-HOkmk-MV4gZ8r8aRs2Jm8yVTjnVl0yJFDfqCYDO-nlzsSvi2k6MoYmm073wZm4jOmyfxBUxDnDy4duhYByG8hQBNa_vgT1cmDTMpDuENNIsO0efDPSFpf_INn-3WBGCf-s1sgd1FUBcLi2FWNcMeGcHlpyecehz4U29hscnpSMaL2sT3eXbfpml-3W4Z_VcoRWYd01Sk8MMm3tNOYHS7I7FNbQmI-yPC_f6CjiOedYW1UsjWcRJrLcZB3fTSKcn7gq24vqnZElDhn3RiVd4o3LZ7giLQWFdirWKLltFSN1amONmvmsUKMS6prrvIpWBZLekSLfTHCwNr2NueQ\n", stderr: "" })
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:14:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:19:46Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:19:46Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:19:46Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:19:47Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:19:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "3cdd6263-694e-4ddc-b2a9-9a679addbff0" "device1"
[2021-11-02T13:19:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:19:47Z INFO  drogue_cloud_tests::resources::apps] Destroy application '3cdd6263-694e-4ddc-b2a9-9a679addbff0'
[2021-11-02T13:19:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "3cdd6263-694e-4ddc-b2a9-9a679addbff0"
[2021-11-02T13:19:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3cdd6263-694e-4ddc-b2a9-9a679addbff0 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user::version_2

**Duration**: 311.958924617s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:19:49Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:19:52Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:19:53Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:19:54Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjA5OTQsImlhdCI6MTYzNTg1OTE5NCwianRpIjoiYTI5Y2MzY2EtYmZmNS00ZmMxLThlZWUtZWFiODZjZDI2YjZlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMTkxZjNiMWUtOTg1MS00ZTA5LTllMDQtNGY4NTE1NDY2OTEwIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjE5MWYzYjFlLTk4NTEtNGUwOS05ZTA0LTRmODUxNTQ2NjkxMCJ9.01B1h5A1_TJ44B-drXs-LjkspzF6nS8duQkylCFjxeE
[2021-11-02T13:19:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:19:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:19:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjA5OTQsImlhdCI6MTYzNTg1OTE5NCwianRpIjoiYTI5Y2MzY2EtYmZmNS00ZmMxLThlZWUtZWFiODZjZDI2YjZlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMTkxZjNiMWUtOTg1MS00ZTA5LTllMDQtNGY4NTE1NDY2OTEwIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjE5MWYzYjFlLTk4NTEtNGUwOS05ZTA0LTRmODUxNTQ2NjkxMCJ9.01B1h5A1_TJ44B-drXs-LjkspzF6nS8duQkylCFjxeE" "--context" "system-tests"
[2021-11-02T13:19:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:19:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:19:55Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:19:55Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTk0OTQsImlhdCI6MTYzNTg1OTE5NCwiYXV0aF90aW1lIjoxNjM1ODU5MTkyLCJqdGkiOiI0NDFmNDBmNi1kZDQ1LTQyMWEtOGU5ZC05YTQ3ODRiNGEwNzEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjE5MWYzYjFlLTk4NTEtNGUwOS05ZTA0LTRmODUxNTQ2NjkxMCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIxOTFmM2IxZS05ODUxLTRlMDktOWUwNC00Zjg1MTU0NjY5MTAiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.HP5vtHheZnMSEd_oWsDLnSaHnGNhAita-fd-RTp1K2uJSH5pLmNm3-_k_JXRy2u6TfEENaFP4ghuH5s8x3_KAPPG7JarrEd3-1zE-Kp_lsKKZf-U5Z-_ldisWzHNu9dScr-YRlI-8cXFmR9n68pgH0--J-j9ZJf_NCG7bJtdGxofMebtC-WAeHoDpaxPeMFeQyDg5nkTTfqOkvM5hdzzWclO9cWHssgX-nrJlc69s7Cyumj4amJXJbTKqF__aNt22iiY9ui4j5iOojdqrquD8Pj8F8CUsrKl0-kxVHVEx4h35VUA5Pa-l-uIpzf7zBcYB0761-r7GdZ8xCPnNkDO-A\n", stderr: "" })
[2021-11-02T13:19:55Z INFO  drogue_cloud_tests::resources::apps] Create application: 68a0f101-f106-4c1f-9a81-021c1976cec3
[2021-11-02T13:19:55Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "68a0f101-f106-4c1f-9a81-021c1976cec3"
[2021-11-02T13:19:55Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 68a0f101-f106-4c1f-9a81-021c1976cec3 created.\n", stderr: "" })
[2021-11-02T13:19:55Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "68a0f101-f106-4c1f-9a81-021c1976cec3"
[2021-11-02T13:19:55Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:19:55.610436Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"68a0f101-f106-4c1f-9a81-021c1976cec3\",\n    \"resourceVersion\": \"5d93a7c4-b7bf-4402-92a7-c7ce823178d9\",\n    \"uid\": \"1cec1c0d-e847-4f4e-90ab-e5d15dfe50f3\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:19:55.633072639Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:19:55.633058823Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.633014310Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.633015112Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.633015503Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.633016134Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.633016725Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.633018288Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "68a0f101-f106-4c1f-9a81-021c1976cec3"
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:19:55.610436Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"68a0f101-f106-4c1f-9a81-021c1976cec3\",\n    \"resourceVersion\": \"900ccee4-2a80-46b0-93a4-39047ca27007\",\n    \"uid\": \"1cec1c0d-e847-4f4e-90ab-e5d15dfe50f3\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:19:55.915589486Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:19:55.915553368Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.660240152Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.669095277Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.753327959Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.761003550Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.915527148Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.915528241Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"cRvvvPdRu4bK\",\n        \"username\": \"user-68a0f101-f106-4c1f-9a81-021c1976cec3\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "68a0f101-f106-4c1f-9a81-021c1976cec3"
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:19:55.610436Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"68a0f101-f106-4c1f-9a81-021c1976cec3\",\n    \"resourceVersion\": \"900ccee4-2a80-46b0-93a4-39047ca27007\",\n    \"uid\": \"1cec1c0d-e847-4f4e-90ab-e5d15dfe50f3\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:19:55.915589486Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:19:55.915553368Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.660240152Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.669095277Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.753327959Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.761003550Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.915527148Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:19:55.915528241Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"cRvvvPdRu4bK\",\n        \"username\": \"user-68a0f101-f106-4c1f-9a81-021c1976cec3\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "68a0f101-f106-4c1f-9a81-021c1976cec3" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTk0OTQsImlhdCI6MTYzNTg1OTE5NCwiYXV0aF90aW1lIjoxNjM1ODU5MTkyLCJqdGkiOiI0NDFmNDBmNi1kZDQ1LTQyMWEtOGU5ZC05YTQ3ODRiNGEwNzEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjE5MWYzYjFlLTk4NTEtNGUwOS05ZTA0LTRmODUxNTQ2NjkxMCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIxOTFmM2IxZS05ODUxLTRlMDktOWUwNC00Zjg1MTU0NjY5MTAiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.HP5vtHheZnMSEd_oWsDLnSaHnGNhAita-fd-RTp1K2uJSH5pLmNm3-_k_JXRy2u6TfEENaFP4ghuH5s8x3_KAPPG7JarrEd3-1zE-Kp_lsKKZf-U5Z-_ldisWzHNu9dScr-YRlI-8cXFmR9n68pgH0--J-j9ZJf_NCG7bJtdGxofMebtC-WAeHoDpaxPeMFeQyDg5nkTTfqOkvM5hdzzWclO9cWHssgX-nrJlc69s7Cyumj4amJXJbTKqF__aNt22iiY9ui4j5iOojdqrquD8Pj8F8CUsrKl0-kxVHVEx4h35VUA5Pa-l-uIpzf7zBcYB0761-r7GdZ8xCPnNkDO-A\n", stderr: "" })
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:19:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:24:58Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:24:58Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:24:58Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:24:59Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:24:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "68a0f101-f106-4c1f-9a81-021c1976cec3" "device1"
[2021-11-02T13:24:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:24:59Z INFO  drogue_cloud_tests::resources::apps] Destroy application '68a0f101-f106-4c1f-9a81-021c1976cec3'
[2021-11-02T13:24:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "68a0f101-f106-4c1f-9a81-021c1976cec3"
[2021-11-02T13:24:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 68a0f101-f106-4c1f-9a81-021c1976cec3 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user::version_3

**Duration**: 312.160468806s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:25:01Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:25:04Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:25:05Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjEzMDYsImlhdCI6MTYzNTg1OTUwNiwianRpIjoiZmQ2MmZmMjQtMWQ3My00YjkzLTg5ZmQtZWUxYTZmZWYwOWE0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMmMwMTdlYzgtMDU3Yi00YTczLWIzODAtYmM4YzU3ZDY3MGJiIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjJjMDE3ZWM4LTA1N2ItNGE3My1iMzgwLWJjOGM1N2Q2NzBiYiJ9.AFJVLh1cWAqrzXM8OgGmtbtsBvuUKMEkteTfDNFl5-0
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjEzMDYsImlhdCI6MTYzNTg1OTUwNiwianRpIjoiZmQ2MmZmMjQtMWQ3My00YjkzLTg5ZmQtZWUxYTZmZWYwOWE0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMmMwMTdlYzgtMDU3Yi00YTczLWIzODAtYmM4YzU3ZDY3MGJiIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjJjMDE3ZWM4LTA1N2ItNGE3My1iMzgwLWJjOGM1N2Q2NzBiYiJ9.AFJVLh1cWAqrzXM8OgGmtbtsBvuUKMEkteTfDNFl5-0" "--context" "system-tests"
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTk4MDcsImlhdCI6MTYzNTg1OTUwNywiYXV0aF90aW1lIjoxNjM1ODU5NTA0LCJqdGkiOiI3NWQ5Yjc3Zi01ZGI4LTQ2OTAtYThjOS03N2NmNWM3OTFmZGMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjJjMDE3ZWM4LTA1N2ItNGE3My1iMzgwLWJjOGM1N2Q2NzBiYiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIyYzAxN2VjOC0wNTdiLTRhNzMtYjM4MC1iYzhjNTdkNjcwYmIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.KhlZbSeTzUy2IUPdwyxQKirlprovUz5s5KQc7HCE16w8tBoxYz5V2tpL_IA8-8joOxXNOammKfaISfNISPwD_PLWIfipID-zm62AtfVoBrBL44UoUCUHLvN1kiS8PNNRcOeT78Xw3kIs3eQnOY9AZ03Jm-DnM683Dm2vhbCAUIHddrQRwUFECnDvV6p8SSzK17aBYjLb5H0SkZMX058NwDFw3Rd1s63QuutT585HNo9BSMqPM4HLn-J-vXHe45TDUhSDruraDPIpAYQw3OlRRsw2UDbn5IEPTkfgxKoGMPW86WwGQerdN-jHWh5J18h4lztwPKS-xOG2dMXbjCNVKg\n", stderr: "" })
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::resources::apps] Create application: c2c9a648-e9b4-4582-8d06-738a6eab1d30
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "c2c9a648-e9b4-4582-8d06-738a6eab1d30"
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c2c9a648-e9b4-4582-8d06-738a6eab1d30 created.\n", stderr: "" })
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c2c9a648-e9b4-4582-8d06-738a6eab1d30"
[2021-11-02T13:25:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:25:07.820214Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"c2c9a648-e9b4-4582-8d06-738a6eab1d30\",\n    \"resourceVersion\": \"80f887eb-44ab-4578-bfcb-14d7678f6f33\",\n    \"uid\": \"8735a544-042d-4d39-99b3-21bb2d98027d\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:25:07.844716144Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:25:07.844701396Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.844673794Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.844674635Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.844675207Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.844675848Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.844676570Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.844678463Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:25:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c2c9a648-e9b4-4582-8d06-738a6eab1d30"
[2021-11-02T13:25:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:25:07.820214Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"c2c9a648-e9b4-4582-8d06-738a6eab1d30\",\n    \"resourceVersion\": \"5a220a0e-57a9-4ab0-9cd2-612706d24e57\",\n    \"uid\": \"8735a544-042d-4d39-99b3-21bb2d98027d\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:25:08.045841537Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:25:08.045801481Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.870045253Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.881016396Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.944421226Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.950363236Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:08.045774811Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:08.045776073Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"s7Vhdgz76xAF\",\n        \"username\": \"user-c2c9a648-e9b4-4582-8d06-738a6eab1d30\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:25:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c2c9a648-e9b4-4582-8d06-738a6eab1d30"
[2021-11-02T13:25:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:25:07.820214Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"c2c9a648-e9b4-4582-8d06-738a6eab1d30\",\n    \"resourceVersion\": \"5a220a0e-57a9-4ab0-9cd2-612706d24e57\",\n    \"uid\": \"8735a544-042d-4d39-99b3-21bb2d98027d\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:25:08.045841537Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:25:08.045801481Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.870045253Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.881016396Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.944421226Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:07.950363236Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:08.045774811Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:25:08.045776073Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"s7Vhdgz76xAF\",\n        \"username\": \"user-c2c9a648-e9b4-4582-8d06-738a6eab1d30\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:25:08Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:25:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "c2c9a648-e9b4-4582-8d06-738a6eab1d30" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T13:25:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:25:08Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:25:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:25:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NTk4MDcsImlhdCI6MTYzNTg1OTUwNywiYXV0aF90aW1lIjoxNjM1ODU5NTA0LCJqdGkiOiI3NWQ5Yjc3Zi01ZGI4LTQ2OTAtYThjOS03N2NmNWM3OTFmZGMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjJjMDE3ZWM4LTA1N2ItNGE3My1iMzgwLWJjOGM1N2Q2NzBiYiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIyYzAxN2VjOC0wNTdiLTRhNzMtYjM4MC1iYzhjNTdkNjcwYmIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.KhlZbSeTzUy2IUPdwyxQKirlprovUz5s5KQc7HCE16w8tBoxYz5V2tpL_IA8-8joOxXNOammKfaISfNISPwD_PLWIfipID-zm62AtfVoBrBL44UoUCUHLvN1kiS8PNNRcOeT78Xw3kIs3eQnOY9AZ03Jm-DnM683Dm2vhbCAUIHddrQRwUFECnDvV6p8SSzK17aBYjLb5H0SkZMX058NwDFw3Rd1s63QuutT585HNo9BSMqPM4HLn-J-vXHe45TDUhSDruraDPIpAYQw3OlRRsw2UDbn5IEPTkfgxKoGMPW86WwGQerdN-jHWh5J18h4lztwPKS-xOG2dMXbjCNVKg\n", stderr: "" })
[2021-11-02T13:25:09Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-11-02T13:25:09Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:25:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:25:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:30:10Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:30:10Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:30:10Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:30:11Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:30:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "c2c9a648-e9b4-4582-8d06-738a6eab1d30" "device1"
[2021-11-02T13:30:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:30:11Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'c2c9a648-e9b4-4582-8d06-738a6eab1d30'
[2021-11-02T13:30:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "c2c9a648-e9b4-4582-8d06-738a6eab1d30"
[2021-11-02T13:30:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c2c9a648-e9b4-4582-8d06-738a6eab1d30 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user_alias::version_1

**Duration**: 311.841647108s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:30:13Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:30:16Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:30:17Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:30:18Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjE2MTgsImlhdCI6MTYzNTg1OTgxOCwianRpIjoiZGVjOTZiYmEtNTQ3My00ZTVkLTg0ZDEtZjNiZDA4NDQzNjNiIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjgwMmFjMDQtZWQ4Yy00NmI1LTg1NTAtMTZiMzU1M2Q2NmFmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImY4MDJhYzA0LWVkOGMtNDZiNS04NTUwLTE2YjM1NTNkNjZhZiJ9.vPo1720YSJb5Gg-ZFxGB_el-RrneNwWEAS-bzR-W1P4
[2021-11-02T13:30:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:30:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:30:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjE2MTgsImlhdCI6MTYzNTg1OTgxOCwianRpIjoiZGVjOTZiYmEtNTQ3My00ZTVkLTg0ZDEtZjNiZDA4NDQzNjNiIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjgwMmFjMDQtZWQ4Yy00NmI1LTg1NTAtMTZiMzU1M2Q2NmFmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImY4MDJhYzA0LWVkOGMtNDZiNS04NTUwLTE2YjM1NTNkNjZhZiJ9.vPo1720YSJb5Gg-ZFxGB_el-RrneNwWEAS-bzR-W1P4" "--context" "system-tests"
[2021-11-02T13:30:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:30:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:30:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:30:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjAxMTksImlhdCI6MTYzNTg1OTgxOSwiYXV0aF90aW1lIjoxNjM1ODU5ODE2LCJqdGkiOiIwZjQ5MjRiOC0zNDhiLTQ4NjgtOWY3NC1kZWU3MzUyOTQ1MjEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImY4MDJhYzA0LWVkOGMtNDZiNS04NTUwLTE2YjM1NTNkNjZhZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJmODAyYWMwNC1lZDhjLTQ2YjUtODU1MC0xNmIzNTUzZDY2YWYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.QxC-O5gq6gg7MxfuueOBzI4E-PdMPgCROohThxLyEs85jSJxwQOIu4Qcasci9ygK0Mi84N7NfBLxj5fd63GervdyeZnf_nJgvEogDXgIZUSBUkRFxc4GmcHGBX0lFofl4h6Swqfhfwj6HY3cYO00WUsrMAM4LxW0ujzurfx4JOY1ga4MMdHcYT35rVxy7yc-VK1xeXF9IlobzpiJovfFbZKgxMh3YrqvQfsnQsiKahcrDZ5sH48dzJFxafwJQg06dcAQJTDRIsx0rUA-OyRJBWJtilZpdQdhatSoOziv2AWPE3SQtr5rImAvqk6km3Nr_90mLxuemoqHzUHs8n9Kwg\n", stderr: "" })
[2021-11-02T13:30:19Z INFO  drogue_cloud_tests::resources::apps] Create application: 3994f184-ab71-46ef-8fa9-29d5c39f0c34
[2021-11-02T13:30:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "3994f184-ab71-46ef-8fa9-29d5c39f0c34"
[2021-11-02T13:30:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3994f184-ab71-46ef-8fa9-29d5c39f0c34 created.\n", stderr: "" })
[2021-11-02T13:30:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3994f184-ab71-46ef-8fa9-29d5c39f0c34"
[2021-11-02T13:30:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:30:19.675049Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"3994f184-ab71-46ef-8fa9-29d5c39f0c34\",\n    \"resourceVersion\": \"c6da9675-6162-439d-a7a5-cf7951c60134\",\n    \"uid\": \"a913cca1-73ae-4f34-a42e-5ae7f0393b91\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:30:19.688309981Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:30:19.688327854Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.688228949Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.688277350Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.688278161Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.688279003Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.688279634Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.688283010Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3994f184-ab71-46ef-8fa9-29d5c39f0c34"
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:30:19.675049Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"3994f184-ab71-46ef-8fa9-29d5c39f0c34\",\n    \"resourceVersion\": \"32e929ba-4fd5-43f6-8c8c-e50088910fe6\",\n    \"uid\": \"a913cca1-73ae-4f34-a42e-5ae7f0393b91\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:30:19.886238229Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:30:19.886272043Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.713394985Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.722735420Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.786221116Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.793119876Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.886212221Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.886213523Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"VKd5IKrm9C8a\",\n        \"username\": \"user-3994f184-ab71-46ef-8fa9-29d5c39f0c34\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3994f184-ab71-46ef-8fa9-29d5c39f0c34"
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:30:19.675049Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"3994f184-ab71-46ef-8fa9-29d5c39f0c34\",\n    \"resourceVersion\": \"32e929ba-4fd5-43f6-8c8c-e50088910fe6\",\n    \"uid\": \"a913cca1-73ae-4f34-a42e-5ae7f0393b91\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:30:19.886238229Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:30:19.886272043Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.713394985Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.722735420Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.786221116Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.793119876Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.886212221Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:30:19.886213523Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"VKd5IKrm9C8a\",\n        \"username\": \"user-3994f184-ab71-46ef-8fa9-29d5c39f0c34\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "3994f184-ab71-46ef-8fa9-29d5c39f0c34" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\",\"unique\":true}}]}}"
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjAxMTksImlhdCI6MTYzNTg1OTgxOSwiYXV0aF90aW1lIjoxNjM1ODU5ODE2LCJqdGkiOiIwZjQ5MjRiOC0zNDhiLTQ4NjgtOWY3NC1kZWU3MzUyOTQ1MjEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImY4MDJhYzA0LWVkOGMtNDZiNS04NTUwLTE2YjM1NTNkNjZhZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJmODAyYWMwNC1lZDhjLTQ2YjUtODU1MC0xNmIzNTUzZDY2YWYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.QxC-O5gq6gg7MxfuueOBzI4E-PdMPgCROohThxLyEs85jSJxwQOIu4Qcasci9ygK0Mi84N7NfBLxj5fd63GervdyeZnf_nJgvEogDXgIZUSBUkRFxc4GmcHGBX0lFofl4h6Swqfhfwj6HY3cYO00WUsrMAM4LxW0ujzurfx4JOY1ga4MMdHcYT35rVxy7yc-VK1xeXF9IlobzpiJovfFbZKgxMh3YrqvQfsnQsiKahcrDZ5sH48dzJFxafwJQg06dcAQJTDRIsx0rUA-OyRJBWJtilZpdQdhatSoOziv2AWPE3SQtr5rImAvqk6km3Nr_90mLxuemoqHzUHs8n9Kwg\n", stderr: "" })
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:30:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:35:22Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:35:22Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:35:22Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:35:23Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:35:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "3994f184-ab71-46ef-8fa9-29d5c39f0c34" "device1"
[2021-11-02T13:35:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:35:23Z INFO  drogue_cloud_tests::resources::apps] Destroy application '3994f184-ab71-46ef-8fa9-29d5c39f0c34'
[2021-11-02T13:35:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "3994f184-ab71-46ef-8fa9-29d5c39f0c34"
[2021-11-02T13:35:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3994f184-ab71-46ef-8fa9-29d5c39f0c34 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user_alias::version_2

**Duration**: 311.442166572s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:35:25Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:35:28Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:35:29Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:35:31Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjE5MzEsImlhdCI6MTYzNTg2MDEzMSwianRpIjoiMjk0MmU5NTItMDc0NS00N2NhLWI5NDAtZDM5M2Y4M2IyMDE3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYTgwOWMzMTAtNDZlMy00OWNhLTk0Y2QtMjA1NDA5NGE4MjY5Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImE4MDljMzEwLTQ2ZTMtNDljYS05NGNkLTIwNTQwOTRhODI2OSJ9.eAW8ndbK53iWq1iOkSfbhhWwHRWFAEFH6TJXZGC8Gjw
[2021-11-02T13:35:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:35:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:35:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjE5MzEsImlhdCI6MTYzNTg2MDEzMSwianRpIjoiMjk0MmU5NTItMDc0NS00N2NhLWI5NDAtZDM5M2Y4M2IyMDE3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYTgwOWMzMTAtNDZlMy00OWNhLTk0Y2QtMjA1NDA5NGE4MjY5Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImE4MDljMzEwLTQ2ZTMtNDljYS05NGNkLTIwNTQwOTRhODI2OSJ9.eAW8ndbK53iWq1iOkSfbhhWwHRWFAEFH6TJXZGC8Gjw" "--context" "system-tests"
[2021-11-02T13:35:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:35:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:35:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:35:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjA0MzEsImlhdCI6MTYzNTg2MDEzMSwiYXV0aF90aW1lIjoxNjM1ODYwMTI4LCJqdGkiOiI2YTgyY2FjOC00NmUwLTQzZDQtOWI0My0yN2ZiZjFkMTAwN2MiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImE4MDljMzEwLTQ2ZTMtNDljYS05NGNkLTIwNTQwOTRhODI2OSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhODA5YzMxMC00NmUzLTQ5Y2EtOTRjZC0yMDU0MDk0YTgyNjkiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.TPp6YyyLK3ZkrY_8hOXTLIPCZ3Q7Nz1SjwWJ1NJxBb_j09HuEeX3tLNgdWHA7DtfjYmbIZ__KEdLU-rw74gzZwAuK2N4ocGmiptyhmIhWPCoxEOQ2MK9RStjmlLdSAwLzg3BaBKVQ4cFzxsCqPR7ILTOY3wR1S4jLfXORIWpjcu_lSAL39eAEdrzztUBRfXPr1_HlXm6Uso0MY0bVYzBjZHkselvY2H_REYegscQgjED2olHu9V_hv2r9FH4qKKjWXU2iEx7dQbLi-iU9422DHlZ7pXvSNm4NGUlmet8tmow5CBcYW-qIeu5iKfW9yWUeQzFohNnXY5whoaaPzS4Iw\n", stderr: "" })
[2021-11-02T13:35:32Z INFO  drogue_cloud_tests::resources::apps] Create application: 38b1599e-951a-4c9e-8bbd-ce9af302ffbd
[2021-11-02T13:35:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "38b1599e-951a-4c9e-8bbd-ce9af302ffbd"
[2021-11-02T13:35:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 38b1599e-951a-4c9e-8bbd-ce9af302ffbd created.\n", stderr: "" })
[2021-11-02T13:35:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "38b1599e-951a-4c9e-8bbd-ce9af302ffbd"
[2021-11-02T13:35:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:35:32.148271Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"38b1599e-951a-4c9e-8bbd-ce9af302ffbd\",\n    \"resourceVersion\": \"d0176bfe-20ac-47f9-bc23-95e031c6deda\",\n    \"uid\": \"2d1a563a-a375-4513-b443-bb97bada99f3\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:35:32.161028101Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:35:32.161044862Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.160997785Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.160999978Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.161000590Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.161001301Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.161001752Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.161004437Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "38b1599e-951a-4c9e-8bbd-ce9af302ffbd"
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:35:32.148271Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"38b1599e-951a-4c9e-8bbd-ce9af302ffbd\",\n    \"resourceVersion\": \"69501d48-aa3f-46a2-a521-82cae7030f51\",\n    \"uid\": \"2d1a563a-a375-4513-b443-bb97bada99f3\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:35:32.468616757Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:35:32.468658585Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.192471726Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.200843920Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.272328376Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.279149100Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.468589386Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.468590718Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"rVnCbakxzBZY\",\n        \"username\": \"user-38b1599e-951a-4c9e-8bbd-ce9af302ffbd\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "38b1599e-951a-4c9e-8bbd-ce9af302ffbd"
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:35:32.148271Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"38b1599e-951a-4c9e-8bbd-ce9af302ffbd\",\n    \"resourceVersion\": \"69501d48-aa3f-46a2-a521-82cae7030f51\",\n    \"uid\": \"2d1a563a-a375-4513-b443-bb97bada99f3\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:35:32.468616757Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:35:32.468658585Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.192471726Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.200843920Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.272328376Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.279149100Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.468589386Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:35:32.468590718Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"rVnCbakxzBZY\",\n        \"username\": \"user-38b1599e-951a-4c9e-8bbd-ce9af302ffbd\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "38b1599e-951a-4c9e-8bbd-ce9af302ffbd" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\",\"unique\":true}}]}}"
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjA0MzEsImlhdCI6MTYzNTg2MDEzMSwiYXV0aF90aW1lIjoxNjM1ODYwMTI4LCJqdGkiOiI2YTgyY2FjOC00NmUwLTQzZDQtOWI0My0yN2ZiZjFkMTAwN2MiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImE4MDljMzEwLTQ2ZTMtNDljYS05NGNkLTIwNTQwOTRhODI2OSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhODA5YzMxMC00NmUzLTQ5Y2EtOTRjZC0yMDU0MDk0YTgyNjkiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.TPp6YyyLK3ZkrY_8hOXTLIPCZ3Q7Nz1SjwWJ1NJxBb_j09HuEeX3tLNgdWHA7DtfjYmbIZ__KEdLU-rw74gzZwAuK2N4ocGmiptyhmIhWPCoxEOQ2MK9RStjmlLdSAwLzg3BaBKVQ4cFzxsCqPR7ILTOY3wR1S4jLfXORIWpjcu_lSAL39eAEdrzztUBRfXPr1_HlXm6Uso0MY0bVYzBjZHkselvY2H_REYegscQgjED2olHu9V_hv2r9FH4qKKjWXU2iEx7dQbLi-iU9422DHlZ7pXvSNm4NGUlmet8tmow5CBcYW-qIeu5iKfW9yWUeQzFohNnXY5whoaaPzS4Iw\n", stderr: "" })
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:35:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:40:34Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:40:34Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:40:34Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:40:35Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:40:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "38b1599e-951a-4c9e-8bbd-ce9af302ffbd" "device1"
[2021-11-02T13:40:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:40:35Z INFO  drogue_cloud_tests::resources::apps] Destroy application '38b1599e-951a-4c9e-8bbd-ce9af302ffbd'
[2021-11-02T13:40:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "38b1599e-951a-4c9e-8bbd-ce9af302ffbd"
[2021-11-02T13:40:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 38b1599e-951a-4c9e-8bbd-ce9af302ffbd deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user_alias::version_3

**Duration**: 311.945632822s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:40:37Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:40:40Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:40:41Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:40:42Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjIyNDIsImlhdCI6MTYzNTg2MDQ0MiwianRpIjoiYTMwZDAyYjAtNzI4MC00Mjk4LTg3YTktYWEzZTRlZjczNDlkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYWZjMjAyZmYtOWNkMy00MDA4LWFhYzMtMjM3NzUzNTdjNGZmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImFmYzIwMmZmLTljZDMtNDAwOC1hYWMzLTIzNzc1MzU3YzRmZiJ9.v99-TKToVihEg10Mr94n21hdKzepyhfSlAUXSgrna-U
[2021-11-02T13:40:42Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:40:42Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:40:42Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjIyNDIsImlhdCI6MTYzNTg2MDQ0MiwianRpIjoiYTMwZDAyYjAtNzI4MC00Mjk4LTg3YTktYWEzZTRlZjczNDlkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYWZjMjAyZmYtOWNkMy00MDA4LWFhYzMtMjM3NzUzNTdjNGZmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImFmYzIwMmZmLTljZDMtNDAwOC1hYWMzLTIzNzc1MzU3YzRmZiJ9.v99-TKToVihEg10Mr94n21hdKzepyhfSlAUXSgrna-U" "--context" "system-tests"
[2021-11-02T13:40:42Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:40:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:40:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:40:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjA3NDIsImlhdCI6MTYzNTg2MDQ0MiwiYXV0aF90aW1lIjoxNjM1ODYwNDQwLCJqdGkiOiI0ZjdlN2IyMS1jOWQ4LTRmNWEtYmY1ZS0zMjJlMWM4MjZkNTIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImFmYzIwMmZmLTljZDMtNDAwOC1hYWMzLTIzNzc1MzU3YzRmZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhZmMyMDJmZi05Y2QzLTQwMDgtYWFjMy0yMzc3NTM1N2M0ZmYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.gdW8LvszeestEvjSI-hEAujAlV656g-kYnVdPZaPWLOeHcjXhkFRNjhU5a21eHsqnQKxjLCfVkIiNQMf4ZJkad6L-nCcQZn0itPyjKeTlp4x7Q5_WpDRc3p04zpk40B0KJuwVtqUFcf9V38XE0IcE_fYJgD75D2PztSnnXF3WvlN9qQiYoGRjX1oiY7wbeJbSj7j3ExJ4ZgSEmwbePvcVPG86m5oHe84KsDpaugZV3a5OKcFq1TR98YDP9MmaQG9UgU8ax44Vf-WO6n55ymTO6dVPdmChHU5hE06tbFzef1rDVBnMsw9LjL_nOgYZXHLm8vA8ro2RpLoxAzAc5j28A\n", stderr: "" })
[2021-11-02T13:40:43Z INFO  drogue_cloud_tests::resources::apps] Create application: c33229bf-91a5-4359-9d71-f1121cd58113
[2021-11-02T13:40:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "c33229bf-91a5-4359-9d71-f1121cd58113"
[2021-11-02T13:40:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c33229bf-91a5-4359-9d71-f1121cd58113 created.\n", stderr: "" })
[2021-11-02T13:40:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c33229bf-91a5-4359-9d71-f1121cd58113"
[2021-11-02T13:40:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:40:43.145883Z\",\n    \"generation\": 1,\n    \"name\": \"c33229bf-91a5-4359-9d71-f1121cd58113\",\n    \"resourceVersion\": \"dd9730de-d31f-455b-b0d0-194a94d94d06\",\n    \"uid\": \"2df8e06b-2d49-41c0-b144-ba3c330f8328\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:40:43.157819538Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}\n", stderr: "" })
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c33229bf-91a5-4359-9d71-f1121cd58113"
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:40:43.145883Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"c33229bf-91a5-4359-9d71-f1121cd58113\",\n    \"resourceVersion\": \"54658582-6c07-4ce0-bb9f-ae3e6fcab946\",\n    \"uid\": \"2df8e06b-2d49-41c0-b144-ba3c330f8328\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:40:43.478735219Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:40:43.478696518Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:40:43.204317249Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:40:43.211380303Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:40:43.319104682Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:40:43.326270067Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:40:43.478669357Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:40:43.478670520Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"pKC9zn8hMOAv\",\n        \"username\": \"user-c33229bf-91a5-4359-9d71-f1121cd58113\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c33229bf-91a5-4359-9d71-f1121cd58113"
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:40:43.145883Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"c33229bf-91a5-4359-9d71-f1121cd58113\",\n    \"resourceVersion\": \"54658582-6c07-4ce0-bb9f-ae3e6fcab946\",\n    \"uid\": \"2df8e06b-2d49-41c0-b144-ba3c330f8328\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:40:43.478735219Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:40:43.478696518Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:40:43.204317249Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:40:43.211380303Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:40:43.319104682Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:40:43.326270067Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:40:43.478669357Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:40:43.478670520Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"pKC9zn8hMOAv\",\n        \"username\": \"user-c33229bf-91a5-4359-9d71-f1121cd58113\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "c33229bf-91a5-4359-9d71-f1121cd58113" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\",\"unique\":true}}]}}"
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjA3NDIsImlhdCI6MTYzNTg2MDQ0MiwiYXV0aF90aW1lIjoxNjM1ODYwNDQwLCJqdGkiOiI0ZjdlN2IyMS1jOWQ4LTRmNWEtYmY1ZS0zMjJlMWM4MjZkNTIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImFmYzIwMmZmLTljZDMtNDAwOC1hYWMzLTIzNzc1MzU3YzRmZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhZmMyMDJmZi05Y2QzLTQwMDgtYWFjMy0yMzc3NTM1N2M0ZmYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.gdW8LvszeestEvjSI-hEAujAlV656g-kYnVdPZaPWLOeHcjXhkFRNjhU5a21eHsqnQKxjLCfVkIiNQMf4ZJkad6L-nCcQZn0itPyjKeTlp4x7Q5_WpDRc3p04zpk40B0KJuwVtqUFcf9V38XE0IcE_fYJgD75D2PztSnnXF3WvlN9qQiYoGRjX1oiY7wbeJbSj7j3ExJ4ZgSEmwbePvcVPG86m5oHe84KsDpaugZV3a5OKcFq1TR98YDP9MmaQG9UgU8ax44Vf-WO6n55ymTO6dVPdmChHU5hE06tbFzef1rDVBnMsw9LjL_nOgYZXHLm8vA8ro2RpLoxAzAc5j28A\n", stderr: "" })
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:40:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:45:45Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:45:45Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:45:45Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:45:46Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:45:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "c33229bf-91a5-4359-9d71-f1121cd58113" "device1"
[2021-11-02T13:45:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:45:47Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'c33229bf-91a5-4359-9d71-f1121cd58113'
[2021-11-02T13:45:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "c33229bf-91a5-4359-9d71-f1121cd58113"
[2021-11-02T13:45:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c33229bf-91a5-4359-9d71-f1121cd58113 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user_only::version_1

**Duration**: 311.951423521s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:45:48Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:45:51Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:45:53Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:45:54Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjI1NTQsImlhdCI6MTYzNTg2MDc1NCwianRpIjoiNGMyODRjYWUtZGNjNy00NTJhLTg1NjYtMDgxZGU4ODM2NzA3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjkyZDZlZWMtM2FkYi00OGQ0LWIwNzMtMzc4Yjg2YzA0Zjg0Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjI5MmQ2ZWVjLTNhZGItNDhkNC1iMDczLTM3OGI4NmMwNGY4NCJ9.GTt7MInMwFhWsWD8ByGlMPh8HZRJFtI44qvsi-8pSNM
[2021-11-02T13:45:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:45:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:45:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjI1NTQsImlhdCI6MTYzNTg2MDc1NCwianRpIjoiNGMyODRjYWUtZGNjNy00NTJhLTg1NjYtMDgxZGU4ODM2NzA3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjkyZDZlZWMtM2FkYi00OGQ0LWIwNzMtMzc4Yjg2YzA0Zjg0Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjI5MmQ2ZWVjLTNhZGItNDhkNC1iMDczLTM3OGI4NmMwNGY4NCJ9.GTt7MInMwFhWsWD8ByGlMPh8HZRJFtI44qvsi-8pSNM" "--context" "system-tests"
[2021-11-02T13:45:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:45:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:45:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:45:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjEwNTQsImlhdCI6MTYzNTg2MDc1NCwiYXV0aF90aW1lIjoxNjM1ODYwNzUyLCJqdGkiOiJkN2IyM2YyZS00MDk1LTRhNzktYmYzYy1jOGU4MmVhZDAzYzQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjI5MmQ2ZWVjLTNhZGItNDhkNC1iMDczLTM3OGI4NmMwNGY4NCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIyOTJkNmVlYy0zYWRiLTQ4ZDQtYjA3My0zNzhiODZjMDRmODQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.KdYCmYSqzHBMfkxnD22Q8xzt9NC7aRxitPsrK9eCj3rRP13t7dKECPYXn0tVxss1GBtDumjsAmZGdr24-55wRWc3wVMGdqE3_rTG1dbgCuwKGm1rhZmJ0X_DC33Ii6eYxcCppHmicWOwY73oviIO1uGUR2sARxA_DZzssyHP0GXUoc6ry70pTnuATKUfQ39J9cjLgOX5n175sQSAE0teTLBUcAHexwS0VUsLxCxdAmvAVkSGvW339D7gr8cOHC1UI8yFNHFcBTfj7DiikA3Yp1X6IgWLJstnkBIGIiLIIaNPpqyyeuoQPKE8-gyzo3t6-mE65upwPZi1eGBGQGLbeA\n", stderr: "" })
[2021-11-02T13:45:54Z INFO  drogue_cloud_tests::resources::apps] Create application: 626c465f-4ec5-474b-ba26-729f31bea293
[2021-11-02T13:45:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "626c465f-4ec5-474b-ba26-729f31bea293"
[2021-11-02T13:45:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 626c465f-4ec5-474b-ba26-729f31bea293 created.\n", stderr: "" })
[2021-11-02T13:45:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "626c465f-4ec5-474b-ba26-729f31bea293"
[2021-11-02T13:45:55Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:45:54.988052Z\",\n    \"generation\": 0,\n    \"name\": \"626c465f-4ec5-474b-ba26-729f31bea293\",\n    \"resourceVersion\": \"1bf673ca-5919-4b90-a1fb-3f38c21b96b0\",\n    \"uid\": \"5a64ba2b-8374-4f46-915d-a9e29b966ebc\"\n  }\n}\n", stderr: "" })
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "626c465f-4ec5-474b-ba26-729f31bea293"
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:45:54.988052Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"626c465f-4ec5-474b-ba26-729f31bea293\",\n    \"resourceVersion\": \"9a69f114-b054-4626-8cdb-927702a81afd\",\n    \"uid\": \"5a64ba2b-8374-4f46-915d-a9e29b966ebc\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:45:55.270118983Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:45:55.270085851Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:45:55.056789983Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:45:55.063812242Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:45:55.134115818Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:45:55.140848276Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:45:55.270059872Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:45:55.270061035Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"j8rTOpO5K98Q\",\n        \"username\": \"user-626c465f-4ec5-474b-ba26-729f31bea293\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "626c465f-4ec5-474b-ba26-729f31bea293"
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:45:54.988052Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"626c465f-4ec5-474b-ba26-729f31bea293\",\n    \"resourceVersion\": \"9a69f114-b054-4626-8cdb-927702a81afd\",\n    \"uid\": \"5a64ba2b-8374-4f46-915d-a9e29b966ebc\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:45:55.270118983Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:45:55.270085851Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:45:55.056789983Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:45:55.063812242Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:45:55.134115818Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:45:55.140848276Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:45:55.270059872Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:45:55.270061035Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"j8rTOpO5K98Q\",\n        \"username\": \"user-626c465f-4ec5-474b-ba26-729f31bea293\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "626c465f-4ec5-474b-ba26-729f31bea293" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjEwNTQsImlhdCI6MTYzNTg2MDc1NCwiYXV0aF90aW1lIjoxNjM1ODYwNzUyLCJqdGkiOiJkN2IyM2YyZS00MDk1LTRhNzktYmYzYy1jOGU4MmVhZDAzYzQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjI5MmQ2ZWVjLTNhZGItNDhkNC1iMDczLTM3OGI4NmMwNGY4NCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIyOTJkNmVlYy0zYWRiLTQ4ZDQtYjA3My0zNzhiODZjMDRmODQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.KdYCmYSqzHBMfkxnD22Q8xzt9NC7aRxitPsrK9eCj3rRP13t7dKECPYXn0tVxss1GBtDumjsAmZGdr24-55wRWc3wVMGdqE3_rTG1dbgCuwKGm1rhZmJ0X_DC33Ii6eYxcCppHmicWOwY73oviIO1uGUR2sARxA_DZzssyHP0GXUoc6ry70pTnuATKUfQ39J9cjLgOX5n175sQSAE0teTLBUcAHexwS0VUsLxCxdAmvAVkSGvW339D7gr8cOHC1UI8yFNHFcBTfj7DiikA3Yp1X6IgWLJstnkBIGIiLIIaNPpqyyeuoQPKE8-gyzo3t6-mE65upwPZi1eGBGQGLbeA\n", stderr: "" })
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:45:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:50:58Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:50:58Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:50:58Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:50:58Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:50:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "626c465f-4ec5-474b-ba26-729f31bea293" "device1"
[2021-11-02T13:50:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:50:58Z INFO  drogue_cloud_tests::resources::apps] Destroy application '626c465f-4ec5-474b-ba26-729f31bea293'
[2021-11-02T13:50:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "626c465f-4ec5-474b-ba26-729f31bea293"
[2021-11-02T13:50:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 626c465f-4ec5-474b-ba26-729f31bea293 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user_only::version_2

**Duration**: 311.271202233s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:51:00Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:51:03Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:51:05Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:51:06Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjI4NjYsImlhdCI6MTYzNTg2MTA2NiwianRpIjoiNDI4N2VmZTEtYmMyZi00MjFlLWFjZmYtNDI1M2M2NTZlZTcwIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNDEyMTI0MDQtYjEyMC00Y2M5LWJkYjUtYjExY2E0N2ViMjllIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjQxMjEyNDA0LWIxMjAtNGNjOS1iZGI1LWIxMWNhNDdlYjI5ZSJ9.y7d2C1XakLmTvX8QOLyMj8UvSAu8dQwhhYQ_QUfarnw
[2021-11-02T13:51:06Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:51:06Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:51:06Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjI4NjYsImlhdCI6MTYzNTg2MTA2NiwianRpIjoiNDI4N2VmZTEtYmMyZi00MjFlLWFjZmYtNDI1M2M2NTZlZTcwIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNDEyMTI0MDQtYjEyMC00Y2M5LWJkYjUtYjExY2E0N2ViMjllIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjQxMjEyNDA0LWIxMjAtNGNjOS1iZGI1LWIxMWNhNDdlYjI5ZSJ9.y7d2C1XakLmTvX8QOLyMj8UvSAu8dQwhhYQ_QUfarnw" "--context" "system-tests"
[2021-11-02T13:51:06Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:51:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:51:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:51:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjEzNjYsImlhdCI6MTYzNTg2MTA2NiwiYXV0aF90aW1lIjoxNjM1ODYxMDY0LCJqdGkiOiI1NDExZjNmYS01NzZiLTRhZjMtOWUzMi0wYTg0NWQxMzljOTciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjQxMjEyNDA0LWIxMjAtNGNjOS1iZGI1LWIxMWNhNDdlYjI5ZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI0MTIxMjQwNC1iMTIwLTRjYzktYmRiNS1iMTFjYTQ3ZWIyOWUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.YUhIdld6qzr7q7d903eQkNOAJC8Vz_xCC8MCxTs2ZXzBO54oVGzc4ks2PmLYKw8ZCsAqsT8_uUTFDnM2kw5k9sQFlRgP-uXYe5l9ErtG521-aJg3B_fy0RbhxQHDFkO7MmKRfQQnzjXjTcdO41lG1ZOQxXvV32dIGbUcAqitBzX0gtxv0poxQMq0pVY0vSYBEMp_v41aXycDgTcp4zc9dfaMBgXdqpTJvO9Kw_NcfedVbp0Tz0VUMCts5V0Ugb-5Cajje3SF0xamd6piElm2OmAVGIdSSrlulkj9HgxooodaQW-I-_orqUTzycBvJhJvrO7cDC_XHGCFTgoSY-p1jg\n", stderr: "" })
[2021-11-02T13:51:07Z INFO  drogue_cloud_tests::resources::apps] Create application: 95f288fd-470b-432b-9f66-41b2b6fee1ff
[2021-11-02T13:51:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "95f288fd-470b-432b-9f66-41b2b6fee1ff"
[2021-11-02T13:51:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 95f288fd-470b-432b-9f66-41b2b6fee1ff created.\n", stderr: "" })
[2021-11-02T13:51:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "95f288fd-470b-432b-9f66-41b2b6fee1ff"
[2021-11-02T13:51:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:51:07.034609Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"95f288fd-470b-432b-9f66-41b2b6fee1ff\",\n    \"resourceVersion\": \"5666665a-2bed-4436-be77-1e355aa995a7\",\n    \"uid\": \"cf418de7-ae29-4961-8d6e-c84362429c49\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:51:07.057849243Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:51:07.057826750Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.057800681Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.057801412Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.057801834Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.057802355Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.057803086Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.057804599Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "95f288fd-470b-432b-9f66-41b2b6fee1ff"
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:51:07.034609Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"95f288fd-470b-432b-9f66-41b2b6fee1ff\",\n    \"resourceVersion\": \"9618f68a-c93b-41dc-8fdf-ab04de07ca41\",\n    \"uid\": \"cf418de7-ae29-4961-8d6e-c84362429c49\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:51:07.294336309Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:51:07.294299360Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.083456071Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.091962696Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.178071620Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.184844404Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.294259415Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.294260627Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Kc4MUvjj9sFw\",\n        \"username\": \"user-95f288fd-470b-432b-9f66-41b2b6fee1ff\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "95f288fd-470b-432b-9f66-41b2b6fee1ff"
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:51:07.034609Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"95f288fd-470b-432b-9f66-41b2b6fee1ff\",\n    \"resourceVersion\": \"9618f68a-c93b-41dc-8fdf-ab04de07ca41\",\n    \"uid\": \"cf418de7-ae29-4961-8d6e-c84362429c49\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:51:07.294336309Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:51:07.294299360Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.083456071Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.091962696Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.178071620Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.184844404Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.294259415Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:51:07.294260627Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Kc4MUvjj9sFw\",\n        \"username\": \"user-95f288fd-470b-432b-9f66-41b2b6fee1ff\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "95f288fd-470b-432b-9f66-41b2b6fee1ff" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjEzNjYsImlhdCI6MTYzNTg2MTA2NiwiYXV0aF90aW1lIjoxNjM1ODYxMDY0LCJqdGkiOiI1NDExZjNmYS01NzZiLTRhZjMtOWUzMi0wYTg0NWQxMzljOTciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjQxMjEyNDA0LWIxMjAtNGNjOS1iZGI1LWIxMWNhNDdlYjI5ZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI0MTIxMjQwNC1iMTIwLTRjYzktYmRiNS1iMTFjYTQ3ZWIyOWUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.YUhIdld6qzr7q7d903eQkNOAJC8Vz_xCC8MCxTs2ZXzBO54oVGzc4ks2PmLYKw8ZCsAqsT8_uUTFDnM2kw5k9sQFlRgP-uXYe5l9ErtG521-aJg3B_fy0RbhxQHDFkO7MmKRfQQnzjXjTcdO41lG1ZOQxXvV32dIGbUcAqitBzX0gtxv0poxQMq0pVY0vSYBEMp_v41aXycDgTcp4zc9dfaMBgXdqpTJvO9Kw_NcfedVbp0Tz0VUMCts5V0Ugb-5Cajje3SF0xamd6piElm2OmAVGIdSSrlulkj9HgxooodaQW-I-_orqUTzycBvJhJvrO7cDC_XHGCFTgoSY-p1jg\n", stderr: "" })
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:51:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T13:56:10Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T13:56:10Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T13:56:10Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T13:56:10Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T13:56:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "95f288fd-470b-432b-9f66-41b2b6fee1ff" "device1"
[2021-11-02T13:56:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T13:56:10Z INFO  drogue_cloud_tests::resources::apps] Destroy application '95f288fd-470b-432b-9f66-41b2b6fee1ff'
[2021-11-02T13:56:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "95f288fd-470b-432b-9f66-41b2b6fee1ff"
[2021-11-02T13:56:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 95f288fd-470b-432b-9f66-41b2b6fee1ff deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user_only::version_3

**Duration**: 311.458450228s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T13:56:12Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:56:15Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T13:56:16Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T13:56:17Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjMxNzcsImlhdCI6MTYzNTg2MTM3NywianRpIjoiYWM4MzhjYWItYmE1Yy00ZThkLWFjMWQtOTRiZTU4ZTI2MDNhIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYTRmNGYyNmQtNDY0ZC00MWNlLWFkZmUtYjdjNmVlMjY1NTFlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImE0ZjRmMjZkLTQ2NGQtNDFjZS1hZGZlLWI3YzZlZTI2NTUxZSJ9.3ofiic54p5X5CTX_-pjUFiCd4rJy03uefBEw9aILXsg
[2021-11-02T13:56:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T13:56:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T13:56:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjMxNzcsImlhdCI6MTYzNTg2MTM3NywianRpIjoiYWM4MzhjYWItYmE1Yy00ZThkLWFjMWQtOTRiZTU4ZTI2MDNhIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYTRmNGYyNmQtNDY0ZC00MWNlLWFkZmUtYjdjNmVlMjY1NTFlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImE0ZjRmMjZkLTQ2NGQtNDFjZS1hZGZlLWI3YzZlZTI2NTUxZSJ9.3ofiic54p5X5CTX_-pjUFiCd4rJy03uefBEw9aILXsg" "--context" "system-tests"
[2021-11-02T13:56:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T13:56:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:56:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:56:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjE2NzcsImlhdCI6MTYzNTg2MTM3NywiYXV0aF90aW1lIjoxNjM1ODYxMzc1LCJqdGkiOiJiZGY5OTY4Yy1mZDYwLTQ4OTktYjJiNC02NGFlN2Q0NGFjNWUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImE0ZjRmMjZkLTQ2NGQtNDFjZS1hZGZlLWI3YzZlZTI2NTUxZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhNGY0ZjI2ZC00NjRkLTQxY2UtYWRmZS1iN2M2ZWUyNjU1MWUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.b-PhxE6usFtbMQBtZ41qdT0xSvEpgxBMxRKVaQN0BfTv9pioXm0su8IyChFgfljReyR8jS2yDfn1m_UxaPR94W4wwiXKwppQE_MVQcGIpjZLBXpbooYWdo3afvcqmYyTYdev1qiw4aidfwnQnl43kwCnQruAg_k3qXauvF4nvqxyp-empzB25NE2CP1s-ohufNFstcllY0G2VKSNYa76EPzJ1cBV99KcYUBY7WSDmyCupLNz2kFbR4tHmXqPzlNmB3HNSYbFmP-EKkTTNXcGrhs4nPXTM6Wp0iRYQYkrcAkRL456zwepxiYpRK2rjKFsKeF4or3iHQd_66_F33SVOA\n", stderr: "" })
[2021-11-02T13:56:18Z INFO  drogue_cloud_tests::resources::apps] Create application: c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90
[2021-11-02T13:56:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90"
[2021-11-02T13:56:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90 created.\n", stderr: "" })
[2021-11-02T13:56:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90"
[2021-11-02T13:56:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:56:18.232840Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90\",\n    \"resourceVersion\": \"1b3cc241-f20d-4dad-a863-bba22a20ba56\",\n    \"uid\": \"6e810997-9852-4e0a-90fe-68f074baa6a7\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:56:18.249628012Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:56:18.249647999Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.249588508Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.249591334Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.249592155Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.249593207Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.249593988Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.249597565Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90"
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:56:18.232840Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90\",\n    \"resourceVersion\": \"384f3dca-863c-4116-a155-13ba5d603c7a\",\n    \"uid\": \"6e810997-9852-4e0a-90fe-68f074baa6a7\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:56:18.479944270Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:56:18.479982883Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.278879697Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.285144350Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.374004953Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.381834073Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.479914505Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.479915726Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"aVSprGhIi2vj\",\n        \"username\": \"user-c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90"
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T13:56:18.232840Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90\",\n    \"resourceVersion\": \"384f3dca-863c-4116-a155-13ba5d603c7a\",\n    \"uid\": \"6e810997-9852-4e0a-90fe-68f074baa6a7\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:56:18.479944270Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T13:56:18.479982883Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.278879697Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.285144350Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.374004953Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.381834073Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.479914505Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T13:56:18.479915726Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"aVSprGhIi2vj\",\n        \"username\": \"user-c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"username\":\"foo\",\"password\":\"bar\"}}]}}"
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjE2NzcsImlhdCI6MTYzNTg2MTM3NywiYXV0aF90aW1lIjoxNjM1ODYxMzc1LCJqdGkiOiJiZGY5OTY4Yy1mZDYwLTQ4OTktYjJiNC02NGFlN2Q0NGFjNWUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImE0ZjRmMjZkLTQ2NGQtNDFjZS1hZGZlLWI3YzZlZTI2NTUxZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhNGY0ZjI2ZC00NjRkLTQxY2UtYWRmZS1iN2M2ZWUyNjU1MWUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.b-PhxE6usFtbMQBtZ41qdT0xSvEpgxBMxRKVaQN0BfTv9pioXm0su8IyChFgfljReyR8jS2yDfn1m_UxaPR94W4wwiXKwppQE_MVQcGIpjZLBXpbooYWdo3afvcqmYyTYdev1qiw4aidfwnQnl43kwCnQruAg_k3qXauvF4nvqxyp-empzB25NE2CP1s-ohufNFstcllY0G2VKSNYa76EPzJ1cBV99KcYUBY7WSDmyCupLNz2kFbR4tHmXqPzlNmB3HNSYbFmP-EKkTTNXcGrhs4nPXTM6Wp0iRYQYkrcAkRL456zwepxiYpRK2rjKFsKeF4or3iHQd_66_F33SVOA\n", stderr: "" })
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T13:56:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T14:01:21Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T14:01:21Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T14:01:21Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T14:01:21Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:01:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90" "device1"
[2021-11-02T14:01:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:01:21Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90'
[2021-11-02T14:01:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90"
[2021-11-02T14:01:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c4044ebf-b9fd-47a1-b36e-7c8e28f2ba90 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::mqtt::command::test_command::version_1

**Duration**: 15.410742657s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T14:01:23Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:01:26Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T14:01:27Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:01:28Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjM0ODgsImlhdCI6MTYzNTg2MTY4OCwianRpIjoiNzcwYWFiY2YtMTFlOS00MjEwLTk0MTktZTUxNDZkNTVkOGE4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOTMxNmYzZTYtMDBmYi00NmFkLWJhYTYtMWU4ZjI5MTQ3N2M5Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjkzMTZmM2U2LTAwZmItNDZhZC1iYWE2LTFlOGYyOTE0NzdjOSJ9.EPqo8jO_41p9HjxR-pbZBWciF7uBDkDbV0wTgTW3eNE
[2021-11-02T14:01:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T14:01:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T14:01:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjM0ODgsImlhdCI6MTYzNTg2MTY4OCwianRpIjoiNzcwYWFiY2YtMTFlOS00MjEwLTk0MTktZTUxNDZkNTVkOGE4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOTMxNmYzZTYtMDBmYi00NmFkLWJhYTYtMWU4ZjI5MTQ3N2M5Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjkzMTZmM2U2LTAwZmItNDZhZC1iYWE2LTFlOGYyOTE0NzdjOSJ9.EPqo8jO_41p9HjxR-pbZBWciF7uBDkDbV0wTgTW3eNE" "--context" "system-tests"
[2021-11-02T14:01:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T14:01:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:01:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:01:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjE5ODksImlhdCI6MTYzNTg2MTY4OSwiYXV0aF90aW1lIjoxNjM1ODYxNjg2LCJqdGkiOiIwNDEyZGI5MC0yNWZkLTQ0ZDEtOThkZS03NzIwNDMxOTRkMTgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjkzMTZmM2U2LTAwZmItNDZhZC1iYWE2LTFlOGYyOTE0NzdjOSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI5MzE2ZjNlNi0wMGZiLTQ2YWQtYmFhNi0xZThmMjkxNDc3YzkiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.o3hCyiryAVez2EljDEjzKM2qg4z6jbSA9wQfsJdl_OhL5OHmvsbE68EUwHinNxImNrM1Do_YcliLgPhRTRlYiQPrqdhbZbmNYMyXfwWN6enxeFHahi-IqvdXtBNzjICy_CLNQepLdKpaHjcgeNPo__JYGmQtRm3l_homK9PE6OKJMsFq1P444W4MfPi8jQGPG2PBK_gl3jP-3K6W2MuVVkUqqI1g7tgkIxB2HCwj0UAL8SMgxLQQHWfMFjLInPVbS8JSWxfpSRVLcuMl2uOigAhJk2gp1BeEb_tZiE5OmwO3zfNgp7HA1GNs6HKNa0FXH71hnEL6TKVOYyzdx3EALQ\n", stderr: "" })
[2021-11-02T14:01:29Z INFO  drogue_cloud_tests::resources::apps] Create application: 7a1c7c7f-2624-43a6-97b4-8858b6de6233
[2021-11-02T14:01:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "7a1c7c7f-2624-43a6-97b4-8858b6de6233"
[2021-11-02T14:01:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 7a1c7c7f-2624-43a6-97b4-8858b6de6233 created.\n", stderr: "" })
[2021-11-02T14:01:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7a1c7c7f-2624-43a6-97b4-8858b6de6233"
[2021-11-02T14:01:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:01:29.671630Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"7a1c7c7f-2624-43a6-97b4-8858b6de6233\",\n    \"resourceVersion\": \"cb4ca98f-4d61-4391-818d-7572734cabaa\",\n    \"uid\": \"969e7e82-1098-418c-9bf6-db41fe2bd60b\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:29.697146984Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:29.697124943Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.697084737Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.697086210Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.697086700Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.697087612Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.697088554Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.697090578Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:01:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7a1c7c7f-2624-43a6-97b4-8858b6de6233"
[2021-11-02T14:01:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:01:29.671630Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"7a1c7c7f-2624-43a6-97b4-8858b6de6233\",\n    \"resourceVersion\": \"f836c0bc-b65e-493c-8336-1b8381858257\",\n    \"uid\": \"969e7e82-1098-418c-9bf6-db41fe2bd60b\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:29.957084913Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:29.957050508Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.723838492Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.731660026Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.808370893Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.831871315Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.957025371Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.957026814Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"nuCDkgocScrt\",\n        \"username\": \"user-7a1c7c7f-2624-43a6-97b4-8858b6de6233\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:01:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7a1c7c7f-2624-43a6-97b4-8858b6de6233"
[2021-11-02T14:01:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:01:29.671630Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"7a1c7c7f-2624-43a6-97b4-8858b6de6233\",\n    \"resourceVersion\": \"f836c0bc-b65e-493c-8336-1b8381858257\",\n    \"uid\": \"969e7e82-1098-418c-9bf6-db41fe2bd60b\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:29.957084913Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:29.957050508Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.723838492Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.731660026Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.808370893Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.831871315Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.957025371Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:29.957026814Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"nuCDkgocScrt\",\n        \"username\": \"user-7a1c7c7f-2624-43a6-97b4-8858b6de6233\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:01:30Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T14:01:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "7a1c7c7f-2624-43a6-97b4-8858b6de6233" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T14:01:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T14:01:30Z INFO  drogue_cloud_tests::tests::mqtt::command] Sending payload
[2021-11-02T14:01:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:01:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjE5ODksImlhdCI6MTYzNTg2MTY4OSwiYXV0aF90aW1lIjoxNjM1ODYxNjg2LCJqdGkiOiIwNDEyZGI5MC0yNWZkLTQ0ZDEtOThkZS03NzIwNDMxOTRkMTgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjkzMTZmM2U2LTAwZmItNDZhZC1iYWE2LTFlOGYyOTE0NzdjOSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI5MzE2ZjNlNi0wMGZiLTQ2YWQtYmFhNi0xZThmMjkxNDc3YzkiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.o3hCyiryAVez2EljDEjzKM2qg4z6jbSA9wQfsJdl_OhL5OHmvsbE68EUwHinNxImNrM1Do_YcliLgPhRTRlYiQPrqdhbZbmNYMyXfwWN6enxeFHahi-IqvdXtBNzjICy_CLNQepLdKpaHjcgeNPo__JYGmQtRm3l_homK9PE6OKJMsFq1P444W4MfPi8jQGPG2PBK_gl3jP-3K6W2MuVVkUqqI1g7tgkIxB2HCwj0UAL8SMgxLQQHWfMFjLInPVbS8JSWxfpSRVLcuMl2uOigAhJk2gp1BeEb_tZiE5OmwO3zfNgp7HA1GNs6HKNa0FXH71hnEL6TKVOYyzdx3EALQ\n", stderr: "" })
[2021-11-02T14:01:37Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:01:37Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "7a1c7c7f-2624-43a6-97b4-8858b6de6233" "device1"
[2021-11-02T14:01:37Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:01:37Z INFO  drogue_cloud_tests::resources::apps] Destroy application '7a1c7c7f-2624-43a6-97b4-8858b6de6233'
[2021-11-02T14:01:37Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "7a1c7c7f-2624-43a6-97b4-8858b6de6233"
[2021-11-02T14:01:37Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 7a1c7c7f-2624-43a6-97b4-8858b6de6233 deleted.\n", stderr: "" })
Error: Time elapsed
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::mqtt::command::test_command::version_2

**Duration**: 14.042514959s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T14:01:39Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:01:41Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T14:01:43Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjM1MDQsImlhdCI6MTYzNTg2MTcwNCwianRpIjoiYWJhZDJjYzctMGM5MS00OWVlLWFmNWItZTdkZGE2NmQ0M2Q0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjcyYjJkNTItOTc2MC00MWM2LWI0MTktMmFjM2I5MDc4Y2U2Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImY3MmIyZDUyLTk3NjAtNDFjNi1iNDE5LTJhYzNiOTA3OGNlNiJ9.9tR-NIFctXdIXMudr3_Mga-1xo4BeQxris3IL6_J7vw
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjM1MDQsImlhdCI6MTYzNTg2MTcwNCwianRpIjoiYWJhZDJjYzctMGM5MS00OWVlLWFmNWItZTdkZGE2NmQ0M2Q0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjcyYjJkNTItOTc2MC00MWM2LWI0MTktMmFjM2I5MDc4Y2U2Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImY3MmIyZDUyLTk3NjAtNDFjNi1iNDE5LTJhYzNiOTA3OGNlNiJ9.9tR-NIFctXdIXMudr3_Mga-1xo4BeQxris3IL6_J7vw" "--context" "system-tests"
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjIwMDQsImlhdCI6MTYzNTg2MTcwNCwiYXV0aF90aW1lIjoxNjM1ODYxNzAyLCJqdGkiOiI4OTY3NTIxNi1jYjBjLTQ0OTktOTNhNS0xYWU4MDA3ODY0OWMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImY3MmIyZDUyLTk3NjAtNDFjNi1iNDE5LTJhYzNiOTA3OGNlNiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJmNzJiMmQ1Mi05NzYwLTQxYzYtYjQxOS0yYWMzYjkwNzhjZTYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.ArWuR3r_z7vrSwvFYmQHrFkXeMUGg43QDOLGHs1XCT1wLKtnzrnw8nkQXdpmV5crv41SYZ2NEeWhCgc0a-WAEqCaUqGNRlg_Ah5OdrPnQYl7rv8MGiCna78t-hKb1pdWEcGtw4gSomjUMApUQrYE8Mvh7AMf8QatI_6FDrVsipjqTHHL0UXsEnXgmiyMO6x5ATl-b6KRfFpUWk-DUGsi15ZvoSSLpSfKPaeVLYLgr3nLH09W9f4M0GWxcZKUv-_P5hrYn7SMNqIedkemSKqSR8flcvJOyFBAGIRGUkbftNHOsNt9DBvi2-cGejRFL9ZEtDB2c8yKlMhYuET4g90qGg\n", stderr: "" })
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::resources::apps] Create application: b163254e-5f69-4e7c-a51c-799ea75954c5
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "b163254e-5f69-4e7c-a51c-799ea75954c5"
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b163254e-5f69-4e7c-a51c-799ea75954c5 created.\n", stderr: "" })
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b163254e-5f69-4e7c-a51c-799ea75954c5"
[2021-11-02T14:01:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:01:44.837950Z\",\n    \"generation\": 1,\n    \"name\": \"b163254e-5f69-4e7c-a51c-799ea75954c5\",\n    \"resourceVersion\": \"3c049188-8ae8-4407-9f29-b5fcae81b788\",\n    \"uid\": \"e0fb3eb3-5a9e-4156-a8cc-b5ee131acd61\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:44.860711857Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}\n", stderr: "" })
[2021-11-02T14:01:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b163254e-5f69-4e7c-a51c-799ea75954c5"
[2021-11-02T14:01:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:01:44.837950Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"b163254e-5f69-4e7c-a51c-799ea75954c5\",\n    \"resourceVersion\": \"661434b3-7b0f-48a1-b5ae-06677f1ee2c4\",\n    \"uid\": \"e0fb3eb3-5a9e-4156-a8cc-b5ee131acd61\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:45.105988424Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:45.105949832Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:44.894896467Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:44.901138599Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:44.975662186Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:44.982005015Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:45.105922280Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:45.105923762Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Jh6u85M3MJWn\",\n        \"username\": \"user-b163254e-5f69-4e7c-a51c-799ea75954c5\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:01:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b163254e-5f69-4e7c-a51c-799ea75954c5"
[2021-11-02T14:01:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:01:44.837950Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"b163254e-5f69-4e7c-a51c-799ea75954c5\",\n    \"resourceVersion\": \"661434b3-7b0f-48a1-b5ae-06677f1ee2c4\",\n    \"uid\": \"e0fb3eb3-5a9e-4156-a8cc-b5ee131acd61\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:45.105988424Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:45.105949832Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:44.894896467Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:44.901138599Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:44.975662186Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:44.982005015Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:45.105922280Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:45.105923762Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Jh6u85M3MJWn\",\n        \"username\": \"user-b163254e-5f69-4e7c-a51c-799ea75954c5\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:01:45Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T14:01:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "b163254e-5f69-4e7c-a51c-799ea75954c5" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T14:01:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T14:01:45Z INFO  drogue_cloud_tests::tests::mqtt::command] Sending payload
[2021-11-02T14:01:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:01:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjIwMDQsImlhdCI6MTYzNTg2MTcwNCwiYXV0aF90aW1lIjoxNjM1ODYxNzAyLCJqdGkiOiI4OTY3NTIxNi1jYjBjLTQ0OTktOTNhNS0xYWU4MDA3ODY0OWMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImY3MmIyZDUyLTk3NjAtNDFjNi1iNDE5LTJhYzNiOTA3OGNlNiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJmNzJiMmQ1Mi05NzYwLTQxYzYtYjQxOS0yYWMzYjkwNzhjZTYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.ArWuR3r_z7vrSwvFYmQHrFkXeMUGg43QDOLGHs1XCT1wLKtnzrnw8nkQXdpmV5crv41SYZ2NEeWhCgc0a-WAEqCaUqGNRlg_Ah5OdrPnQYl7rv8MGiCna78t-hKb1pdWEcGtw4gSomjUMApUQrYE8Mvh7AMf8QatI_6FDrVsipjqTHHL0UXsEnXgmiyMO6x5ATl-b6KRfFpUWk-DUGsi15ZvoSSLpSfKPaeVLYLgr3nLH09W9f4M0GWxcZKUv-_P5hrYn7SMNqIedkemSKqSR8flcvJOyFBAGIRGUkbftNHOsNt9DBvi2-cGejRFL9ZEtDB2c8yKlMhYuET4g90qGg\n", stderr: "" })
[2021-11-02T14:01:51Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:01:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "b163254e-5f69-4e7c-a51c-799ea75954c5" "device1"
[2021-11-02T14:01:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:01:51Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'b163254e-5f69-4e7c-a51c-799ea75954c5'
[2021-11-02T14:01:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "b163254e-5f69-4e7c-a51c-799ea75954c5"
[2021-11-02T14:01:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b163254e-5f69-4e7c-a51c-799ea75954c5 deleted.\n", stderr: "" })
Error: Time elapsed
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::mqtt::command::test_command::version_3

**Duration**: 14.779663183s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T14:01:53Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:01:56Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T14:01:57Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:01:58Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjM1MTgsImlhdCI6MTYzNTg2MTcxOCwianRpIjoiNWFhOGQyNGMtMDU0Ni00Y2EzLWE4ZjItZmMyZDZmYjdkZDc5IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOTdmYjJlMTAtNDIzYy00MzE2LTk5NWItNzdjNmM5MDJmNjFmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijk3ZmIyZTEwLTQyM2MtNDMxNi05OTViLTc3YzZjOTAyZjYxZiJ9.l8YBYSL_6kNSeeljhwk1UjSFsTtM8WT50RLSEb7FSQg
[2021-11-02T14:01:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T14:01:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T14:01:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjM1MTgsImlhdCI6MTYzNTg2MTcxOCwianRpIjoiNWFhOGQyNGMtMDU0Ni00Y2EzLWE4ZjItZmMyZDZmYjdkZDc5IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOTdmYjJlMTAtNDIzYy00MzE2LTk5NWItNzdjNmM5MDJmNjFmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijk3ZmIyZTEwLTQyM2MtNDMxNi05OTViLTc3YzZjOTAyZjYxZiJ9.l8YBYSL_6kNSeeljhwk1UjSFsTtM8WT50RLSEb7FSQg" "--context" "system-tests"
[2021-11-02T14:01:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T14:01:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:01:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:01:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjIwMTgsImlhdCI6MTYzNTg2MTcxOCwiYXV0aF90aW1lIjoxNjM1ODYxNzE2LCJqdGkiOiI1MWEyOTI2OC1jMWIyLTQzMDAtOGM0ZS0wMjIwMzA4MTA5OGYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijk3ZmIyZTEwLTQyM2MtNDMxNi05OTViLTc3YzZjOTAyZjYxZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI5N2ZiMmUxMC00MjNjLTQzMTYtOTk1Yi03N2M2YzkwMmY2MWYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.rqKOUn03rrA61jj0hRJPDv0Pep8B2x99oT2L2J6W7jo38JgzXmrPcYe5vMHK_N7XoNaPo9IjVz6a0y0OGFxBgknXNKsqhqbHmoGIiQz_V35YPRI-qvzmsDE_KBmGMi_UgXImeNQeUbZmvNeZ4wx81X_YgXE8VoL9RPL4cP4WN0c2ErYzVEaDjidP6os7ZtvNLYACd4Lz6PZQV-_f2Ia3NxVBTG9OG5knFsvmOtnMExkV8YveXNrwJfv1yNnx-vFIQKFq0KAm1TrKlCKg0ApavTS7pz8X7oz-ZvlTjMj-CdvbgY6ORwUiwP_LLvTL6549anZSn6peOdDvQnje-RbpHw\n", stderr: "" })
[2021-11-02T14:01:59Z INFO  drogue_cloud_tests::resources::apps] Create application: 5010d45c-1bd4-4046-be62-f688b6f19768
[2021-11-02T14:01:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "5010d45c-1bd4-4046-be62-f688b6f19768"
[2021-11-02T14:01:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 5010d45c-1bd4-4046-be62-f688b6f19768 created.\n", stderr: "" })
[2021-11-02T14:01:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "5010d45c-1bd4-4046-be62-f688b6f19768"
[2021-11-02T14:01:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:01:59.341688Z\",\n    \"generation\": 1,\n    \"name\": \"5010d45c-1bd4-4046-be62-f688b6f19768\",\n    \"resourceVersion\": \"a5c98330-7f24-4407-a304-3ea70f060481\",\n    \"uid\": \"707405b9-ed4d-46e0-aa11-2519ce089d8f\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:59.360788858Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}\n", stderr: "" })
[2021-11-02T14:02:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "5010d45c-1bd4-4046-be62-f688b6f19768"
[2021-11-02T14:02:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:01:59.341688Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"5010d45c-1bd4-4046-be62-f688b6f19768\",\n    \"resourceVersion\": \"097fdd83-3add-4e23-be98-bd1b3a1d7d1c\",\n    \"uid\": \"707405b9-ed4d-46e0-aa11-2519ce089d8f\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:59.778350337Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:59.778300123Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:59.398297621Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:59.411968614Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:59.490739543Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:59.499737668Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:59.778271339Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:59.778272792Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Aiu6h3SiExup\",\n        \"username\": \"user-5010d45c-1bd4-4046-be62-f688b6f19768\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:02:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "5010d45c-1bd4-4046-be62-f688b6f19768"
[2021-11-02T14:02:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:01:59.341688Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"5010d45c-1bd4-4046-be62-f688b6f19768\",\n    \"resourceVersion\": \"097fdd83-3add-4e23-be98-bd1b3a1d7d1c\",\n    \"uid\": \"707405b9-ed4d-46e0-aa11-2519ce089d8f\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:59.778350337Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:01:59.778300123Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:59.398297621Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:59.411968614Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:59.490739543Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:59.499737668Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:59.778271339Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:01:59.778272792Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Aiu6h3SiExup\",\n        \"username\": \"user-5010d45c-1bd4-4046-be62-f688b6f19768\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:02:00Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T14:02:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "5010d45c-1bd4-4046-be62-f688b6f19768" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T14:02:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T14:02:00Z INFO  drogue_cloud_tests::tests::mqtt::command] Sending payload
[2021-11-02T14:02:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:02:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjIwMTgsImlhdCI6MTYzNTg2MTcxOCwiYXV0aF90aW1lIjoxNjM1ODYxNzE2LCJqdGkiOiI1MWEyOTI2OC1jMWIyLTQzMDAtOGM0ZS0wMjIwMzA4MTA5OGYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijk3ZmIyZTEwLTQyM2MtNDMxNi05OTViLTc3YzZjOTAyZjYxZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI5N2ZiMmUxMC00MjNjLTQzMTYtOTk1Yi03N2M2YzkwMmY2MWYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.rqKOUn03rrA61jj0hRJPDv0Pep8B2x99oT2L2J6W7jo38JgzXmrPcYe5vMHK_N7XoNaPo9IjVz6a0y0OGFxBgknXNKsqhqbHmoGIiQz_V35YPRI-qvzmsDE_KBmGMi_UgXImeNQeUbZmvNeZ4wx81X_YgXE8VoL9RPL4cP4WN0c2ErYzVEaDjidP6os7ZtvNLYACd4Lz6PZQV-_f2Ia3NxVBTG9OG5knFsvmOtnMExkV8YveXNrwJfv1yNnx-vFIQKFq0KAm1TrKlCKg0ApavTS7pz8X7oz-ZvlTjMj-CdvbgY6ORwUiwP_LLvTL6549anZSn6peOdDvQnje-RbpHw\n", stderr: "" })
[2021-11-02T14:02:05Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:02:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "5010d45c-1bd4-4046-be62-f688b6f19768" "device1"
[2021-11-02T14:02:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:02:05Z INFO  drogue_cloud_tests::resources::apps] Destroy application '5010d45c-1bd4-4046-be62-f688b6f19768'
[2021-11-02T14:02:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "5010d45c-1bd4-4046-be62-f688b6f19768"
[2021-11-02T14:02:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 5010d45c-1bd4-4046-be62-f688b6f19768 deleted.\n", stderr: "" })
Error: Time elapsed
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_1

**Duration**: 310.657350641s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T14:02:07Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:02:10Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T14:02:11Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjM1MzIsImlhdCI6MTYzNTg2MTczMiwianRpIjoiZjg4MzgzNmYtMmE2YS00OGY1LWE0ZWQtYjRlZjE4ZTIyMWJmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMzI4MDcxNTktMjU0NC00YzU4LThlOTktMTAyMjVmYzhmNGVmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjMyODA3MTU5LTI1NDQtNGM1OC04ZTk5LTEwMjI1ZmM4ZjRlZiJ9.48LOQulKm_HyiGDx5LvTtPKf1emdUtEk8LNQUlBZEbU
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjM1MzIsImlhdCI6MTYzNTg2MTczMiwianRpIjoiZjg4MzgzNmYtMmE2YS00OGY1LWE0ZWQtYjRlZjE4ZTIyMWJmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMzI4MDcxNTktMjU0NC00YzU4LThlOTktMTAyMjVmYzhmNGVmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjMyODA3MTU5LTI1NDQtNGM1OC04ZTk5LTEwMjI1ZmM4ZjRlZiJ9.48LOQulKm_HyiGDx5LvTtPKf1emdUtEk8LNQUlBZEbU" "--context" "system-tests"
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjIwMzMsImlhdCI6MTYzNTg2MTczMywiYXV0aF90aW1lIjoxNjM1ODYxNzMwLCJqdGkiOiI0NDI3M2IyNC03NGFlLTQxOGItYjk3ZS01YTYxYjI2YThmYjciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjMyODA3MTU5LTI1NDQtNGM1OC04ZTk5LTEwMjI1ZmM4ZjRlZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIzMjgwNzE1OS0yNTQ0LTRjNTgtOGU5OS0xMDIyNWZjOGY0ZWYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.PcpqugR6dtqgohv3tdmLX55xtT4KC5nMPGKYObZAKiQ4nokF3FsiAlN3MWp6yTnchfWlMqxqf3FRytWGwn_WC6GgwK3PpkNAAzNAi_P1LE0-Tl_B0Aoj7pyI5UnrWYppT8_ataRtZ7pnEL4Newic_Bg8Sn5s99KtoN8D5d1dBBfGq5b87u_whFOZMOp2Uc0hkfa3AuOW3mDdR_ado_9QyJwBNuepPtTcLMDNfwJyAJTZKrp7PAh_MaTwWl3dbXJfGymrRrsOZa83tN7xQ5S54A4gIeK6vwAiBYnWG7d6CbXN9VgcfTwUgxeZ5gBVIB6ldvbWANfZVGeAlGVpLN2c7A\n", stderr: "" })
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::resources::apps] Create application: f0bdc40b-29fe-4deb-b97d-695e9b60368d
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "f0bdc40b-29fe-4deb-b97d-695e9b60368d"
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App f0bdc40b-29fe-4deb-b97d-695e9b60368d created.\n", stderr: "" })
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "f0bdc40b-29fe-4deb-b97d-695e9b60368d"
[2021-11-02T14:02:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:02:13.720449Z\",\n    \"generation\": 1,\n    \"name\": \"f0bdc40b-29fe-4deb-b97d-695e9b60368d\",\n    \"resourceVersion\": \"46661bec-ebda-477a-85e1-20208c408410\",\n    \"uid\": \"7745fd41-8d7d-4854-9540-7f426f4f2976\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:02:13.739703432Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}\n", stderr: "" })
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "f0bdc40b-29fe-4deb-b97d-695e9b60368d"
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:02:13.720449Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"f0bdc40b-29fe-4deb-b97d-695e9b60368d\",\n    \"resourceVersion\": \"e51b3fab-9669-4566-80cb-9942e4139dd5\",\n    \"uid\": \"7745fd41-8d7d-4854-9540-7f426f4f2976\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:02:14.043015415Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:02:14.042981011Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:02:13.781018084Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:02:13.786490476Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:02:13.881997849Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:02:13.891110378Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:02:14.042955805Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:02:14.042957087Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"K1cbGG0vAMcV\",\n        \"username\": \"user-f0bdc40b-29fe-4deb-b97d-695e9b60368d\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "f0bdc40b-29fe-4deb-b97d-695e9b60368d"
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:02:13.720449Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"f0bdc40b-29fe-4deb-b97d-695e9b60368d\",\n    \"resourceVersion\": \"e51b3fab-9669-4566-80cb-9942e4139dd5\",\n    \"uid\": \"7745fd41-8d7d-4854-9540-7f426f4f2976\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:02:14.043015415Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:02:14.042981011Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:02:13.781018084Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:02:13.786490476Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:02:13.881997849Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:02:13.891110378Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:02:14.042955805Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:02:14.042957087Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"K1cbGG0vAMcV\",\n        \"username\": \"user-f0bdc40b-29fe-4deb-b97d-695e9b60368d\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "f0bdc40b-29fe-4deb-b97d-695e9b60368d" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::tests::mqtt] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjIwMzMsImlhdCI6MTYzNTg2MTczMywiYXV0aF90aW1lIjoxNjM1ODYxNzMwLCJqdGkiOiI0NDI3M2IyNC03NGFlLTQxOGItYjk3ZS01YTYxYjI2YThmYjciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjMyODA3MTU5LTI1NDQtNGM1OC04ZTk5LTEwMjI1ZmM4ZjRlZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIzMjgwNzE1OS0yNTQ0LTRjNTgtOGU5OS0xMDIyNWZjOGY0ZWYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.PcpqugR6dtqgohv3tdmLX55xtT4KC5nMPGKYObZAKiQ4nokF3FsiAlN3MWp6yTnchfWlMqxqf3FRytWGwn_WC6GgwK3PpkNAAzNAi_P1LE0-Tl_B0Aoj7pyI5UnrWYppT8_ataRtZ7pnEL4Newic_Bg8Sn5s99KtoN8D5d1dBBfGq5b87u_whFOZMOp2Uc0hkfa3AuOW3mDdR_ado_9QyJwBNuepPtTcLMDNfwJyAJTZKrp7PAh_MaTwWl3dbXJfGymrRrsOZa83tN7xQ5S54A4gIeK6vwAiBYnWG7d6CbXN9VgcfTwUgxeZ5gBVIB6ldvbWANfZVGeAlGVpLN2c7A\n", stderr: "" })
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::tests::mqtt] Receiver created
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:02:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T14:07:16Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T14:07:16Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T14:07:16Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T14:07:16Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:07:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "f0bdc40b-29fe-4deb-b97d-695e9b60368d" "device1"
[2021-11-02T14:07:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:07:16Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'f0bdc40b-29fe-4deb-b97d-695e9b60368d'
[2021-11-02T14:07:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "f0bdc40b-29fe-4deb-b97d-695e9b60368d"
[2021-11-02T14:07:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App f0bdc40b-29fe-4deb-b97d-695e9b60368d deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_2

**Duration**: 310.870123223s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T14:07:18Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:07:21Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T14:07:22Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:07:23Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjM4NDMsImlhdCI6MTYzNTg2MjA0MywianRpIjoiYzcxYTFmYTMtNjVjYy00YTk5LWI3YWYtZjYzMzE2ZTBiMjg2IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZmY3MTgwYjYtYjkyOS00ZjRmLWE0NjMtMDVjYzFjNjdkMDk3Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImZmNzE4MGI2LWI5MjktNGY0Zi1hNDYzLTA1Y2MxYzY3ZDA5NyJ9.J8tw6U2WnS3Wru6tGCSIPP12L8wI0Tnekq-AsyHaWpw
[2021-11-02T14:07:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T14:07:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T14:07:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjM4NDMsImlhdCI6MTYzNTg2MjA0MywianRpIjoiYzcxYTFmYTMtNjVjYy00YTk5LWI3YWYtZjYzMzE2ZTBiMjg2IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZmY3MTgwYjYtYjkyOS00ZjRmLWE0NjMtMDVjYzFjNjdkMDk3Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImZmNzE4MGI2LWI5MjktNGY0Zi1hNDYzLTA1Y2MxYzY3ZDA5NyJ9.J8tw6U2WnS3Wru6tGCSIPP12L8wI0Tnekq-AsyHaWpw" "--context" "system-tests"
[2021-11-02T14:07:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T14:07:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:07:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:07:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjIzNDMsImlhdCI6MTYzNTg2MjA0MywiYXV0aF90aW1lIjoxNjM1ODYyMDQxLCJqdGkiOiI0NjUzZjg3OC1jMzMxLTRhMWUtODRjOS0wZTM2ZWY4N2EwZDUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImZmNzE4MGI2LWI5MjktNGY0Zi1hNDYzLTA1Y2MxYzY3ZDA5NyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJmZjcxODBiNi1iOTI5LTRmNGYtYTQ2My0wNWNjMWM2N2QwOTciLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.IHJ4LeyoC_FmOCuehJiNok14D-a21M3mArTYD0Lj-o9E8TreIC7NnzI-3AJ1qRf0p6GjdEQNKq_KpRRQx6tYGoNDGIgRaVLm4qGkXaGb8CzUHQcGJ8xaUApjzgRr7eVZ5cpU-DfrLf6zBSvLBdyJMbMxqLkVlV8XssI4IP6Vu8hYSNspVVSPkAyFw4XTbfkp-D3CNCJJQ1JsjQKYUvFqARIRB-cR6sIhvxGIRUba3UYSsxbl5qF5BCB1IAdXV3J3IKtsyyuer3Or1QqPuVuh9ngKXASd_ghQNxS0RpZ_CDMY-eSA9lZ9Vy3l_16COwhmYY3LMxY4EpQI7n-RSeXIKg\n", stderr: "" })
[2021-11-02T14:07:24Z INFO  drogue_cloud_tests::resources::apps] Create application: ac6c65dd-671f-438f-936d-01e6a7af45cc
[2021-11-02T14:07:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "ac6c65dd-671f-438f-936d-01e6a7af45cc"
[2021-11-02T14:07:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App ac6c65dd-671f-438f-936d-01e6a7af45cc created.\n", stderr: "" })
[2021-11-02T14:07:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ac6c65dd-671f-438f-936d-01e6a7af45cc"
[2021-11-02T14:07:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:07:24.380991Z\",\n    \"generation\": 0,\n    \"name\": \"ac6c65dd-671f-438f-936d-01e6a7af45cc\",\n    \"resourceVersion\": \"1104e8b9-a728-40ea-8e7e-16e2b889cfd0\",\n    \"uid\": \"59bca0c9-00b4-4c74-8cf4-5d4e924c8eb8\"\n  }\n}\n", stderr: "" })
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ac6c65dd-671f-438f-936d-01e6a7af45cc"
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:07:24.380991Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"ac6c65dd-671f-438f-936d-01e6a7af45cc\",\n    \"resourceVersion\": \"ac5d6cce-0f3b-44dc-91cc-c8f5a307fa87\",\n    \"uid\": \"59bca0c9-00b4-4c74-8cf4-5d4e924c8eb8\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:07:24.627954415Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:07:24.627990783Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:07:24.426570868Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:07:24.435063910Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:07:24.504321591Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:07:24.511097200Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:07:24.627929789Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:07:24.627931202Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"xEcACDsd2qJs\",\n        \"username\": \"user-ac6c65dd-671f-438f-936d-01e6a7af45cc\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "ac6c65dd-671f-438f-936d-01e6a7af45cc"
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:07:24.380991Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"ac6c65dd-671f-438f-936d-01e6a7af45cc\",\n    \"resourceVersion\": \"ac5d6cce-0f3b-44dc-91cc-c8f5a307fa87\",\n    \"uid\": \"59bca0c9-00b4-4c74-8cf4-5d4e924c8eb8\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:07:24.627954415Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:07:24.627990783Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:07:24.426570868Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:07:24.435063910Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:07:24.504321591Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:07:24.511097200Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:07:24.627929789Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:07:24.627931202Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"xEcACDsd2qJs\",\n        \"username\": \"user-ac6c65dd-671f-438f-936d-01e6a7af45cc\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "ac6c65dd-671f-438f-936d-01e6a7af45cc" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::tests::mqtt] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjIzNDMsImlhdCI6MTYzNTg2MjA0MywiYXV0aF90aW1lIjoxNjM1ODYyMDQxLCJqdGkiOiI0NjUzZjg3OC1jMzMxLTRhMWUtODRjOS0wZTM2ZWY4N2EwZDUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImZmNzE4MGI2LWI5MjktNGY0Zi1hNDYzLTA1Y2MxYzY3ZDA5NyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJmZjcxODBiNi1iOTI5LTRmNGYtYTQ2My0wNWNjMWM2N2QwOTciLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.IHJ4LeyoC_FmOCuehJiNok14D-a21M3mArTYD0Lj-o9E8TreIC7NnzI-3AJ1qRf0p6GjdEQNKq_KpRRQx6tYGoNDGIgRaVLm4qGkXaGb8CzUHQcGJ8xaUApjzgRr7eVZ5cpU-DfrLf6zBSvLBdyJMbMxqLkVlV8XssI4IP6Vu8hYSNspVVSPkAyFw4XTbfkp-D3CNCJJQ1JsjQKYUvFqARIRB-cR6sIhvxGIRUba3UYSsxbl5qF5BCB1IAdXV3J3IKtsyyuer3Or1QqPuVuh9ngKXASd_ghQNxS0RpZ_CDMY-eSA9lZ9Vy3l_16COwhmYY3LMxY4EpQI7n-RSeXIKg\n", stderr: "" })
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::tests::mqtt] Receiver created
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:07:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T14:12:27Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T14:12:27Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T14:12:27Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T14:12:27Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:12:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "ac6c65dd-671f-438f-936d-01e6a7af45cc" "device1"
[2021-11-02T14:12:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:12:27Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'ac6c65dd-671f-438f-936d-01e6a7af45cc'
[2021-11-02T14:12:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "ac6c65dd-671f-438f-936d-01e6a7af45cc"
[2021-11-02T14:12:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App ac6c65dd-671f-438f-936d-01e6a7af45cc deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_3

**Duration**: 311.042105071s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T14:12:29Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:12:32Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T14:12:33Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:12:34Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjQxNTQsImlhdCI6MTYzNTg2MjM1NCwianRpIjoiODYzNDk2N2EtZWE3MC00ZmExLWFiZmMtNDA2YTNlODMwYTFlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMzZlOWEwYTItZWY5Mi00NzFkLThjODQtMmNhNGQ4MTVhMTQ2Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjM2ZTlhMGEyLWVmOTItNDcxZC04Yzg0LTJjYTRkODE1YTE0NiJ9.q4QPu7YLWBJKVoHsHdzOzZPv7JB4ujeGtmwK6W6Og6A
[2021-11-02T14:12:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T14:12:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T14:12:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjQxNTQsImlhdCI6MTYzNTg2MjM1NCwianRpIjoiODYzNDk2N2EtZWE3MC00ZmExLWFiZmMtNDA2YTNlODMwYTFlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMzZlOWEwYTItZWY5Mi00NzFkLThjODQtMmNhNGQ4MTVhMTQ2Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjM2ZTlhMGEyLWVmOTItNDcxZC04Yzg0LTJjYTRkODE1YTE0NiJ9.q4QPu7YLWBJKVoHsHdzOzZPv7JB4ujeGtmwK6W6Og6A" "--context" "system-tests"
[2021-11-02T14:12:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T14:12:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:12:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:12:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjI2NTQsImlhdCI6MTYzNTg2MjM1NCwiYXV0aF90aW1lIjoxNjM1ODYyMzUyLCJqdGkiOiI1ZTQwMjA5Ny1mNzM1LTRhOWQtODRhNS0xZTg4ZGZlNWUxMjUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjM2ZTlhMGEyLWVmOTItNDcxZC04Yzg0LTJjYTRkODE1YTE0NiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIzNmU5YTBhMi1lZjkyLTQ3MWQtOGM4NC0yY2E0ZDgxNWExNDYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.mKgrvb_RNKXb-7VtTrZ-czpWuf12bu5HrZznummZnF8Qb5yrPNiyyl2RenIls7L4uywsGg_4iRXZgRK-ybumelIUz2_kZ2Wzgh91SmF2B__f3otuepyto2FLTketNRYo6RwRIHWF9T-gCYeoVEh1EEUDnagMYMkNYmVd4hHeT3qlFLZigr3yPV0rOBglZYdHNdESLvNxBToBqf8h-E92medTgnhNLOQaCRUlqg7NRNJnN-OOH0CKryCo9lcu4diCc02POQaa3QnPFJxvh4aGTfMIHiJfESBegU1VI512bZE7g58djW_i5fl143kzg8ECMM6FddfG-BoEpiF2SYvgGQ\n", stderr: "" })
[2021-11-02T14:12:35Z INFO  drogue_cloud_tests::resources::apps] Create application: a1daadcf-328b-468f-9790-d656466d370c
[2021-11-02T14:12:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "a1daadcf-328b-468f-9790-d656466d370c"
[2021-11-02T14:12:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App a1daadcf-328b-468f-9790-d656466d370c created.\n", stderr: "" })
[2021-11-02T14:12:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a1daadcf-328b-468f-9790-d656466d370c"
[2021-11-02T14:12:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:12:35.497725Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"a1daadcf-328b-468f-9790-d656466d370c\",\n    \"resourceVersion\": \"3ec57b1d-7584-4b55-af0c-55a8464cfbbc\",\n    \"uid\": \"fffcf0aa-1de9-4aa6-98e7-1033a2162769\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:12:35.520314934Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:12:35.520300908Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.520277545Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.520278326Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.520278747Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.520279128Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.520279649Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.520280981Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a1daadcf-328b-468f-9790-d656466d370c"
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:12:35.497725Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"a1daadcf-328b-468f-9790-d656466d370c\",\n    \"resourceVersion\": \"353d282d-33e9-490d-8227-3435aef8acbc\",\n    \"uid\": \"fffcf0aa-1de9-4aa6-98e7-1033a2162769\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:12:35.758514773Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:12:35.758471251Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.545317496Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.557510875Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.632425144Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.638627131Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.758442087Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.758443479Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"zwS56eGqVzny\",\n        \"username\": \"user-a1daadcf-328b-468f-9790-d656466d370c\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a1daadcf-328b-468f-9790-d656466d370c"
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:12:35.497725Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"a1daadcf-328b-468f-9790-d656466d370c\",\n    \"resourceVersion\": \"353d282d-33e9-490d-8227-3435aef8acbc\",\n    \"uid\": \"fffcf0aa-1de9-4aa6-98e7-1033a2162769\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:12:35.758514773Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:12:35.758471251Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.545317496Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.557510875Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.632425144Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.638627131Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.758442087Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:12:35.758443479Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"zwS56eGqVzny\",\n        \"username\": \"user-a1daadcf-328b-468f-9790-d656466d370c\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "a1daadcf-328b-468f-9790-d656466d370c" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::tests::mqtt] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjI2NTQsImlhdCI6MTYzNTg2MjM1NCwiYXV0aF90aW1lIjoxNjM1ODYyMzUyLCJqdGkiOiI1ZTQwMjA5Ny1mNzM1LTRhOWQtODRhNS0xZTg4ZGZlNWUxMjUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjM2ZTlhMGEyLWVmOTItNDcxZC04Yzg0LTJjYTRkODE1YTE0NiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIzNmU5YTBhMi1lZjkyLTQ3MWQtOGM4NC0yY2E0ZDgxNWExNDYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.mKgrvb_RNKXb-7VtTrZ-czpWuf12bu5HrZznummZnF8Qb5yrPNiyyl2RenIls7L4uywsGg_4iRXZgRK-ybumelIUz2_kZ2Wzgh91SmF2B__f3otuepyto2FLTketNRYo6RwRIHWF9T-gCYeoVEh1EEUDnagMYMkNYmVd4hHeT3qlFLZigr3yPV0rOBglZYdHNdESLvNxBToBqf8h-E92medTgnhNLOQaCRUlqg7NRNJnN-OOH0CKryCo9lcu4diCc02POQaa3QnPFJxvh4aGTfMIHiJfESBegU1VI512bZE7g58djW_i5fl143kzg8ECMM6FddfG-BoEpiF2SYvgGQ\n", stderr: "" })
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::tests::mqtt] Receiver created
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T14:12:36Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T14:17:38Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T14:17:38Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T14:17:38Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T14:17:38Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:17:38Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "a1daadcf-328b-468f-9790-d656466d370c" "device1"
[2021-11-02T14:17:38Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:17:38Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'a1daadcf-328b-468f-9790-d656466d370c'
[2021-11-02T14:17:38Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "a1daadcf-328b-468f-9790-d656466d370c"
[2021-11-02T14:17:38Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App a1daadcf-328b-468f-9790-d656466d370c deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_1

**Duration**: 311.104477126s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T14:17:40Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:17:43Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T14:17:44Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:17:45Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjQ0NjUsImlhdCI6MTYzNTg2MjY2NSwianRpIjoiODFjNzMxYzgtMWIwMC00MTc0LThiYzEtM2FjMDY1NmU4OTI1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODJkMThlYzctNTMzZi00MTAzLTk1ZWItZmZjYTAwMGE2Zjk5Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjgyZDE4ZWM3LTUzM2YtNDEwMy05NWViLWZmY2EwMDBhNmY5OSJ9.ZDyUiK8seQC-3q9mQDJ6k5j1Cpx0BeH72ZuEQGeJeN4
[2021-11-02T14:17:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T14:17:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T14:17:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjQ0NjUsImlhdCI6MTYzNTg2MjY2NSwianRpIjoiODFjNzMxYzgtMWIwMC00MTc0LThiYzEtM2FjMDY1NmU4OTI1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODJkMThlYzctNTMzZi00MTAzLTk1ZWItZmZjYTAwMGE2Zjk5Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjgyZDE4ZWM3LTUzM2YtNDEwMy05NWViLWZmY2EwMDBhNmY5OSJ9.ZDyUiK8seQC-3q9mQDJ6k5j1Cpx0BeH72ZuEQGeJeN4" "--context" "system-tests"
[2021-11-02T14:17:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T14:17:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:17:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:17:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjI5NjYsImlhdCI6MTYzNTg2MjY2NiwiYXV0aF90aW1lIjoxNjM1ODYyNjYzLCJqdGkiOiI3MDlhNzNiNi0yYTMwLTQwYjktODY1NS1hZTVjMzdkZmU4ZWQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjgyZDE4ZWM3LTUzM2YtNDEwMy05NWViLWZmY2EwMDBhNmY5OSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4MmQxOGVjNy01MzNmLTQxMDMtOTVlYi1mZmNhMDAwYTZmOTkiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.mKDhl5Wdp5CfV_aSLF0oOxJxsQCHQy-IEyGg3SKjY4CKaafdr_7zqKBL13405r8cCVPGrclJPHJ6oKz4DkBPiQ6uPOfa8HZDp-9Tfpw09grcCgYyBPLDzJJ82C4nF0BJ8Dmlx-rHTgp0vjR6gM0IGveTqfc6beXGlRxL1BSdWyhbGjRa2nKRvJJr_3oJ-5dhcCoVOnY5OgkzzHHw5piCCfSebmVTNhjw-8jB-966iLk0eBxGcUhMHFImJYTglNalohvaXkWs6zSdUIQY_u_JG-DaGH7yRNtssZfDIzFuD-7mbtfuKdZpyntl0vkG1NRIhA9RHhOqQ3J0YDzczek3Fw\n", stderr: "" })
[2021-11-02T14:17:46Z INFO  drogue_cloud_tests::resources::apps] Create application: f621908c-8569-407d-b6ce-8dd65f9808d5
[2021-11-02T14:17:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "f621908c-8569-407d-b6ce-8dd65f9808d5"
[2021-11-02T14:17:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App f621908c-8569-407d-b6ce-8dd65f9808d5 created.\n", stderr: "" })
[2021-11-02T14:17:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "f621908c-8569-407d-b6ce-8dd65f9808d5"
[2021-11-02T14:17:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:17:46.696115Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"f621908c-8569-407d-b6ce-8dd65f9808d5\",\n    \"resourceVersion\": \"4004e783-7951-4a2e-8fda-cbc09f71a39f\",\n    \"uid\": \"d6f4a16c-6d69-4f49-8287-a6fa8e056107\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:17:46.717791673Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:17:46.717776003Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.717713466Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.717714228Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.717714719Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.717715200Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.717715861Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.717717724Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "f621908c-8569-407d-b6ce-8dd65f9808d5"
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:17:46.696115Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"f621908c-8569-407d-b6ce-8dd65f9808d5\",\n    \"resourceVersion\": \"78b0da65-47e0-447a-89e0-b0a841f653d1\",\n    \"uid\": \"d6f4a16c-6d69-4f49-8287-a6fa8e056107\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:17:46.952699536Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:17:46.952666855Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.751014111Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.758634869Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.811314900Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.817572171Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.952641828Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.952643431Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"gUSOeeEAgW1z\",\n        \"username\": \"user-f621908c-8569-407d-b6ce-8dd65f9808d5\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "f621908c-8569-407d-b6ce-8dd65f9808d5"
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:17:46.696115Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"f621908c-8569-407d-b6ce-8dd65f9808d5\",\n    \"resourceVersion\": \"78b0da65-47e0-447a-89e0-b0a841f653d1\",\n    \"uid\": \"d6f4a16c-6d69-4f49-8287-a6fa8e056107\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:17:46.952699536Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:17:46.952666855Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.751014111Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.758634869Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.811314900Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.817572171Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.952641828Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:17:46.952643431Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"gUSOeeEAgW1z\",\n        \"username\": \"user-f621908c-8569-407d-b6ce-8dd65f9808d5\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "f621908c-8569-407d-b6ce-8dd65f9808d5" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::tests::mqtt] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjI5NjYsImlhdCI6MTYzNTg2MjY2NiwiYXV0aF90aW1lIjoxNjM1ODYyNjYzLCJqdGkiOiI3MDlhNzNiNi0yYTMwLTQwYjktODY1NS1hZTVjMzdkZmU4ZWQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjgyZDE4ZWM3LTUzM2YtNDEwMy05NWViLWZmY2EwMDBhNmY5OSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4MmQxOGVjNy01MzNmLTQxMDMtOTVlYi1mZmNhMDAwYTZmOTkiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.mKDhl5Wdp5CfV_aSLF0oOxJxsQCHQy-IEyGg3SKjY4CKaafdr_7zqKBL13405r8cCVPGrclJPHJ6oKz4DkBPiQ6uPOfa8HZDp-9Tfpw09grcCgYyBPLDzJJ82C4nF0BJ8Dmlx-rHTgp0vjR6gM0IGveTqfc6beXGlRxL1BSdWyhbGjRa2nKRvJJr_3oJ-5dhcCoVOnY5OgkzzHHw5piCCfSebmVTNhjw-8jB-966iLk0eBxGcUhMHFImJYTglNalohvaXkWs6zSdUIQY_u_JG-DaGH7yRNtssZfDIzFuD-7mbtfuKdZpyntl0vkG1NRIhA9RHhOqQ3J0YDzczek3Fw\n", stderr: "" })
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::tests::mqtt] Receiver created
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:17:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T14:22:49Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T14:22:49Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T14:22:49Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T14:22:49Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:22:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "f621908c-8569-407d-b6ce-8dd65f9808d5" "device1"
[2021-11-02T14:22:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:22:49Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'f621908c-8569-407d-b6ce-8dd65f9808d5'
[2021-11-02T14:22:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "f621908c-8569-407d-b6ce-8dd65f9808d5"
[2021-11-02T14:22:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App f621908c-8569-407d-b6ce-8dd65f9808d5 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_2

**Duration**: 311.824086376s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T14:22:51Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:22:54Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T14:22:55Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:22:56Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjQ3NzYsImlhdCI6MTYzNTg2Mjk3NiwianRpIjoiZWFiNzBlZTItMTU0OS00MTdiLWE0N2UtYzJlNmE5NGJjZjZlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODk0MWY5ZDUtMDc3ZC00ZWI0LTkxNTctMzYwNWYwZDc1YTJlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijg5NDFmOWQ1LTA3N2QtNGViNC05MTU3LTM2MDVmMGQ3NWEyZSJ9.qhYzoTpBMP4PI9pXa_LH26v8aF7mR2A7kAaksAsU40I
[2021-11-02T14:22:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T14:22:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T14:22:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjQ3NzYsImlhdCI6MTYzNTg2Mjk3NiwianRpIjoiZWFiNzBlZTItMTU0OS00MTdiLWE0N2UtYzJlNmE5NGJjZjZlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODk0MWY5ZDUtMDc3ZC00ZWI0LTkxNTctMzYwNWYwZDc1YTJlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijg5NDFmOWQ1LTA3N2QtNGViNC05MTU3LTM2MDVmMGQ3NWEyZSJ9.qhYzoTpBMP4PI9pXa_LH26v8aF7mR2A7kAaksAsU40I" "--context" "system-tests"
[2021-11-02T14:22:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T14:22:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:22:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:22:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjMyNzYsImlhdCI6MTYzNTg2Mjk3NiwiYXV0aF90aW1lIjoxNjM1ODYyOTc0LCJqdGkiOiI5MWNkY2UxZC0yN2Y5LTQwNDUtYjgzYi1iMGIzN2Y2NzBkZTgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijg5NDFmOWQ1LTA3N2QtNGViNC05MTU3LTM2MDVmMGQ3NWEyZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4OTQxZjlkNS0wNzdkLTRlYjQtOTE1Ny0zNjA1ZjBkNzVhMmUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.jTi16y1B3-l3LtcD44OGZmd_2Lw1uQWi3VWbt-N82by93x0vTkuvI6z1Q7cnCIYq-P1bZrBJZKupHmWfmyMVcN7riYezZQepUOYtDirPZenGxGaDM5iNIDZVexmectEhz1fcs-Rj9ldnzgOyKpH_kwEMHmwFkR-a5PW3IULmglJ8dI8EgNOwmvVKyvXWdbkshULFOmHK3O-3nLjzYDwBtekF8Uj6oUROihLtfADZDIVovV1T_sJYhJv6PCHUEOmWJiaSDw2FzzF5jF3YvQdk4WxzIFqwk6LeAlZB16BZbYSTDK4sYVYtLQlbGA46iX9vMjjISvXFxNbyplgTrT0dog\n", stderr: "" })
[2021-11-02T14:22:57Z INFO  drogue_cloud_tests::resources::apps] Create application: c3f609da-879d-432f-b4da-ceb87ca755c1
[2021-11-02T14:22:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "c3f609da-879d-432f-b4da-ceb87ca755c1"
[2021-11-02T14:22:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c3f609da-879d-432f-b4da-ceb87ca755c1 created.\n", stderr: "" })
[2021-11-02T14:22:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c3f609da-879d-432f-b4da-ceb87ca755c1"
[2021-11-02T14:22:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:22:57.430754Z\",\n    \"generation\": 0,\n    \"name\": \"c3f609da-879d-432f-b4da-ceb87ca755c1\",\n    \"resourceVersion\": \"b824e173-7411-4d0e-bc26-58f768b88758\",\n    \"uid\": \"03bf9126-3cc5-4edd-8a00-744d3cf6cfe7\"\n  }\n}\n", stderr: "" })
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c3f609da-879d-432f-b4da-ceb87ca755c1"
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:22:57.430754Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"c3f609da-879d-432f-b4da-ceb87ca755c1\",\n    \"resourceVersion\": \"1e26c3e8-7960-44a6-bad8-eb2e39d6bb66\",\n    \"uid\": \"03bf9126-3cc5-4edd-8a00-744d3cf6cfe7\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:22:57.684655399Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:22:57.684692658Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:22:57.485623711Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:22:57.494258398Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:22:57.538137320Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:22:57.546420360Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:22:57.684630101Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:22:57.684631293Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"I2DxXee9VTG5\",\n        \"username\": \"user-c3f609da-879d-432f-b4da-ceb87ca755c1\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c3f609da-879d-432f-b4da-ceb87ca755c1"
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:22:57.430754Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"c3f609da-879d-432f-b4da-ceb87ca755c1\",\n    \"resourceVersion\": \"1e26c3e8-7960-44a6-bad8-eb2e39d6bb66\",\n    \"uid\": \"03bf9126-3cc5-4edd-8a00-744d3cf6cfe7\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:22:57.684655399Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:22:57.684692658Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:22:57.485623711Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:22:57.494258398Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:22:57.538137320Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:22:57.546420360Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:22:57.684630101Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:22:57.684631293Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"I2DxXee9VTG5\",\n        \"username\": \"user-c3f609da-879d-432f-b4da-ceb87ca755c1\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "c3f609da-879d-432f-b4da-ceb87ca755c1" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::tests::mqtt] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjMyNzYsImlhdCI6MTYzNTg2Mjk3NiwiYXV0aF90aW1lIjoxNjM1ODYyOTc0LCJqdGkiOiI5MWNkY2UxZC0yN2Y5LTQwNDUtYjgzYi1iMGIzN2Y2NzBkZTgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijg5NDFmOWQ1LTA3N2QtNGViNC05MTU3LTM2MDVmMGQ3NWEyZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4OTQxZjlkNS0wNzdkLTRlYjQtOTE1Ny0zNjA1ZjBkNzVhMmUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.jTi16y1B3-l3LtcD44OGZmd_2Lw1uQWi3VWbt-N82by93x0vTkuvI6z1Q7cnCIYq-P1bZrBJZKupHmWfmyMVcN7riYezZQepUOYtDirPZenGxGaDM5iNIDZVexmectEhz1fcs-Rj9ldnzgOyKpH_kwEMHmwFkR-a5PW3IULmglJ8dI8EgNOwmvVKyvXWdbkshULFOmHK3O-3nLjzYDwBtekF8Uj6oUROihLtfADZDIVovV1T_sJYhJv6PCHUEOmWJiaSDw2FzzF5jF3YvQdk4WxzIFqwk6LeAlZB16BZbYSTDK4sYVYtLQlbGA46iX9vMjjISvXFxNbyplgTrT0dog\n", stderr: "" })
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::tests::mqtt] Receiver created
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:22:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T14:28:00Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T14:28:00Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T14:28:00Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T14:28:01Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:28:01Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "c3f609da-879d-432f-b4da-ceb87ca755c1" "device1"
[2021-11-02T14:28:01Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:28:01Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'c3f609da-879d-432f-b4da-ceb87ca755c1'
[2021-11-02T14:28:01Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "c3f609da-879d-432f-b4da-ceb87ca755c1"
[2021-11-02T14:28:01Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c3f609da-879d-432f-b4da-ceb87ca755c1 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_3

**Duration**: 310.753945935s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T14:28:03Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:28:06Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T14:28:07Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:28:08Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjUwODgsImlhdCI6MTYzNTg2MzI4OCwianRpIjoiZjdjZGMzYjEtNjFkYi00ZTYxLTk5MGUtNDYwMzE1NTYzYjU5IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMDhkZjg1MTItOGIzOS00MzA4LWI3M2YtNzM1OWFkMTBlN2JjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjA4ZGY4NTEyLThiMzktNDMwOC1iNzNmLTczNTlhZDEwZTdiYyJ9.0Mn01KAWpZzG7Nz1iEylA6eRpNEkw-JW8UZMk9EnLOs
[2021-11-02T14:28:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T14:28:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T14:28:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjUwODgsImlhdCI6MTYzNTg2MzI4OCwianRpIjoiZjdjZGMzYjEtNjFkYi00ZTYxLTk5MGUtNDYwMzE1NTYzYjU5IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMDhkZjg1MTItOGIzOS00MzA4LWI3M2YtNzM1OWFkMTBlN2JjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjA4ZGY4NTEyLThiMzktNDMwOC1iNzNmLTczNTlhZDEwZTdiYyJ9.0Mn01KAWpZzG7Nz1iEylA6eRpNEkw-JW8UZMk9EnLOs" "--context" "system-tests"
[2021-11-02T14:28:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T14:28:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:28:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:28:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjM1ODgsImlhdCI6MTYzNTg2MzI4OCwiYXV0aF90aW1lIjoxNjM1ODYzMjg2LCJqdGkiOiI2NjljMjBhMy0yYzc4LTQ4NTktYjMyMS1hMTBkNzA1ZTljMTkiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjA4ZGY4NTEyLThiMzktNDMwOC1iNzNmLTczNTlhZDEwZTdiYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIwOGRmODUxMi04YjM5LTQzMDgtYjczZi03MzU5YWQxMGU3YmMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.JL3veJNU-N1fwlAWB_8qpJMgNNhyFzYlw7j3jFX0CqPAcOr9w_EorgznAyolFWLXAbje8F5NZXKGqBQgPE_IjFCinXlstl1TUhY41ql-v5yJa2rThrkgapF0yuBlh4viUsdLwQDnvk8ZoFHFdBMK2gAITzvvMKgCm5kIE6_KkUf63O7USnX9KfYRhFtdrDTEHedzYDt9hXuHt639aZ6-6OXALNv7QZm7JGYgZDNyRvXrCWD6RoBEyzXHyHFUEjVU_mK70P9DcsGjKjOMYk-yEaM70wVi42ZvDdYic-O-NZ0E0EY7D7y4gX9Scx5_aCwmV1YiJxkEFIObAbOD_NviOA\n", stderr: "" })
[2021-11-02T14:28:09Z INFO  drogue_cloud_tests::resources::apps] Create application: cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb
[2021-11-02T14:28:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb"
[2021-11-02T14:28:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb created.\n", stderr: "" })
[2021-11-02T14:28:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb"
[2021-11-02T14:28:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:28:09.393105Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb\",\n    \"resourceVersion\": \"e6f11cb8-fc69-4c98-b29a-4c5cab52e326\",\n    \"uid\": \"4875aebd-a8f1-4fe5-866b-c644f29988ab\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:28:09.416485187Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:28:09.416503230Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.416449750Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.416451994Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.416452676Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.416453768Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.416454349Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.416458056Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb"
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:28:09.393105Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb\",\n    \"resourceVersion\": \"6b8d4adc-49f9-4d79-87bd-5e25ab236b0f\",\n    \"uid\": \"4875aebd-a8f1-4fe5-866b-c644f29988ab\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:28:09.660096840Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:28:09.660136925Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.442272186Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.457595678Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.502748775Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.514689544Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.660067856Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.660069549Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"YzkPqSfRql1n\",\n        \"username\": \"user-cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb"
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:28:09.393105Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb\",\n    \"resourceVersion\": \"6b8d4adc-49f9-4d79-87bd-5e25ab236b0f\",\n    \"uid\": \"4875aebd-a8f1-4fe5-866b-c644f29988ab\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:28:09.660096840Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:28:09.660136925Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.442272186Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.457595678Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.502748775Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.514689544Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.660067856Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:28:09.660069549Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"YzkPqSfRql1n\",\n        \"username\": \"user-cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::tests::mqtt] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjM1ODgsImlhdCI6MTYzNTg2MzI4OCwiYXV0aF90aW1lIjoxNjM1ODYzMjg2LCJqdGkiOiI2NjljMjBhMy0yYzc4LTQ4NTktYjMyMS1hMTBkNzA1ZTljMTkiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjA4ZGY4NTEyLThiMzktNDMwOC1iNzNmLTczNTlhZDEwZTdiYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIwOGRmODUxMi04YjM5LTQzMDgtYjczZi03MzU5YWQxMGU3YmMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.JL3veJNU-N1fwlAWB_8qpJMgNNhyFzYlw7j3jFX0CqPAcOr9w_EorgznAyolFWLXAbje8F5NZXKGqBQgPE_IjFCinXlstl1TUhY41ql-v5yJa2rThrkgapF0yuBlh4viUsdLwQDnvk8ZoFHFdBMK2gAITzvvMKgCm5kIE6_KkUf63O7USnX9KfYRhFtdrDTEHedzYDt9hXuHt639aZ6-6OXALNv7QZm7JGYgZDNyRvXrCWD6RoBEyzXHyHFUEjVU_mK70P9DcsGjKjOMYk-yEaM70wVi42ZvDdYic-O-NZ0E0EY7D7y4gX9Scx5_aCwmV1YiJxkEFIObAbOD_NviOA\n", stderr: "" })
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::tests::mqtt] Receiver created
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:28:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T14:33:11Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T14:33:11Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T14:33:11Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T14:33:12Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:33:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb" "device1"
[2021-11-02T14:33:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:33:12Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb'
[2021-11-02T14:33:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb"
[2021-11-02T14:33:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App cd4ff877-2ba3-4bc7-96b9-eb3da1399aeb deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_1

**Duration**: 310.624778398s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T14:33:14Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:33:16Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T14:33:18Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:33:19Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjUzOTksImlhdCI6MTYzNTg2MzU5OSwianRpIjoiY2E5YWY5OGUtOTdjMy00NzkzLTk0YjctNmU0ZDI0ZTcwNDdhIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiN2YwNTQ4MDgtN2M0OC00YzYyLThmYzEtMmM3MTc1YWE0ZjdlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjdmMDU0ODA4LTdjNDgtNGM2Mi04ZmMxLTJjNzE3NWFhNGY3ZSJ9.NXj0TYw6Pm33arbuyaN68sIiRzD-b2f4bTeZC_A6WG0
[2021-11-02T14:33:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T14:33:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T14:33:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjUzOTksImlhdCI6MTYzNTg2MzU5OSwianRpIjoiY2E5YWY5OGUtOTdjMy00NzkzLTk0YjctNmU0ZDI0ZTcwNDdhIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiN2YwNTQ4MDgtN2M0OC00YzYyLThmYzEtMmM3MTc1YWE0ZjdlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjdmMDU0ODA4LTdjNDgtNGM2Mi04ZmMxLTJjNzE3NWFhNGY3ZSJ9.NXj0TYw6Pm33arbuyaN68sIiRzD-b2f4bTeZC_A6WG0" "--context" "system-tests"
[2021-11-02T14:33:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T14:33:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:33:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:33:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjM4OTksImlhdCI6MTYzNTg2MzU5OSwiYXV0aF90aW1lIjoxNjM1ODYzNTk3LCJqdGkiOiIzYzgyY2JhOC1hNTZlLTQxZmItYmMyOC0zNjdmNDg2N2M3ZDUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjdmMDU0ODA4LTdjNDgtNGM2Mi04ZmMxLTJjNzE3NWFhNGY3ZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3ZjA1NDgwOC03YzQ4LTRjNjItOGZjMS0yYzcxNzVhYTRmN2UiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.brTX4_UGhNKrEl9L39vEAftz7PoopAn3snK0tAfX_dGLRtXkHDhV2f-gKHp34UjVOtZRIFgmK4fTHDbmr1Y6WBdZoPOF2VLu3-hkLwljF6-2bG-Qc-TxxG-k0mBMkYBwSgU3Mren-FXAvNR4uZbJD5vRhXi9OfEo_43azWT4z5atnVoOg_49Ufx8LXu2GnjL4Dl-tqly-CAmowglbIcY84W14TyKZRVbmWExe7YUeWR1i29TWS26uS78yuqR0UEOunmAfX5Hm9SRawr3owkjYg0NTEe2L8B7yfYSUSeFk0OBYz-bSqIsZUv9uifdADGuyoZsTJxAgSS6-95YPYRVKw\n", stderr: "" })
[2021-11-02T14:33:20Z INFO  drogue_cloud_tests::resources::apps] Create application: 8614caa1-56b2-4903-a5d5-5077b80eed6e
[2021-11-02T14:33:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "8614caa1-56b2-4903-a5d5-5077b80eed6e"
[2021-11-02T14:33:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 8614caa1-56b2-4903-a5d5-5077b80eed6e created.\n", stderr: "" })
[2021-11-02T14:33:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "8614caa1-56b2-4903-a5d5-5077b80eed6e"
[2021-11-02T14:33:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:33:20.214916Z\",\n    \"generation\": 0,\n    \"name\": \"8614caa1-56b2-4903-a5d5-5077b80eed6e\",\n    \"resourceVersion\": \"0a0edff6-19ea-428f-83ca-ae81066b4097\",\n    \"uid\": \"528cbfe7-bd5e-4874-8713-5b4c95a89642\"\n  }\n}\n", stderr: "" })
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "8614caa1-56b2-4903-a5d5-5077b80eed6e"
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:33:20.214916Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"8614caa1-56b2-4903-a5d5-5077b80eed6e\",\n    \"resourceVersion\": \"6df8488b-15a5-4aa4-9635-327c6efc873a\",\n    \"uid\": \"528cbfe7-bd5e-4874-8713-5b4c95a89642\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:33:20.553685334Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:33:20.553648495Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:33:20.310039597Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:33:20.318603405Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:33:20.386409405Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:33:20.393336003Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:33:20.553622196Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:33:20.553623519Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"n0F3Ab5CJaTf\",\n        \"username\": \"user-8614caa1-56b2-4903-a5d5-5077b80eed6e\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "8614caa1-56b2-4903-a5d5-5077b80eed6e"
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:33:20.214916Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"8614caa1-56b2-4903-a5d5-5077b80eed6e\",\n    \"resourceVersion\": \"6df8488b-15a5-4aa4-9635-327c6efc873a\",\n    \"uid\": \"528cbfe7-bd5e-4874-8713-5b4c95a89642\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:33:20.553685334Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:33:20.553648495Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:33:20.310039597Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:33:20.318603405Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:33:20.386409405Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:33:20.393336003Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:33:20.553622196Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:33:20.553623519Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"n0F3Ab5CJaTf\",\n        \"username\": \"user-8614caa1-56b2-4903-a5d5-5077b80eed6e\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "8614caa1-56b2-4903-a5d5-5077b80eed6e" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::tests::mqtt] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjM4OTksImlhdCI6MTYzNTg2MzU5OSwiYXV0aF90aW1lIjoxNjM1ODYzNTk3LCJqdGkiOiIzYzgyY2JhOC1hNTZlLTQxZmItYmMyOC0zNjdmNDg2N2M3ZDUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjdmMDU0ODA4LTdjNDgtNGM2Mi04ZmMxLTJjNzE3NWFhNGY3ZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3ZjA1NDgwOC03YzQ4LTRjNjItOGZjMS0yYzcxNzVhYTRmN2UiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.brTX4_UGhNKrEl9L39vEAftz7PoopAn3snK0tAfX_dGLRtXkHDhV2f-gKHp34UjVOtZRIFgmK4fTHDbmr1Y6WBdZoPOF2VLu3-hkLwljF6-2bG-Qc-TxxG-k0mBMkYBwSgU3Mren-FXAvNR4uZbJD5vRhXi9OfEo_43azWT4z5atnVoOg_49Ufx8LXu2GnjL4Dl-tqly-CAmowglbIcY84W14TyKZRVbmWExe7YUeWR1i29TWS26uS78yuqR0UEOunmAfX5Hm9SRawr3owkjYg0NTEe2L8B7yfYSUSeFk0OBYz-bSqIsZUv9uifdADGuyoZsTJxAgSS6-95YPYRVKw\n", stderr: "" })
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::tests::mqtt] Receiver created
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T14:33:21Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T14:38:22Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T14:38:22Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T14:38:22Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T14:38:22Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:38:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "8614caa1-56b2-4903-a5d5-5077b80eed6e" "device1"
[2021-11-02T14:38:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:38:22Z INFO  drogue_cloud_tests::resources::apps] Destroy application '8614caa1-56b2-4903-a5d5-5077b80eed6e'
[2021-11-02T14:38:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "8614caa1-56b2-4903-a5d5-5077b80eed6e"
[2021-11-02T14:38:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 8614caa1-56b2-4903-a5d5-5077b80eed6e deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_2

**Duration**: 312.858187419s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T14:38:24Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:38:27Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T14:38:28Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjU3MDksImlhdCI6MTYzNTg2MzkwOSwianRpIjoiMmMwNGViMTktNzQ1Zi00OTE0LWJhYTMtZmM5YmY4MGEzMzQzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZmQ3OTkyZTktNDQxMi00YTNhLTgzZWUtNTc4NmMyYjVmNzNjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImZkNzk5MmU5LTQ0MTItNGEzYS04M2VlLTU3ODZjMmI1ZjczYyJ9.xiKZxMwkLjghNMB_TaLxJbh4Qw52P6Jp9xbK2dpzAt4
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjU3MDksImlhdCI6MTYzNTg2MzkwOSwianRpIjoiMmMwNGViMTktNzQ1Zi00OTE0LWJhYTMtZmM5YmY4MGEzMzQzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZmQ3OTkyZTktNDQxMi00YTNhLTgzZWUtNTc4NmMyYjVmNzNjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImZkNzk5MmU5LTQ0MTItNGEzYS04M2VlLTU3ODZjMmI1ZjczYyJ9.xiKZxMwkLjghNMB_TaLxJbh4Qw52P6Jp9xbK2dpzAt4" "--context" "system-tests"
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjQyMTAsImlhdCI6MTYzNTg2MzkxMCwiYXV0aF90aW1lIjoxNjM1ODYzOTA3LCJqdGkiOiJiYWNhNTI5OS00NjBkLTRmYmQtYmQwNi0xZDg3YzYwYzEwMzciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImZkNzk5MmU5LTQ0MTItNGEzYS04M2VlLTU3ODZjMmI1ZjczYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJmZDc5OTJlOS00NDEyLTRhM2EtODNlZS01Nzg2YzJiNWY3M2MiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.IJKJsZrUVJ5H0FNoPGdGRn_trKyKaVBHVt5dWW__YdYca7h0dDgfNdpNRV4goWQ9bBEMuZHVTfIy7WAzod1j0HKc4K8y9DlqkdPow7uD1u9aVnCd4FLtn8P3KvmFjXRTXA0z0LBAdH0_2q879r_Aw89O5T9ffEPafIWDPkEFap7h4b4AHXECJv0oVHtqLb9QktMPfOBbDthZGW3hZ49qf6xqQBN0XYEPrOyDA8_Ios8KqPPa-NfyumeK5reUV2hsDLvm0i17wSGeQXDu9QMrSa4XxDIk4KgFRA5TEi8VmiLYmerSqQwPloKtDwIa33Ol-0zwh14selStNq4HirFjvA\n", stderr: "" })
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::resources::apps] Create application: a2a3bc5b-7bee-447a-b15f-62068a556e54
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "a2a3bc5b-7bee-447a-b15f-62068a556e54"
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App a2a3bc5b-7bee-447a-b15f-62068a556e54 created.\n", stderr: "" })
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a2a3bc5b-7bee-447a-b15f-62068a556e54"
[2021-11-02T14:38:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:38:30.636792Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"a2a3bc5b-7bee-447a-b15f-62068a556e54\",\n    \"resourceVersion\": \"828203d5-fb0a-4039-acbd-6a04eb1ca56d\",\n    \"uid\": \"4e008926-3f44-4c92-a899-eadff995562c\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:38:30.661308358Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:38:30.661291256Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:30.661261650Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:30.661262712Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:30.661263133Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:30.661263804Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:30.661264596Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:30.661266579Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:38:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a2a3bc5b-7bee-447a-b15f-62068a556e54"
[2021-11-02T14:38:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:38:30.636792Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 3,\n    \"name\": \"a2a3bc5b-7bee-447a-b15f-62068a556e54\",\n    \"resourceVersion\": \"a13a4a98-e452-4bbb-b47d-f2293e7b2c2c\",\n    \"uid\": \"4e008926-3f44-4c92-a899-eadff995562c\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:38:30.661308358Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:38:30.661291256Z\",\n        \"message\": \"Waiting to become ready: TopicsReady\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.654915386Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.663260847Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.663298237Z\",\n          \"status\": \"False\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:30.661263804Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:30.661264596Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:30.661266579Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 2\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a2a3bc5b-7bee-447a-b15f-62068a556e54"
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:38:30.636792Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"a2a3bc5b-7bee-447a-b15f-62068a556e54\",\n    \"resourceVersion\": \"772785af-6b8e-446f-a575-f726c986f717\",\n    \"uid\": \"4e008926-3f44-4c92-a899-eadff995562c\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:38:31.883300247Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:38:31.883263638Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.654915386Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.663260847Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.741533289Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.747735063Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.883237479Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.883238721Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"OqubCp5xuCdI\",\n        \"username\": \"user-a2a3bc5b-7bee-447a-b15f-62068a556e54\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a2a3bc5b-7bee-447a-b15f-62068a556e54"
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:38:30.636792Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"a2a3bc5b-7bee-447a-b15f-62068a556e54\",\n    \"resourceVersion\": \"772785af-6b8e-446f-a575-f726c986f717\",\n    \"uid\": \"4e008926-3f44-4c92-a899-eadff995562c\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:38:31.883300247Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:38:31.883263638Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.654915386Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.663260847Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.741533289Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.747735063Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.883237479Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:38:31.883238721Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"OqubCp5xuCdI\",\n        \"username\": \"user-a2a3bc5b-7bee-447a-b15f-62068a556e54\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "a2a3bc5b-7bee-447a-b15f-62068a556e54" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::tests::mqtt] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjQyMTAsImlhdCI6MTYzNTg2MzkxMCwiYXV0aF90aW1lIjoxNjM1ODYzOTA3LCJqdGkiOiJiYWNhNTI5OS00NjBkLTRmYmQtYmQwNi0xZDg3YzYwYzEwMzciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImZkNzk5MmU5LTQ0MTItNGEzYS04M2VlLTU3ODZjMmI1ZjczYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJmZDc5OTJlOS00NDEyLTRhM2EtODNlZS01Nzg2YzJiNWY3M2MiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.IJKJsZrUVJ5H0FNoPGdGRn_trKyKaVBHVt5dWW__YdYca7h0dDgfNdpNRV4goWQ9bBEMuZHVTfIy7WAzod1j0HKc4K8y9DlqkdPow7uD1u9aVnCd4FLtn8P3KvmFjXRTXA0z0LBAdH0_2q879r_Aw89O5T9ffEPafIWDPkEFap7h4b4AHXECJv0oVHtqLb9QktMPfOBbDthZGW3hZ49qf6xqQBN0XYEPrOyDA8_Ios8KqPPa-NfyumeK5reUV2hsDLvm0i17wSGeQXDu9QMrSa4XxDIk4KgFRA5TEi8VmiLYmerSqQwPloKtDwIa33Ol-0zwh14selStNq4HirFjvA\n", stderr: "" })
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::tests::mqtt] Receiver created
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:38:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T14:43:34Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T14:43:34Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T14:43:34Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T14:43:35Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:43:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "a2a3bc5b-7bee-447a-b15f-62068a556e54" "device1"
[2021-11-02T14:43:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:43:35Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'a2a3bc5b-7bee-447a-b15f-62068a556e54'
[2021-11-02T14:43:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "a2a3bc5b-7bee-447a-b15f-62068a556e54"
[2021-11-02T14:43:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App a2a3bc5b-7bee-447a-b15f-62068a556e54 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_3

**Duration**: 312.074270863s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-11-02T14:43:37Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:43:40Z INFO  drogue_cloud_tests::init::login] Performing console login
[2021-11-02T14:43:41Z INFO  drogue_cloud_tests::init::config] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
    })
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjYwMjIsImlhdCI6MTYzNTg2NDIyMiwianRpIjoiODY2MGE5YTAtZGY5NS00MmE4LWE2MjAtMjQwZDg3NTg4YWEwIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZTgxZTNjMzctNTE1My00Yzg3LTk4M2QtNmM3YTM4NzFmYzkxIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImU4MWUzYzM3LTUxNTMtNGM4Ny05ODNkLTZjN2EzODcxZmM5MSJ9._9BcBVyxJH3FuyKUOZgRi9WiJLv79vtRAKTsAzw9Vp8
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NWQ0OTgyNy1kNzQ1LTRkMGQtODc2NC0xZGZmNjJjYTUwMTEifQ.eyJleHAiOjE2MzU4NjYwMjIsImlhdCI6MTYzNTg2NDIyMiwianRpIjoiODY2MGE5YTAtZGY5NS00MmE4LWE2MjAtMjQwZDg3NTg4YWEwIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjMyNjhkNWU0LWM1ZmEtNGNlZi05NjVlLTU2ZjUyZTc5ZjA5MSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZTgxZTNjMzctNTE1My00Yzg3LTk4M2QtNmM3YTM4NzFmYzkxIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImU4MWUzYzM3LTUxNTMtNGM4Ny05ODNkLTZjN2EzODcxZmM5MSJ9._9BcBVyxJH3FuyKUOZgRi9WiJLv79vtRAKTsAzw9Vp8" "--context" "system-tests"
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjQ1MjMsImlhdCI6MTYzNTg2NDIyMywiYXV0aF90aW1lIjoxNjM1ODY0MjIwLCJqdGkiOiIyNDllYWVkYS0xOGNiLTQ5OTYtYmIzOS1kZWNlODYzM2ZjMzQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImU4MWUzYzM3LTUxNTMtNGM4Ny05ODNkLTZjN2EzODcxZmM5MSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJlODFlM2MzNy01MTUzLTRjODctOTgzZC02YzdhMzg3MWZjOTEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.GNezGRKI9gI85bTw2fVluIRX7GJeiAe-qaPxL8vzEhQHkAJ1OMM3aDHv4O4bTE0-AtlzgEl1W49zqnrLdgkihGkaCmMM7Mh5s7tRAb1ncenJh6IHLtT-faYosStDa3BEsHQ_BDIEv5qN78h1U91-sWeDLKM0ERoIR_HiT3WcguO37gDQi8Rosy4SdtSSJNyjtHfkZL9g0je67G9ND2zUgsSpacUiV5j-JAeKtYUaMEKD4nFPe-Y8TBYMrB6yYU5rczbuQCx2OoliozhgFrWQQdU0_KP1leM9ln1CFMuCH3n7i3An9IS1LmNIwL2w0MypWqCp3YWMA97z7q8p3hhjgQ\n", stderr: "" })
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::resources::apps] Create application: 6b2c4076-1094-416e-ab97-bdbcbd7bf124
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "6b2c4076-1094-416e-ab97-bdbcbd7bf124"
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 6b2c4076-1094-416e-ab97-bdbcbd7bf124 created.\n", stderr: "" })
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "6b2c4076-1094-416e-ab97-bdbcbd7bf124"
[2021-11-02T14:43:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:43:43.789684Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"6b2c4076-1094-416e-ab97-bdbcbd7bf124\",\n    \"resourceVersion\": \"037c5d90-4b7b-4e4a-9e3c-02c9807dd3dc\",\n    \"uid\": \"2755bc36-e8e9-42f6-b72d-797162a9d197\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:43:43.802146151Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:43:43.802170967Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.802052346Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.802054960Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.802055702Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.802056794Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.802057525Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.802061323Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "6b2c4076-1094-416e-ab97-bdbcbd7bf124"
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:43:43.789684Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"6b2c4076-1094-416e-ab97-bdbcbd7bf124\",\n    \"resourceVersion\": \"fe5802e8-f6dc-490a-a592-225e3ff66b13\",\n    \"uid\": \"2755bc36-e8e9-42f6-b72d-797162a9d197\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:43:44.021202293Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:43:44.021240304Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.827644318Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.840989437Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.915005084Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.922695220Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:44.021171235Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:44.021173920Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"T6MZljOQbnL2\",\n        \"username\": \"user-6b2c4076-1094-416e-ab97-bdbcbd7bf124\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "6b2c4076-1094-416e-ab97-bdbcbd7bf124"
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-11-02T14:43:43.789684Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"6b2c4076-1094-416e-ab97-bdbcbd7bf124\",\n    \"resourceVersion\": \"fe5802e8-f6dc-490a-a592-225e3ff66b13\",\n    \"uid\": \"2755bc36-e8e9-42f6-b72d-797162a9d197\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:43:44.021202293Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-11-02T14:43:44.021240304Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.827644318Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.840989437Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.915005084Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:43.922695220Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:44.021171235Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-11-02T14:43:44.021173920Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"T6MZljOQbnL2\",\n        \"username\": \"user-6b2c4076-1094-416e-ab97-bdbcbd7bf124\"\n      }\n    }\n  }\n}\n", stderr: "" })
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "6b2c4076-1094-416e-ab97-bdbcbd7bf124" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::tests::mqtt] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSUXZBS2RDYXB4cXRFVWo5NEl6aWNUZmQ1ZUc4Tmh2aEViSGFDZF9HYTVJIn0.eyJleHAiOjE2MzU4NjQ1MjMsImlhdCI6MTYzNTg2NDIyMywiYXV0aF90aW1lIjoxNjM1ODY0MjIwLCJqdGkiOiIyNDllYWVkYS0xOGNiLTQ5OTYtYmIzOS1kZWNlODYzM2ZjMzQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMzI2OGQ1ZTQtYzVmYS00Y2VmLTk2NWUtNTZmNTJlNzlmMDkxIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImU4MWUzYzM3LTUxNTMtNGM4Ny05ODNkLTZjN2EzODcxZmM5MSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJlODFlM2MzNy01MTUzLTRjODctOTgzZC02YzdhMzg3MWZjOTEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.GNezGRKI9gI85bTw2fVluIRX7GJeiAe-qaPxL8vzEhQHkAJ1OMM3aDHv4O4bTE0-AtlzgEl1W49zqnrLdgkihGkaCmMM7Mh5s7tRAb1ncenJh6IHLtT-faYosStDa3BEsHQ_BDIEv5qN78h1U91-sWeDLKM0ERoIR_HiT3WcguO37gDQi8Rosy4SdtSSJNyjtHfkZL9g0je67G9ND2zUgsSpacUiV5j-JAeKtYUaMEKD4nFPe-Y8TBYMrB6yYU5rczbuQCx2OoliozhgFrWQQdU0_KP1leM9ln1CFMuCH3n7i3An9IS1LmNIwL2w0MypWqCp3YWMA97z7q8p3hhjgQ\n", stderr: "" })
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::tests::mqtt] Receiver created
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-11-02T14:43:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-11-02T14:48:46Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-11-02T14:48:46Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-11-02T14:48:46Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-11-02T14:48:47Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-11-02T14:48:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "6b2c4076-1094-416e-ab97-bdbcbd7bf124" "device1"
[2021-11-02T14:48:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-11-02T14:48:47Z INFO  drogue_cloud_tests::resources::apps] Destroy application '6b2c4076-1094-416e-ab97-bdbcbd7bf124'
[2021-11-02T14:48:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "6b2c4076-1094-416e-ab97-bdbcbd7bf124"
[2021-11-02T14:48:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 6b2c4076-1094-416e-ab97-bdbcbd7bf124 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/59eed8a2aac0230a8b53e89d4e99d55912ba6b35/library/test/src/lib.rs:194:5

</pre>

</details>

## ✅ tests::registry::api::test_registry_create_app

**Duration**: 10.240282267s

## ✅ tests::registry::drg::test_registry_create_and_delete

**Duration**: 9.28280241s

## ✅ tests::registry::drg::test_registry_create_app

**Duration**: 8.80772638s

## ✅ tests::registry::drg::test_registry_create_app_and_device

**Duration**: 8.925056463s

## ✅ tests::registry::drg::test_registry_create_app_and_device_twice

**Duration**: 9.038861188s

## ✅ tests::registry::drg::test_registry_create_app_twice

**Duration**: 8.983978773s

## ✅ tests::registry::drg::test_registry_device_create_and_delete

**Duration**: 8.946537616s
