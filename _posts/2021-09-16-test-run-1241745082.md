---
title: "Test Result 1241745082"
date: 2021-09-16T14:23:37.939093626+00:00
categories: test-report
---


| Passed | Failed | Ignored | Filtered |
| ------ | ------ | ------- | -------- |
| 29 | 22 | 0 | 0 |


# Index

| Name | Result | Duration |
| ---- | ------ | -------- |
| [init::web::test::test_web_destroy](#initwebtesttest_web_destroy) | ✅ | 7.284139675s | 
| [init::web::test::test_web_test](#initwebtesttest_web_test) | ✅ | 6.263552528s | 
| [tests::coap::command::test_command::version_1](#testscoapcommandtest_commandversion_1) | ❌ | 55.684249985s | 
| [tests::coap::command::test_command::version_2](#testscoapcommandtest_commandversion_2) | ❌ | 54.200800227s | 
| [tests::coap::command::test_command::version_3](#testscoapcommandtest_commandversion_3) | ❌ | 54.734304522s | 
| [tests::coap::telemetry::test_send_telemetry_pass::version_1](#testscoaptelemetrytest_send_telemetry_passversion_1) | ❌ | 54.861718266s | 
| [tests::coap::telemetry::test_send_telemetry_pass::version_2](#testscoaptelemetrytest_send_telemetry_passversion_2) | ❌ | 53.979968396s | 
| [tests::coap::telemetry::test_send_telemetry_pass::version_3](#testscoaptelemetrytest_send_telemetry_passversion_3) | ❌ | 54.630704241s | 
| [tests::coap::telemetry::test_send_telemetry_user::version_1](#testscoaptelemetrytest_send_telemetry_userversion_1) | ❌ | 44.358282974s | 
| [tests::coap::telemetry::test_send_telemetry_user::version_2](#testscoaptelemetrytest_send_telemetry_userversion_2) | ❌ | 44.283036107s | 
| [tests::coap::telemetry::test_send_telemetry_user::version_3](#testscoaptelemetrytest_send_telemetry_userversion_3) | ❌ | 42.724308496s | 
| [tests::coap::telemetry::test_send_telemetry_user_alias::version_1](#testscoaptelemetrytest_send_telemetry_user_aliasversion_1) | ❌ | 52.822242227s | 
| [tests::coap::telemetry::test_send_telemetry_user_alias::version_2](#testscoaptelemetrytest_send_telemetry_user_aliasversion_2) | ❌ | 51.456330332s | 
| [tests::coap::telemetry::test_send_telemetry_user_alias::version_3](#testscoaptelemetrytest_send_telemetry_user_aliasversion_3) | ❌ | 53.135693127s | 
| [tests::coap::telemetry::test_send_telemetry_user_only::version_1](#testscoaptelemetrytest_send_telemetry_user_onlyversion_1) | ❌ | 42.627269929s | 
| [tests::coap::telemetry::test_send_telemetry_user_only::version_2](#testscoaptelemetrytest_send_telemetry_user_onlyversion_2) | ❌ | 42.923236964s | 
| [tests::coap::telemetry::test_send_telemetry_user_only::version_3](#testscoaptelemetrytest_send_telemetry_user_onlyversion_3) | ❌ | 42.591721361s | 
| [tests::drg::test_drg_version](#testsdrgtest_drg_version) | ✅ | 11.190723666s | 
| [tests::http::command::test_command::version_1](#testshttpcommandtest_commandversion_1) | ✅ | 16.763602449s | 
| [tests::http::command::test_command::version_2](#testshttpcommandtest_commandversion_2) | ✅ | 18.668643002s | 
| [tests::http::command::test_command::version_3](#testshttpcommandtest_commandversion_3) | ✅ | 19.237043969s | 
| [tests::http::telemetry::test_send_telemetry_pass::version_1](#testshttptelemetrytest_send_telemetry_passversion_1) | ✅ | 17.126700656s | 
| [tests::http::telemetry::test_send_telemetry_pass::version_2](#testshttptelemetrytest_send_telemetry_passversion_2) | ✅ | 17.603612238s | 
| [tests::http::telemetry::test_send_telemetry_pass::version_3](#testshttptelemetrytest_send_telemetry_passversion_3) | ✅ | 16.962035478s | 
| [tests::http::telemetry::test_send_telemetry_user::version_1](#testshttptelemetrytest_send_telemetry_userversion_1) | ❌ | 42.40509194s | 
| [tests::http::telemetry::test_send_telemetry_user::version_2](#testshttptelemetrytest_send_telemetry_userversion_2) | ❌ | 42.731504683s | 
| [tests::http::telemetry::test_send_telemetry_user::version_3](#testshttptelemetrytest_send_telemetry_userversion_3) | ❌ | 42.216365284s | 
| [tests::http::telemetry::test_send_telemetry_user_alias::version_1](#testshttptelemetrytest_send_telemetry_user_aliasversion_1) | ✅ | 18.931776935s | 
| [tests::http::telemetry::test_send_telemetry_user_alias::version_2](#testshttptelemetrytest_send_telemetry_user_aliasversion_2) | ✅ | 17.86247286s | 
| [tests::http::telemetry::test_send_telemetry_user_alias::version_3](#testshttptelemetrytest_send_telemetry_user_aliasversion_3) | ✅ | 19.035345648s | 
| [tests::http::telemetry::test_send_telemetry_user_only::version_1](#testshttptelemetrytest_send_telemetry_user_onlyversion_1) | ❌ | 42.705518984s | 
| [tests::http::telemetry::test_send_telemetry_user_only::version_2](#testshttptelemetrytest_send_telemetry_user_onlyversion_2) | ❌ | 42.572994596s | 
| [tests::http::telemetry::test_send_telemetry_user_only::version_3](#testshttptelemetrytest_send_telemetry_user_onlyversion_3) | ❌ | 42.853548612s | 
| [tests::mqtt::command::test_command::version_1](#testsmqttcommandtest_commandversion_1) | ✅ | 12.798360842s | 
| [tests::mqtt::command::test_command::version_2](#testsmqttcommandtest_commandversion_2) | ✅ | 13.995023692s | 
| [tests::mqtt::command::test_command::version_3](#testsmqttcommandtest_commandversion_3) | ✅ | 13.042191957s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_1](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_1integration_version_1) | ✅ | 16.813451566s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_2](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_1integration_version_2) | ✅ | 17.070637151s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_3](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_1integration_version_3) | ✅ | 17.73270795s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_1](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_2integration_version_1) | ✅ | 18.148814863s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_2](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_2integration_version_2) | ✅ | 18.860037907s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_3](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_2integration_version_3) | ✅ | 17.349942269s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_1](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_3integration_version_1) | ✅ | 17.994165138s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_2](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_3integration_version_2) | ✅ | 19.679607966s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_3](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_3integration_version_3) | ✅ | 19.170392856s | 
| [tests::registry::test_registry_create_and_delete](#testsregistrytest_registry_create_and_delete) | ❌ | 12.411375434s | 
| [tests::registry::test_registry_create_app](#testsregistrytest_registry_create_app) | ✅ | 12.523240473s | 
| [tests::registry::test_registry_create_app_and_device](#testsregistrytest_registry_create_app_and_device) | ✅ | 12.46211966s | 
| [tests::registry::test_registry_create_app_and_device_twice](#testsregistrytest_registry_create_app_and_device_twice) | ✅ | 12.634154989s | 
| [tests::registry::test_registry_create_app_twice](#testsregistrytest_registry_create_app_twice) | ✅ | 12.582827647s | 
| [tests::registry::test_registry_device_create_and_delete](#testsregistrytest_registry_device_create_and_delete) | ✅ | 11.6086406s | 


# Details

## ✅ init::web::test::test_web_destroy

**Duration**: 7.284139675s

## ✅ init::web::test::test_web_test

**Duration**: 6.263552528s

## ❌ tests::coap::command::test_command::version_1

**Duration**: 55.684249985s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T13:59:27Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T13:59:35Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI1NzQsImlhdCI6MTYzMTgwMDc3NCwianRpIjoiYWI1MzRkZWMtMDZjMi00ZTRhLTkzZWUtMjQyYTM2MWJhNzQ5IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMmE3MTdlOWItZjhmYS00YTZkLWE3OGUtMWVjMWVmNjE3NzgzIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjJhNzE3ZTliLWY4ZmEtNGE2ZC1hNzhlLTFlYzFlZjYxNzc4MyJ9.eMUgDA91RkD5Vhf7Bp4jtwrXP1icCL8E_PVOKhKHaTw
[2021-09-16T13:59:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T13:59:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(256)), stdout: "", stderr: "Error: Error loading config file\n\nCaused by:\n    0: Unable to open configuration file. Did you log into a drogue cloud cluster ?\n    1: No such file or directory (os error 2)\n" })
[2021-09-16T13:59:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI1NzQsImlhdCI6MTYzMTgwMDc3NCwianRpIjoiYWI1MzRkZWMtMDZjMi00ZTRhLTkzZWUtMjQyYTM2MWJhNzQ5IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMmE3MTdlOWItZjhmYS00YTZkLWE3OGUtMWVjMWVmNjE3NzgzIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjJhNzE3ZTliLWY4ZmEtNGE2ZC1hNzhlLTFlYzFlZjYxNzc4MyJ9.eMUgDA91RkD5Vhf7Bp4jtwrXP1icCL8E_PVOKhKHaTw" "--context" "system-tests"
[2021-09-16T13:59:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T13:59:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T13:59:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T13:59:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDEwNzUsImlhdCI6MTYzMTgwMDc3NSwiYXV0aF90aW1lIjoxNjMxODAwNzcwLCJqdGkiOiIxYjU0ODgwZS1jNTZjLTRhOTEtODBlNi1mYWM2OTFiNjBiZGMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiJjM2QwYWI5Ni00NDhiLTQwZWItYWZjYi04OGU1NWM2MTA4OTgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMmE3MTdlOWItZjhmYS00YTZkLWE3OGUtMWVjMWVmNjE3NzgzIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwic2lkIjoiMmE3MTdlOWItZjhmYS00YTZkLWE3OGUtMWVjMWVmNjE3NzgzIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.pFLCaO9p0kzBto5Quwp2TFVS4o8oqEUpBtnGkX014odkL8K0xdNc08LxTnZeu4dSMDqqwgHHEMHrJ95ng81rIpznq_6dK35djsiRv9_5HVlkrrLREQnXZVkxkjnIec2j_0BmqgRWV9Uf6z_1ddwNHkwDiRTSxzVTuaTZMGDVYOexyP1FhrIANdmWJ7hj3SSKNnzkNVRoUpmh8YH3kSu4PvdNCl8nVAneXhGiD97maH9kLk-UnsH_qO7KvmfHqo6u9nHBZ46Ct3A8iI_Fn__dLLkVEES7tXsriU22xCnRV-Se1IeMoTEECvZFFHT84PkxL0FZ9SPCWzCmbtOwTL9CxQ\n", stderr: "" })
[2021-09-16T13:59:35Z INFO  drogue_cloud_tests::resources::apps] Create application: 7819fd0e-7845-4203-b253-add7878ad704
[2021-09-16T13:59:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "7819fd0e-7845-4203-b253-add7878ad704"
[2021-09-16T13:59:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 7819fd0e-7845-4203-b253-add7878ad704 created.\n", stderr: "" })
[2021-09-16T13:59:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7819fd0e-7845-4203-b253-add7878ad704"
[2021-09-16T13:59:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T13:59:35.980969Z\",\n    \"generation\": 0,\n    \"name\": \"7819fd0e-7845-4203-b253-add7878ad704\",\n    \"resourceVersion\": \"7d25684a-eb48-40df-8802-418bce28018a\",\n    \"uid\": \"98862e80-f651-4602-b24d-94a94a35f753\"\n  }\n}", stderr: "" })
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7819fd0e-7845-4203-b253-add7878ad704"
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T13:59:35.980969Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"7819fd0e-7845-4203-b253-add7878ad704\",\n    \"resourceVersion\": \"36772bf7-2c28-4dd9-aba5-9359f1d25b20\",\n    \"uid\": \"98862e80-f651-4602-b24d-94a94a35f753\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T13:59:36.866263959Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T13:59:36.870863073Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T13:59:36.484512591Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T13:59:36.506659598Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T13:59:36.708091486Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T13:59:36.725313692Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T13:59:36.866225066Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T13:59:36.866228112Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Sw2MIeyhx251\",\n        \"username\": \"user-7819fd0e-7845-4203-b253-add7878ad704\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7819fd0e-7845-4203-b253-add7878ad704"
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T13:59:35.980969Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"7819fd0e-7845-4203-b253-add7878ad704\",\n    \"resourceVersion\": \"36772bf7-2c28-4dd9-aba5-9359f1d25b20\",\n    \"uid\": \"98862e80-f651-4602-b24d-94a94a35f753\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T13:59:36.866263959Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T13:59:36.870863073Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T13:59:36.484512591Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T13:59:36.506659598Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T13:59:36.708091486Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T13:59:36.725313692Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T13:59:36.866225066Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T13:59:36.866228112Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Sw2MIeyhx251\",\n        \"username\": \"user-7819fd0e-7845-4203-b253-add7878ad704\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "7819fd0e-7845-4203-b253-add7878ad704" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::tests::coap::command] Sending payload
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::tests::coap::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDEwNzUsImlhdCI6MTYzMTgwMDc3NSwiYXV0aF90aW1lIjoxNjMxODAwNzcwLCJqdGkiOiIxYjU0ODgwZS1jNTZjLTRhOTEtODBlNi1mYWM2OTFiNjBiZGMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiJjM2QwYWI5Ni00NDhiLTQwZWItYWZjYi04OGU1NWM2MTA4OTgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMmE3MTdlOWItZjhmYS00YTZkLWE3OGUtMWVjMWVmNjE3NzgzIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwic2lkIjoiMmE3MTdlOWItZjhmYS00YTZkLWE3OGUtMWVjMWVmNjE3NzgzIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.pFLCaO9p0kzBto5Quwp2TFVS4o8oqEUpBtnGkX014odkL8K0xdNc08LxTnZeu4dSMDqqwgHHEMHrJ95ng81rIpznq_6dK35djsiRv9_5HVlkrrLREQnXZVkxkjnIec2j_0BmqgRWV9Uf6z_1ddwNHkwDiRTSxzVTuaTZMGDVYOexyP1FhrIANdmWJ7hj3SSKNnzkNVRoUpmh8YH3kSu4PvdNCl8nVAneXhGiD97maH9kLk-UnsH_qO7KvmfHqo6u9nHBZ46Ct3A8iI_Fn__dLLkVEES7tXsriU22xCnRV-Se1IeMoTEECvZFFHT84PkxL0FZ9SPCWzCmbtOwTL9CxQ\n", stderr: "" })
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T13:59:37Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T13:59:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T13:59:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T13:59:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T13:59:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T13:59:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T13:59:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T13:59:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T13:59:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T13:59:42Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 443, payload: 0x7fd690015b80, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } }, data: MessageData { topic: "app/7819fd0e-7845-4203-b253-add7878ad704", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 102, 57, 101, 102, 99, 102, 99, 102, 45, 102, 101, 51, 98, 45, 52, 50, 56, 99, 45, 98, 54, 51, 49, 45, 57, 57, 97, 55, 54, 55, 102, 51, 56, 48, 50, 48, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 55, 56, 49, 57, 102, 100, 48, 101, 37, 50, 68, 55, 56, 52, 53, 37, 50, 68, 52, 50, 48, 51, 37, 50, 68, 98, 50, 53, 51, 37, 50, 68, 97, 100, 100, 55, 56, 55, 56, 97, 100, 55, 48, 52, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 106, 115, 111, 110, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 119, 97, 114, 109, 117, 112, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 51, 58, 53, 57, 58, 52, 50, 46, 52, 51, 48, 48, 52, 49, 55, 50, 56, 90, 34, 44, 34, 100, 97, 116, 97, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 52, 125, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 55, 56, 49, 57, 102, 100, 48, 101, 37, 50, 68, 55, 56, 52, 53, 37, 50, 68, 52, 50, 48, 51, 37, 50, 68, 98, 50, 53, 51, 37, 50, 68, 97, 100, 100, 55, 56, 55, 56, 97, 100, 55, 48, 52, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 55, 56, 49, 57, 102, 100, 48, 101, 45, 55, 56, 52, 53, 45, 52, 50, 48, 51, 45, 98, 50, 53, 51, 45, 97, 100, 100, 55, 56, 55, 56, 97, 100, 55, 48, 52, 34, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 125], props: Properties { cprops: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } } } }
[2021-09-16T13:59:42Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/7819fd0e-7845-4203-b253-add7878ad704", content_type: None, user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"f9efcfcf-fe3b-428c-b631-99a767f38020\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://7819fd0e%2D7845%2D4203%2Db253%2Dadd7878ad704/device1\",\"datacontenttype\":\"application/json\",\"subject\":\"warmup\",\"time\":\"2021-09-16T13:59:42.430041728Z\",\"data\":{\"index\":4},\"partitionkey\":\"7819fd0e%2D7845%2D4203%2Db253%2Dadd7878ad704/device1\",\"application\":\"7819fd0e-7845-4203-b253-add7878ad704\",\"device\":\"device1\",\"instance\":\"drogue\"}" }
[2021-09-16T13:59:43Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 4 attempts
[2021-09-16T13:59:43Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [
                    99,
                    116,
                    61,
                    54,
                    48,
                    48,
                    48,
                ],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    71,
                    86,
                    50,
                    97,
                    87,
                    78,
                    108,
                    77,
                    85,
                    65,
                    51,
                    79,
                    68,
                    69,
                    53,
                    90,
                    109,
                    81,
                    119,
                    90,
                    83,
                    48,
                    51,
                    79,
                    68,
                    81,
                    49,
                    76,
                    84,
                    81,
                    121,
                    77,
                    68,
                    77,
                    116,
                    89,
                    106,
                    73,
                    49,
                    77,
                    121,
                    49,
                    104,
                    90,
                    71,
                    81,
                    51,
                    79,
                    68,
                    99,
                    52,
                    89,
                    87,
                    81,
                    51,
                    77,
                    68,
                    81,
                    54,
                    90,
                    109,
                    57,
                    118,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
[2021-09-16T13:59:43Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 452, payload: 0x7fd690015da0, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } }, data: MessageData { topic: "app/7819fd0e-7845-4203-b253-add7878ad704", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 98, 53, 100, 50, 48, 56, 97, 55, 45, 52, 56, 101, 52, 45, 52, 99, 97, 98, 45, 97, 48, 55, 57, 45, 99, 98, 53, 53, 48, 48, 52, 98, 48, 52, 52, 53, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 55, 56, 49, 57, 102, 100, 48, 101, 37, 50, 68, 55, 56, 52, 53, 37, 50, 68, 52, 50, 48, 51, 37, 50, 68, 98, 50, 53, 51, 37, 50, 68, 97, 100, 100, 55, 56, 55, 56, 97, 100, 55, 48, 52, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 111, 99, 116, 101, 116, 45, 115, 116, 114, 101, 97, 109, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 116, 101, 108, 101, 109, 101, 116, 114, 121, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 51, 58, 53, 57, 58, 52, 51, 46, 53, 51, 48, 51, 53, 54, 53, 51, 56, 90, 34, 44, 34, 100, 97, 116, 97, 95, 98, 97, 115, 101, 54, 52, 34, 58, 34, 34, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 55, 56, 49, 57, 102, 100, 48, 101, 45, 55, 56, 52, 53, 45, 52, 50, 48, 51, 45, 98, 50, 53, 51, 45, 97, 100, 100, 55, 56, 55, 56, 97, 100, 55, 48, 52, 34, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 55, 56, 49, 57, 102, 100, 48, 101, 37, 50, 68, 55, 56, 52, 53, 37, 50, 68, 52, 50, 48, 51, 37, 50, 68, 98, 50, 53, 51, 37, 50, 68, 97, 100, 100, 55, 56, 55, 56, 97, 100, 55, 48, 52, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 125], props: Properties { cprops: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } } } }
[2021-09-16T13:59:43Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/7819fd0e-7845-4203-b253-add7878ad704", content_type: None, user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"b5d208a7-48e4-4cab-a079-cb55004b0445\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://7819fd0e%2D7845%2D4203%2Db253%2Dadd7878ad704/device1\",\"datacontenttype\":\"application/octet-stream\",\"subject\":\"telemetry\",\"time\":\"2021-09-16T13:59:43.530356538Z\",\"data_base64\":\"\",\"application\":\"7819fd0e-7845-4203-b253-add7878ad704\",\"partitionkey\":\"7819fd0e%2D7845%2D4203%2Db253%2Dadd7878ad704/device1\",\"device\":\"device1\",\"instance\":\"drogue\"}" }
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T14:00:19Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:00:19Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:00:20Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:00:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "7819fd0e-7845-4203-b253-add7878ad704" "device1"
[2021-09-16T14:00:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:00:20Z INFO  drogue_cloud_tests::resources::apps] Destroy application '7819fd0e-7845-4203-b253-add7878ad704'
[2021-09-16T14:00:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "7819fd0e-7845-4203-b253-add7878ad704"
[2021-09-16T14:00:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 7819fd0e-7845-4203-b253-add7878ad704 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::command::test_command::version_2

**Duration**: 54.200800227s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:00:23Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI2MjksImlhdCI6MTYzMTgwMDgyOSwianRpIjoiNzIwYTEzMGUtOGI5ZC00NWE1LWE0NTgtNjQzNzgwMTZlZmQzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYzcxMjU4YzAtMmE4YS00NmNkLTgxODYtMTk4OWZkNzk3Njk0Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImM3MTI1OGMwLTJhOGEtNDZjZC04MTg2LTE5ODlmZDc5NzY5NCJ9.3M5nJmzAgobOYSlN0Qi_AVy5mL-mNJAUzm3wGIQB95I
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI2MjksImlhdCI6MTYzMTgwMDgyOSwianRpIjoiNzIwYTEzMGUtOGI5ZC00NWE1LWE0NTgtNjQzNzgwMTZlZmQzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYzcxMjU4YzAtMmE4YS00NmNkLTgxODYtMTk4OWZkNzk3Njk0Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImM3MTI1OGMwLTJhOGEtNDZjZC04MTg2LTE5ODlmZDc5NzY5NCJ9.3M5nJmzAgobOYSlN0Qi_AVy5mL-mNJAUzm3wGIQB95I" "--context" "system-tests"
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDExMzAsImlhdCI6MTYzMTgwMDgzMCwiYXV0aF90aW1lIjoxNjMxODAwODI1LCJqdGkiOiJiNDExMmIwOS03MzE4LTRmYzktOTliNS0zOWYzOGJhNGExZTUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiJjM2QwYWI5Ni00NDhiLTQwZWItYWZjYi04OGU1NWM2MTA4OTgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYzcxMjU4YzAtMmE4YS00NmNkLTgxODYtMTk4OWZkNzk3Njk0IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwic2lkIjoiYzcxMjU4YzAtMmE4YS00NmNkLTgxODYtMTk4OWZkNzk3Njk0IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.liWWw5U99cSZWvFIF7C0G2ft9VwK56WceOQAm3lwhVJMNfcy6TsyaVeML5Va9fTJB4QkWn4bCxy9OM1E-6yGB-fiYH9mNuNAPRNEBCMzIrgC-R4rh1A8raeTjj9XljU_XfHqgxcT-FUc3iKpDSn8v23MtU6rE1gM_D334q91uM1AAOlA3qqwob5dnJHKcwlpYMsx2s36sFC01yQf_0BwfLHl2yo5mi1egxfkfe0lxSNT3EM1BhBjs5nCjAU5wl3HvxZh6OCmmcdfLEEl-DON_ddf0ugfS-IJ4O10wiFzfwU9JeGZEOQoD_NrRDPnx5EW3i-dHzny_0D_C2ZAaqIeiQ\n", stderr: "" })
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::resources::apps] Create application: 313086c9-2ef8-4e23-b91c-012a6ade050d
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "313086c9-2ef8-4e23-b91c-012a6ade050d"
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 313086c9-2ef8-4e23-b91c-012a6ade050d created.\n", stderr: "" })
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "313086c9-2ef8-4e23-b91c-012a6ade050d"
[2021-09-16T14:00:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:00:30.752671Z\",\n    \"generation\": 0,\n    \"name\": \"313086c9-2ef8-4e23-b91c-012a6ade050d\",\n    \"resourceVersion\": \"f5c3d61b-54f7-4272-bd11-31726f6b8bcc\",\n    \"uid\": \"3c993e67-b4e1-4f3d-9e2e-74a43c0bb695\"\n  }\n}", stderr: "" })
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "313086c9-2ef8-4e23-b91c-012a6ade050d"
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:00:30.752671Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"313086c9-2ef8-4e23-b91c-012a6ade050d\",\n    \"resourceVersion\": \"ede6c82f-5c2b-4371-ad35-78ba2fe45700\",\n    \"uid\": \"3c993e67-b4e1-4f3d-9e2e-74a43c0bb695\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:00:31.369390031Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:00:31.369436118Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:00:30.820072899Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:00:30.834111668Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:00:31.023992376Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:00:31.039841934Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:00:31.369351681Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:00:31.369354025Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"iwhIrZGVmGhk\",\n        \"username\": \"user-313086c9-2ef8-4e23-b91c-012a6ade050d\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "313086c9-2ef8-4e23-b91c-012a6ade050d"
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:00:30.752671Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"313086c9-2ef8-4e23-b91c-012a6ade050d\",\n    \"resourceVersion\": \"ede6c82f-5c2b-4371-ad35-78ba2fe45700\",\n    \"uid\": \"3c993e67-b4e1-4f3d-9e2e-74a43c0bb695\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:00:31.369390031Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:00:31.369436118Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:00:30.820072899Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:00:30.834111668Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:00:31.023992376Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:00:31.039841934Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:00:31.369351681Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:00:31.369354025Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"iwhIrZGVmGhk\",\n        \"username\": \"user-313086c9-2ef8-4e23-b91c-012a6ade050d\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "313086c9-2ef8-4e23-b91c-012a6ade050d" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::tests::coap::command] Sending payload
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::tests::coap::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDExMzAsImlhdCI6MTYzMTgwMDgzMCwiYXV0aF90aW1lIjoxNjMxODAwODI1LCJqdGkiOiJiNDExMmIwOS03MzE4LTRmYzktOTliNS0zOWYzOGJhNGExZTUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiJjM2QwYWI5Ni00NDhiLTQwZWItYWZjYi04OGU1NWM2MTA4OTgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYzcxMjU4YzAtMmE4YS00NmNkLTgxODYtMTk4OWZkNzk3Njk0IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwic2lkIjoiYzcxMjU4YzAtMmE4YS00NmNkLTgxODYtMTk4OWZkNzk3Njk0IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.liWWw5U99cSZWvFIF7C0G2ft9VwK56WceOQAm3lwhVJMNfcy6TsyaVeML5Va9fTJB4QkWn4bCxy9OM1E-6yGB-fiYH9mNuNAPRNEBCMzIrgC-R4rh1A8raeTjj9XljU_XfHqgxcT-FUc3iKpDSn8v23MtU6rE1gM_D334q91uM1AAOlA3qqwob5dnJHKcwlpYMsx2s36sFC01yQf_0BwfLHl2yo5mi1egxfkfe0lxSNT3EM1BhBjs5nCjAU5wl3HvxZh6OCmmcdfLEEl-DON_ddf0ugfS-IJ4O10wiFzfwU9JeGZEOQoD_NrRDPnx5EW3i-dHzny_0D_C2ZAaqIeiQ\n", stderr: "" })
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:00:31Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:00:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:00:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:00:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:00:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:00:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:00:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:00:35Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 443, payload: 0x7fd698016c50, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 2, max_count: 10, length: 48, array: 0x7fd698016e20 } }, data: MessageData { topic: "app/313086c9-2ef8-4e23-b91c-012a6ade050d", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 54, 100, 48, 48, 49, 48, 56, 51, 45, 98, 52, 54, 54, 45, 52, 49, 98, 56, 45, 98, 101, 100, 53, 45, 99, 102, 49, 101, 49, 99, 100, 49, 97, 51, 98, 50, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 51, 49, 51, 48, 56, 54, 99, 57, 37, 50, 68, 50, 101, 102, 56, 37, 50, 68, 52, 101, 50, 51, 37, 50, 68, 98, 57, 49, 99, 37, 50, 68, 48, 49, 50, 97, 54, 97, 100, 101, 48, 53, 48, 100, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 106, 115, 111, 110, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 119, 97, 114, 109, 117, 112, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 52, 58, 48, 48, 58, 51, 53, 46, 52, 49, 53, 54, 53, 56, 55, 49, 49, 90, 34, 44, 34, 100, 97, 116, 97, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 51, 125, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 51, 49, 51, 48, 56, 54, 99, 57, 37, 50, 68, 50, 101, 102, 56, 37, 50, 68, 52, 101, 50, 51, 37, 50, 68, 98, 57, 49, 99, 37, 50, 68, 48, 49, 50, 97, 54, 97, 100, 101, 48, 53, 48, 100, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 51, 49, 51, 48, 56, 54, 99, 57, 45, 50, 101, 102, 56, 45, 52, 101, 50, 51, 45, 98, 57, 49, 99, 45, 48, 49, 50, 97, 54, 97, 100, 101, 48, 53, 48, 100, 34, 125], props: Properties { cprops: MQTTProperties { count: 2, max_count: 10, length: 48, array: 0x7fd698016e20 } } } }
[2021-09-16T14:00:35Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/313086c9-2ef8-4e23-b91c-012a6ade050d", content_type: Some("application/cloudevents+json; charset=utf-8"), user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"6d001083-b466-41b8-bed5-cf1e1cd1a3b2\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://313086c9%2D2ef8%2D4e23%2Db91c%2D012a6ade050d/device1\",\"datacontenttype\":\"application/json\",\"subject\":\"warmup\",\"time\":\"2021-09-16T14:00:35.415658711Z\",\"data\":{\"index\":3},\"partitionkey\":\"313086c9%2D2ef8%2D4e23%2Db91c%2D012a6ade050d/device1\",\"instance\":\"drogue\",\"device\":\"device1\",\"application\":\"313086c9-2ef8-4e23-b91c-012a6ade050d\"}" }
[2021-09-16T14:00:36Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 3 attempts
[2021-09-16T14:00:36Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [
                    99,
                    116,
                    61,
                    54,
                    48,
                    48,
                    48,
                ],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    71,
                    86,
                    50,
                    97,
                    87,
                    78,
                    108,
                    77,
                    85,
                    65,
                    122,
                    77,
                    84,
                    77,
                    119,
                    79,
                    68,
                    90,
                    106,
                    79,
                    83,
                    48,
                    121,
                    90,
                    87,
                    89,
                    52,
                    76,
                    84,
                    82,
                    108,
                    77,
                    106,
                    77,
                    116,
                    89,
                    106,
                    107,
                    120,
                    89,
                    121,
                    48,
                    119,
                    77,
                    84,
                    74,
                    104,
                    78,
                    109,
                    70,
                    107,
                    90,
                    84,
                    65,
                    49,
                    77,
                    71,
                    81,
                    54,
                    90,
                    109,
                    57,
                    118,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T14:01:13Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:01:13Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:01:14Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:01:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "313086c9-2ef8-4e23-b91c-012a6ade050d" "device1"
[2021-09-16T14:01:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:01:14Z INFO  drogue_cloud_tests::resources::apps] Destroy application '313086c9-2ef8-4e23-b91c-012a6ade050d'
[2021-09-16T14:01:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "313086c9-2ef8-4e23-b91c-012a6ade050d"
[2021-09-16T14:01:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 313086c9-2ef8-4e23-b91c-012a6ade050d deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::command::test_command::version_3

**Duration**: 54.734304522s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:01:17Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI2ODQsImlhdCI6MTYzMTgwMDg4NCwianRpIjoiOTcyOTU5YzUtZGZkYy00ZmJmLWFlY2UtODVmNDBjNTRhNzk0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNGRmZTg2NjQtNWZlMy00YmMxLTkxNjItMmEzMjg0NGNkZDA3Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjRkZmU4NjY0LTVmZTMtNGJjMS05MTYyLTJhMzI4NDRjZGQwNyJ9.LPuqmuB7vlQrtttJRLolM8L5qQwyJXep7bCiRiX9-OE
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI2ODQsImlhdCI6MTYzMTgwMDg4NCwianRpIjoiOTcyOTU5YzUtZGZkYy00ZmJmLWFlY2UtODVmNDBjNTRhNzk0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNGRmZTg2NjQtNWZlMy00YmMxLTkxNjItMmEzMjg0NGNkZDA3Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjRkZmU4NjY0LTVmZTMtNGJjMS05MTYyLTJhMzI4NDRjZGQwNyJ9.LPuqmuB7vlQrtttJRLolM8L5qQwyJXep7bCiRiX9-OE" "--context" "system-tests"
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDExODUsImlhdCI6MTYzMTgwMDg4NSwiYXV0aF90aW1lIjoxNjMxODAwODgwLCJqdGkiOiIxZjJmNDcyMy1iMzY3LTRjMDMtOGY3MC1jMzg2ODU1Y2EwZjkiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiJjM2QwYWI5Ni00NDhiLTQwZWItYWZjYi04OGU1NWM2MTA4OTgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNGRmZTg2NjQtNWZlMy00YmMxLTkxNjItMmEzMjg0NGNkZDA3IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwic2lkIjoiNGRmZTg2NjQtNWZlMy00YmMxLTkxNjItMmEzMjg0NGNkZDA3IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.kOq9BsRxysBg4EqFUjjEF503W3w6og2MkgB7KP1Wj_UzCHQd72NICAGTfMnFHKFAa_m7OJtCzRfMW1qyPivfQBvDfcUv2n0hcSXHzfIzoCE5pzJ7DoJA5CEnFROcO11fuGhzCzFBrO3mt-mW78Jqc_sUDFsNVf2QvjplbO7sqNXl18xeCHs9YAZXBu499iRH4CYxQ-rJ1Cbgy6cOslSZLLZ4smK-6yLib4d3RPMjCIns2Z7ZXYq7aAd8Hac5jgeZSnX6o9GopEWXqHjSOSPSv1poDukEw0g_b8aODWn3Q_LUox1mwkmceWum9UacAmm3x0CDPyXPcfgl68SA5xptLA\n", stderr: "" })
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::resources::apps] Create application: 0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13"
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13 created.\n", stderr: "" })
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13"
[2021-09-16T14:01:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:01:25.827491Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13\",\n    \"resourceVersion\": \"5504296b-3eeb-4122-a606-9f5faafd438d\",\n    \"uid\": \"ace998fe-6309-4e12-b25f-1516a615c817\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:01:25.869477600Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:01:25.869498699Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:25.869435973Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:25.869438267Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:25.869439049Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:25.869440350Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:25.869442043Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:25.869444848Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:01:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13"
[2021-09-16T14:01:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:01:25.827491Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13\",\n    \"resourceVersion\": \"7f7eb728-a604-4c64-8f90-226bfac2cad9\",\n    \"uid\": \"ace998fe-6309-4e12-b25f-1516a615c817\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:01:26.312802732Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:01:26.312843779Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:25.909850742Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:25.936263178Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:26.094729157Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:26.123731558Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:26.312767486Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:26.312769370Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"T7WDuBtFexOX\",\n        \"username\": \"user-0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:01:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13"
[2021-09-16T14:01:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:01:25.827491Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13\",\n    \"resourceVersion\": \"7f7eb728-a604-4c64-8f90-226bfac2cad9\",\n    \"uid\": \"ace998fe-6309-4e12-b25f-1516a615c817\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:01:26.312802732Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:01:26.312843779Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:25.909850742Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:25.936263178Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:26.094729157Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:26.123731558Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:26.312767486Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:01:26.312769370Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"T7WDuBtFexOX\",\n        \"username\": \"user-0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:01:26Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:01:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-09-16T14:01:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:01:26Z INFO  drogue_cloud_tests::tests::coap::command] Sending payload
[2021-09-16T14:01:26Z INFO  drogue_cloud_tests::tests::coap::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:01:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:01:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDExODUsImlhdCI6MTYzMTgwMDg4NSwiYXV0aF90aW1lIjoxNjMxODAwODgwLCJqdGkiOiIxZjJmNDcyMy1iMzY3LTRjMDMtOGY3MC1jMzg2ODU1Y2EwZjkiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiJjM2QwYWI5Ni00NDhiLTQwZWItYWZjYi04OGU1NWM2MTA4OTgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNGRmZTg2NjQtNWZlMy00YmMxLTkxNjItMmEzMjg0NGNkZDA3IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwic2lkIjoiNGRmZTg2NjQtNWZlMy00YmMxLTkxNjItMmEzMjg0NGNkZDA3IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.kOq9BsRxysBg4EqFUjjEF503W3w6og2MkgB7KP1Wj_UzCHQd72NICAGTfMnFHKFAa_m7OJtCzRfMW1qyPivfQBvDfcUv2n0hcSXHzfIzoCE5pzJ7DoJA5CEnFROcO11fuGhzCzFBrO3mt-mW78Jqc_sUDFsNVf2QvjplbO7sqNXl18xeCHs9YAZXBu499iRH4CYxQ-rJ1Cbgy6cOslSZLLZ4smK-6yLib4d3RPMjCIns2Z7ZXYq7aAd8Hac5jgeZSnX6o9GopEWXqHjSOSPSv1poDukEw0g_b8aODWn3Q_LUox1mwkmceWum9UacAmm3x0CDPyXPcfgl68SA5xptLA\n", stderr: "" })
[2021-09-16T14:01:27Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:01:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:01:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:01:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:01:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:01:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:01:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:01:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:01:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:01:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:01:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:01:31Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 11, payload: 0x7fd690015240, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 11, max_count: 20, length: 400, array: 0x55d7310dafb0 } }, data: MessageData { topic: "app/0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13", payload: [123, 34, 105, 110, 100, 101, 120, 34, 58, 52, 125], props: Properties { cprops: MQTTProperties { count: 11, max_count: 20, length: 400, array: 0x55d7310dafb0 } } } }
[2021-09-16T14:01:31Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13", content_type: Some("application/json"), user_properties: {"instance": "drogue", "type": "io.drogue.event.v1", "source": "drogue://0c8be5f8%2D3ffe%2D4d84%2D9f2d%2D460a7a35cd13/device1", "id": "fa92ed3f-a1e8-423a-8f20-08e7056aa09b", "time": "2021-09-16T14:01:31.483452545+00:00", "subject": "warmup", "partitionkey": "0c8be5f8%2D3ffe%2D4d84%2D9f2d%2D460a7a35cd13/device1", "specversion": "1.0", "application": "0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13", "device": "device1"}, payload: "{\"index\":4}" }
[2021-09-16T14:01:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 4 attempts
[2021-09-16T14:01:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [
                    99,
                    116,
                    61,
                    54,
                    48,
                    48,
                    48,
                ],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    71,
                    86,
                    50,
                    97,
                    87,
                    78,
                    108,
                    77,
                    85,
                    65,
                    119,
                    89,
                    122,
                    104,
                    105,
                    90,
                    84,
                    86,
                    109,
                    79,
                    67,
                    48,
                    122,
                    90,
                    109,
                    90,
                    108,
                    76,
                    84,
                    82,
                    107,
                    79,
                    68,
                    81,
                    116,
                    79,
                    87,
                    89,
                    121,
                    90,
                    67,
                    48,
                    48,
                    78,
                    106,
                    66,
                    104,
                    78,
                    50,
                    69,
                    122,
                    78,
                    87,
                    78,
                    107,
                    77,
                    84,
                    77,
                    54,
                    90,
                    109,
                    57,
                    118,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T14:02:08Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:02:08Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:02:08Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:02:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13" "device1"
[2021-09-16T14:02:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:02:08Z INFO  drogue_cloud_tests::resources::apps] Destroy application '0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13'
[2021-09-16T14:02:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13"
[2021-09-16T14:02:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 0c8be5f8-3ffe-4d84-9f2d-460a7a35cd13 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_pass::version_1

**Duration**: 54.861718266s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:02:09Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T14:02:12Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI3MzksImlhdCI6MTYzMTgwMDkzOSwianRpIjoiZjVlOGFmMjgtZjA3NS00NjUzLWJhNDYtNmYzYTk1MTVmOTJmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYzY0MTk3NDAtNTc1Mi00OTg3LWIzOTMtN2FlZjMwMTU5MjFhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImM2NDE5NzQwLTU3NTItNDk4Ny1iMzkzLTdhZWYzMDE1OTIxYSJ9.9fCILP5_brOO6kM6YB54p5Cv7pABOKvtNtIYX0rFstI
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI3MzksImlhdCI6MTYzMTgwMDkzOSwianRpIjoiZjVlOGFmMjgtZjA3NS00NjUzLWJhNDYtNmYzYTk1MTVmOTJmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYzY0MTk3NDAtNTc1Mi00OTg3LWIzOTMtN2FlZjMwMTU5MjFhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImM2NDE5NzQwLTU3NTItNDk4Ny1iMzkzLTdhZWYzMDE1OTIxYSJ9.9fCILP5_brOO6kM6YB54p5Cv7pABOKvtNtIYX0rFstI" "--context" "system-tests"
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDEyNDAsImlhdCI6MTYzMTgwMDk0MCwiYXV0aF90aW1lIjoxNjMxODAwOTM1LCJqdGkiOiJmZTE5OWMxNi1iMTY2LTRhMDItYTUwNS1kOGM3NWZjMDMxMDkiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiJjM2QwYWI5Ni00NDhiLTQwZWItYWZjYi04OGU1NWM2MTA4OTgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYzY0MTk3NDAtNTc1Mi00OTg3LWIzOTMtN2FlZjMwMTU5MjFhIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwic2lkIjoiYzY0MTk3NDAtNTc1Mi00OTg3LWIzOTMtN2FlZjMwMTU5MjFhIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.BnaiLxe_BWUVoNEbII4puEowQEFy6rhCo3GQFxjhwO981y1VQ5k23gxN_lgHobdPBMZsuYspBo-u5-ve7yz2WxiiBE8If0mhF6SdXFB1LmnBMdix4J13sG14ZF3TXl9g6DP4cNz-06iyQTNdf681ROIXS4L88dpNzYSeY63ukvoF8x4k2zp5lneYcu5IVL1G28vDuID0oWDO9IidO_LvFI82k5oKLsXzohqSyQNXqmM3hEJsgtdFsypMPFdxsaH2y1TLFTCmDI3t-IPDJbiHQQD8wXBC3TOLALIyqNpew6pnGnmpfYdmTGvzQFhTosXbLUQNHW4pAEojWO8eY2XSlQ\n", stderr: "" })
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::resources::apps] Create application: d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc"
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc created.\n", stderr: "" })
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc"
[2021-09-16T14:02:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:02:20.605933Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc\",\n    \"resourceVersion\": \"bdea49fe-3d73-45e0-a726-927d839e653c\",\n    \"uid\": \"9736991a-964e-49c6-b618-d3c89f2c3620\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:02:20.638788254Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:02:20.638773266Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.638745975Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.638747107Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.638747748Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.638748559Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.638749201Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.638750934Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc"
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:02:20.605933Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc\",\n    \"resourceVersion\": \"12962f40-a3c8-46b4-b658-caf619ed3769\",\n    \"uid\": \"9736991a-964e-49c6-b618-d3c89f2c3620\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:02:21.104037964Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:02:21.104013037Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.670976042Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.676446757Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.837153051Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.862678618Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:21.103993742Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:21.103995335Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"G1M97F9hPIsA\",\n        \"username\": \"user-d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc"
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:02:20.605933Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc\",\n    \"resourceVersion\": \"12962f40-a3c8-46b4-b658-caf619ed3769\",\n    \"uid\": \"9736991a-964e-49c6-b618-d3c89f2c3620\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:02:21.104037964Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:02:21.104013037Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.670976042Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.676446757Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.837153051Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:20.862678618Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:21.103993742Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:02:21.103995335Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"G1M97F9hPIsA\",\n        \"username\": \"user-d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDEyNDAsImlhdCI6MTYzMTgwMDk0MCwiYXV0aF90aW1lIjoxNjMxODAwOTM1LCJqdGkiOiJmZTE5OWMxNi1iMTY2LTRhMDItYTUwNS1kOGM3NWZjMDMxMDkiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiJjM2QwYWI5Ni00NDhiLTQwZWItYWZjYi04OGU1NWM2MTA4OTgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYzY0MTk3NDAtNTc1Mi00OTg3LWIzOTMtN2FlZjMwMTU5MjFhIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwic2lkIjoiYzY0MTk3NDAtNTc1Mi00OTg3LWIzOTMtN2FlZjMwMTU5MjFhIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.BnaiLxe_BWUVoNEbII4puEowQEFy6rhCo3GQFxjhwO981y1VQ5k23gxN_lgHobdPBMZsuYspBo-u5-ve7yz2WxiiBE8If0mhF6SdXFB1LmnBMdix4J13sG14ZF3TXl9g6DP4cNz-06iyQTNdf681ROIXS4L88dpNzYSeY63ukvoF8x4k2zp5lneYcu5IVL1G28vDuID0oWDO9IidO_LvFI82k5oKLsXzohqSyQNXqmM3hEJsgtdFsypMPFdxsaH2y1TLFTCmDI3t-IPDJbiHQQD8wXBC3TOLALIyqNpew6pnGnmpfYdmTGvzQFhTosXbLUQNHW4pAEojWO8eY2XSlQ\n", stderr: "" })
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:02:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:02:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:02:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:02:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:02:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:02:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:02:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:02:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:02:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:02:26Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 443, payload: 0x7fd68c015b80, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } }, data: MessageData { topic: "app/d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 53, 57, 57, 100, 52, 98, 99, 49, 45, 101, 50, 57, 102, 45, 52, 49, 52, 98, 45, 57, 51, 99, 50, 45, 48, 56, 98, 52, 49, 52, 52, 53, 50, 97, 53, 55, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 100, 50, 56, 98, 98, 102, 50, 56, 37, 50, 68, 101, 52, 51, 56, 37, 50, 68, 52, 52, 55, 50, 37, 50, 68, 98, 49, 99, 99, 37, 50, 68, 99, 53, 98, 97, 48, 99, 55, 97, 97, 51, 98, 99, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 106, 115, 111, 110, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 119, 97, 114, 109, 117, 112, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 52, 58, 48, 50, 58, 50, 54, 46, 53, 48, 55, 55, 53, 53, 53, 56, 48, 90, 34, 44, 34, 100, 97, 116, 97, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 52, 125, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 100, 50, 56, 98, 98, 102, 50, 56, 45, 101, 52, 51, 56, 45, 52, 52, 55, 50, 45, 98, 49, 99, 99, 45, 99, 53, 98, 97, 48, 99, 55, 97, 97, 51, 98, 99, 34, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 100, 50, 56, 98, 98, 102, 50, 56, 37, 50, 68, 101, 52, 51, 56, 37, 50, 68, 52, 52, 55, 50, 37, 50, 68, 98, 49, 99, 99, 37, 50, 68, 99, 53, 98, 97, 48, 99, 55, 97, 97, 51, 98, 99, 47, 100, 101, 118, 105, 99, 101, 49, 34, 125], props: Properties { cprops: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } } } }
[2021-09-16T14:02:26Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc", content_type: None, user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"599d4bc1-e29f-414b-93c2-08b414452a57\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://d28bbf28%2De438%2D4472%2Db1cc%2Dc5ba0c7aa3bc/device1\",\"datacontenttype\":\"application/json\",\"subject\":\"warmup\",\"time\":\"2021-09-16T14:02:26.507755580Z\",\"data\":{\"index\":4},\"device\":\"device1\",\"application\":\"d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc\",\"instance\":\"drogue\",\"partitionkey\":\"d28bbf28%2De438%2D4472%2Db1cc%2Dc5ba0c7aa3bc/device1\"}" }
[2021-09-16T14:02:27Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 4 attempts
[2021-09-16T14:02:27Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
[2021-09-16T14:02:27Z INFO  drogue_cloud_tests::tests::coap] Sending payload
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    71,
                    86,
                    50,
                    97,
                    87,
                    78,
                    108,
                    77,
                    85,
                    66,
                    107,
                    77,
                    106,
                    104,
                    105,
                    89,
                    109,
                    89,
                    121,
                    79,
                    67,
                    49,
                    108,
                    78,
                    68,
                    77,
                    52,
                    76,
                    84,
                    81,
                    48,
                    78,
                    122,
                    73,
                    116,
                    89,
                    106,
                    70,
                    106,
                    89,
                    121,
                    49,
                    106,
                    78,
                    87,
                    74,
                    104,
                    77,
                    71,
                    77,
                    51,
                    89,
                    87,
                    69,
                    122,
                    89,
                    109,
                    77,
                    54,
                    90,
                    109,
                    57,
                    118,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T14:03:03Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:03:03Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:03:03Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:03:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc" "device1"
[2021-09-16T14:03:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:03:03Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'd28bbf28-e438-4472-b1cc-c5ba0c7aa3bc'
[2021-09-16T14:03:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc"
[2021-09-16T14:03:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App d28bbf28-e438-4472-b1cc-c5ba0c7aa3bc deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_pass::version_2

**Duration**: 53.979968396s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:03:04Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T14:03:06Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI3OTMsImlhdCI6MTYzMTgwMDk5MywianRpIjoiYjgyNzM5ZjktZGM5My00NDc1LWFmYTQtNmI3YTlhNDYyODg3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzZkNTdjMmUtYmZiZC00ZGYwLWFhYjAtYTgyNzIwNWIyYTQwIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc2ZDU3YzJlLWJmYmQtNGRmMC1hYWIwLWE4MjcyMDViMmE0MCJ9.9f1nJYcygK0MNr-8xTia-YBVd7AWrJmA2Ytq3pmKu-c
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI3OTMsImlhdCI6MTYzMTgwMDk5MywianRpIjoiYjgyNzM5ZjktZGM5My00NDc1LWFmYTQtNmI3YTlhNDYyODg3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzZkNTdjMmUtYmZiZC00ZGYwLWFhYjAtYTgyNzIwNWIyYTQwIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc2ZDU3YzJlLWJmYmQtNGRmMC1hYWIwLWE4MjcyMDViMmE0MCJ9.9f1nJYcygK0MNr-8xTia-YBVd7AWrJmA2Ytq3pmKu-c" "--context" "system-tests"
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDEyOTQsImlhdCI6MTYzMTgwMDk5NCwiYXV0aF90aW1lIjoxNjMxODAwOTg5LCJqdGkiOiI4ZDMyMDU3Ni00YjlmLTQzYmMtYjE5YS01Y2IwZDBmN2U1OTgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc2ZDU3YzJlLWJmYmQtNGRmMC1hYWIwLWE4MjcyMDViMmE0MCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3NmQ1N2MyZS1iZmJkLTRkZjAtYWFiMC1hODI3MjA1YjJhNDAiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.YIprdHEmoOZqmGECuoczdGHMvY24V2lEXo-OWJcJfjFRDPKfu7byRSPyfY_0DeobuIQzB9NTv9YLmXgQGitD6eaVDA1MxWiFhM6tZ-3WRlcqDrtgSTFaJSfelMnVs_zuUlMqt09eoP7UH7Y04R8t_uSgI-j1w07sg3ModbOrjuO1DuDZsWm7AK0leAabyBjyjE9xeTrcKBWB5DCxst9Kns7EBGCwdgGeMXF8tamIr0tnJoy3iN2avPsjxXJ0ah3c_LHm_P-ciwe_jkEpZBD15sIPl10UZ7zmsBKZvFEojNtckxJ4C8dJ3vCIqOYs-cxan0MhOdDdYT1z6ygJZleykg\n", stderr: "" })
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::resources::apps] Create application: b3f2c507-1726-41d6-9acd-2d3ca8b6ff72
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "b3f2c507-1726-41d6-9acd-2d3ca8b6ff72"
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b3f2c507-1726-41d6-9acd-2d3ca8b6ff72 created.\n", stderr: "" })
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b3f2c507-1726-41d6-9acd-2d3ca8b6ff72"
[2021-09-16T14:03:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:03:14.494399Z\",\n    \"generation\": 0,\n    \"name\": \"b3f2c507-1726-41d6-9acd-2d3ca8b6ff72\",\n    \"resourceVersion\": \"d76bd980-9c5b-42d0-b747-dd8bd2f6c486\",\n    \"uid\": \"482c7620-03aa-4477-810b-3d142027e656\"\n  }\n}", stderr: "" })
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b3f2c507-1726-41d6-9acd-2d3ca8b6ff72"
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:03:14.494399Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"b3f2c507-1726-41d6-9acd-2d3ca8b6ff72\",\n    \"resourceVersion\": \"f39d9a9d-908f-481d-bf5a-6c753a3fd4d1\",\n    \"uid\": \"482c7620-03aa-4477-810b-3d142027e656\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:03:14.911089334Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:03:14.911122065Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:03:14.559019355Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:03:14.566205485Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:03:14.715918735Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:03:14.728534376Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:03:14.911061231Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:03:14.911063336Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"ztoRCDzpAxRF\",\n        \"username\": \"user-b3f2c507-1726-41d6-9acd-2d3ca8b6ff72\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b3f2c507-1726-41d6-9acd-2d3ca8b6ff72"
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:03:14.494399Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"b3f2c507-1726-41d6-9acd-2d3ca8b6ff72\",\n    \"resourceVersion\": \"f39d9a9d-908f-481d-bf5a-6c753a3fd4d1\",\n    \"uid\": \"482c7620-03aa-4477-810b-3d142027e656\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:03:14.911089334Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:03:14.911122065Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:03:14.559019355Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:03:14.566205485Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:03:14.715918735Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:03:14.728534376Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:03:14.911061231Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:03:14.911063336Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"ztoRCDzpAxRF\",\n        \"username\": \"user-b3f2c507-1726-41d6-9acd-2d3ca8b6ff72\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "b3f2c507-1726-41d6-9acd-2d3ca8b6ff72" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDEyOTQsImlhdCI6MTYzMTgwMDk5NCwiYXV0aF90aW1lIjoxNjMxODAwOTg5LCJqdGkiOiI4ZDMyMDU3Ni00YjlmLTQzYmMtYjE5YS01Y2IwZDBmN2U1OTgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc2ZDU3YzJlLWJmYmQtNGRmMC1hYWIwLWE4MjcyMDViMmE0MCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3NmQ1N2MyZS1iZmJkLTRkZjAtYWFiMC1hODI3MjA1YjJhNDAiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.YIprdHEmoOZqmGECuoczdGHMvY24V2lEXo-OWJcJfjFRDPKfu7byRSPyfY_0DeobuIQzB9NTv9YLmXgQGitD6eaVDA1MxWiFhM6tZ-3WRlcqDrtgSTFaJSfelMnVs_zuUlMqt09eoP7UH7Y04R8t_uSgI-j1w07sg3ModbOrjuO1DuDZsWm7AK0leAabyBjyjE9xeTrcKBWB5DCxst9Kns7EBGCwdgGeMXF8tamIr0tnJoy3iN2avPsjxXJ0ah3c_LHm_P-ciwe_jkEpZBD15sIPl10UZ7zmsBKZvFEojNtckxJ4C8dJ3vCIqOYs-cxan0MhOdDdYT1z6ygJZleykg\n", stderr: "" })
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:03:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:03:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:03:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:03:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:03:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:03:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:03:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:03:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:03:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:03:20Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 443, payload: 0x7fd690010610, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 2, max_count: 10, length: 48, array: 0x7fd6900107e0 } }, data: MessageData { topic: "app/b3f2c507-1726-41d6-9acd-2d3ca8b6ff72", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 57, 100, 53, 100, 97, 53, 50, 52, 45, 99, 53, 101, 56, 45, 52, 102, 55, 102, 45, 97, 57, 101, 53, 45, 100, 97, 99, 50, 98, 100, 49, 99, 57, 51, 55, 48, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 98, 51, 102, 50, 99, 53, 48, 55, 37, 50, 68, 49, 55, 50, 54, 37, 50, 68, 52, 49, 100, 54, 37, 50, 68, 57, 97, 99, 100, 37, 50, 68, 50, 100, 51, 99, 97, 56, 98, 54, 102, 102, 55, 50, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 106, 115, 111, 110, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 119, 97, 114, 109, 117, 112, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 52, 58, 48, 51, 58, 50, 48, 46, 53, 49, 56, 48, 50, 51, 53, 48, 48, 90, 34, 44, 34, 100, 97, 116, 97, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 52, 125, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 98, 51, 102, 50, 99, 53, 48, 55, 37, 50, 68, 49, 55, 50, 54, 37, 50, 68, 52, 49, 100, 54, 37, 50, 68, 57, 97, 99, 100, 37, 50, 68, 50, 100, 51, 99, 97, 56, 98, 54, 102, 102, 55, 50, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 98, 51, 102, 50, 99, 53, 48, 55, 45, 49, 55, 50, 54, 45, 52, 49, 100, 54, 45, 57, 97, 99, 100, 45, 50, 100, 51, 99, 97, 56, 98, 54, 102, 102, 55, 50, 34, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 125], props: Properties { cprops: MQTTProperties { count: 2, max_count: 10, length: 48, array: 0x7fd6900107e0 } } } }
[2021-09-16T14:03:20Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/b3f2c507-1726-41d6-9acd-2d3ca8b6ff72", content_type: Some("application/cloudevents+json; charset=utf-8"), user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"9d5da524-c5e8-4f7f-a9e5-dac2bd1c9370\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://b3f2c507%2D1726%2D41d6%2D9acd%2D2d3ca8b6ff72/device1\",\"datacontenttype\":\"application/json\",\"subject\":\"warmup\",\"time\":\"2021-09-16T14:03:20.518023500Z\",\"data\":{\"index\":4},\"instance\":\"drogue\",\"partitionkey\":\"b3f2c507%2D1726%2D41d6%2D9acd%2D2d3ca8b6ff72/device1\",\"application\":\"b3f2c507-1726-41d6-9acd-2d3ca8b6ff72\",\"device\":\"device1\"}" }
[2021-09-16T14:03:21Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 4 attempts
[2021-09-16T14:03:21Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
[2021-09-16T14:03:21Z INFO  drogue_cloud_tests::tests::coap] Sending payload
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    71,
                    86,
                    50,
                    97,
                    87,
                    78,
                    108,
                    77,
                    85,
                    66,
                    105,
                    77,
                    50,
                    89,
                    121,
                    89,
                    122,
                    85,
                    119,
                    78,
                    121,
                    48,
                    120,
                    78,
                    122,
                    73,
                    50,
                    76,
                    84,
                    81,
                    120,
                    90,
                    68,
                    89,
                    116,
                    79,
                    87,
                    70,
                    106,
                    90,
                    67,
                    48,
                    121,
                    90,
                    68,
                    78,
                    106,
                    89,
                    84,
                    104,
                    105,
                    78,
                    109,
                    90,
                    109,
                    78,
                    122,
                    73,
                    54,
                    90,
                    109,
                    57,
                    118,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T14:03:57Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:03:57Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:03:57Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:03:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "b3f2c507-1726-41d6-9acd-2d3ca8b6ff72" "device1"
[2021-09-16T14:03:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:03:57Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'b3f2c507-1726-41d6-9acd-2d3ca8b6ff72'
[2021-09-16T14:03:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "b3f2c507-1726-41d6-9acd-2d3ca8b6ff72"
[2021-09-16T14:03:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b3f2c507-1726-41d6-9acd-2d3ca8b6ff72 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_pass::version_3

**Duration**: 54.630704241s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:03:58Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T14:04:00Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI4NDgsImlhdCI6MTYzMTgwMTA0OCwianRpIjoiM2RjNDQyMjYtNTBlZC00NDBjLTg5MmUtNTA5NmE5YjhmZTVlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNTllZTZiOTQtNmVlZS00ZjNjLWEwNGYtNWIzYWI2YjMyYjkxIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjU5ZWU2Yjk0LTZlZWUtNGYzYy1hMDRmLTViM2FiNmIzMmI5MSJ9.2y4l4IMJOO7VLP4Gr4qrEc2lhwSeY1eQo19vEV-ipaU
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI4NDgsImlhdCI6MTYzMTgwMTA0OCwianRpIjoiM2RjNDQyMjYtNTBlZC00NDBjLTg5MmUtNTA5NmE5YjhmZTVlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNTllZTZiOTQtNmVlZS00ZjNjLWEwNGYtNWIzYWI2YjMyYjkxIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjU5ZWU2Yjk0LTZlZWUtNGYzYy1hMDRmLTViM2FiNmIzMmI5MSJ9.2y4l4IMJOO7VLP4Gr4qrEc2lhwSeY1eQo19vEV-ipaU" "--context" "system-tests"
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDEzNDksImlhdCI6MTYzMTgwMTA0OSwiYXV0aF90aW1lIjoxNjMxODAxMDQ0LCJqdGkiOiI5NDZlNGQxZC1lN2MwLTQwYmYtODkwOS0wMDkyYmQyNjZmZWMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjU5ZWU2Yjk0LTZlZWUtNGYzYy1hMDRmLTViM2FiNmIzMmI5MSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI1OWVlNmI5NC02ZWVlLTRmM2MtYTA0Zi01YjNhYjZiMzJiOTEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.JbiYyDqFGmqro6oJMaif1FlpNfFsBuAPBu2JVjqCX7PlQHTP3aafAzVeWuODo8vEuKBBz1QzjEKejqEwXcM93KFBouOfbj85MQPy79CHvRTe4o7YiPkbaBleYPh03dgYhyEIdlKqV8d4WemqOa1_WZflpV-dFjFRiSHACVuu1Hn7ktbx3MlvqgmfiEcD1TlXLUf7K_zAv3ME_tH1AcdYvLLq36ab3w2Ar_ADkm1mksIsCw99MibkvI1xyDQuOZg-H89fU_q13JQNRZtdnyimYbe4IIo6YSOlQOXV48DRpEJzsGsxqazmiULJGmqBs2UreREQTFJxSAl3yuip-eGGrQ\n", stderr: "" })
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::resources::apps] Create application: c8ced3ca-6e89-471b-aa52-2776cbd597d4
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "c8ced3ca-6e89-471b-aa52-2776cbd597d4"
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c8ced3ca-6e89-471b-aa52-2776cbd597d4 created.\n", stderr: "" })
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c8ced3ca-6e89-471b-aa52-2776cbd597d4"
[2021-09-16T14:04:09Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:04:09.481870Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"c8ced3ca-6e89-471b-aa52-2776cbd597d4\",\n    \"resourceVersion\": \"6afd4520-8388-4010-a129-3351f97402ce\",\n    \"uid\": \"206dc4bd-7b51-4562-8787-8a72041ea577\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:04:09.503000819Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:04:09.503016168Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.502969782Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.502971284Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.502971855Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.502972887Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.502973288Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.502975552Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c8ced3ca-6e89-471b-aa52-2776cbd597d4"
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:04:09.481870Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"c8ced3ca-6e89-471b-aa52-2776cbd597d4\",\n    \"resourceVersion\": \"f26bcf81-2c12-468c-a8ca-d3ffbae31d1d\",\n    \"uid\": \"206dc4bd-7b51-4562-8787-8a72041ea577\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:04:10.034791777Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:04:10.034838324Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.539299861Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.548241332Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.718577104Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.732826561Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:10.034759637Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:10.034762112Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"ruYL4OMKK2Qk\",\n        \"username\": \"user-c8ced3ca-6e89-471b-aa52-2776cbd597d4\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c8ced3ca-6e89-471b-aa52-2776cbd597d4"
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:04:09.481870Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"c8ced3ca-6e89-471b-aa52-2776cbd597d4\",\n    \"resourceVersion\": \"f26bcf81-2c12-468c-a8ca-d3ffbae31d1d\",\n    \"uid\": \"206dc4bd-7b51-4562-8787-8a72041ea577\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:04:10.034791777Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:04:10.034838324Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.539299861Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.548241332Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.718577104Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:09.732826561Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:10.034759637Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:04:10.034762112Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"ruYL4OMKK2Qk\",\n        \"username\": \"user-c8ced3ca-6e89-471b-aa52-2776cbd597d4\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "c8ced3ca-6e89-471b-aa52-2776cbd597d4" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDEzNDksImlhdCI6MTYzMTgwMTA0OSwiYXV0aF90aW1lIjoxNjMxODAxMDQ0LCJqdGkiOiI5NDZlNGQxZC1lN2MwLTQwYmYtODkwOS0wMDkyYmQyNjZmZWMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjU5ZWU2Yjk0LTZlZWUtNGYzYy1hMDRmLTViM2FiNmIzMmI5MSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI1OWVlNmI5NC02ZWVlLTRmM2MtYTA0Zi01YjNhYjZiMzJiOTEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.JbiYyDqFGmqro6oJMaif1FlpNfFsBuAPBu2JVjqCX7PlQHTP3aafAzVeWuODo8vEuKBBz1QzjEKejqEwXcM93KFBouOfbj85MQPy79CHvRTe4o7YiPkbaBleYPh03dgYhyEIdlKqV8d4WemqOa1_WZflpV-dFjFRiSHACVuu1Hn7ktbx3MlvqgmfiEcD1TlXLUf7K_zAv3ME_tH1AcdYvLLq36ab3w2Ar_ADkm1mksIsCw99MibkvI1xyDQuOZg-H89fU_q13JQNRZtdnyimYbe4IIo6YSOlQOXV48DRpEJzsGsxqazmiULJGmqBs2UreREQTFJxSAl3yuip-eGGrQ\n", stderr: "" })
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:04:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:04:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:04:12Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:04:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:04:13Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:04:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:04:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:04:14Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 11, payload: 0x7fd68c01d4d0, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 11, max_count: 20, length: 400, array: 0x55d731046680 } }, data: MessageData { topic: "app/c8ced3ca-6e89-471b-aa52-2776cbd597d4", payload: [123, 34, 105, 110, 100, 101, 120, 34, 58, 51, 125], props: Properties { cprops: MQTTProperties { count: 11, max_count: 20, length: 400, array: 0x55d731046680 } } } }
[2021-09-16T14:04:14Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/c8ced3ca-6e89-471b-aa52-2776cbd597d4", content_type: Some("application/json"), user_properties: {"instance": "drogue", "application": "c8ced3ca-6e89-471b-aa52-2776cbd597d4", "specversion": "1.0", "source": "drogue://c8ced3ca%2D6e89%2D471b%2Daa52%2D2776cbd597d4/device1", "time": "2021-09-16T14:04:14.489735634+00:00", "type": "io.drogue.event.v1", "subject": "warmup", "id": "2bab55d7-379d-4077-a062-baf19551e80d", "partitionkey": "c8ced3ca%2D6e89%2D471b%2Daa52%2D2776cbd597d4/device1", "device": "device1"}, payload: "{\"index\":3}" }
[2021-09-16T14:04:15Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 3 attempts
[2021-09-16T14:04:15Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
[2021-09-16T14:04:15Z INFO  drogue_cloud_tests::tests::coap] Sending payload
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    71,
                    86,
                    50,
                    97,
                    87,
                    78,
                    108,
                    77,
                    85,
                    66,
                    106,
                    79,
                    71,
                    78,
                    108,
                    90,
                    68,
                    78,
                    106,
                    89,
                    83,
                    48,
                    50,
                    90,
                    84,
                    103,
                    53,
                    76,
                    84,
                    81,
                    51,
                    77,
                    87,
                    73,
                    116,
                    89,
                    87,
                    69,
                    49,
                    77,
                    105,
                    48,
                    121,
                    78,
                    122,
                    99,
                    50,
                    89,
                    50,
                    74,
                    107,
                    78,
                    84,
                    107,
                    51,
                    90,
                    68,
                    81,
                    54,
                    90,
                    109,
                    57,
                    118,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T14:04:52Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:04:52Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:04:52Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:04:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "c8ced3ca-6e89-471b-aa52-2776cbd597d4" "device1"
[2021-09-16T14:04:52Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:04:52Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'c8ced3ca-6e89-471b-aa52-2776cbd597d4'
[2021-09-16T14:04:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "c8ced3ca-6e89-471b-aa52-2776cbd597d4"
[2021-09-16T14:04:52Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c8ced3ca-6e89-471b-aa52-2776cbd597d4 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user::version_1

**Duration**: 44.358282974s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:04:53Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T14:04:55Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI5MDMsImlhdCI6MTYzMTgwMTEwMywianRpIjoiODI2Y2Y2ZWUtOTFhNy00MTc5LWIwNWQtYjE2OWViMjc0MGZlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzRmYTZmYTgtZmU0My00OTBhLWE5NzctNzY1ZGQwNTQ3MjZmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc0ZmE2ZmE4LWZlNDMtNDkwYS1hOTc3LTc2NWRkMDU0NzI2ZiJ9.wEBK_C2Eoc-UwIG2AHJrey9ExmjZzTYlNylUv4bic9s
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI5MDMsImlhdCI6MTYzMTgwMTEwMywianRpIjoiODI2Y2Y2ZWUtOTFhNy00MTc5LWIwNWQtYjE2OWViMjc0MGZlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzRmYTZmYTgtZmU0My00OTBhLWE5NzctNzY1ZGQwNTQ3MjZmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc0ZmE2ZmE4LWZlNDMtNDkwYS1hOTc3LTc2NWRkMDU0NzI2ZiJ9.wEBK_C2Eoc-UwIG2AHJrey9ExmjZzTYlNylUv4bic9s" "--context" "system-tests"
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE0MDQsImlhdCI6MTYzMTgwMTEwNCwiYXV0aF90aW1lIjoxNjMxODAxMDk5LCJqdGkiOiIyZjQwODU1NS0zMmQ5LTQ4OTctOTJiOC0yODYxZmY3MzEzOTYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc0ZmE2ZmE4LWZlNDMtNDkwYS1hOTc3LTc2NWRkMDU0NzI2ZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3NGZhNmZhOC1mZTQzLTQ5MGEtYTk3Ny03NjVkZDA1NDcyNmYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.rt6D9dpmc7aEH4iN81zF_77vhlTWMVNup75Ll7CDkE4UfynaiAKnnx1GhUB70jaTzRh0-7WRLW-kw5WZ2dyhCfXMxsWHxdYYjYN9fbUZOQOtRPEFA-QglvZTDw9RuWUNYqZOpnzHrsCouXRFSR-0ZtLl8fuGVuyhix5N2XVE6VqGdBUmFFR3D3Eq95rsCHriBJY7w05Z_dDacWU6jbqCHLZqx_hbzTllg7cCnMq1N8c8bFOis2jrFky0xl_3R8UWxNaHfWDXErnQ19AHD-eyycAQDnz1w4ufqMzpvHBaRV-a4OTxv-JMzLuxyYZWRM-B4a_fXi3uLn9E9SCMYKXoXA\n", stderr: "" })
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::resources::apps] Create application: 8fafbbcf-568a-4338-92d8-c78b7de1cb84
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "8fafbbcf-568a-4338-92d8-c78b7de1cb84"
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 8fafbbcf-568a-4338-92d8-c78b7de1cb84 created.\n", stderr: "" })
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "8fafbbcf-568a-4338-92d8-c78b7de1cb84"
[2021-09-16T14:05:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:05:04.480768Z\",\n    \"generation\": 0,\n    \"name\": \"8fafbbcf-568a-4338-92d8-c78b7de1cb84\",\n    \"resourceVersion\": \"ea2d4eaa-e927-45ea-b903-d403194152e8\",\n    \"uid\": \"f3437ff0-4244-4318-83c5-66b396409540\"\n  }\n}", stderr: "" })
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "8fafbbcf-568a-4338-92d8-c78b7de1cb84"
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:05:04.480768Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"8fafbbcf-568a-4338-92d8-c78b7de1cb84\",\n    \"resourceVersion\": \"1ae25624-c97c-493e-b192-ec1ffe9775ff\",\n    \"uid\": \"f3437ff0-4244-4318-83c5-66b396409540\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:05:05.089124436Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:05:05.089163970Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:04.550018602Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:04.570847081Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:04.805431295Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:04.823842678Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:05.089095202Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:05.089097276Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"IxBqD83fVmzt\",\n        \"username\": \"user-8fafbbcf-568a-4338-92d8-c78b7de1cb84\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "8fafbbcf-568a-4338-92d8-c78b7de1cb84"
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:05:04.480768Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"8fafbbcf-568a-4338-92d8-c78b7de1cb84\",\n    \"resourceVersion\": \"1ae25624-c97c-493e-b192-ec1ffe9775ff\",\n    \"uid\": \"f3437ff0-4244-4318-83c5-66b396409540\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:05:05.089124436Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:05:05.089163970Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:04.550018602Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:04.570847081Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:04.805431295Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:04.823842678Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:05.089095202Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:05.089097276Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"IxBqD83fVmzt\",\n        \"username\": \"user-8fafbbcf-568a-4338-92d8-c78b7de1cb84\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "8fafbbcf-568a-4338-92d8-c78b7de1cb84" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE0MDQsImlhdCI6MTYzMTgwMTEwNCwiYXV0aF90aW1lIjoxNjMxODAxMDk5LCJqdGkiOiIyZjQwODU1NS0zMmQ5LTQ4OTctOTJiOC0yODYxZmY3MzEzOTYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc0ZmE2ZmE4LWZlNDMtNDkwYS1hOTc3LTc2NWRkMDU0NzI2ZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3NGZhNmZhOC1mZTQzLTQ5MGEtYTk3Ny03NjVkZDA1NDcyNmYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.rt6D9dpmc7aEH4iN81zF_77vhlTWMVNup75Ll7CDkE4UfynaiAKnnx1GhUB70jaTzRh0-7WRLW-kw5WZ2dyhCfXMxsWHxdYYjYN9fbUZOQOtRPEFA-QglvZTDw9RuWUNYqZOpnzHrsCouXRFSR-0ZtLl8fuGVuyhix5N2XVE6VqGdBUmFFR3D3Eq95rsCHriBJY7w05Z_dDacWU6jbqCHLZqx_hbzTllg7cCnMq1N8c8bFOis2jrFky0xl_3R8UWxNaHfWDXErnQ19AHD-eyycAQDnz1w4ufqMzpvHBaRV-a4OTxv-JMzLuxyYZWRM-B4a_fXi3uLn9E9SCMYKXoXA\n", stderr: "" })
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:12Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:36Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T14:05:36Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:05:36Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:05:36Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:05:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "8fafbbcf-568a-4338-92d8-c78b7de1cb84" "device1"
[2021-09-16T14:05:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:05:36Z INFO  drogue_cloud_tests::resources::apps] Destroy application '8fafbbcf-568a-4338-92d8-c78b7de1cb84'
[2021-09-16T14:05:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "8fafbbcf-568a-4338-92d8-c78b7de1cb84"
[2021-09-16T14:05:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 8fafbbcf-568a-4338-92d8-c78b7de1cb84 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user::version_2

**Duration**: 44.283036107s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:05:37Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T14:05:40Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI5NDcsImlhdCI6MTYzMTgwMTE0NywianRpIjoiMmM1ZmU1OTItM2I5Ni00NDM0LTgxMzEtNTVkMWZiZjllYWU4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiM2JjZTAyNTAtYzRmNS00ZTJlLTk5NjAtZDlmNzQ2YjkxMWE2Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjNiY2UwMjUwLWM0ZjUtNGUyZS05OTYwLWQ5Zjc0NmI5MTFhNiJ9.iu34nnHtDXGbvYV980cp7mCzD2_-mxyyEoGZCzDb6R0
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI5NDcsImlhdCI6MTYzMTgwMTE0NywianRpIjoiMmM1ZmU1OTItM2I5Ni00NDM0LTgxMzEtNTVkMWZiZjllYWU4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiM2JjZTAyNTAtYzRmNS00ZTJlLTk5NjAtZDlmNzQ2YjkxMWE2Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjNiY2UwMjUwLWM0ZjUtNGUyZS05OTYwLWQ5Zjc0NmI5MTFhNiJ9.iu34nnHtDXGbvYV980cp7mCzD2_-mxyyEoGZCzDb6R0" "--context" "system-tests"
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE0NDgsImlhdCI6MTYzMTgwMTE0OCwiYXV0aF90aW1lIjoxNjMxODAxMTQzLCJqdGkiOiI2OTcyYWQzZi0zMjNhLTQ5MjQtYjY1Mi00NjUzOWIwYzQ0OWMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjNiY2UwMjUwLWM0ZjUtNGUyZS05OTYwLWQ5Zjc0NmI5MTFhNiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIzYmNlMDI1MC1jNGY1LTRlMmUtOTk2MC1kOWY3NDZiOTExYTYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Hj5ifhlfrQZHklToHEtvu-gdnq67mUuQLV0_ipeOUoVa8Xgz6-TG0oKzQvTXuqSFszFYawPpVuBdnWa91sYCuIaKcuY_BACxG2VSmnmdrRdPUltG5016mSQqa0zo7c3sWhdCZs0tNu_ATkGAiJICWoJVdoqQ6PK_1hRftR7QoNtk0yjOC1QUbfK5sMXoDX2hHNVWGcjOvQHeA0-RPw3pAMSo07q-IDn7Y_WUTNGjnM4H-yu5jN3fwDHM_a8f2l_4vtOTd-iXslIgQ5-tyadp0cFr0yYbFuCf8cuwrZqm75__VZodwoPz0RRfetfQLVVLtd2w8Ru22hq1BsQBnTkTmQ\n", stderr: "" })
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::resources::apps] Create application: 3e6fff86-4508-4e6a-b193-838d1d65167f
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "3e6fff86-4508-4e6a-b193-838d1d65167f"
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3e6fff86-4508-4e6a-b193-838d1d65167f created.\n", stderr: "" })
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3e6fff86-4508-4e6a-b193-838d1d65167f"
[2021-09-16T14:05:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:05:48.850604Z\",\n    \"generation\": 1,\n    \"name\": \"3e6fff86-4508-4e6a-b193-838d1d65167f\",\n    \"resourceVersion\": \"b53265b8-7068-4878-9e21-9df5d6ee2c41\",\n    \"uid\": \"4a5e41da-83d3-4774-b626-5753a7be1523\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:05:48.891922798Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}", stderr: "" })
[2021-09-16T14:05:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3e6fff86-4508-4e6a-b193-838d1d65167f"
[2021-09-16T14:05:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:05:48.850604Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"3e6fff86-4508-4e6a-b193-838d1d65167f\",\n    \"resourceVersion\": \"740ca9b2-a1eb-4fe2-88cc-82c772750249\",\n    \"uid\": \"4a5e41da-83d3-4774-b626-5753a7be1523\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:05:49.514734648Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:05:49.514691597Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:48.965467083Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:48.980126228Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:49.209484182Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:49.229606013Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:49.514660298Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:49.514662573Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"YwM5lQn3dsgO\",\n        \"username\": \"user-3e6fff86-4508-4e6a-b193-838d1d65167f\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:05:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3e6fff86-4508-4e6a-b193-838d1d65167f"
[2021-09-16T14:05:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:05:48.850604Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"3e6fff86-4508-4e6a-b193-838d1d65167f\",\n    \"resourceVersion\": \"740ca9b2-a1eb-4fe2-88cc-82c772750249\",\n    \"uid\": \"4a5e41da-83d3-4774-b626-5753a7be1523\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:05:49.514734648Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:05:49.514691597Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:48.965467083Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:48.980126228Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:49.209484182Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:49.229606013Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:49.514660298Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:05:49.514662573Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"YwM5lQn3dsgO\",\n        \"username\": \"user-3e6fff86-4508-4e6a-b193-838d1d65167f\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:05:49Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:05:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "3e6fff86-4508-4e6a-b193-838d1d65167f" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T14:05:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:05:50Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:05:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:05:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE0NDgsImlhdCI6MTYzMTgwMTE0OCwiYXV0aF90aW1lIjoxNjMxODAxMTQzLCJqdGkiOiI2OTcyYWQzZi0zMjNhLTQ5MjQtYjY1Mi00NjUzOWIwYzQ0OWMiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjNiY2UwMjUwLWM0ZjUtNGUyZS05OTYwLWQ5Zjc0NmI5MTFhNiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIzYmNlMDI1MC1jNGY1LTRlMmUtOTk2MC1kOWY3NDZiOTExYTYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Hj5ifhlfrQZHklToHEtvu-gdnq67mUuQLV0_ipeOUoVa8Xgz6-TG0oKzQvTXuqSFszFYawPpVuBdnWa91sYCuIaKcuY_BACxG2VSmnmdrRdPUltG5016mSQqa0zo7c3sWhdCZs0tNu_ATkGAiJICWoJVdoqQ6PK_1hRftR7QoNtk0yjOC1QUbfK5sMXoDX2hHNVWGcjOvQHeA0-RPw3pAMSo07q-IDn7Y_WUTNGjnM4H-yu5jN3fwDHM_a8f2l_4vtOTd-iXslIgQ5-tyadp0cFr0yYbFuCf8cuwrZqm75__VZodwoPz0RRfetfQLVVLtd2w8Ru22hq1BsQBnTkTmQ\n", stderr: "" })
[2021-09-16T14:05:50Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T14:05:50Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:05:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:51Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:55Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:05:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:05:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:12Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:13Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:20Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T14:06:20Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:06:20Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:06:21Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:06:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "3e6fff86-4508-4e6a-b193-838d1d65167f" "device1"
[2021-09-16T14:06:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:06:21Z INFO  drogue_cloud_tests::resources::apps] Destroy application '3e6fff86-4508-4e6a-b193-838d1d65167f'
[2021-09-16T14:06:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "3e6fff86-4508-4e6a-b193-838d1d65167f"
[2021-09-16T14:06:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3e6fff86-4508-4e6a-b193-838d1d65167f deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user::version_3

**Duration**: 42.724308496s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:06:21Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T14:06:24Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI5OTAsImlhdCI6MTYzMTgwMTE5MCwianRpIjoiNzgwYzAyMGUtZDFlZi00MjBkLWI1MzgtYjNiZmNhMmNiMmJmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDAyMDQ5NGUtMTAzZS00MjdmLWI0MWMtMmYyOGY1YzhlMjlmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImQwMjA0OTRlLTEwM2UtNDI3Zi1iNDFjLTJmMjhmNWM4ZTI5ZiJ9.gfkKKGOiUa_T64Ssz0qpZi_yEOsApNzp2zZCyUkJlbY
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDI5OTAsImlhdCI6MTYzMTgwMTE5MCwianRpIjoiNzgwYzAyMGUtZDFlZi00MjBkLWI1MzgtYjNiZmNhMmNiMmJmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDAyMDQ5NGUtMTAzZS00MjdmLWI0MWMtMmYyOGY1YzhlMjlmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImQwMjA0OTRlLTEwM2UtNDI3Zi1iNDFjLTJmMjhmNWM4ZTI5ZiJ9.gfkKKGOiUa_T64Ssz0qpZi_yEOsApNzp2zZCyUkJlbY" "--context" "system-tests"
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE0OTEsImlhdCI6MTYzMTgwMTE5MSwiYXV0aF90aW1lIjoxNjMxODAxMTg3LCJqdGkiOiI5OWM4ZjU1My05OWFhLTQzODItYTQ0NC0xMjk3MzA2Njc4ZTIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImQwMjA0OTRlLTEwM2UtNDI3Zi1iNDFjLTJmMjhmNWM4ZTI5ZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJkMDIwNDk0ZS0xMDNlLTQyN2YtYjQxYy0yZjI4ZjVjOGUyOWYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.RXwNnWQZEO9spRpEMDCJRbf_vnmJKjTs2L3CE-KTmfv2tzZh3KrC-CgQrVlcrvm_zxoOovg23Gev0EJjHybshsR883wZdzP2nsBQjK4hoK3eKqlEARDza44kKDMZ1h6fJYQFBnPZfpWmXsq9s4TujXYslfFzrCA--GHWXFxbjtobYygIRZC4dKKvtFtj2sk8aI4X4HyRM7hJtntvW7o9InXxW_bD3c3yBRJfvMODyiutgwb1jxrxnuNFYcsLIIWpz-wblx9wPBpuTPlX7xl6SydNCX7UHzyYByCeN20g2rvhsZ_ljwp4Lqo8hTWfCRXhLNZvp68lyRHySuinYWMKBg\n", stderr: "" })
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::resources::apps] Create application: 0a37a15a-57d6-4f67-98ba-f57f618e6140
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "0a37a15a-57d6-4f67-98ba-f57f618e6140"
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 0a37a15a-57d6-4f67-98ba-f57f618e6140 created.\n", stderr: "" })
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "0a37a15a-57d6-4f67-98ba-f57f618e6140"
[2021-09-16T14:06:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:06:31.917063Z\",\n    \"generation\": 0,\n    \"name\": \"0a37a15a-57d6-4f67-98ba-f57f618e6140\",\n    \"resourceVersion\": \"821e6815-68fe-4ffb-9f04-bcef359ea5a8\",\n    \"uid\": \"40c63a4f-6f09-4f00-a7a4-2a0c6920c576\"\n  }\n}", stderr: "" })
[2021-09-16T14:06:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "0a37a15a-57d6-4f67-98ba-f57f618e6140"
[2021-09-16T14:06:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:06:31.917063Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"0a37a15a-57d6-4f67-98ba-f57f618e6140\",\n    \"resourceVersion\": \"67742ba6-29ed-4fc1-bc65-3bf966840031\",\n    \"uid\": \"40c63a4f-6f09-4f00-a7a4-2a0c6920c576\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:06:32.347682678Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:06:32.347723445Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:06:31.981220152Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:06:31.988402540Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:06:32.124350104Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:06:32.132370969Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:06:32.347652352Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:06:32.347654255Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"COBK0r9Q8rMZ\",\n        \"username\": \"user-0a37a15a-57d6-4f67-98ba-f57f618e6140\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:06:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "0a37a15a-57d6-4f67-98ba-f57f618e6140"
[2021-09-16T14:06:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:06:31.917063Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"0a37a15a-57d6-4f67-98ba-f57f618e6140\",\n    \"resourceVersion\": \"67742ba6-29ed-4fc1-bc65-3bf966840031\",\n    \"uid\": \"40c63a4f-6f09-4f00-a7a4-2a0c6920c576\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:06:32.347682678Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:06:32.347723445Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:06:31.981220152Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:06:31.988402540Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:06:32.124350104Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:06:32.132370969Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:06:32.347652352Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:06:32.347654255Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"COBK0r9Q8rMZ\",\n        \"username\": \"user-0a37a15a-57d6-4f67-98ba-f57f618e6140\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:06:33Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:06:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "0a37a15a-57d6-4f67-98ba-f57f618e6140" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T14:06:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:06:33Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:06:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:06:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE0OTEsImlhdCI6MTYzMTgwMTE5MSwiYXV0aF90aW1lIjoxNjMxODAxMTg3LCJqdGkiOiI5OWM4ZjU1My05OWFhLTQzODItYTQ0NC0xMjk3MzA2Njc4ZTIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImQwMjA0OTRlLTEwM2UtNDI3Zi1iNDFjLTJmMjhmNWM4ZTI5ZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJkMDIwNDk0ZS0xMDNlLTQyN2YtYjQxYy0yZjI4ZjVjOGUyOWYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.RXwNnWQZEO9spRpEMDCJRbf_vnmJKjTs2L3CE-KTmfv2tzZh3KrC-CgQrVlcrvm_zxoOovg23Gev0EJjHybshsR883wZdzP2nsBQjK4hoK3eKqlEARDza44kKDMZ1h6fJYQFBnPZfpWmXsq9s4TujXYslfFzrCA--GHWXFxbjtobYygIRZC4dKKvtFtj2sk8aI4X4HyRM7hJtntvW7o9InXxW_bD3c3yBRJfvMODyiutgwb1jxrxnuNFYcsLIIWpz-wblx9wPBpuTPlX7xl6SydNCX7UHzyYByCeN20g2rvhsZ_ljwp4Lqo8hTWfCRXhLNZvp68lyRHySuinYWMKBg\n", stderr: "" })
[2021-09-16T14:06:33Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T14:06:33Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:06:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:37Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:43Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:49Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:49Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:51Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:55Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:06:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:06:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:07:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:07:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:07:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:07:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:07:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:07:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:07:03Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T14:07:03Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:07:03Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:07:03Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:07:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "0a37a15a-57d6-4f67-98ba-f57f618e6140" "device1"
[2021-09-16T14:07:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:07:04Z INFO  drogue_cloud_tests::resources::apps] Destroy application '0a37a15a-57d6-4f67-98ba-f57f618e6140'
[2021-09-16T14:07:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "0a37a15a-57d6-4f67-98ba-f57f618e6140"
[2021-09-16T14:07:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 0a37a15a-57d6-4f67-98ba-f57f618e6140 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_alias::version_1

**Duration**: 52.822242227s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:07:04Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T14:07:06Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDMwMzIsImlhdCI6MTYzMTgwMTIzMiwianRpIjoiNzg5YmNlODYtMzk3Mi00NTQ0LWJhYTktNzNlMmIzYTk4Y2ExIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMGQ3NzZhYjgtYTNjNi00MDI2LWE3YWEtYTRlNThhOGZlMjFjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjBkNzc2YWI4LWEzYzYtNDAyNi1hN2FhLWE0ZTU4YThmZTIxYyJ9.AANwig29XSL7amyLkN0j7xEt8xqINjl_aWkZWYM2Npo
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDMwMzIsImlhdCI6MTYzMTgwMTIzMiwianRpIjoiNzg5YmNlODYtMzk3Mi00NTQ0LWJhYTktNzNlMmIzYTk4Y2ExIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMGQ3NzZhYjgtYTNjNi00MDI2LWE3YWEtYTRlNThhOGZlMjFjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjBkNzc2YWI4LWEzYzYtNDAyNi1hN2FhLWE0ZTU4YThmZTIxYyJ9.AANwig29XSL7amyLkN0j7xEt8xqINjl_aWkZWYM2Npo" "--context" "system-tests"
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE1MzQsImlhdCI6MTYzMTgwMTIzNCwiYXV0aF90aW1lIjoxNjMxODAxMjI5LCJqdGkiOiJhMWU1MmVjZC0wMDE4LTQ2YTgtYjFlMC04NTY2YzFlZmE3Y2QiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjBkNzc2YWI4LWEzYzYtNDAyNi1hN2FhLWE0ZTU4YThmZTIxYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIwZDc3NmFiOC1hM2M2LTQwMjYtYTdhYS1hNGU1OGE4ZmUyMWMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.imaCLs1tI3IWaqvT7jYbxP9qdGEOAIwbTyySsjoZcel8rZnWhyUqBLyF_tF3kzqg_J4hy3tu6KrgtFhdKfW8zVZ9vD6QcV5ChonhXpmfL1BQtZDqmQv9iRj4hBVHMRbc-DPIt3bSYaxBWXQio01oaJa-Q5y5w-LQxG8uPIpSOkAgw_x0ukIbVTJvBmF_-OxAxUWLu_evswdPR3ECZ_JhzfXTAgQ4WovNO0DktntOQQ12-4iHzKDdhrymyEiQ3CruiQ_BsBYskJAPrDzICzLKjyRxhOBkzFvRyeK1GMb-7N8GKZlgPhMwTfAuae-gVLpGqFqcbbYIAge0qJ0Xvc_jcg\n", stderr: "" })
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::resources::apps] Create application: fe683412-5dc2-4ed4-bdd1-0eb54d34b875
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "fe683412-5dc2-4ed4-bdd1-0eb54d34b875"
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App fe683412-5dc2-4ed4-bdd1-0eb54d34b875 created.\n", stderr: "" })
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "fe683412-5dc2-4ed4-bdd1-0eb54d34b875"
[2021-09-16T14:07:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:07:14.591445Z\",\n    \"generation\": 1,\n    \"name\": \"fe683412-5dc2-4ed4-bdd1-0eb54d34b875\",\n    \"resourceVersion\": \"f2d99196-2d7f-429c-96db-512b537e2fae\",\n    \"uid\": \"daf5066c-ab6d-4e31-9b0b-a93b860e215a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:07:14.623289227Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}", stderr: "" })
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "fe683412-5dc2-4ed4-bdd1-0eb54d34b875"
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:07:14.591445Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"fe683412-5dc2-4ed4-bdd1-0eb54d34b875\",\n    \"resourceVersion\": \"88d2db95-0808-4ed9-ad01-47e7bd681103\",\n    \"uid\": \"daf5066c-ab6d-4e31-9b0b-a93b860e215a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:07:15.081946584Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:07:15.081870521Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:07:14.690630198Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:07:14.700197273Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:07:14.819166578Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:07:14.827937297Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:07:15.081841678Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:07:15.081843602Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"zpP2i2ArQoDC\",\n        \"username\": \"user-fe683412-5dc2-4ed4-bdd1-0eb54d34b875\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "fe683412-5dc2-4ed4-bdd1-0eb54d34b875"
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:07:14.591445Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"fe683412-5dc2-4ed4-bdd1-0eb54d34b875\",\n    \"resourceVersion\": \"88d2db95-0808-4ed9-ad01-47e7bd681103\",\n    \"uid\": \"daf5066c-ab6d-4e31-9b0b-a93b860e215a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:07:15.081946584Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:07:15.081870521Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:07:14.690630198Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:07:14.700197273Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:07:14.819166578Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:07:14.827937297Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:07:15.081841678Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:07:15.081843602Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"zpP2i2ArQoDC\",\n        \"username\": \"user-fe683412-5dc2-4ed4-bdd1-0eb54d34b875\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "fe683412-5dc2-4ed4-bdd1-0eb54d34b875" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"unique\":true,\"username\":\"foo\"}}]}}"
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE1MzQsImlhdCI6MTYzMTgwMTIzNCwiYXV0aF90aW1lIjoxNjMxODAxMjI5LCJqdGkiOiJhMWU1MmVjZC0wMDE4LTQ2YTgtYjFlMC04NTY2YzFlZmE3Y2QiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjBkNzc2YWI4LWEzYzYtNDAyNi1hN2FhLWE0ZTU4YThmZTIxYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIwZDc3NmFiOC1hM2M2LTQwMjYtYTdhYS1hNGU1OGE4ZmUyMWMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.imaCLs1tI3IWaqvT7jYbxP9qdGEOAIwbTyySsjoZcel8rZnWhyUqBLyF_tF3kzqg_J4hy3tu6KrgtFhdKfW8zVZ9vD6QcV5ChonhXpmfL1BQtZDqmQv9iRj4hBVHMRbc-DPIt3bSYaxBWXQio01oaJa-Q5y5w-LQxG8uPIpSOkAgw_x0ukIbVTJvBmF_-OxAxUWLu_evswdPR3ECZ_JhzfXTAgQ4WovNO0DktntOQQ12-4iHzKDdhrymyEiQ3CruiQ_BsBYskJAPrDzICzLKjyRxhOBkzFvRyeK1GMb-7N8GKZlgPhMwTfAuae-gVLpGqFqcbbYIAge0qJ0Xvc_jcg\n", stderr: "" })
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:07:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:07:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:07:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:07:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:07:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:07:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:07:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:07:19Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 443, payload: 0x7fd6980168c0, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } }, data: MessageData { topic: "app/fe683412-5dc2-4ed4-bdd1-0eb54d34b875", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 55, 52, 57, 53, 51, 100, 52, 100, 45, 57, 100, 102, 102, 45, 52, 48, 52, 55, 45, 97, 54, 56, 100, 45, 97, 53, 53, 49, 101, 102, 49, 52, 48, 99, 101, 99, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 102, 101, 54, 56, 51, 52, 49, 50, 37, 50, 68, 53, 100, 99, 50, 37, 50, 68, 52, 101, 100, 52, 37, 50, 68, 98, 100, 100, 49, 37, 50, 68, 48, 101, 98, 53, 52, 100, 51, 52, 98, 56, 55, 53, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 106, 115, 111, 110, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 119, 97, 114, 109, 117, 112, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 52, 58, 48, 55, 58, 49, 57, 46, 55, 48, 56, 54, 55, 54, 52, 50, 53, 90, 34, 44, 34, 100, 97, 116, 97, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 51, 125, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 102, 101, 54, 56, 51, 52, 49, 50, 37, 50, 68, 53, 100, 99, 50, 37, 50, 68, 52, 101, 100, 52, 37, 50, 68, 98, 100, 100, 49, 37, 50, 68, 48, 101, 98, 53, 52, 100, 51, 52, 98, 56, 55, 53, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 102, 101, 54, 56, 51, 52, 49, 50, 45, 53, 100, 99, 50, 45, 52, 101, 100, 52, 45, 98, 100, 100, 49, 45, 48, 101, 98, 53, 52, 100, 51, 52, 98, 56, 55, 53, 34, 125], props: Properties { cprops: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } } } }
[2021-09-16T14:07:19Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/fe683412-5dc2-4ed4-bdd1-0eb54d34b875", content_type: None, user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"74953d4d-9dff-4047-a68d-a551ef140cec\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://fe683412%2D5dc2%2D4ed4%2Dbdd1%2D0eb54d34b875/device1\",\"datacontenttype\":\"application/json\",\"subject\":\"warmup\",\"time\":\"2021-09-16T14:07:19.708676425Z\",\"data\":{\"index\":3},\"device\":\"device1\",\"partitionkey\":\"fe683412%2D5dc2%2D4ed4%2Dbdd1%2D0eb54d34b875/device1\",\"instance\":\"drogue\",\"application\":\"fe683412-5dc2-4ed4-bdd1-0eb54d34b875\"}" }
[2021-09-16T14:07:20Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 3 attempts
[2021-09-16T14:07:20Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
[2021-09-16T14:07:20Z INFO  drogue_cloud_tests::tests::coap] Sending payload
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    109,
                    57,
                    118,
                    81,
                    71,
                    90,
                    108,
                    78,
                    106,
                    103,
                    122,
                    78,
                    68,
                    69,
                    121,
                    76,
                    84,
                    86,
                    107,
                    89,
                    122,
                    73,
                    116,
                    78,
                    71,
                    86,
                    107,
                    78,
                    67,
                    49,
                    105,
                    90,
                    71,
                    81,
                    120,
                    76,
                    84,
                    66,
                    108,
                    89,
                    106,
                    85,
                    48,
                    90,
                    68,
                    77,
                    48,
                    89,
                    106,
                    103,
                    51,
                    78,
                    84,
                    112,
                    105,
                    89,
                    88,
                    73,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T14:07:56Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:07:56Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:07:56Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:07:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "fe683412-5dc2-4ed4-bdd1-0eb54d34b875" "device1"
[2021-09-16T14:07:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:07:56Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'fe683412-5dc2-4ed4-bdd1-0eb54d34b875'
[2021-09-16T14:07:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "fe683412-5dc2-4ed4-bdd1-0eb54d34b875"
[2021-09-16T14:07:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App fe683412-5dc2-4ed4-bdd1-0eb54d34b875 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_alias::version_2

**Duration**: 51.456330332s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:07:57Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T14:07:59Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:08:06Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDMwODUsImlhdCI6MTYzMTgwMTI4NSwianRpIjoiYzJjMjE0YmEtY2M4NC00ZmZjLWEwMzMtODFhZTU4ZWFhOGM5IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMzNkMWM1ZWQtOWQ2ZC00MTBhLTgyMzAtYjM1ZGJlNzliNWY3Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjMzZDFjNWVkLTlkNmQtNDEwYS04MjMwLWIzNWRiZTc5YjVmNyJ9.-xIH8a71k6Iy60gByYYTZZ9B5FlIZ5RfrTZeShM7i90
[2021-09-16T14:08:06Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:08:06Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:08:06Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDMwODUsImlhdCI6MTYzMTgwMTI4NSwianRpIjoiYzJjMjE0YmEtY2M4NC00ZmZjLWEwMzMtODFhZTU4ZWFhOGM5IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMzNkMWM1ZWQtOWQ2ZC00MTBhLTgyMzAtYjM1ZGJlNzliNWY3Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjMzZDFjNWVkLTlkNmQtNDEwYS04MjMwLWIzNWRiZTc5YjVmNyJ9.-xIH8a71k6Iy60gByYYTZZ9B5FlIZ5RfrTZeShM7i90" "--context" "system-tests"
[2021-09-16T14:08:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:08:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:08:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:08:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE1ODcsImlhdCI6MTYzMTgwMTI4NywiYXV0aF90aW1lIjoxNjMxODAxMjgyLCJqdGkiOiI1YjZmM2Y3Yi1mNGRlLTQxZDItYTAxZC1kODljZTg0ZDVlMDgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjMzZDFjNWVkLTlkNmQtNDEwYS04MjMwLWIzNWRiZTc5YjVmNyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIzM2QxYzVlZC05ZDZkLTQxMGEtODIzMC1iMzVkYmU3OWI1ZjciLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.QMwMtt086sAZt7-VU6UiIGC9IBkb5GlIz2E7WCNyuO-KaWcFpGyTHGHEpbCdM1mnzAEXmrythZhlW2qgewoVFRt015lpGefgL2xPezMRwZ6sT7SHxS8VokFvYLFqRX2HHFkxrSrjaH47kGglPq__qT7L9iEOGSfdbA1dKJS2NoipVQIZxxAvKHKYIlGNQmZMmejb4C3S1RGAskuvRZ82plbKhC9cM4d4iSYfa1jjdWcU8_gApnMQCMqxFNSgxxAApsPordYoi93A4-3SbS-VwGGt01y1mA-44r7a5aXXtiB3dYALB3JZ3VcY6gv7TDBnLEgR8Mrw7FrTzTlDuUPCGg\n", stderr: "" })
[2021-09-16T14:08:07Z INFO  drogue_cloud_tests::resources::apps] Create application: 7ff29c09-aeff-4083-bbc3-75d6d8a51aa7
[2021-09-16T14:08:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "7ff29c09-aeff-4083-bbc3-75d6d8a51aa7"
[2021-09-16T14:08:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 7ff29c09-aeff-4083-bbc3-75d6d8a51aa7 created.\n", stderr: "" })
[2021-09-16T14:08:07Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7ff29c09-aeff-4083-bbc3-75d6d8a51aa7"
[2021-09-16T14:08:07Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:08:07.087829Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"7ff29c09-aeff-4083-bbc3-75d6d8a51aa7\",\n    \"resourceVersion\": \"bd088636-bebf-47ce-9e02-14b1f9967d83\",\n    \"uid\": \"40d3408a-ad56-4be6-9123-fa6e59e348bd\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:08:07.118574404Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:08:07.118563243Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.118541532Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.118542534Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.118543005Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.118543686Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.118543967Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.118545360Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7ff29c09-aeff-4083-bbc3-75d6d8a51aa7"
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:08:07.087829Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"7ff29c09-aeff-4083-bbc3-75d6d8a51aa7\",\n    \"resourceVersion\": \"26cd302b-5b53-4b09-8268-6db707eef3c1\",\n    \"uid\": \"40d3408a-ad56-4be6-9123-fa6e59e348bd\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:08:07.594401773Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:08:07.594374772Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.152206887Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.158836405Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.332285885Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.342340513Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.594354023Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.594355335Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"uthKkfe9DAzH\",\n        \"username\": \"user-7ff29c09-aeff-4083-bbc3-75d6d8a51aa7\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7ff29c09-aeff-4083-bbc3-75d6d8a51aa7"
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:08:07.087829Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"7ff29c09-aeff-4083-bbc3-75d6d8a51aa7\",\n    \"resourceVersion\": \"26cd302b-5b53-4b09-8268-6db707eef3c1\",\n    \"uid\": \"40d3408a-ad56-4be6-9123-fa6e59e348bd\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:08:07.594401773Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:08:07.594374772Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.152206887Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.158836405Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.332285885Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.342340513Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.594354023Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:07.594355335Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"uthKkfe9DAzH\",\n        \"username\": \"user-7ff29c09-aeff-4083-bbc3-75d6d8a51aa7\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "7ff29c09-aeff-4083-bbc3-75d6d8a51aa7" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"unique\":true,\"username\":\"foo\"}}]}}"
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE1ODcsImlhdCI6MTYzMTgwMTI4NywiYXV0aF90aW1lIjoxNjMxODAxMjgyLCJqdGkiOiI1YjZmM2Y3Yi1mNGRlLTQxZDItYTAxZC1kODljZTg0ZDVlMDgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjMzZDFjNWVkLTlkNmQtNDEwYS04MjMwLWIzNWRiZTc5YjVmNyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIzM2QxYzVlZC05ZDZkLTQxMGEtODIzMC1iMzVkYmU3OWI1ZjciLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.QMwMtt086sAZt7-VU6UiIGC9IBkb5GlIz2E7WCNyuO-KaWcFpGyTHGHEpbCdM1mnzAEXmrythZhlW2qgewoVFRt015lpGefgL2xPezMRwZ6sT7SHxS8VokFvYLFqRX2HHFkxrSrjaH47kGglPq__qT7L9iEOGSfdbA1dKJS2NoipVQIZxxAvKHKYIlGNQmZMmejb4C3S1RGAskuvRZ82plbKhC9cM4d4iSYfa1jjdWcU8_gApnMQCMqxFNSgxxAApsPordYoi93A4-3SbS-VwGGt01y1mA-44r7a5aXXtiB3dYALB3JZ3VcY6gv7TDBnLEgR8Mrw7FrTzTlDuUPCGg\n", stderr: "" })
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:08:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:08:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:08:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:08:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:08:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:08:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:08:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:08:11Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 443, payload: 0x7fd690014b90, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 2, max_count: 10, length: 48, array: 0x7fd690014d60 } }, data: MessageData { topic: "app/7ff29c09-aeff-4083-bbc3-75d6d8a51aa7", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 57, 100, 51, 100, 49, 56, 57, 101, 45, 102, 57, 97, 52, 45, 52, 102, 56, 57, 45, 98, 102, 102, 98, 45, 50, 53, 49, 48, 98, 98, 55, 54, 99, 48, 54, 48, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 55, 102, 102, 50, 57, 99, 48, 57, 37, 50, 68, 97, 101, 102, 102, 37, 50, 68, 52, 48, 56, 51, 37, 50, 68, 98, 98, 99, 51, 37, 50, 68, 55, 53, 100, 54, 100, 56, 97, 53, 49, 97, 97, 55, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 106, 115, 111, 110, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 119, 97, 114, 109, 117, 112, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 52, 58, 48, 56, 58, 49, 49, 46, 55, 48, 54, 49, 55, 52, 54, 49, 51, 90, 34, 44, 34, 100, 97, 116, 97, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 51, 125, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 55, 102, 102, 50, 57, 99, 48, 57, 45, 97, 101, 102, 102, 45, 52, 48, 56, 51, 45, 98, 98, 99, 51, 45, 55, 53, 100, 54, 100, 56, 97, 53, 49, 97, 97, 55, 34, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 55, 102, 102, 50, 57, 99, 48, 57, 37, 50, 68, 97, 101, 102, 102, 37, 50, 68, 52, 48, 56, 51, 37, 50, 68, 98, 98, 99, 51, 37, 50, 68, 55, 53, 100, 54, 100, 56, 97, 53, 49, 97, 97, 55, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 125], props: Properties { cprops: MQTTProperties { count: 2, max_count: 10, length: 48, array: 0x7fd690014d60 } } } }
[2021-09-16T14:08:11Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/7ff29c09-aeff-4083-bbc3-75d6d8a51aa7", content_type: Some("application/cloudevents+json; charset=utf-8"), user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"9d3d189e-f9a4-4f89-bffb-2510bb76c060\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://7ff29c09%2Daeff%2D4083%2Dbbc3%2D75d6d8a51aa7/device1\",\"datacontenttype\":\"application/json\",\"subject\":\"warmup\",\"time\":\"2021-09-16T14:08:11.706174613Z\",\"data\":{\"index\":3},\"device\":\"device1\",\"application\":\"7ff29c09-aeff-4083-bbc3-75d6d8a51aa7\",\"partitionkey\":\"7ff29c09%2Daeff%2D4083%2Dbbc3%2D75d6d8a51aa7/device1\",\"instance\":\"drogue\"}" }
[2021-09-16T14:08:12Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 3 attempts
[2021-09-16T14:08:12Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
[2021-09-16T14:08:12Z INFO  drogue_cloud_tests::tests::coap] Sending payload
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    109,
                    57,
                    118,
                    81,
                    68,
                    100,
                    109,
                    90,
                    106,
                    73,
                    53,
                    89,
                    122,
                    65,
                    53,
                    76,
                    87,
                    70,
                    108,
                    90,
                    109,
                    89,
                    116,
                    78,
                    68,
                    65,
                    52,
                    77,
                    121,
                    49,
                    105,
                    89,
                    109,
                    77,
                    122,
                    76,
                    84,
                    99,
                    49,
                    90,
                    68,
                    90,
                    107,
                    79,
                    71,
                    69,
                    49,
                    77,
                    87,
                    70,
                    104,
                    78,
                    122,
                    112,
                    105,
                    89,
                    88,
                    73,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T14:08:47Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:08:47Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:08:48Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:08:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "7ff29c09-aeff-4083-bbc3-75d6d8a51aa7" "device1"
[2021-09-16T14:08:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:08:48Z INFO  drogue_cloud_tests::resources::apps] Destroy application '7ff29c09-aeff-4083-bbc3-75d6d8a51aa7'
[2021-09-16T14:08:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "7ff29c09-aeff-4083-bbc3-75d6d8a51aa7"
[2021-09-16T14:08:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 7ff29c09-aeff-4083-bbc3-75d6d8a51aa7 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_alias::version_3

**Duration**: 53.135693127s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:08:48Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T14:08:51Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDMxMzcsImlhdCI6MTYzMTgwMTMzNywianRpIjoiNDNjMGE4YWYtNDIwMy00OWY2LTlmMTEtZmQ1YWEzZWY0OTE3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZTY1ZjhmM2QtZWQzNi00Y2UyLTgyYjktMTA3NWU0NDdhMmU2Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImU2NWY4ZjNkLWVkMzYtNGNlMi04MmI5LTEwNzVlNDQ3YTJlNiJ9.jMmGSDm2YXZci4wtTv97a418xymgNs8xVgCuDnL8Xpg
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDMxMzcsImlhdCI6MTYzMTgwMTMzNywianRpIjoiNDNjMGE4YWYtNDIwMy00OWY2LTlmMTEtZmQ1YWEzZWY0OTE3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZTY1ZjhmM2QtZWQzNi00Y2UyLTgyYjktMTA3NWU0NDdhMmU2Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImU2NWY4ZjNkLWVkMzYtNGNlMi04MmI5LTEwNzVlNDQ3YTJlNiJ9.jMmGSDm2YXZci4wtTv97a418xymgNs8xVgCuDnL8Xpg" "--context" "system-tests"
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE2MzgsImlhdCI6MTYzMTgwMTMzOCwiYXV0aF90aW1lIjoxNjMxODAxMzMzLCJqdGkiOiI2OTczMmM3MS03ZTczLTQ5NDQtYmI5NC1kMGRkMmQ2NTFjODEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImU2NWY4ZjNkLWVkMzYtNGNlMi04MmI5LTEwNzVlNDQ3YTJlNiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJlNjVmOGYzZC1lZDM2LTRjZTItODJiOS0xMDc1ZTQ0N2EyZTYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.NAWARDz--2zbJKd6KY7r6IDVefTBPaLxkMif6OfSAY5PLsKcq3ZYxgMwtzEwpsh1EO5UV-DrDp9J2WEOwILv-AetrfD8y3kFykf1c49JlbHl8lkt6TdVUA3RelLLWYQcAJ7O8G2PuLERJhWmTTOyjf99jFVXHwVXw6mmL62k0BkmR8F82zJlEresPg6PJCvPqbqUWmgM8jaQGdsl2WRQFqQ-0AzBLExxRATAJ8FeaZM55VXzeWa5krPIktO26oCLfOQmiBmTo3Mx3TdyFg0zJ891AN1rlfuaUnxxV9ASN_rM-Dng_mHkja7oBnapQniJF0xinN2n8v8kj0w_-W0DxA\n", stderr: "" })
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::resources::apps] Create application: 08bc965b-3166-4d00-8d04-f2646a3d25d2
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "08bc965b-3166-4d00-8d04-f2646a3d25d2"
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 08bc965b-3166-4d00-8d04-f2646a3d25d2 created.\n", stderr: "" })
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "08bc965b-3166-4d00-8d04-f2646a3d25d2"
[2021-09-16T14:08:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:08:58.719565Z\",\n    \"generation\": 1,\n    \"name\": \"08bc965b-3166-4d00-8d04-f2646a3d25d2\",\n    \"resourceVersion\": \"d0d56ca8-9cb7-4bf7-9333-558a436d2768\",\n    \"uid\": \"12925994-779d-4ef6-a1a7-81555880e67e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:08:58.735361890Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}", stderr: "" })
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "08bc965b-3166-4d00-8d04-f2646a3d25d2"
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:08:58.719565Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"08bc965b-3166-4d00-8d04-f2646a3d25d2\",\n    \"resourceVersion\": \"f3f79077-fd09-484c-9af6-356732f8ef4d\",\n    \"uid\": \"12925994-779d-4ef6-a1a7-81555880e67e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:08:59.275166906Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:08:59.275126260Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:58.784054239Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:58.795524885Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:58.990861865Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:59.004638909Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:59.275097096Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:59.275099310Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"sSzRCIOC94yk\",\n        \"username\": \"user-08bc965b-3166-4d00-8d04-f2646a3d25d2\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "08bc965b-3166-4d00-8d04-f2646a3d25d2"
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:08:58.719565Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"08bc965b-3166-4d00-8d04-f2646a3d25d2\",\n    \"resourceVersion\": \"f3f79077-fd09-484c-9af6-356732f8ef4d\",\n    \"uid\": \"12925994-779d-4ef6-a1a7-81555880e67e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:08:59.275166906Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:08:59.275126260Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:58.784054239Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:58.795524885Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:58.990861865Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:59.004638909Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:59.275097096Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:08:59.275099310Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"sSzRCIOC94yk\",\n        \"username\": \"user-08bc965b-3166-4d00-8d04-f2646a3d25d2\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "08bc965b-3166-4d00-8d04-f2646a3d25d2" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"unique\":true,\"username\":\"foo\"}}]}}"
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE2MzgsImlhdCI6MTYzMTgwMTMzOCwiYXV0aF90aW1lIjoxNjMxODAxMzMzLCJqdGkiOiI2OTczMmM3MS03ZTczLTQ5NDQtYmI5NC1kMGRkMmQ2NTFjODEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImU2NWY4ZjNkLWVkMzYtNGNlMi04MmI5LTEwNzVlNDQ3YTJlNiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJlNjVmOGYzZC1lZDM2LTRjZTItODJiOS0xMDc1ZTQ0N2EyZTYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.NAWARDz--2zbJKd6KY7r6IDVefTBPaLxkMif6OfSAY5PLsKcq3ZYxgMwtzEwpsh1EO5UV-DrDp9J2WEOwILv-AetrfD8y3kFykf1c49JlbHl8lkt6TdVUA3RelLLWYQcAJ7O8G2PuLERJhWmTTOyjf99jFVXHwVXw6mmL62k0BkmR8F82zJlEresPg6PJCvPqbqUWmgM8jaQGdsl2WRQFqQ-0AzBLExxRATAJ8FeaZM55VXzeWa5krPIktO26oCLfOQmiBmTo3Mx3TdyFg0zJ891AN1rlfuaUnxxV9ASN_rM-Dng_mHkja7oBnapQniJF0xinN2n8v8kj0w_-W0DxA\n", stderr: "" })
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:08:59Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:09:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:09:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:09:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:09:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:09:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:09:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:09:03Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 11, payload: 0x7fd69801b440, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 11, max_count: 20, length: 400, array: 0x55d7311578d0 } }, data: MessageData { topic: "app/08bc965b-3166-4d00-8d04-f2646a3d25d2", payload: [123, 34, 105, 110, 100, 101, 120, 34, 58, 51, 125], props: Properties { cprops: MQTTProperties { count: 11, max_count: 20, length: 400, array: 0x55d7311578d0 } } } }
[2021-09-16T14:09:03Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/08bc965b-3166-4d00-8d04-f2646a3d25d2", content_type: Some("application/json"), user_properties: {"time": "2021-09-16T14:09:03.765703039+00:00", "specversion": "1.0", "source": "drogue://08bc965b%2D3166%2D4d00%2D8d04%2Df2646a3d25d2/device1", "instance": "drogue", "partitionkey": "08bc965b%2D3166%2D4d00%2D8d04%2Df2646a3d25d2/device1", "application": "08bc965b-3166-4d00-8d04-f2646a3d25d2", "id": "14a7279b-251d-49b6-ab11-44d4fa90c1e7", "type": "io.drogue.event.v1", "subject": "warmup", "device": "device1"}, payload: "{\"index\":3}" }
[2021-09-16T14:09:04Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 3 attempts
[2021-09-16T14:09:04Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
[2021-09-16T14:09:04Z INFO  drogue_cloud_tests::tests::coap] Sending payload
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    109,
                    57,
                    118,
                    81,
                    68,
                    65,
                    52,
                    89,
                    109,
                    77,
                    53,
                    78,
                    106,
                    86,
                    105,
                    76,
                    84,
                    77,
                    120,
                    78,
                    106,
                    89,
                    116,
                    78,
                    71,
                    81,
                    119,
                    77,
                    67,
                    48,
                    52,
                    90,
                    68,
                    65,
                    48,
                    76,
                    87,
                    89,
                    121,
                    78,
                    106,
                    81,
                    50,
                    89,
                    84,
                    78,
                    107,
                    77,
                    106,
                    86,
                    107,
                    77,
                    106,
                    112,
                    105,
                    89,
                    88,
                    73,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T14:09:41Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:09:41Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:09:41Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:09:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "08bc965b-3166-4d00-8d04-f2646a3d25d2" "device1"
[2021-09-16T14:09:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:09:41Z INFO  drogue_cloud_tests::resources::apps] Destroy application '08bc965b-3166-4d00-8d04-f2646a3d25d2'
[2021-09-16T14:09:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "08bc965b-3166-4d00-8d04-f2646a3d25d2"
[2021-09-16T14:09:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 08bc965b-3166-4d00-8d04-f2646a3d25d2 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_only::version_1

**Duration**: 42.627269929s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:09:41Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T14:09:44Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDMxOTAsImlhdCI6MTYzMTgwMTM5MCwianRpIjoiY2E1YjFiY2EtNjAzNi00NzU2LWE2YjItZTM4NjY2MDUwNzliIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiM2I4NmU0NTUtYzY3MC00YTIxLWI4OWQtNzZlZjYxYjdmMGVlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjNiODZlNDU1LWM2NzAtNGEyMS1iODlkLTc2ZWY2MWI3ZjBlZSJ9.z8NtiJMpeCzHMGfWopmWJL_XA_ykYPpkzN9iFQbhgm0
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDMxOTAsImlhdCI6MTYzMTgwMTM5MCwianRpIjoiY2E1YjFiY2EtNjAzNi00NzU2LWE2YjItZTM4NjY2MDUwNzliIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiM2I4NmU0NTUtYzY3MC00YTIxLWI4OWQtNzZlZjYxYjdmMGVlIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjNiODZlNDU1LWM2NzAtNGEyMS1iODlkLTc2ZWY2MWI3ZjBlZSJ9.z8NtiJMpeCzHMGfWopmWJL_XA_ykYPpkzN9iFQbhgm0" "--context" "system-tests"
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE2OTEsImlhdCI6MTYzMTgwMTM5MSwiYXV0aF90aW1lIjoxNjMxODAxMzg3LCJqdGkiOiI0NzMwZmFhNC0wZjBjLTQyYzAtODUyMi0zMTgxNDA4NTU3MjQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjNiODZlNDU1LWM2NzAtNGEyMS1iODlkLTc2ZWY2MWI3ZjBlZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIzYjg2ZTQ1NS1jNjcwLTRhMjEtYjg5ZC03NmVmNjFiN2YwZWUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.aRP47_QuB4SdcD2fwFGPcO4m4d1kumlfUNrieAsUxg_bb-U1oDBdcykZAURTV35jDUeaWsvXTSGM6sDZ7_hhGYfHTiUZbzn8VsZlhziSMA5U1zZKpUvGF5hrSAQx4nrLIQkf2GGNbJyyg9LU_uCdXMMpZB7lFuYwRPva3H5HCdWabJym7aGKkk_K76FfLZOdf3n39xap_6GNxexlK_MR86TZbsNaoTOd3VpsP4-QOfVvF0-LLCFz-Dbq4IVzGxl7DVdzQDQ4LyvL3xROSKrrgbGt1V3w5KIMBJJDSuEeEdWv9DQWWbiL6J9O2UbVJ9okELEnpR9KALd3mDYTmkXMhQ\n", stderr: "" })
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::resources::apps] Create application: a236592c-3253-4520-aac6-d24027fc7b19
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "a236592c-3253-4520-aac6-d24027fc7b19"
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App a236592c-3253-4520-aac6-d24027fc7b19 created.\n", stderr: "" })
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a236592c-3253-4520-aac6-d24027fc7b19"
[2021-09-16T14:09:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:09:51.865841Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"a236592c-3253-4520-aac6-d24027fc7b19\",\n    \"resourceVersion\": \"f7d3de3b-a84e-4b0c-8b54-e8df669e142d\",\n    \"uid\": \"1a97b99a-4ab1-4db9-afa9-83f9f3032754\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:09:51.882870624Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:09:51.882883177Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:51.882849444Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:51.882850566Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:51.882851167Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:51.882851909Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:51.882852540Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:51.882854253Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:09:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a236592c-3253-4520-aac6-d24027fc7b19"
[2021-09-16T14:09:52Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:09:51.865841Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"a236592c-3253-4520-aac6-d24027fc7b19\",\n    \"resourceVersion\": \"93221a68-aa01-4bf6-b0d0-cbedfec1a34c\",\n    \"uid\": \"1a97b99a-4ab1-4db9-afa9-83f9f3032754\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:09:52.223584520Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:09:52.223622551Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:51.921056483Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:51.940544493Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:52.047227168Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:52.059180576Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:52.223556579Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:52.223558572Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"kLQaA2XX1ZKf\",\n        \"username\": \"user-a236592c-3253-4520-aac6-d24027fc7b19\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:09:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a236592c-3253-4520-aac6-d24027fc7b19"
[2021-09-16T14:09:52Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:09:51.865841Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"a236592c-3253-4520-aac6-d24027fc7b19\",\n    \"resourceVersion\": \"93221a68-aa01-4bf6-b0d0-cbedfec1a34c\",\n    \"uid\": \"1a97b99a-4ab1-4db9-afa9-83f9f3032754\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:09:52.223584520Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:09:52.223622551Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:51.921056483Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:51.940544493Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:52.047227168Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:52.059180576Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:52.223556579Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:09:52.223558572Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"kLQaA2XX1ZKf\",\n        \"username\": \"user-a236592c-3253-4520-aac6-d24027fc7b19\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:09:52Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:09:52Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "a236592c-3253-4520-aac6-d24027fc7b19" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T14:09:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:09:53Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:09:53Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:09:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE2OTEsImlhdCI6MTYzMTgwMTM5MSwiYXV0aF90aW1lIjoxNjMxODAxMzg3LCJqdGkiOiI0NzMwZmFhNC0wZjBjLTQyYzAtODUyMi0zMTgxNDA4NTU3MjQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjNiODZlNDU1LWM2NzAtNGEyMS1iODlkLTc2ZWY2MWI3ZjBlZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIzYjg2ZTQ1NS1jNjcwLTRhMjEtYjg5ZC03NmVmNjFiN2YwZWUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.aRP47_QuB4SdcD2fwFGPcO4m4d1kumlfUNrieAsUxg_bb-U1oDBdcykZAURTV35jDUeaWsvXTSGM6sDZ7_hhGYfHTiUZbzn8VsZlhziSMA5U1zZKpUvGF5hrSAQx4nrLIQkf2GGNbJyyg9LU_uCdXMMpZB7lFuYwRPva3H5HCdWabJym7aGKkk_K76FfLZOdf3n39xap_6GNxexlK_MR86TZbsNaoTOd3VpsP4-QOfVvF0-LLCFz-Dbq4IVzGxl7DVdzQDQ4LyvL3xROSKrrgbGt1V3w5KIMBJJDSuEeEdWv9DQWWbiL6J9O2UbVJ9okELEnpR9KALd3mDYTmkXMhQ\n", stderr: "" })
[2021-09-16T14:09:53Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T14:09:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:09:53Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:09:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:09:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:09:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:09:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:09:55Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:09:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:09:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:09:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:09:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:09:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:09:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:09:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:09:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:12Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:13Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:23Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T14:10:23Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:10:23Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:10:23Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:10:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "a236592c-3253-4520-aac6-d24027fc7b19" "device1"
[2021-09-16T14:10:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:10:23Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'a236592c-3253-4520-aac6-d24027fc7b19'
[2021-09-16T14:10:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "a236592c-3253-4520-aac6-d24027fc7b19"
[2021-09-16T14:10:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App a236592c-3253-4520-aac6-d24027fc7b19 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_only::version_2

**Duration**: 42.923236964s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:10:24Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T14:10:26Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDMyMzMsImlhdCI6MTYzMTgwMTQzMywianRpIjoiMTEwOGVhMzgtMDgyYy00MzI3LWJlZGYtYjkyMTJiNmU4YjNjIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzE3M2RkZDgtMzhhMi00ZGRiLWFiMWEtMzIzM2Q4M2E3NDk3Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjcxNzNkZGQ4LTM4YTItNGRkYi1hYjFhLTMyMzNkODNhNzQ5NyJ9.fJXabbVHEV-qzsm7u_doeUHFIdTnrhCMHk5R-SHrAR8
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDMyMzMsImlhdCI6MTYzMTgwMTQzMywianRpIjoiMTEwOGVhMzgtMDgyYy00MzI3LWJlZGYtYjkyMTJiNmU4YjNjIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzE3M2RkZDgtMzhhMi00ZGRiLWFiMWEtMzIzM2Q4M2E3NDk3Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjcxNzNkZGQ4LTM4YTItNGRkYi1hYjFhLTMyMzNkODNhNzQ5NyJ9.fJXabbVHEV-qzsm7u_doeUHFIdTnrhCMHk5R-SHrAR8" "--context" "system-tests"
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE3MzQsImlhdCI6MTYzMTgwMTQzNCwiYXV0aF90aW1lIjoxNjMxODAxNDI5LCJqdGkiOiJjOTJkNDcwMi00OTI5LTQ2MWMtYjIyNC0zNmMzYWJjZDgwMDUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjcxNzNkZGQ4LTM4YTItNGRkYi1hYjFhLTMyMzNkODNhNzQ5NyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3MTczZGRkOC0zOGEyLTRkZGItYWIxYS0zMjMzZDgzYTc0OTciLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.V9ku2jJyj73rSiq-1S0FNs_38N2umlLMSUmyRHwI0ZJ31XqmDe8hu0WQ2-VRGri36k8427Cy6SFYfNHTjMEBmnYpqzJz2FU1-1r6K02ixePGkcVcc2gRUfScPKe3_esTZOVGHo9kE3dHIeU3hLWoNsIv_2bcxLgclK_HpC1UFMKYlULGnLOeikBhEnetGq9DSAllbYjRYR5riL6Iq-oIpS8LO9lZHO08zZPRwfpki-h1y7hUXgczLCxEIBbdh_JNeaPbjOn-Xn9FPeywwYqfcX9aA9ZOzuiZ9MqnV2UrU13kTDMd0eHQxuiYtr42GWKBZh_7O9fM4kJV07tfZEgoww\n", stderr: "" })
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::resources::apps] Create application: 5a507d66-c231-4e04-83df-1adef3ab0c28
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "5a507d66-c231-4e04-83df-1adef3ab0c28"
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 5a507d66-c231-4e04-83df-1adef3ab0c28 created.\n", stderr: "" })
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "5a507d66-c231-4e04-83df-1adef3ab0c28"
[2021-09-16T14:10:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:10:34.733397Z\",\n    \"generation\": 1,\n    \"name\": \"5a507d66-c231-4e04-83df-1adef3ab0c28\",\n    \"resourceVersion\": \"57975a5e-c683-42d4-9ae6-2481f200563a\",\n    \"uid\": \"041448f7-bd2c-4d56-835a-1bcac071d143\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:10:34.753282006Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}", stderr: "" })
[2021-09-16T14:10:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "5a507d66-c231-4e04-83df-1adef3ab0c28"
[2021-09-16T14:10:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:10:34.733397Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"5a507d66-c231-4e04-83df-1adef3ab0c28\",\n    \"resourceVersion\": \"7e722f77-d31e-4aec-9c21-19072d91a256\",\n    \"uid\": \"041448f7-bd2c-4d56-835a-1bcac071d143\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:10:35.281677959Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:10:35.281637213Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:10:34.820588051Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:10:34.830082615Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:10:34.963024503Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:10:34.989553071Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:10:35.281607908Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:10:35.281609802Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"rO8pKL8xnoqi\",\n        \"username\": \"user-5a507d66-c231-4e04-83df-1adef3ab0c28\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:10:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "5a507d66-c231-4e04-83df-1adef3ab0c28"
[2021-09-16T14:10:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:10:34.733397Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"5a507d66-c231-4e04-83df-1adef3ab0c28\",\n    \"resourceVersion\": \"7e722f77-d31e-4aec-9c21-19072d91a256\",\n    \"uid\": \"041448f7-bd2c-4d56-835a-1bcac071d143\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:10:35.281677959Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:10:35.281637213Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:10:34.820588051Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:10:34.830082615Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:10:34.963024503Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:10:34.989553071Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:10:35.281607908Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:10:35.281609802Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"rO8pKL8xnoqi\",\n        \"username\": \"user-5a507d66-c231-4e04-83df-1adef3ab0c28\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:10:35Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:10:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "5a507d66-c231-4e04-83df-1adef3ab0c28" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T14:10:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:10:35Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:10:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:10:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE3MzQsImlhdCI6MTYzMTgwMTQzNCwiYXV0aF90aW1lIjoxNjMxODAxNDI5LCJqdGkiOiJjOTJkNDcwMi00OTI5LTQ2MWMtYjIyNC0zNmMzYWJjZDgwMDUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjcxNzNkZGQ4LTM4YTItNGRkYi1hYjFhLTMyMzNkODNhNzQ5NyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3MTczZGRkOC0zOGEyLTRkZGItYWIxYS0zMjMzZDgzYTc0OTciLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.V9ku2jJyj73rSiq-1S0FNs_38N2umlLMSUmyRHwI0ZJ31XqmDe8hu0WQ2-VRGri36k8427Cy6SFYfNHTjMEBmnYpqzJz2FU1-1r6K02ixePGkcVcc2gRUfScPKe3_esTZOVGHo9kE3dHIeU3hLWoNsIv_2bcxLgclK_HpC1UFMKYlULGnLOeikBhEnetGq9DSAllbYjRYR5riL6Iq-oIpS8LO9lZHO08zZPRwfpki-h1y7hUXgczLCxEIBbdh_JNeaPbjOn-Xn9FPeywwYqfcX9aA9ZOzuiZ9MqnV2UrU13kTDMd0eHQxuiYtr42GWKBZh_7O9fM4kJV07tfZEgoww\n", stderr: "" })
[2021-09-16T14:10:36Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T14:10:36Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:10:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:37Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:43Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:49Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:49Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:51Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:55Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:10:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:10:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:06Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T14:11:06Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:11:06Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:11:06Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:11:06Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "5a507d66-c231-4e04-83df-1adef3ab0c28" "device1"
[2021-09-16T14:11:06Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:11:06Z INFO  drogue_cloud_tests::resources::apps] Destroy application '5a507d66-c231-4e04-83df-1adef3ab0c28'
[2021-09-16T14:11:06Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "5a507d66-c231-4e04-83df-1adef3ab0c28"
[2021-09-16T14:11:06Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 5a507d66-c231-4e04-83df-1adef3ab0c28 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_only::version_3

**Duration**: 42.591721361s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:11:07Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T14:11:09Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDMyNzYsImlhdCI6MTYzMTgwMTQ3NiwianRpIjoiZmM4ZmE4YjItY2ZkOS00MjkxLTk4ZTgtYzEzZTlmNTFhODVmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYTY1MmNkYWYtNDc2Ny00Yjk3LWI4MWQtNjkxZjU3NjFkMWZiIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImE2NTJjZGFmLTQ3NjctNGI5Ny1iODFkLTY5MWY1NzYxZDFmYiJ9.18mHVJSq_7NqhjfEDXFxXUzZFfbvTXBUmynkXeMAnXc
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDMyNzYsImlhdCI6MTYzMTgwMTQ3NiwianRpIjoiZmM4ZmE4YjItY2ZkOS00MjkxLTk4ZTgtYzEzZTlmNTFhODVmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYTY1MmNkYWYtNDc2Ny00Yjk3LWI4MWQtNjkxZjU3NjFkMWZiIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImE2NTJjZGFmLTQ3NjctNGI5Ny1iODFkLTY5MWY1NzYxZDFmYiJ9.18mHVJSq_7NqhjfEDXFxXUzZFfbvTXBUmynkXeMAnXc" "--context" "system-tests"
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE3NzcsImlhdCI6MTYzMTgwMTQ3NywiYXV0aF90aW1lIjoxNjMxODAxNDcyLCJqdGkiOiIwY2MzNGUwMS01MmVhLTRmOTEtOTIxNi1lYjc2OTA5MmZkYmQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImE2NTJjZGFmLTQ3NjctNGI5Ny1iODFkLTY5MWY1NzYxZDFmYiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhNjUyY2RhZi00NzY3LTRiOTctYjgxZC02OTFmNTc2MWQxZmIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Pxsht8-WxxcSzjlY1YSPebfDg0_XhBTxSHNQ9OrRZMdgcl35zitnDFTfqUQAC3cic1Xc3lw7s7V-Ma8TAMKoMHY0l-gljGTtrapDjW6In9oPFznI-W7OXY0aDkxxCnHQvdAjtlWoWuiir_FrmnsO5ms_2Wc1KjIsFI8PsyHbhNyM4MNssJVuSvoOpuN1BNeUeO7XQ03WpzoDy8J5l-11O5idpV-uoNShHfd0Mv05rQCxSXjXgM9Dvzc_ji04i7qpUNdb9d6kKQxFqvTccsJuNJPx3_iBlCWeIiZcvJt7V75n9nrHvdFM6Bk0PlhtbjT4CP8G_fbl0M2kW6w9It5l_w\n", stderr: "" })
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::resources::apps] Create application: a055eb5e-b45b-4f22-b424-d584e12795d3
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "a055eb5e-b45b-4f22-b424-d584e12795d3"
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App a055eb5e-b45b-4f22-b424-d584e12795d3 created.\n", stderr: "" })
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a055eb5e-b45b-4f22-b424-d584e12795d3"
[2021-09-16T14:11:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:11:17.482105Z\",\n    \"generation\": 1,\n    \"name\": \"a055eb5e-b45b-4f22-b424-d584e12795d3\",\n    \"resourceVersion\": \"95c6899d-ffdd-4b2c-936f-b336a562075c\",\n    \"uid\": \"69eb8fd4-3a7b-4aa4-8624-72a7da1e049a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:11:17.497985777Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}", stderr: "" })
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a055eb5e-b45b-4f22-b424-d584e12795d3"
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:11:17.482105Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"a055eb5e-b45b-4f22-b424-d584e12795d3\",\n    \"resourceVersion\": \"4a13bbf5-874a-49b3-8543-e3d16dca860d\",\n    \"uid\": \"69eb8fd4-3a7b-4aa4-8624-72a7da1e049a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:11:18.056371596Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:11:18.056336871Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:11:17.539643943Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:11:17.547263003Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:11:17.752601284Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:11:17.762538385Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:11:18.055838089Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:11:18.055839732Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"QgpdRxFPzJmC\",\n        \"username\": \"user-a055eb5e-b45b-4f22-b424-d584e12795d3\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "a055eb5e-b45b-4f22-b424-d584e12795d3"
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:11:17.482105Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"a055eb5e-b45b-4f22-b424-d584e12795d3\",\n    \"resourceVersion\": \"4a13bbf5-874a-49b3-8543-e3d16dca860d\",\n    \"uid\": \"69eb8fd4-3a7b-4aa4-8624-72a7da1e049a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:11:18.056371596Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:11:18.056336871Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:11:17.539643943Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:11:17.547263003Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:11:17.752601284Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:11:17.762538385Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:11:18.055838089Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:11:18.055839732Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"QgpdRxFPzJmC\",\n        \"username\": \"user-a055eb5e-b45b-4f22-b424-d584e12795d3\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "a055eb5e-b45b-4f22-b424-d584e12795d3" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE3NzcsImlhdCI6MTYzMTgwMTQ3NywiYXV0aF90aW1lIjoxNjMxODAxNDcyLCJqdGkiOiIwY2MzNGUwMS01MmVhLTRmOTEtOTIxNi1lYjc2OTA5MmZkYmQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImE2NTJjZGFmLTQ3NjctNGI5Ny1iODFkLTY5MWY1NzYxZDFmYiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhNjUyY2RhZi00NzY3LTRiOTctYjgxZC02OTFmNTc2MWQxZmIiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Pxsht8-WxxcSzjlY1YSPebfDg0_XhBTxSHNQ9OrRZMdgcl35zitnDFTfqUQAC3cic1Xc3lw7s7V-Ma8TAMKoMHY0l-gljGTtrapDjW6In9oPFznI-W7OXY0aDkxxCnHQvdAjtlWoWuiir_FrmnsO5ms_2Wc1KjIsFI8PsyHbhNyM4MNssJVuSvoOpuN1BNeUeO7XQ03WpzoDy8J5l-11O5idpV-uoNShHfd0Mv05rQCxSXjXgM9Dvzc_ji04i7qpUNdb9d6kKQxFqvTccsJuNJPx3_iBlCWeIiZcvJt7V75n9nrHvdFM6Bk0PlhtbjT4CP8G_fbl0M2kW6w9It5l_w\n", stderr: "" })
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:37Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:43Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:11:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:11:49Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T14:11:49Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:11:49Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:11:49Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:11:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "a055eb5e-b45b-4f22-b424-d584e12795d3" "device1"
[2021-09-16T14:11:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:11:49Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'a055eb5e-b45b-4f22-b424-d584e12795d3'
[2021-09-16T14:11:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "a055eb5e-b45b-4f22-b424-d584e12795d3"
[2021-09-16T14:11:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App a055eb5e-b45b-4f22-b424-d584e12795d3 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ✅ tests::drg::test_drg_version

**Duration**: 11.190723666s

## ✅ tests::http::command::test_command::version_1

**Duration**: 16.763602449s

## ✅ tests::http::command::test_command::version_2

**Duration**: 18.668643002s

## ✅ tests::http::command::test_command::version_3

**Duration**: 19.237043969s

## ✅ tests::http::telemetry::test_send_telemetry_pass::version_1

**Duration**: 17.126700656s

## ✅ tests::http::telemetry::test_send_telemetry_pass::version_2

**Duration**: 17.603612238s

## ✅ tests::http::telemetry::test_send_telemetry_pass::version_3

**Duration**: 16.962035478s

## ❌ tests::http::telemetry::test_send_telemetry_user::version_1

**Duration**: 42.40509194s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:13:49Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM0MzUsImlhdCI6MTYzMTgwMTYzNSwianRpIjoiMzE0M2M4NWYtZmMwMS00YjVkLTg5NzQtMjMxMWFkNmI5M2ExIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYTc0Y2FjYzItY2E2MS00MTc1LWI2OTItNWJhNzEyNDE1ZjJhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImE3NGNhY2MyLWNhNjEtNDE3NS1iNjkyLTViYTcxMjQxNWYyYSJ9.Ab9TJN7yw3pGWyGbG_nwRJTICayZnZzYtJrfwc5YgUo
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM0MzUsImlhdCI6MTYzMTgwMTYzNSwianRpIjoiMzE0M2M4NWYtZmMwMS00YjVkLTg5NzQtMjMxMWFkNmI5M2ExIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYTc0Y2FjYzItY2E2MS00MTc1LWI2OTItNWJhNzEyNDE1ZjJhIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImE3NGNhY2MyLWNhNjEtNDE3NS1iNjkyLTViYTcxMjQxNWYyYSJ9.Ab9TJN7yw3pGWyGbG_nwRJTICayZnZzYtJrfwc5YgUo" "--context" "system-tests"
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE5MzcsImlhdCI6MTYzMTgwMTYzNywiYXV0aF90aW1lIjoxNjMxODAxNjMyLCJqdGkiOiJlMDMxOGNkZS1iOWZiLTRkZWYtYTE1Zi04YTdmMTFhYjc5OWEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImE3NGNhY2MyLWNhNjEtNDE3NS1iNjkyLTViYTcxMjQxNWYyYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhNzRjYWNjMi1jYTYxLTQxNzUtYjY5Mi01YmE3MTI0MTVmMmEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Ghuae5kUSOhxbXi0K3sXZpcFoSI_ujIg0gi7mbOvI6SKcoGiHYM_mnQEbEvNZToFg4wdlAjSh3rlkizk4nlSsEAz5_PEMbMpnUjZnBiHtrfg07zdvT_-YnuTBH6XeFQ6YpmDkS5OzR8IiqDfdgw0DGXyzQAeEZcb70KN63g5x9oMN6G5F2poKDPPMeg-Mcc_YZDBFazBKR9IQ3RJ1WFk7xXg-tocKHVmxh5T6Ii1AhDUZBy3HDNJV3iYx4ofj51J3avpr2ZuxwdvizqmtRmHq9xMQo9d_8GHEsw5GAaKuyKZaz3qqdISdtK5IZkx7n0DBrMKDbd6akE4k0HjxJnFMw\n", stderr: "" })
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::resources::apps] Create application: c69baece-bdc7-4c9b-8516-02226e376312
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "c69baece-bdc7-4c9b-8516-02226e376312"
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c69baece-bdc7-4c9b-8516-02226e376312 created.\n", stderr: "" })
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c69baece-bdc7-4c9b-8516-02226e376312"
[2021-09-16T14:13:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:13:57.424531Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"c69baece-bdc7-4c9b-8516-02226e376312\",\n    \"resourceVersion\": \"1b51d199-1dd5-405a-b39b-5656677a0ebf\",\n    \"uid\": \"274c0dc9-623c-45ec-924f-91543ff81594\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:13:57.440418985Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:13:57.440435326Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.440383449Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.440385072Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.440385803Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.440387146Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.440388388Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.440390662Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c69baece-bdc7-4c9b-8516-02226e376312"
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:13:57.424531Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"c69baece-bdc7-4c9b-8516-02226e376312\",\n    \"resourceVersion\": \"2f3c2960-50a8-481b-b4c4-d07a5ba21e8b\",\n    \"uid\": \"274c0dc9-623c-45ec-924f-91543ff81594\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:13:57.887760730Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:13:57.887787219Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.467919999Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.476113744Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.592233698Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.605410088Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.887740924Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.887742506Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"c2wvFRVi1VB8\",\n        \"username\": \"user-c69baece-bdc7-4c9b-8516-02226e376312\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c69baece-bdc7-4c9b-8516-02226e376312"
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:13:57.424531Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"c69baece-bdc7-4c9b-8516-02226e376312\",\n    \"resourceVersion\": \"2f3c2960-50a8-481b-b4c4-d07a5ba21e8b\",\n    \"uid\": \"274c0dc9-623c-45ec-924f-91543ff81594\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:13:57.887760730Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:13:57.887787219Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.467919999Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.476113744Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.592233698Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.605410088Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.887740924Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:13:57.887742506Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"c2wvFRVi1VB8\",\n        \"username\": \"user-c69baece-bdc7-4c9b-8516-02226e376312\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "c69baece-bdc7-4c9b-8516-02226e376312" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE5MzcsImlhdCI6MTYzMTgwMTYzNywiYXV0aF90aW1lIjoxNjMxODAxNjMyLCJqdGkiOiJlMDMxOGNkZS1iOWZiLTRkZWYtYTE1Zi04YTdmMTFhYjc5OWEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImE3NGNhY2MyLWNhNjEtNDE3NS1iNjkyLTViYTcxMjQxNWYyYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiJhNzRjYWNjMi1jYTYxLTQxNzUtYjY5Mi01YmE3MTI0MTVmMmEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Ghuae5kUSOhxbXi0K3sXZpcFoSI_ujIg0gi7mbOvI6SKcoGiHYM_mnQEbEvNZToFg4wdlAjSh3rlkizk4nlSsEAz5_PEMbMpnUjZnBiHtrfg07zdvT_-YnuTBH6XeFQ6YpmDkS5OzR8IiqDfdgw0DGXyzQAeEZcb70KN63g5x9oMN6G5F2poKDPPMeg-Mcc_YZDBFazBKR9IQ3RJ1WFk7xXg-tocKHVmxh5T6Ii1AhDUZBy3HDNJV3iYx4ofj51J3avpr2ZuxwdvizqmtRmHq9xMQo9d_8GHEsw5GAaKuyKZaz3qqdISdtK5IZkx7n0DBrMKDbd6akE4k0HjxJnFMw\n", stderr: "" })
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:13:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:13:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:13:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:13Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:29Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T14:14:29Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:14:29Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:14:29Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:14:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "c69baece-bdc7-4c9b-8516-02226e376312" "device1"
[2021-09-16T14:14:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:14:29Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'c69baece-bdc7-4c9b-8516-02226e376312'
[2021-09-16T14:14:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "c69baece-bdc7-4c9b-8516-02226e376312"
[2021-09-16T14:14:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c69baece-bdc7-4c9b-8516-02226e376312 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user::version_2

**Duration**: 42.731504683s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:14:32Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM0NzgsImlhdCI6MTYzMTgwMTY3OCwianRpIjoiOTU1YjhhN2YtN2ExNy00Y2RkLTk0NmItODFjNjRkNjIzODA4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzk1ODM2MjUtZGU3NS00YzYwLWJiODEtY2VhMjUzYjM1ODk3Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc5NTgzNjI1LWRlNzUtNGM2MC1iYjgxLWNlYTI1M2IzNTg5NyJ9.1DHMLLpBPIe3KR28zsWeOrkkbSW8oHW0bc10KVR02BM
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM0NzgsImlhdCI6MTYzMTgwMTY3OCwianRpIjoiOTU1YjhhN2YtN2ExNy00Y2RkLTk0NmItODFjNjRkNjIzODA4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzk1ODM2MjUtZGU3NS00YzYwLWJiODEtY2VhMjUzYjM1ODk3Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc5NTgzNjI1LWRlNzUtNGM2MC1iYjgxLWNlYTI1M2IzNTg5NyJ9.1DHMLLpBPIe3KR28zsWeOrkkbSW8oHW0bc10KVR02BM" "--context" "system-tests"
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE5ODAsImlhdCI6MTYzMTgwMTY4MCwiYXV0aF90aW1lIjoxNjMxODAxNjc1LCJqdGkiOiI2MmY4OTE0MS0wOGNlLTQ2MjgtODA2NS1hMTJmOGNjZDRiNjciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc5NTgzNjI1LWRlNzUtNGM2MC1iYjgxLWNlYTI1M2IzNTg5NyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3OTU4MzYyNS1kZTc1LTRjNjAtYmI4MS1jZWEyNTNiMzU4OTciLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.wi43FybckV3UvC-02qWnM8z3blKrAtKXQjfI2IhJidkal7LFtWczAhDRjaau45XUjMPkBxnt5EayYq5X71sZUbFZaMc73KblmIUtEKM_wKooPvcpCcMecKAPToUOQjl0u2yk6snOC6UKrhmL0mDs9oXz67nDUKvHwnBUTt4Tr18q8tdtM9KwS1eY7Rstcwe0TBihKWGD954zAGNezsAyC4bMeoyWwwYzD-oghy8SvIEQBjr9IMdMe2YudVbUtZfa8RHX6kubG2Nmt14GW7yakErKMYuJTpphzF9Gww1sWETBkv5oXeN5eA29ASyMsv32Gk-j_vEbVOtKOjMbi0MDyw\n", stderr: "" })
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::resources::apps] Create application: de4b1662-3d4b-4127-a5e8-987b2091beda
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "de4b1662-3d4b-4127-a5e8-987b2091beda"
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App de4b1662-3d4b-4127-a5e8-987b2091beda created.\n", stderr: "" })
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "de4b1662-3d4b-4127-a5e8-987b2091beda"
[2021-09-16T14:14:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:14:40.119910Z\",\n    \"generation\": 1,\n    \"name\": \"de4b1662-3d4b-4127-a5e8-987b2091beda\",\n    \"resourceVersion\": \"6b15ae6e-4b4d-4b5b-9904-2fb535d4591a\",\n    \"uid\": \"e0a8170e-43f6-491f-9a8f-d050033cd5ef\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:14:40.132771874Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}", stderr: "" })
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "de4b1662-3d4b-4127-a5e8-987b2091beda"
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:14:40.119910Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"de4b1662-3d4b-4127-a5e8-987b2091beda\",\n    \"resourceVersion\": \"f36922a4-6e02-4fb6-b18a-402a554502a2\",\n    \"uid\": \"e0a8170e-43f6-491f-9a8f-d050033cd5ef\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:14:40.770206028Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:14:40.770166283Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:14:40.185200853Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:14:40.192980585Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:14:40.300998391Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:14:40.329786450Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:14:40.770137479Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:14:40.770139362Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"v7Vcu7BCinwW\",\n        \"username\": \"user-de4b1662-3d4b-4127-a5e8-987b2091beda\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "de4b1662-3d4b-4127-a5e8-987b2091beda"
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:14:40.119910Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"de4b1662-3d4b-4127-a5e8-987b2091beda\",\n    \"resourceVersion\": \"f36922a4-6e02-4fb6-b18a-402a554502a2\",\n    \"uid\": \"e0a8170e-43f6-491f-9a8f-d050033cd5ef\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:14:40.770206028Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:14:40.770166283Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:14:40.185200853Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:14:40.192980585Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:14:40.300998391Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:14:40.329786450Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:14:40.770137479Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:14:40.770139362Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"v7Vcu7BCinwW\",\n        \"username\": \"user-de4b1662-3d4b-4127-a5e8-987b2091beda\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "de4b1662-3d4b-4127-a5e8-987b2091beda" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDE5ODAsImlhdCI6MTYzMTgwMTY4MCwiYXV0aF90aW1lIjoxNjMxODAxNjc1LCJqdGkiOiI2MmY4OTE0MS0wOGNlLTQ2MjgtODA2NS1hMTJmOGNjZDRiNjciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc5NTgzNjI1LWRlNzUtNGM2MC1iYjgxLWNlYTI1M2IzNTg5NyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3OTU4MzYyNS1kZTc1LTRjNjAtYmI4MS1jZWEyNTNiMzU4OTciLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.wi43FybckV3UvC-02qWnM8z3blKrAtKXQjfI2IhJidkal7LFtWczAhDRjaau45XUjMPkBxnt5EayYq5X71sZUbFZaMc73KblmIUtEKM_wKooPvcpCcMecKAPToUOQjl0u2yk6snOC6UKrhmL0mDs9oXz67nDUKvHwnBUTt4Tr18q8tdtM9KwS1eY7Rstcwe0TBihKWGD954zAGNezsAyC4bMeoyWwwYzD-oghy8SvIEQBjr9IMdMe2YudVbUtZfa8RHX6kubG2Nmt14GW7yakErKMYuJTpphzF9Gww1sWETBkv5oXeN5eA29ASyMsv32Gk-j_vEbVOtKOjMbi0MDyw\n", stderr: "" })
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:43Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:49Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:49Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:51Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:55Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:14:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:14:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:12Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T14:15:12Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:15:12Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:15:12Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:15:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "de4b1662-3d4b-4127-a5e8-987b2091beda" "device1"
[2021-09-16T14:15:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:15:12Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'de4b1662-3d4b-4127-a5e8-987b2091beda'
[2021-09-16T14:15:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "de4b1662-3d4b-4127-a5e8-987b2091beda"
[2021-09-16T14:15:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App de4b1662-3d4b-4127-a5e8-987b2091beda deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user::version_3

**Duration**: 42.216365284s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:15:14Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM1MjAsImlhdCI6MTYzMTgwMTcyMCwianRpIjoiNWZmYzk4NjMtOGM1NS00ODNiLWE2OTktODg3ODFkOTU4MGI5IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODlhYmM3MWEtN2U5Ni00Y2Q3LThjMDItNWYyZDcwNGFjZjI0Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijg5YWJjNzFhLTdlOTYtNGNkNy04YzAyLTVmMmQ3MDRhY2YyNCJ9.vFVs28R3mhfgz2hZ8GKwxgUMRc4LLS2phqTvNdqPu4g
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM1MjAsImlhdCI6MTYzMTgwMTcyMCwianRpIjoiNWZmYzk4NjMtOGM1NS00ODNiLWE2OTktODg3ODFkOTU4MGI5IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODlhYmM3MWEtN2U5Ni00Y2Q3LThjMDItNWYyZDcwNGFjZjI0Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijg5YWJjNzFhLTdlOTYtNGNkNy04YzAyLTVmMmQ3MDRhY2YyNCJ9.vFVs28R3mhfgz2hZ8GKwxgUMRc4LLS2phqTvNdqPu4g" "--context" "system-tests"
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDIwMjIsImlhdCI6MTYzMTgwMTcyMiwiYXV0aF90aW1lIjoxNjMxODAxNzE3LCJqdGkiOiI0ZGE2MDY5NC1mNDMzLTRiYmMtOTU5MS0yZmJlYmY3MDg0ZjIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijg5YWJjNzFhLTdlOTYtNGNkNy04YzAyLTVmMmQ3MDRhY2YyNCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4OWFiYzcxYS03ZTk2LTRjZDctOGMwMi01ZjJkNzA0YWNmMjQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.mMFpbpev7U6s-cidWVKSowIpfJCC_OF8xVOrvJRxDyHcovkerpuka5W05ljeNYuyHm3N7Rt9oKKgGqkk5Zcrk-sU5VGmlHmK8jPRqOZKtyUjDSwMjNGV87mKxeXJcf1fJAAgTarPWe73Y_RZUeQLdLnpdbqmzs3Uu7CwJQlIx0jzguPOHTiNhT-XX6EjzHDeEJZtbljI1ZJyzRSat6dxosfvK4mVZh8Vrtvpqd7PpUmxq_OdIbsvqF7104Kbgu5_-VjPOmZM4SS7nWjR6ueyOFuIFvJiq2ZgdGKClC35PuCPEEwmGugQWOlu5h9Wg3jQ7uKufQnTkWISEEGr5zQ6fA\n", stderr: "" })
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::resources::apps] Create application: 602993b0-b8a7-445e-8671-e78b9fbc5db7
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "602993b0-b8a7-445e-8671-e78b9fbc5db7"
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 602993b0-b8a7-445e-8671-e78b9fbc5db7 created.\n", stderr: "" })
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "602993b0-b8a7-445e-8671-e78b9fbc5db7"
[2021-09-16T14:15:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:15:22.418151Z\",\n    \"generation\": 0,\n    \"name\": \"602993b0-b8a7-445e-8671-e78b9fbc5db7\",\n    \"resourceVersion\": \"91705e11-4d34-4848-b74b-37c7286081dd\",\n    \"uid\": \"666189e2-49cb-4e89-8b83-7b65dffd5eea\"\n  }\n}", stderr: "" })
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "602993b0-b8a7-445e-8671-e78b9fbc5db7"
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:15:22.418151Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"602993b0-b8a7-445e-8671-e78b9fbc5db7\",\n    \"resourceVersion\": \"b6b04b55-048b-4598-ae05-be9c173e0ea5\",\n    \"uid\": \"666189e2-49cb-4e89-8b83-7b65dffd5eea\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:15:22.791624494Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:15:22.791594697Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:15:22.483621033Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:15:22.492108349Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:15:22.593918926Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:15:22.602374411Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:15:22.791568669Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:15:22.791570642Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"ySBmIpmBi5DW\",\n        \"username\": \"user-602993b0-b8a7-445e-8671-e78b9fbc5db7\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "602993b0-b8a7-445e-8671-e78b9fbc5db7"
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:15:22.418151Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"602993b0-b8a7-445e-8671-e78b9fbc5db7\",\n    \"resourceVersion\": \"b6b04b55-048b-4598-ae05-be9c173e0ea5\",\n    \"uid\": \"666189e2-49cb-4e89-8b83-7b65dffd5eea\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:15:22.791624494Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:15:22.791594697Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:15:22.483621033Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:15:22.492108349Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:15:22.593918926Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:15:22.602374411Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:15:22.791568669Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:15:22.791570642Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"ySBmIpmBi5DW\",\n        \"username\": \"user-602993b0-b8a7-445e-8671-e78b9fbc5db7\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "602993b0-b8a7-445e-8671-e78b9fbc5db7" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDIwMjIsImlhdCI6MTYzMTgwMTcyMiwiYXV0aF90aW1lIjoxNjMxODAxNzE3LCJqdGkiOiI0ZGE2MDY5NC1mNDMzLTRiYmMtOTU5MS0yZmJlYmY3MDg0ZjIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijg5YWJjNzFhLTdlOTYtNGNkNy04YzAyLTVmMmQ3MDRhY2YyNCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4OWFiYzcxYS03ZTk2LTRjZDctOGMwMi01ZjJkNzA0YWNmMjQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.mMFpbpev7U6s-cidWVKSowIpfJCC_OF8xVOrvJRxDyHcovkerpuka5W05ljeNYuyHm3N7Rt9oKKgGqkk5Zcrk-sU5VGmlHmK8jPRqOZKtyUjDSwMjNGV87mKxeXJcf1fJAAgTarPWe73Y_RZUeQLdLnpdbqmzs3Uu7CwJQlIx0jzguPOHTiNhT-XX6EjzHDeEJZtbljI1ZJyzRSat6dxosfvK4mVZh8Vrtvpqd7PpUmxq_OdIbsvqF7104Kbgu5_-VjPOmZM4SS7nWjR6ueyOFuIFvJiq2ZgdGKClC35PuCPEEwmGugQWOlu5h9Wg3jQ7uKufQnTkWISEEGr5zQ6fA\n", stderr: "" })
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:37Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:49Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:49Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:51Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:15:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:15:54Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T14:15:54Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:15:54Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:15:54Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:15:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "602993b0-b8a7-445e-8671-e78b9fbc5db7" "device1"
[2021-09-16T14:15:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:15:54Z INFO  drogue_cloud_tests::resources::apps] Destroy application '602993b0-b8a7-445e-8671-e78b9fbc5db7'
[2021-09-16T14:15:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "602993b0-b8a7-445e-8671-e78b9fbc5db7"
[2021-09-16T14:15:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 602993b0-b8a7-445e-8671-e78b9fbc5db7 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ✅ tests::http::telemetry::test_send_telemetry_user_alias::version_1

**Duration**: 18.931776935s

## ✅ tests::http::telemetry::test_send_telemetry_user_alias::version_2

**Duration**: 17.86247286s

## ✅ tests::http::telemetry::test_send_telemetry_user_alias::version_3

**Duration**: 19.035345648s

## ❌ tests::http::telemetry::test_send_telemetry_user_only::version_1

**Duration**: 42.705518984s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:16:53Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM2MTksImlhdCI6MTYzMTgwMTgxOSwianRpIjoiOWZlMWM0NDktODViNS00NTY5LWE5M2ItYWRiNWI1NmYzYTJkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzkwMjZhYzUtNGI4OC00ZmVmLTk1YjAtYTAxYTc3NzNmMTk4Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc5MDI2YWM1LTRiODgtNGZlZi05NWIwLWEwMWE3NzczZjE5OCJ9.C-r_il-2EQF2p6TEDhB0e9cP_Fs5bCA4337lyEsNG8M
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM2MTksImlhdCI6MTYzMTgwMTgxOSwianRpIjoiOWZlMWM0NDktODViNS00NTY5LWE5M2ItYWRiNWI1NmYzYTJkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNzkwMjZhYzUtNGI4OC00ZmVmLTk1YjAtYTAxYTc3NzNmMTk4Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6Ijc5MDI2YWM1LTRiODgtNGZlZi05NWIwLWEwMWE3NzczZjE5OCJ9.C-r_il-2EQF2p6TEDhB0e9cP_Fs5bCA4337lyEsNG8M" "--context" "system-tests"
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDIxMjAsImlhdCI6MTYzMTgwMTgyMCwiYXV0aF90aW1lIjoxNjMxODAxODE2LCJqdGkiOiIzYjkwMzQ5Mi1hMTMwLTQ1OTEtOTk5NS1mYWRmNGU3Mjg0MDgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc5MDI2YWM1LTRiODgtNGZlZi05NWIwLWEwMWE3NzczZjE5OCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3OTAyNmFjNS00Yjg4LTRmZWYtOTViMC1hMDFhNzc3M2YxOTgiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.t0BbZh6EgxaHO28HzA3FioCmrdbGL0sYNXf72OFIkRPGfvJu8tQCWde0h-ebJZpLRU9rW9H0JJQFDbvLIJTQ5Srs1geCXgZeHEWIXqvTi4yTL4-X1Jp8pu5BnYkkZLzleF-f-1X81dDVPd_-2b9wfOK4hY__7C-99loUl_voeaE4b1UNpo4JPiNe-GFCI8RWhcN95_mHYWS0WowKeXgbdbUEq6rVIlTwFxsdvrmun4l-hnaueSba01ZDXvpXz19jHfTMTS2mXx_SnKG3DRxDRq9L79XLkrkXNR7nexh65Y9CoSS590uugIZi1i6-eejZP-kDHgRVrZp8nIvWlVgjWw\n", stderr: "" })
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::resources::apps] Create application: 004a9cfe-b0b7-4373-b91e-10e0d70415c7
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "004a9cfe-b0b7-4373-b91e-10e0d70415c7"
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 004a9cfe-b0b7-4373-b91e-10e0d70415c7 created.\n", stderr: "" })
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "004a9cfe-b0b7-4373-b91e-10e0d70415c7"
[2021-09-16T14:17:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:17:00.947215Z\",\n    \"generation\": 0,\n    \"name\": \"004a9cfe-b0b7-4373-b91e-10e0d70415c7\",\n    \"resourceVersion\": \"2efcb566-b1da-4091-bfe1-90753b89a266\",\n    \"uid\": \"f82a93a1-7b56-4f00-b5ba-70c3e770dd01\"\n  }\n}", stderr: "" })
[2021-09-16T14:17:01Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "004a9cfe-b0b7-4373-b91e-10e0d70415c7"
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:17:00.947215Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"004a9cfe-b0b7-4373-b91e-10e0d70415c7\",\n    \"resourceVersion\": \"6d92092e-8da9-48e2-a7ee-216f9d2d5e84\",\n    \"uid\": \"f82a93a1-7b56-4f00-b5ba-70c3e770dd01\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:17:01.347659021Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:17:01.347693906Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:01.019312496Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:01.025602113Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:01.126581196Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:01.137983891Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:01.347630257Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:01.347632120Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"DvvYMve0wzlk\",\n        \"username\": \"user-004a9cfe-b0b7-4373-b91e-10e0d70415c7\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "004a9cfe-b0b7-4373-b91e-10e0d70415c7"
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:17:00.947215Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"004a9cfe-b0b7-4373-b91e-10e0d70415c7\",\n    \"resourceVersion\": \"6d92092e-8da9-48e2-a7ee-216f9d2d5e84\",\n    \"uid\": \"f82a93a1-7b56-4f00-b5ba-70c3e770dd01\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:17:01.347659021Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:17:01.347693906Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:01.019312496Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:01.025602113Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:01.126581196Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:01.137983891Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:01.347630257Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:01.347632120Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"DvvYMve0wzlk\",\n        \"username\": \"user-004a9cfe-b0b7-4373-b91e-10e0d70415c7\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "004a9cfe-b0b7-4373-b91e-10e0d70415c7" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDIxMjAsImlhdCI6MTYzMTgwMTgyMCwiYXV0aF90aW1lIjoxNjMxODAxODE2LCJqdGkiOiIzYjkwMzQ5Mi1hMTMwLTQ1OTEtOTk5NS1mYWRmNGU3Mjg0MDgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6Ijc5MDI2YWM1LTRiODgtNGZlZi05NWIwLWEwMWE3NzczZjE5OCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI3OTAyNmFjNS00Yjg4LTRmZWYtOTViMC1hMDFhNzc3M2YxOTgiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.t0BbZh6EgxaHO28HzA3FioCmrdbGL0sYNXf72OFIkRPGfvJu8tQCWde0h-ebJZpLRU9rW9H0JJQFDbvLIJTQ5Srs1geCXgZeHEWIXqvTi4yTL4-X1Jp8pu5BnYkkZLzleF-f-1X81dDVPd_-2b9wfOK4hY__7C-99loUl_voeaE4b1UNpo4JPiNe-GFCI8RWhcN95_mHYWS0WowKeXgbdbUEq6rVIlTwFxsdvrmun4l-hnaueSba01ZDXvpXz19jHfTMTS2mXx_SnKG3DRxDRq9L79XLkrkXNR7nexh65Y9CoSS590uugIZi1i6-eejZP-kDHgRVrZp8nIvWlVgjWw\n", stderr: "" })
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:12Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:13Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T14:17:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:17:32Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:17:32Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:17:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "004a9cfe-b0b7-4373-b91e-10e0d70415c7" "device1"
[2021-09-16T14:17:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:17:33Z INFO  drogue_cloud_tests::resources::apps] Destroy application '004a9cfe-b0b7-4373-b91e-10e0d70415c7'
[2021-09-16T14:17:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "004a9cfe-b0b7-4373-b91e-10e0d70415c7"
[2021-09-16T14:17:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 004a9cfe-b0b7-4373-b91e-10e0d70415c7 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user_only::version_2

**Duration**: 42.572994596s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:17:35Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM2NjIsImlhdCI6MTYzMTgwMTg2MiwianRpIjoiZmEzZGI3MTUtYTgxNC00N2JiLWJiYTEtODJmNTliZWYzYzcyIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMmU2YWNjMzQtNWU5OC00OWU4LTkyMTctZDdiOGFkNTZlNzU1Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjJlNmFjYzM0LTVlOTgtNDllOC05MjE3LWQ3YjhhZDU2ZTc1NSJ9.XrMVW2CmI2azrnZD9hmEP5ghoCNgC-rXIRsYCCgmrU4
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM2NjIsImlhdCI6MTYzMTgwMTg2MiwianRpIjoiZmEzZGI3MTUtYTgxNC00N2JiLWJiYTEtODJmNTliZWYzYzcyIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMmU2YWNjMzQtNWU5OC00OWU4LTkyMTctZDdiOGFkNTZlNzU1Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjJlNmFjYzM0LTVlOTgtNDllOC05MjE3LWQ3YjhhZDU2ZTc1NSJ9.XrMVW2CmI2azrnZD9hmEP5ghoCNgC-rXIRsYCCgmrU4" "--context" "system-tests"
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDIxNjMsImlhdCI6MTYzMTgwMTg2MywiYXV0aF90aW1lIjoxNjMxODAxODU4LCJqdGkiOiJjNzFjMDM0YS02N2U2LTQ0NjAtOTZhNS1lYjNlMGJmNzUyMmYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjJlNmFjYzM0LTVlOTgtNDllOC05MjE3LWQ3YjhhZDU2ZTc1NSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIyZTZhY2MzNC01ZTk4LTQ5ZTgtOTIxNy1kN2I4YWQ1NmU3NTUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.U9jHmf8JJzdUmdCLvSpg28ilQE2391pA2gdonmFeDnHBeYZrqIcMPwcBcQhqDmCAUEfO64IAfutM8LRCoiGDOTJr5zH4MLEFDuCtqISXCu_jUmWDwz6r2q3rZIJ-gerrhGaNI7teL0m-9fCJ3MkCUquDvOSs3CuCmcVxDX_AqAo-SGd_tfkH_XFdUlFqTbfOTi3M-ag0jjroEC0WblOkbwMl5MyHjwhDBNHnMyLx2_oLk6v2p6TRB0ywlx6JRPW0cRk7JeAFbJtwoRD8F-H7_poGPJV3dg6UDmxAGFdHmqaiJOr5VOx0WQs5uKHPCgAf6ttvL8jku0YqTwCMTYYeBw\n", stderr: "" })
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::resources::apps] Create application: 4243b413-9a8a-41ca-8d14-997d02c05adf
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "4243b413-9a8a-41ca-8d14-997d02c05adf"
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 4243b413-9a8a-41ca-8d14-997d02c05adf created.\n", stderr: "" })
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "4243b413-9a8a-41ca-8d14-997d02c05adf"
[2021-09-16T14:17:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:17:43.486374Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"4243b413-9a8a-41ca-8d14-997d02c05adf\",\n    \"resourceVersion\": \"560b983a-c17e-4210-b5de-4486d902851f\",\n    \"uid\": \"b7c7a0a3-5616-4860-b31d-e183fd5cd8e0\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:17:43.505401631Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:17:43.505417531Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.505373840Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.505375403Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.505375964Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.505376775Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.505377346Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.505379280Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "4243b413-9a8a-41ca-8d14-997d02c05adf"
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:17:43.486374Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"4243b413-9a8a-41ca-8d14-997d02c05adf\",\n    \"resourceVersion\": \"ffd43efb-09e1-4041-aace-f88c1bacfb38\",\n    \"uid\": \"b7c7a0a3-5616-4860-b31d-e183fd5cd8e0\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:17:43.906266721Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:17:43.906325591Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.537553325Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.550461896Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.639242588Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.647415736Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.906235732Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.906237766Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"iPadxCZodv5U\",\n        \"username\": \"user-4243b413-9a8a-41ca-8d14-997d02c05adf\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "4243b413-9a8a-41ca-8d14-997d02c05adf"
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:17:43.486374Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"4243b413-9a8a-41ca-8d14-997d02c05adf\",\n    \"resourceVersion\": \"ffd43efb-09e1-4041-aace-f88c1bacfb38\",\n    \"uid\": \"b7c7a0a3-5616-4860-b31d-e183fd5cd8e0\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:17:43.906266721Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:17:43.906325591Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.537553325Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.550461896Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.639242588Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.647415736Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.906235732Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:17:43.906237766Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"iPadxCZodv5U\",\n        \"username\": \"user-4243b413-9a8a-41ca-8d14-997d02c05adf\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "4243b413-9a8a-41ca-8d14-997d02c05adf" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDIxNjMsImlhdCI6MTYzMTgwMTg2MywiYXV0aF90aW1lIjoxNjMxODAxODU4LCJqdGkiOiJjNzFjMDM0YS02N2U2LTQ0NjAtOTZhNS1lYjNlMGJmNzUyMmYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjJlNmFjYzM0LTVlOTgtNDllOC05MjE3LWQ3YjhhZDU2ZTc1NSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiIyZTZhY2MzNC01ZTk4LTQ5ZTgtOTIxNy1kN2I4YWQ1NmU3NTUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.U9jHmf8JJzdUmdCLvSpg28ilQE2391pA2gdonmFeDnHBeYZrqIcMPwcBcQhqDmCAUEfO64IAfutM8LRCoiGDOTJr5zH4MLEFDuCtqISXCu_jUmWDwz6r2q3rZIJ-gerrhGaNI7teL0m-9fCJ3MkCUquDvOSs3CuCmcVxDX_AqAo-SGd_tfkH_XFdUlFqTbfOTi3M-ag0jjroEC0WblOkbwMl5MyHjwhDBNHnMyLx2_oLk6v2p6TRB0ywlx6JRPW0cRk7JeAFbJtwoRD8F-H7_poGPJV3dg6UDmxAGFdHmqaiJOr5VOx0WQs5uKHPCgAf6ttvL8jku0YqTwCMTYYeBw\n", stderr: "" })
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:17:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:49Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:49Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:51Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:17:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:17:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:12Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:13Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:15Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T14:18:15Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:18:15Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:18:15Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:18:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "4243b413-9a8a-41ca-8d14-997d02c05adf" "device1"
[2021-09-16T14:18:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:18:15Z INFO  drogue_cloud_tests::resources::apps] Destroy application '4243b413-9a8a-41ca-8d14-997d02c05adf'
[2021-09-16T14:18:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "4243b413-9a8a-41ca-8d14-997d02c05adf"
[2021-09-16T14:18:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 4243b413-9a8a-41ca-8d14-997d02c05adf deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user_only::version_3

**Duration**: 42.853548612s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T14:18:18Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM3MDQsImlhdCI6MTYzMTgwMTkwNCwianRpIjoiYjYxZjY0ZmEtNTYxOS00NjYxLWEzZmQtZmE2YmY1MzNhZjNmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODA3NGJiMGEtOGVmMC00MjAxLTg4N2YtNmI0NGRmMzZhZjdiIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjgwNzRiYjBhLThlZjAtNDIwMS04ODdmLTZiNDRkZjM2YWY3YiJ9.i1SXkgt-VyRjuwBvEq-Gbmhhk1n8VVgGG2AbkjOlaNs
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM3MDQsImlhdCI6MTYzMTgwMTkwNCwianRpIjoiYjYxZjY0ZmEtNTYxOS00NjYxLWEzZmQtZmE2YmY1MzNhZjNmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODA3NGJiMGEtOGVmMC00MjAxLTg4N2YtNmI0NGRmMzZhZjdiIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6IjgwNzRiYjBhLThlZjAtNDIwMS04ODdmLTZiNDRkZjM2YWY3YiJ9.i1SXkgt-VyRjuwBvEq-Gbmhhk1n8VVgGG2AbkjOlaNs" "--context" "system-tests"
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDIyMDYsImlhdCI6MTYzMTgwMTkwNiwiYXV0aF90aW1lIjoxNjMxODAxOTAxLCJqdGkiOiI5ZGU2MWQ4Zi1jYjM3LTQwMmQtOTQ5OC0xNWE5ZWVkYzNiYzgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjgwNzRiYjBhLThlZjAtNDIwMS04ODdmLTZiNDRkZjM2YWY3YiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4MDc0YmIwYS04ZWYwLTQyMDEtODg3Zi02YjQ0ZGYzNmFmN2IiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.iid_bSMnisE__bcFrcGQLcn7iqEo4qtf52pyhpBywVVXPOwJDRtyCfEEqVg5B9KaTNPqhg3Wd1OkB51lU5aTcuDM4bIQaqLkUoqUzfgRyy6XF3O5WfcdJ-5mf57HoGnQji6wIr8us2JPVG8rgMRta2WnagnYE2LnrWEg2Te0UIv4-y_x2BWJ_qF5UgWwHnrU_T1Q8ds8K-waAf8SK6miVKRMx1ZTc1o2a98ImAaQ8OrvvtPD4AAsRrxVXhz2Japm3R_w2F-3-ApwKGNObYJHe0pErxHaF2VPVH_Q6x72AACwGNVl_pwOWPPpL8iLpnBH7xLNsBWSjnkf7VDSK71ceQ\n", stderr: "" })
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::resources::apps] Create application: b2c36314-a564-4f3e-9117-0e03169d0483
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "b2c36314-a564-4f3e-9117-0e03169d0483"
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b2c36314-a564-4f3e-9117-0e03169d0483 created.\n", stderr: "" })
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b2c36314-a564-4f3e-9117-0e03169d0483"
[2021-09-16T14:18:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:18:26.229909Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"b2c36314-a564-4f3e-9117-0e03169d0483\",\n    \"resourceVersion\": \"cbd92212-d3a4-44a1-ae83-eda277899d4e\",\n    \"uid\": \"bdf6c06c-e5b2-494f-a0ec-de3e17eee02e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:18:26.252580053Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:18:26.252603356Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.252532283Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.252534207Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.252534827Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.252535789Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.252536340Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.252538685Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b2c36314-a564-4f3e-9117-0e03169d0483"
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:18:26.229909Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"b2c36314-a564-4f3e-9117-0e03169d0483\",\n    \"resourceVersion\": \"48cc0046-83f6-4269-88a6-e3736c5c1da3\",\n    \"uid\": \"bdf6c06c-e5b2-494f-a0ec-de3e17eee02e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:18:26.722235490Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:18:26.722269373Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.287039490Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.298751705Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.525350837Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.542089878Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.722207346Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.722209230Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"NHqDCt3bxZKV\",\n        \"username\": \"user-b2c36314-a564-4f3e-9117-0e03169d0483\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b2c36314-a564-4f3e-9117-0e03169d0483"
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:18:26.229909Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"b2c36314-a564-4f3e-9117-0e03169d0483\",\n    \"resourceVersion\": \"48cc0046-83f6-4269-88a6-e3736c5c1da3\",\n    \"uid\": \"bdf6c06c-e5b2-494f-a0ec-de3e17eee02e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:18:26.722235490Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:18:26.722269373Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.287039490Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.298751705Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.525350837Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.542089878Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.722207346Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:18:26.722209230Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"NHqDCt3bxZKV\",\n        \"username\": \"user-b2c36314-a564-4f3e-9117-0e03169d0483\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "b2c36314-a564-4f3e-9117-0e03169d0483" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlanVWWkQ5a2E3ZmhHUVdEWmN6aDhiNmZuWDdxdFVjWUgyMnJYMUdXUmxBIn0.eyJleHAiOjE2MzE4MDIyMDYsImlhdCI6MTYzMTgwMTkwNiwiYXV0aF90aW1lIjoxNjMxODAxOTAxLCJqdGkiOiI5ZGU2MWQ4Zi1jYjM3LTQwMmQtOTQ5OC0xNWE5ZWVkYzNiYzgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiYzNkMGFiOTYtNDQ4Yi00MGViLWFmY2ItODhlNTVjNjEwODk4IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjgwNzRiYjBhLThlZjAtNDIwMS04ODdmLTZiNDRkZjM2YWY3YiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJzaWQiOiI4MDc0YmIwYS04ZWYwLTQyMDEtODg3Zi02YjQ0ZGYzNmFmN2IiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.iid_bSMnisE__bcFrcGQLcn7iqEo4qtf52pyhpBywVVXPOwJDRtyCfEEqVg5B9KaTNPqhg3Wd1OkB51lU5aTcuDM4bIQaqLkUoqUzfgRyy6XF3O5WfcdJ-5mf57HoGnQji6wIr8us2JPVG8rgMRta2WnagnYE2LnrWEg2Te0UIv4-y_x2BWJ_qF5UgWwHnrU_T1Q8ds8K-waAf8SK6miVKRMx1ZTc1o2a98ImAaQ8OrvvtPD4AAsRrxVXhz2Japm3R_w2F-3-ApwKGNObYJHe0pErxHaF2VPVH_Q6x72AACwGNVl_pwOWPPpL8iLpnBH7xLNsBWSjnkf7VDSK71ceQ\n", stderr: "" })
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:27Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T14:18:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:37Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:43Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:51Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:55Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T14:18:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T14:18:58Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T14:18:58Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T14:18:58Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T14:18:58Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T14:18:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "b2c36314-a564-4f3e-9117-0e03169d0483" "device1"
[2021-09-16T14:18:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T14:18:58Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'b2c36314-a564-4f3e-9117-0e03169d0483'
[2021-09-16T14:18:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "b2c36314-a564-4f3e-9117-0e03169d0483"
[2021-09-16T14:18:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b2c36314-a564-4f3e-9117-0e03169d0483 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ✅ tests::mqtt::command::test_command::version_1

**Duration**: 12.798360842s

## ✅ tests::mqtt::command::test_command::version_2

**Duration**: 13.995023692s

## ✅ tests::mqtt::command::test_command::version_3

**Duration**: 13.042191957s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_1

**Duration**: 16.813451566s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_2

**Duration**: 17.070637151s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_3

**Duration**: 17.73270795s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_1

**Duration**: 18.148814863s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_2

**Duration**: 18.860037907s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_3

**Duration**: 17.349942269s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_1

**Duration**: 17.994165138s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_2

**Duration**: 19.679607966s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_3

**Duration**: 19.170392856s

## ❌ tests::registry::test_registry_create_and_delete

**Duration**: 12.411375434s

<details>

<summary>Test output</summary>

<pre>
[2021-09-16T14:22:24Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T14:22:32Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM5NTAsImlhdCI6MTYzMTgwMjE1MCwianRpIjoiNDAzOGE5MjctMzE1MC00ZDU1LTljYWQtMWJjNzk3NjUzMTcyIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZWNlOTQyOWItMzFlZC00MmMwLThiOTYtMTBiNDc2MmRhOGQzIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImVjZTk0MjliLTMxZWQtNDJjMC04Yjk2LTEwYjQ3NjJkYThkMyJ9.CVsNpt6d5EfS_jBYGLjfFE2zFbfFbEmJaCAigVPpsU8
[2021-09-16T14:22:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T14:22:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T14:22:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmZmQ2ZjliYy1jMmEzLTQxNTAtYjIxOS1mNjE2ZWE2NzM0NjgifQ.eyJleHAiOjE2MzE4MDM5NTAsImlhdCI6MTYzMTgwMjE1MCwianRpIjoiNDAzOGE5MjctMzE1MC00ZDU1LTljYWQtMWJjNzk3NjUzMTcyIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6ImMzZDBhYjk2LTQ0OGItNDBlYi1hZmNiLTg4ZTU1YzYxMDg5OCIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZWNlOTQyOWItMzFlZC00MmMwLThiOTYtMTBiNDc2MmRhOGQzIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCIsInNpZCI6ImVjZTk0MjliLTMxZWQtNDJjMC04Yjk2LTEwYjQ3NjJkYThkMyJ9.CVsNpt6d5EfS_jBYGLjfFE2zFbfFbEmJaCAigVPpsU8" "--context" "system-tests"
[2021-09-16T14:22:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T14:22:32Z INFO  drogue_cloud_tests::resources::apps] Create application: 3e89ea1c-f7e3-4045-8bd9-7eddc286b491
[2021-09-16T14:22:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "3e89ea1c-f7e3-4045-8bd9-7eddc286b491"
[2021-09-16T14:22:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3e89ea1c-f7e3-4045-8bd9-7eddc286b491 created.\n", stderr: "" })
[2021-09-16T14:22:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3e89ea1c-f7e3-4045-8bd9-7eddc286b491"
[2021-09-16T14:22:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:22:32.154164Z\",\n    \"generation\": 0,\n    \"name\": \"3e89ea1c-f7e3-4045-8bd9-7eddc286b491\",\n    \"resourceVersion\": \"ad22062f-70b6-4588-b555-23ac822acea3\",\n    \"uid\": \"f7061808-c996-4174-95fb-9b727aaeef90\"\n  }\n}", stderr: "" })
[2021-09-16T14:22:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3e89ea1c-f7e3-4045-8bd9-7eddc286b491"
[2021-09-16T14:22:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:22:32.154164Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"3e89ea1c-f7e3-4045-8bd9-7eddc286b491\",\n    \"resourceVersion\": \"1a8f6aec-6db5-4b9a-83ae-00bab48a6016\",\n    \"uid\": \"f7061808-c996-4174-95fb-9b727aaeef90\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:22:33.002535301Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:22:33.002580015Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:22:32.243230257Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:22:32.274200345Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:22:32.397700101Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:22:32.441984011Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:22:33.002499363Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:22:33.002501297Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"FdZFcs6kKdXU\",\n        \"username\": \"user-3e89ea1c-f7e3-4045-8bd9-7eddc286b491\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:22:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3e89ea1c-f7e3-4045-8bd9-7eddc286b491"
[2021-09-16T14:22:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T14:22:32.154164Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"3e89ea1c-f7e3-4045-8bd9-7eddc286b491\",\n    \"resourceVersion\": \"1a8f6aec-6db5-4b9a-83ae-00bab48a6016\",\n    \"uid\": \"f7061808-c996-4174-95fb-9b727aaeef90\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:22:33.002535301Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T14:22:33.002580015Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:22:32.243230257Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:22:32.274200345Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:22:32.397700101Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:22:32.441984011Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:22:33.002499363Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T14:22:33.002501297Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"FdZFcs6kKdXU\",\n        \"username\": \"user-3e89ea1c-f7e3-4045-8bd9-7eddc286b491\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T14:22:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "3e89ea1c-f7e3-4045-8bd9-7eddc286b491"
[2021-09-16T14:22:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3e89ea1c-f7e3-4045-8bd9-7eddc286b491 deleted.\n", stderr: "" })
[2021-09-16T14:22:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "3e89ea1c-f7e3-4045-8bd9-7eddc286b491"
[2021-09-16T14:22:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3e89ea1c-f7e3-4045-8bd9-7eddc286b491 deleted.\n", stderr: "" })
thread 'main' panicked at 'assertion failed: r.is_err()', src/tests/registry/mod.rs:54:5
[2021-09-16T14:22:33Z INFO  drogue_cloud_tests::resources::apps] Destroy application '3e89ea1c-f7e3-4045-8bd9-7eddc286b491'
[2021-09-16T14:22:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "3e89ea1c-f7e3-4045-8bd9-7eddc286b491"
[2021-09-16T14:22:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3e89ea1c-f7e3-4045-8bd9-7eddc286b491 deleted.\n", stderr: "" })

</pre>

</details>

## ✅ tests::registry::test_registry_create_app

**Duration**: 12.523240473s

## ✅ tests::registry::test_registry_create_app_and_device

**Duration**: 12.46211966s

## ✅ tests::registry::test_registry_create_app_and_device_twice

**Duration**: 12.634154989s

## ✅ tests::registry::test_registry_create_app_twice

**Duration**: 12.582827647s

## ✅ tests::registry::test_registry_device_create_and_delete

**Duration**: 11.6086406s
