---
title: "Test Result Report"
date: 2021-09-15T13:15:07.753036415+00:00
categories: test-report
---


| Passed | Failed | Ignored | Filtered |
| ------ | ------ | ------- | -------- |
| 24 | 12 | 0 | 0 |

# Index

| Name | Result | Duration |
| ---- | ------ | -------- |
| [init::web::test::test_web_destroy](#initwebtesttest_web_destroy) | ✅ | 3.78858029s | 
| [init::web::test::test_web_test](#initwebtesttest_web_test) | ✅ | 4.855789936s | 
| [tests::drg::test_drg_version](#testsdrgtest_drg_version) | ❌ | 10.753785778s | 
| [tests::http::telemetry::test_send_telemetry_pass::version_1](#testshttptelemetrytest_send_telemetry_passversion_1) | ✅ | 17.054200994s | 
| [tests::http::telemetry::test_send_telemetry_pass::version_2](#testshttptelemetrytest_send_telemetry_passversion_2) | ❌ | 21.862066892s | 
| [tests::http::telemetry::test_send_telemetry_pass::version_3](#testshttptelemetrytest_send_telemetry_passversion_3) | ❌ | 21.31700324s | 
| [tests::http::telemetry::test_send_telemetry_user::version_1](#testshttptelemetrytest_send_telemetry_userversion_1) | ✅ | 16.99829997s | 
| [tests::http::telemetry::test_send_telemetry_user::version_2](#testshttptelemetrytest_send_telemetry_userversion_2) | ✅ | 17.479451796s | 
| [tests::http::telemetry::test_send_telemetry_user::version_3](#testshttptelemetrytest_send_telemetry_userversion_3) | ✅ | 16.992672395s | 
| [tests::http::telemetry::test_send_telemetry_user_alias::version_1](#testshttptelemetrytest_send_telemetry_user_aliasversion_1) | ✅ | 16.104112461s | 
| [tests::http::telemetry::test_send_telemetry_user_alias::version_2](#testshttptelemetrytest_send_telemetry_user_aliasversion_2) | ✅ | 17.200245717s | 
| [tests::http::telemetry::test_send_telemetry_user_alias::version_3](#testshttptelemetrytest_send_telemetry_user_aliasversion_3) | ✅ | 16.164593176s | 
| [tests::http::telemetry::test_send_telemetry_user_only::version_1](#testshttptelemetrytest_send_telemetry_user_onlyversion_1) | ✅ | 17.638754846s | 
| [tests::http::telemetry::test_send_telemetry_user_only::version_2](#testshttptelemetrytest_send_telemetry_user_onlyversion_2) | ✅ | 17.202172342s | 
| [tests::http::telemetry::test_send_telemetry_user_only::version_3](#testshttptelemetrytest_send_telemetry_user_onlyversion_3) | ✅ | 16.152559542s | 
| [tests::mqtt::command::test_command::version_1](#testsmqttcommandtest_commandversion_1) | ❌ | 15.956260732s | 
| [tests::mqtt::command::test_command::version_2](#testsmqttcommandtest_commandversion_2) | ❌ | 16.601324566s | 
| [tests::mqtt::command::test_command::version_3](#testsmqttcommandtest_commandversion_3) | ❌ | 15.733780596s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_1](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_1integration_version_1) | ✅ | 17.494253826s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_2](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_1integration_version_2) | ✅ | 17.158761263s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_3](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_1integration_version_3) | ❌ | 21.869277752s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_1](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_2integration_version_1) | ✅ | 17.722751211s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_2](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_2integration_version_2) | ✅ | 17.221272519s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_3](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_2integration_version_3) | ✅ | 18.283220446s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_1](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_3integration_version_1) | ❌ | 20.834257569s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_2](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_3integration_version_2) | ✅ | 17.010077683s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_3](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_3integration_version_3) | ❌ | 21.725198749s | 
| [tests::registry::test_registry_create_and_delete](#testsregistrytest_registry_create_and_delete) | ✅ | 11.090872946s | 
| [tests::registry::test_registry_create_app](#testsregistrytest_registry_create_app) | ✅ | 10.488847208s | 
| [tests::registry::test_registry_create_app_and_device](#testsregistrytest_registry_create_app_and_device) | ✅ | 11.299649928s | 
| [tests::registry::test_registry_create_app_and_device_twice](#testsregistrytest_registry_create_app_and_device_twice) | ✅ | 10.019600135s | 
| [tests::registry::test_registry_create_app_twice](#testsregistrytest_registry_create_app_twice) | ✅ | 11.012171213s | 
| [tests::registry::test_registry_device_create_and_delete](#testsregistrytest_registry_device_create_and_delete) | ✅ | 11.707156975s | 

# Details

## ✅ init::web::test::test_web_destroy
**Duration**: 3.78858029s
## ✅ init::web::test::test_web_test
**Duration**: 4.855789936s
## ❌ tests::drg::test_drg_version
**Duration**: 10.753785778s

<details>

<summary>Test output</summary>

<pre>
[2021-08-20T14:40:23Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-08-20T14:40:31Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzIyMzAsImlhdCI6MTYyOTQ3MDQzMCwianRpIjoiN2U0MzdhYjEtNmJhZi00NzExLWE2ODItZTdiNGZmMTk0ZDI4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOGY1N2Q2N2QtMzk4MS00NmVlLWJmYTUtNzhlZDFmYWU1ZTk3Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.eDnQ5wJw5mj2LWaZ5ni9MzR9HW-JAN-_Eb1BKK3G118
[2021-08-20T14:40:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-08-20T14:40:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(256)), stdout: "", stderr: "Error: Error loading config file\n\nCaused by:\n    0: Unable to open configuration file. Did you log into a drogue cloud cluster ?\n    1: No such file or directory (os error 2)\n" })
[2021-08-20T14:40:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzIyMzAsImlhdCI6MTYyOTQ3MDQzMCwianRpIjoiN2U0MzdhYjEtNmJhZi00NzExLWE2ODItZTdiNGZmMTk0ZDI4IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOGY1N2Q2N2QtMzk4MS00NmVlLWJmYTUtNzhlZDFmYWU1ZTk3Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.eDnQ5wJw5mj2LWaZ5ni9MzR9HW-JAN-_Eb1BKK3G118" "--context" "system-tests"
[2021-08-20T14:40:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-08-20T14:40:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "version"
[2021-08-20T14:40:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Drg Version: 0.5.1\nConnected drogue-cloud service: v0.7.0\n", stderr: "" })
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `"Drg Version: 0.5.1\nConnected drogue-cloud service: v0.5.0\n"`,
 right: `"Drg Version: 0.5.1\nConnected drogue-cloud service: v0.7.0\n"`', src/tests/drg/mod.rs:9:5

</pre>

</details>

## ✅ tests::http::telemetry::test_send_telemetry_pass::version_1
**Duration**: 17.054200994s
## ❌ tests::http::telemetry::test_send_telemetry_pass::version_2
**Duration**: 21.862066892s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-08-20T14:41:45Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzIzMTIsImlhdCI6MTYyOTQ3MDUxMiwianRpIjoiMWQ4MGNkNzUtNzAwNS00YmNkLThlNzAtNWU2MjMwMGIwNjg2IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjg2NGJhMWYtZGRlZS00YWU3LWIwMWQtZGM2N2E1M2I0YTA1Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.ce0ys-8lMx4QiyQGG3GydhhHWBfDY1rcikTQu54GZIk
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzIzMTIsImlhdCI6MTYyOTQ3MDUxMiwianRpIjoiMWQ4MGNkNzUtNzAwNS00YmNkLThlNzAtNWU2MjMwMGIwNjg2IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjg2NGJhMWYtZGRlZS00YWU3LWIwMWQtZGM2N2E1M2I0YTA1Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.ce0ys-8lMx4QiyQGG3GydhhHWBfDY1rcikTQu54GZIk" "--context" "system-tests"
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzA4MTMsImlhdCI6MTYyOTQ3MDUxMywiYXV0aF90aW1lIjoxNjI5NDcwNTA4LCJqdGkiOiI2ZDIxYTg3ZC0xMTk2LTQ0MjktOWYzNS0xYjFmYTdiZDNiNmEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjI4NjRiYTFmLWRkZWUtNGFlNy1iMDFkLWRjNjdhNTNiNGEwNSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.nC77wKtgGYysnQ_qCeKCxMGKGQ6mAwrOkemBaC4g-E-vnab8vLwuhKl0UqY90VpzHi_bm9S-AqG9oRxTuF-DXWCWZst2y5XDToiPdzPIWSwV1RabkV9SSJ8i2SG1-9Lib9cOINqUf1jEiepxz4APBuAO5eHRBHrwFeVOIOAwXB1JvWeNJiEHh2svyHT5EisteAdyrv_lFQP-2DrQKKH3t1QrzLYzTZ1GTeWJhgcsZjFW12XAzpg25s5dovxvV63ECU8Yq2EuatAaXdSKs5_duT4ggr_PbFMe2faBetkezU1dzFUrwdMiPyqjFAFvwHpqPpJizBRFiLW-r63ZkxKL1w\n", stderr: "" })
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::resources::apps] Create application: b35531af-d24e-456d-8d45-84f4e6b74fa1
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "b35531af-d24e-456d-8d45-84f4e6b74fa1"
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b35531af-d24e-456d-8d45-84f4e6b74fa1 created.\n", stderr: "" })
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "b35531af-d24e-456d-8d45-84f4e6b74fa1" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzA4MTMsImlhdCI6MTYyOTQ3MDUxMywiYXV0aF90aW1lIjoxNjI5NDcwNTA4LCJqdGkiOiI2ZDIxYTg3ZC0xMTk2LTQ0MjktOWYzNS0xYjFmYTdiZDNiNmEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjI4NjRiYTFmLWRkZWUtNGFlNy1iMDFkLWRjNjdhNTNiNGEwNSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.nC77wKtgGYysnQ_qCeKCxMGKGQ6mAwrOkemBaC4g-E-vnab8vLwuhKl0UqY90VpzHi_bm9S-AqG9oRxTuF-DXWCWZst2y5XDToiPdzPIWSwV1RabkV9SSJ8i2SG1-9Lib9cOINqUf1jEiepxz4APBuAO5eHRBHrwFeVOIOAwXB1JvWeNJiEHh2svyHT5EisteAdyrv_lFQP-2DrQKKH3t1QrzLYzTZ1GTeWJhgcsZjFW12XAzpg25s5dovxvV63ECU8Yq2EuatAaXdSKs5_duT4ggr_PbFMe2faBetkezU1dzFUrwdMiPyqjFAFvwHpqPpJizBRFiLW-r63ZkxKL1w\n", stderr: "" })
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-08-20T14:41:53Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-08-20T14:41:58Z INFO  drogue_cloud_tests::tests::http] Sending payload
[2021-08-20T14:41:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-08-20T14:41:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-08-20T14:41:59Z INFO  drogue_cloud_tests::tests::http] Payload sent, waiting for messages
thread 'main' panicked at 'No timeout: Time elapsed', src/tests/http/mod.rs:111:10
[2021-08-20T14:42:04Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-08-20T14:42:04Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-08-20T14:42:04Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-08-20T14:42:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "b35531af-d24e-456d-8d45-84f4e6b74fa1" "device1"
[2021-08-20T14:42:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-08-20T14:42:04Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'b35531af-d24e-456d-8d45-84f4e6b74fa1'
[2021-08-20T14:42:04Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "b35531af-d24e-456d-8d45-84f4e6b74fa1"
[2021-08-20T14:42:04Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b35531af-d24e-456d-8d45-84f4e6b74fa1 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_pass::version_3
**Duration**: 21.31700324s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-08-20T14:42:07Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzIzMzMsImlhdCI6MTYyOTQ3MDUzMywianRpIjoiYjM4MzZmYzMtMjJhYi00NzQ0LTgyOGUtOTRhNzYwZjc1NzEwIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjkzNmQ1ZDMtM2IxMS00ZGU3LWFhMGMtNTllZDE5MGRlNTBmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.sr9QOsu89kXuOaozypiOHBe65J2vFZ7yQHW-gCqW070
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzIzMzMsImlhdCI6MTYyOTQ3MDUzMywianRpIjoiYjM4MzZmYzMtMjJhYi00NzQ0LTgyOGUtOTRhNzYwZjc1NzEwIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjkzNmQ1ZDMtM2IxMS00ZGU3LWFhMGMtNTllZDE5MGRlNTBmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.sr9QOsu89kXuOaozypiOHBe65J2vFZ7yQHW-gCqW070" "--context" "system-tests"
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzA4MzUsImlhdCI6MTYyOTQ3MDUzNSwiYXV0aF90aW1lIjoxNjI5NDcwNTMwLCJqdGkiOiJmNzIwZWExMy05YWVmLTQ5YmUtOTAwMS1kMjIwZDRmZGI2NzAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjI5MzZkNWQzLTNiMTEtNGRlNy1hYTBjLTU5ZWQxOTBkZTUwZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.bWsGILf_u8L8cyjJHSH0txodNH9JC-wdlYT51B-ZF3Ib7tpj3E57RPT9dOk6ri6mjeqfU6XgiUEfKpMlqy4YAHZL29A2TFdHSnI-SQ656M8gOXLBAtRr4VOTNL_QJV_vEiHbejLkpD5JUHyxcQrukvY4FbgWsx1CmUuj2OB-fb84KkuVwBdD3a9pnla6cb46x23khTRRvZBauvAkmmCcSIsbC0zb0JAkB8-9dLyzS6MwCOEkOmnze74UVycAK9jb9SbuwyImO3TNK0p0IgVbNYxga5UfakVQS9Jw9Hxpc5hAJsFV4NQ_9BrWh-96zSRH30xdVYMw67WAASe3v-eEYQ\n", stderr: "" })
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::resources::apps] Create application: bd2a4521-aa44-4567-9c73-f193f939bc8a
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "bd2a4521-aa44-4567-9c73-f193f939bc8a"
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App bd2a4521-aa44-4567-9c73-f193f939bc8a created.\n", stderr: "" })
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "bd2a4521-aa44-4567-9c73-f193f939bc8a" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzA4MzUsImlhdCI6MTYyOTQ3MDUzNSwiYXV0aF90aW1lIjoxNjI5NDcwNTMwLCJqdGkiOiJmNzIwZWExMy05YWVmLTQ5YmUtOTAwMS1kMjIwZDRmZGI2NzAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjI5MzZkNWQzLTNiMTEtNGRlNy1hYTBjLTU5ZWQxOTBkZTUwZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.bWsGILf_u8L8cyjJHSH0txodNH9JC-wdlYT51B-ZF3Ib7tpj3E57RPT9dOk6ri6mjeqfU6XgiUEfKpMlqy4YAHZL29A2TFdHSnI-SQ656M8gOXLBAtRr4VOTNL_QJV_vEiHbejLkpD5JUHyxcQrukvY4FbgWsx1CmUuj2OB-fb84KkuVwBdD3a9pnla6cb46x23khTRRvZBauvAkmmCcSIsbC0zb0JAkB8-9dLyzS6MwCOEkOmnze74UVycAK9jb9SbuwyImO3TNK0p0IgVbNYxga5UfakVQS9Jw9Hxpc5hAJsFV4NQ_9BrWh-96zSRH30xdVYMw67WAASe3v-eEYQ\n", stderr: "" })
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-08-20T14:42:15Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-08-20T14:42:20Z INFO  drogue_cloud_tests::tests::http] Sending payload
[2021-08-20T14:42:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-08-20T14:42:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-08-20T14:42:20Z INFO  drogue_cloud_tests::tests::http] Payload sent, waiting for messages
thread 'main' panicked at 'No timeout: Time elapsed', src/tests/http/mod.rs:111:10
[2021-08-20T14:42:25Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-08-20T14:42:25Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-08-20T14:42:25Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-08-20T14:42:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "bd2a4521-aa44-4567-9c73-f193f939bc8a" "device1"
[2021-08-20T14:42:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-08-20T14:42:25Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'bd2a4521-aa44-4567-9c73-f193f939bc8a'
[2021-08-20T14:42:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "bd2a4521-aa44-4567-9c73-f193f939bc8a"
[2021-08-20T14:42:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App bd2a4521-aa44-4567-9c73-f193f939bc8a deleted.\n", stderr: "" })

</pre>

</details>

## ✅ tests::http::telemetry::test_send_telemetry_user::version_1
**Duration**: 16.99829997s
## ✅ tests::http::telemetry::test_send_telemetry_user::version_2
**Duration**: 17.479451796s
## ✅ tests::http::telemetry::test_send_telemetry_user::version_3
**Duration**: 16.992672395s
## ✅ tests::http::telemetry::test_send_telemetry_user_alias::version_1
**Duration**: 16.104112461s
## ✅ tests::http::telemetry::test_send_telemetry_user_alias::version_2
**Duration**: 17.200245717s
## ✅ tests::http::telemetry::test_send_telemetry_user_alias::version_3
**Duration**: 16.164593176s
## ✅ tests::http::telemetry::test_send_telemetry_user_only::version_1
**Duration**: 17.638754846s
## ✅ tests::http::telemetry::test_send_telemetry_user_only::version_2
**Duration**: 17.202172342s
## ✅ tests::http::telemetry::test_send_telemetry_user_only::version_3
**Duration**: 16.152559542s
## ❌ tests::mqtt::command::test_command::version_1
**Duration**: 15.956260732s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-08-20T14:45:00Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzI1MDYsImlhdCI6MTYyOTQ3MDcwNiwianRpIjoiZDU0ODFmYzgtZWE4NS00YThjLTljYTYtNDBmOTk3NDAwY2Q2IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOTBjN2UzZDMtOGFlNC00NGI4LTg1MjgtMjAyNTE1NTA1OTdmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.wEu8IwQJkdv4R0bOGIYmgqgx3s_hEuICkDasGFgKo_c
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzI1MDYsImlhdCI6MTYyOTQ3MDcwNiwianRpIjoiZDU0ODFmYzgtZWE4NS00YThjLTljYTYtNDBmOTk3NDAwY2Q2IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOTBjN2UzZDMtOGFlNC00NGI4LTg1MjgtMjAyNTE1NTA1OTdmIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.wEu8IwQJkdv4R0bOGIYmgqgx3s_hEuICkDasGFgKo_c" "--context" "system-tests"
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzEwMDgsImlhdCI6MTYyOTQ3MDcwOCwiYXV0aF90aW1lIjoxNjI5NDcwNzAzLCJqdGkiOiI2MDFmMWFiYy03YTlhLTRmODYtOTUxMi03Y2U2NDViMzYyZDgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjkwYzdlM2QzLThhZTQtNDRiOC04NTI4LTIwMjUxNTUwNTk3ZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.ISU1FGr6kf25xn3XJWHvOnYYV9v2Tv08HixhJICQ1wQHLXAF8sIeDoeEcH9FPzBaJKgcdmcBA_xdSb4791cmKQAOSDN57HU7iqXkbNst-KJx48dFYYO_zE_zf0g5WM2SG102YLs3OMjrB-HMcCeJPJ8m9Ggh0oAxz_8WzkrYXc70oPAR05r8KHKBIDUgt25sRAd2R2AlfQNZT08IRlEEO6xY8diQZhINCL6W9ibZV6t61K11QAm86jDo-L1A3H8OdA9X51QAnAUyZs-y8LlNhUfSh3U38B-OMjJJbfRT7Y2-NCXtyiBf5J6htAeSR-mD3LRxeWx8R613jfVpRnbFYQ\n", stderr: "" })
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::resources::apps] Create application: bbef7a6c-1788-43bc-963a-1844ed3ad338
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "bbef7a6c-1788-43bc-963a-1844ed3ad338"
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App bbef7a6c-1788-43bc-963a-1844ed3ad338 created.\n", stderr: "" })
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "bbef7a6c-1788-43bc-963a-1844ed3ad338" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::tests::mqtt::command] Sending payload
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:45:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzEwMDgsImlhdCI6MTYyOTQ3MDcwOCwiYXV0aF90aW1lIjoxNjI5NDcwNzAzLCJqdGkiOiI2MDFmMWFiYy03YTlhLTRmODYtOTUxMi03Y2U2NDViMzYyZDgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjkwYzdlM2QzLThhZTQtNDRiOC04NTI4LTIwMjUxNTUwNTk3ZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.ISU1FGr6kf25xn3XJWHvOnYYV9v2Tv08HixhJICQ1wQHLXAF8sIeDoeEcH9FPzBaJKgcdmcBA_xdSb4791cmKQAOSDN57HU7iqXkbNst-KJx48dFYYO_zE_zf0g5WM2SG102YLs3OMjrB-HMcCeJPJ8m9Ggh0oAxz_8WzkrYXc70oPAR05r8KHKBIDUgt25sRAd2R2AlfQNZT08IRlEEO6xY8diQZhINCL6W9ibZV6t61K11QAm86jDo-L1A3H8OdA9X51QAnAUyZs-y8LlNhUfSh3U38B-OMjJJbfRT7Y2-NCXtyiBf5J6htAeSR-mD3LRxeWx8R613jfVpRnbFYQ\n", stderr: "" })
[2021-08-20T14:45:13Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-08-20T14:45:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "bbef7a6c-1788-43bc-963a-1844ed3ad338" "device1"
[2021-08-20T14:45:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-08-20T14:45:13Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'bbef7a6c-1788-43bc-963a-1844ed3ad338'
[2021-08-20T14:45:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "bbef7a6c-1788-43bc-963a-1844ed3ad338"
[2021-08-20T14:45:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App bbef7a6c-1788-43bc-963a-1844ed3ad338 deleted.\n", stderr: "" })
Error: Time elapsed
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/a178d0322ce20e33eac124758e837cbd80a6f633/library/test/src/lib.rs:193:5

</pre>

</details>

## ❌ tests::mqtt::command::test_command::version_2
**Duration**: 16.601324566s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-08-20T14:45:16Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzI1MjMsImlhdCI6MTYyOTQ3MDcyMywianRpIjoiN2ViYjc2YTEtYTQ4Zi00NmI4LWFmOGYtZTU1Y2Q1MDkwMWNmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMzVhNWZkNGYtYTdkYi00NzYxLWIzZGQtZGIzYzk1N2JlMTdkIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.fojv6V3TmeuslUdMp5dVPYqXJpxJs0hTb-pc1NPY02g
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzI1MjMsImlhdCI6MTYyOTQ3MDcyMywianRpIjoiN2ViYjc2YTEtYTQ4Zi00NmI4LWFmOGYtZTU1Y2Q1MDkwMWNmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMzVhNWZkNGYtYTdkYi00NzYxLWIzZGQtZGIzYzk1N2JlMTdkIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.fojv6V3TmeuslUdMp5dVPYqXJpxJs0hTb-pc1NPY02g" "--context" "system-tests"
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzEwMjQsImlhdCI6MTYyOTQ3MDcyNCwiYXV0aF90aW1lIjoxNjI5NDcwNzE5LCJqdGkiOiIzY2ViMzZhYi01N2E5LTQzYTEtYTNhZS1kNzljYjhhYmJkNjciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjM1YTVmZDRmLWE3ZGItNDc2MS1iM2RkLWRiM2M5NTdiZTE3ZCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.L3thS5JfPRTOFqQK2SIBINoPfXf-7ilGH7b39psSvdS38iioZG_0FbmVlpmWzW30QxDy7xW6e7VowKhaowk1xCGoGrmNYr5qajN_a3R1UVaUn0aS3XS6zB7_QA4fPWDLY2XPLkFZi9i8gcf368J7tsJ23ySKv-bPHj-vXDuFlFXucCYx2XosidA0jRmeVSWbHJR5iE2d_6gJtvVZir8eLNIWII1nAEWSKbDDWY04UbN_08dezMp_6h20FgL5W4vuKBGOBpCmmw_nnY6GYXY3FP2smWNvHhravRL1vnSTiGFcQKJ3Z9EMV4CIC-x9mi152fXE8k8MJIQx3cig8t0hQA\n", stderr: "" })
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::resources::apps] Create application: 33c410db-118b-47c3-96ad-084d53d2925f
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "33c410db-118b-47c3-96ad-084d53d2925f"
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 33c410db-118b-47c3-96ad-084d53d2925f created.\n", stderr: "" })
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-08-20T14:45:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "33c410db-118b-47c3-96ad-084d53d2925f" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-08-20T14:45:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-08-20T14:45:25Z INFO  drogue_cloud_tests::tests::mqtt::command] Sending payload
[2021-08-20T14:45:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:45:25Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzEwMjQsImlhdCI6MTYyOTQ3MDcyNCwiYXV0aF90aW1lIjoxNjI5NDcwNzE5LCJqdGkiOiIzY2ViMzZhYi01N2E5LTQzYTEtYTNhZS1kNzljYjhhYmJkNjciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjM1YTVmZDRmLWE3ZGItNDc2MS1iM2RkLWRiM2M5NTdiZTE3ZCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.L3thS5JfPRTOFqQK2SIBINoPfXf-7ilGH7b39psSvdS38iioZG_0FbmVlpmWzW30QxDy7xW6e7VowKhaowk1xCGoGrmNYr5qajN_a3R1UVaUn0aS3XS6zB7_QA4fPWDLY2XPLkFZi9i8gcf368J7tsJ23ySKv-bPHj-vXDuFlFXucCYx2XosidA0jRmeVSWbHJR5iE2d_6gJtvVZir8eLNIWII1nAEWSKbDDWY04UbN_08dezMp_6h20FgL5W4vuKBGOBpCmmw_nnY6GYXY3FP2smWNvHhravRL1vnSTiGFcQKJ3Z9EMV4CIC-x9mi152fXE8k8MJIQx3cig8t0hQA\n", stderr: "" })
[2021-08-20T14:45:30Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-08-20T14:45:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "33c410db-118b-47c3-96ad-084d53d2925f" "device1"
[2021-08-20T14:45:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-08-20T14:45:30Z INFO  drogue_cloud_tests::resources::apps] Destroy application '33c410db-118b-47c3-96ad-084d53d2925f'
[2021-08-20T14:45:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "33c410db-118b-47c3-96ad-084d53d2925f"
[2021-08-20T14:45:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 33c410db-118b-47c3-96ad-084d53d2925f deleted.\n", stderr: "" })
Error: Time elapsed
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/a178d0322ce20e33eac124758e837cbd80a6f633/library/test/src/lib.rs:193:5

</pre>

</details>

## ❌ tests::mqtt::command::test_command::version_3
**Duration**: 15.733780596s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-08-20T14:45:33Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzI1MzgsImlhdCI6MTYyOTQ3MDczOCwianRpIjoiNzNkMGQwOGEtMWQ5Ni00YzkwLTllNmQtNjMyMmY1MjUzYjY1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYmM0NzcwODAtZTYxNi00MDU2LThlOWItZGNjMGExMDVjMDQ5Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.ArvLpC3Y4pcdUwCFqbGKw4gs-WVvk_mC-ZmLe7bhCHI
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzI1MzgsImlhdCI6MTYyOTQ3MDczOCwianRpIjoiNzNkMGQwOGEtMWQ5Ni00YzkwLTllNmQtNjMyMmY1MjUzYjY1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYmM0NzcwODAtZTYxNi00MDU2LThlOWItZGNjMGExMDVjMDQ5Iiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.ArvLpC3Y4pcdUwCFqbGKw4gs-WVvk_mC-ZmLe7bhCHI" "--context" "system-tests"
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzEwNDAsImlhdCI6MTYyOTQ3MDc0MCwiYXV0aF90aW1lIjoxNjI5NDcwNzM1LCJqdGkiOiJiN2UwOTZkYy01ZTBkLTQ3OGYtYjRjYy0zOTczNDhmNGJmNTciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImJjNDc3MDgwLWU2MTYtNDA1Ni04ZTliLWRjYzBhMTA1YzA0OSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.eRXLGZz2nlUdSjjowkQoE72-F8lXby4f3cEzhi2uDwF8mhZ34jsZlRgKH3LYu_pR8AfaDM5bhhnEVKd6UCArel8FybGrF3DwytgfnHIYwqnFC5hQky83nooP4_4K3EgmLmtWqnLFt7yHno04GxuaF6DV8OtQVC448ufW1RpepsSs0sdEQjpc6aBiOjSe0pqRT-wYNTde3qFuH8g5iRDq7S1Vi9ZQwsCquz4aouVweSad0PcWr_CXFtw4bijwKcRjFMTqtrgj9U1mspf87BE11R4MO8sHdjTvogMoCVzPLF2mF_VqBUJ7IbhU0QaSTw5wzbePnDa8dAihu2UMMssw8g\n", stderr: "" })
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::resources::apps] Create application: 5d4f237b-a11c-4258-8d2d-3807234d1a5c
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "5d4f237b-a11c-4258-8d2d-3807234d1a5c"
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 5d4f237b-a11c-4258-8d2d-3807234d1a5c created.\n", stderr: "" })
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "5d4f237b-a11c-4258-8d2d-3807234d1a5c" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::tests::mqtt::command] Sending payload
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:45:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzEwNDAsImlhdCI6MTYyOTQ3MDc0MCwiYXV0aF90aW1lIjoxNjI5NDcwNzM1LCJqdGkiOiJiN2UwOTZkYy01ZTBkLTQ3OGYtYjRjYy0zOTczNDhmNGJmNTciLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImJjNDc3MDgwLWU2MTYtNDA1Ni04ZTliLWRjYzBhMTA1YzA0OSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.eRXLGZz2nlUdSjjowkQoE72-F8lXby4f3cEzhi2uDwF8mhZ34jsZlRgKH3LYu_pR8AfaDM5bhhnEVKd6UCArel8FybGrF3DwytgfnHIYwqnFC5hQky83nooP4_4K3EgmLmtWqnLFt7yHno04GxuaF6DV8OtQVC448ufW1RpepsSs0sdEQjpc6aBiOjSe0pqRT-wYNTde3qFuH8g5iRDq7S1Vi9ZQwsCquz4aouVweSad0PcWr_CXFtw4bijwKcRjFMTqtrgj9U1mspf87BE11R4MO8sHdjTvogMoCVzPLF2mF_VqBUJ7IbhU0QaSTw5wzbePnDa8dAihu2UMMssw8g\n", stderr: "" })
[2021-08-20T14:45:46Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-08-20T14:45:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "5d4f237b-a11c-4258-8d2d-3807234d1a5c" "device1"
[2021-08-20T14:45:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-08-20T14:45:46Z INFO  drogue_cloud_tests::resources::apps] Destroy application '5d4f237b-a11c-4258-8d2d-3807234d1a5c'
[2021-08-20T14:45:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "5d4f237b-a11c-4258-8d2d-3807234d1a5c"
[2021-08-20T14:45:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 5d4f237b-a11c-4258-8d2d-3807234d1a5c deleted.\n", stderr: "" })
Error: Time elapsed
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/a178d0322ce20e33eac124758e837cbd80a6f633/library/test/src/lib.rs:193:5

</pre>

</details>

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_1
**Duration**: 17.494253826s
## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_2
**Duration**: 17.158761263s
## ❌ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_3
**Duration**: 21.869277752s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-08-20T14:46:23Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzI1OTAsImlhdCI6MTYyOTQ3MDc5MCwianRpIjoiZmE0NjVkNDEtMmNkNi00ODg5LWFmZmEtNWFlNWNjNTg4YTYzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiN2I5ZjMzMTMtOTI2YS00MDQ5LWE0YzAtNzE5N2U5YjFhMTkyIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.8hdzaRhmfamJHt9WXdQrEvBhInNCimiPSJiu2aYhIkA
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzI1OTAsImlhdCI6MTYyOTQ3MDc5MCwianRpIjoiZmE0NjVkNDEtMmNkNi00ODg5LWFmZmEtNWFlNWNjNTg4YTYzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiN2I5ZjMzMTMtOTI2YS00MDQ5LWE0YzAtNzE5N2U5YjFhMTkyIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.8hdzaRhmfamJHt9WXdQrEvBhInNCimiPSJiu2aYhIkA" "--context" "system-tests"
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzEwOTIsImlhdCI6MTYyOTQ3MDc5MiwiYXV0aF90aW1lIjoxNjI5NDcwNzg2LCJqdGkiOiIwMTkzOGYyMi1jZjk3LTQyMjQtOTc4OS1jNGM4ZmI4MDRiYjAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjdiOWYzMzEzLTkyNmEtNDA0OS1hNGMwLTcxOTdlOWIxYTE5MiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.QxWgYn8XWAosDyW4UgyBfw6AbKRkA7yuGGvA7o-_12-U1RzqL--XIBTE6357ZUCd_6cumsy3jDOc91acasNdYTlLm5XiZWqfboI2aGvO7DbvcBCuFa9Z_ZghlaAo7NSCMoBGT8KItjbSxoj1wO7dOjzrjjxSv46pUw9yH0cATS2vNBZSqJfK6_P5zZ1OyyS6aAZjAU9JyDpWDnrDsHRfheesa9epEzC6YWK0POawWq219-tlejVdOFXwcxrnE4kF2MOwQEDY5bxWkUJRA5SoddavfvkF1MC4yKabsLoHtme8Gujh_bY0-I7Ri3Ug3XG-xO6iozOO5Hcm7FWyN7tO-Q\n", stderr: "" })
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::resources::apps] Create application: c6bf688e-fc55-4bbe-82a7-3b3dff965eca
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "c6bf688e-fc55-4bbe-82a7-3b3dff965eca"
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c6bf688e-fc55-4bbe-82a7-3b3dff965eca created.\n", stderr: "" })
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "c6bf688e-fc55-4bbe-82a7-3b3dff965eca" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::tests::mqtt] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzEwOTIsImlhdCI6MTYyOTQ3MDc5MiwiYXV0aF90aW1lIjoxNjI5NDcwNzg2LCJqdGkiOiIwMTkzOGYyMi1jZjk3LTQyMjQtOTc4OS1jNGM4ZmI4MDRiYjAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjdiOWYzMzEzLTkyNmEtNDA0OS1hNGMwLTcxOTdlOWIxYTE5MiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.QxWgYn8XWAosDyW4UgyBfw6AbKRkA7yuGGvA7o-_12-U1RzqL--XIBTE6357ZUCd_6cumsy3jDOc91acasNdYTlLm5XiZWqfboI2aGvO7DbvcBCuFa9Z_ZghlaAo7NSCMoBGT8KItjbSxoj1wO7dOjzrjjxSv46pUw9yH0cATS2vNBZSqJfK6_P5zZ1OyyS6aAZjAU9JyDpWDnrDsHRfheesa9epEzC6YWK0POawWq219-tlejVdOFXwcxrnE4kF2MOwQEDY5bxWkUJRA5SoddavfvkF1MC4yKabsLoHtme8Gujh_bY0-I7Ri3Ug3XG-xO6iozOO5Hcm7FWyN7tO-Q\n", stderr: "" })
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-08-20T14:46:32Z INFO  drogue_cloud_tests::tests::mqtt] Receiver created
[2021-08-20T14:46:37Z INFO  drogue_cloud_tests::tests::mqtt] Sending payload
[2021-08-20T14:46:37Z INFO  drogue_cloud_tests::tests::mqtt] Payload sent, waiting for messages
thread 'main' panicked at 'No timeout: Time elapsed', src/tests/mqtt/mod.rs:107:10
[2021-08-20T14:46:42Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-08-20T14:46:42Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-08-20T14:46:42Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-08-20T14:46:42Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "c6bf688e-fc55-4bbe-82a7-3b3dff965eca" "device1"
[2021-08-20T14:46:42Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-08-20T14:46:42Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'c6bf688e-fc55-4bbe-82a7-3b3dff965eca'
[2021-08-20T14:46:42Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "c6bf688e-fc55-4bbe-82a7-3b3dff965eca"
[2021-08-20T14:46:42Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c6bf688e-fc55-4bbe-82a7-3b3dff965eca deleted.\n", stderr: "" })

</pre>

</details>

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_1
**Duration**: 17.722751211s
## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_2
**Duration**: 17.221272519s
## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_3
**Duration**: 18.283220446s
## ❌ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_1
**Duration**: 20.834257569s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-08-20T14:47:38Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzI2NjQsImlhdCI6MTYyOTQ3MDg2NCwianRpIjoiZjk4NDEzZGUtOGE5ZS00NzdiLWJiOTctYWZiNGRhZWZmYmQ1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMzljN2ViMmItODdiYi00OTNmLWJjZjQtZjhlMTZmNmI1NGNjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.AByndZfOQQiRNFaOinCKM_TOjEnDyRPvzaX0JnIpZKw
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzI2NjQsImlhdCI6MTYyOTQ3MDg2NCwianRpIjoiZjk4NDEzZGUtOGE5ZS00NzdiLWJiOTctYWZiNGRhZWZmYmQ1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMzljN2ViMmItODdiYi00OTNmLWJjZjQtZjhlMTZmNmI1NGNjIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.AByndZfOQQiRNFaOinCKM_TOjEnDyRPvzaX0JnIpZKw" "--context" "system-tests"
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzExNjYsImlhdCI6MTYyOTQ3MDg2NiwiYXV0aF90aW1lIjoxNjI5NDcwODYxLCJqdGkiOiI1NzU4NDE0Zi00OGU2LTRhNjItODQyNi00MjY5NDk4MmVlNDYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjM5YzdlYjJiLTg3YmItNDkzZi1iY2Y0LWY4ZTE2ZjZiNTRjYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.Dna5c0CRtIgKdyw6g2lnezD5PAy4VgLVVM3CwDHDhx8Tgq0JNVwtNCgIuXD3etwF2iYYhtleePK8acrZfgTWcj4SJYnPd8ZXWozyC_kOMCCNVTEfX6f6peVhtr57mPgPHI3w-K4h9luUbhH2BenQZ3NGS_78MxLRXJlxR2DeqWwxV8Y4YInpks9dOEnHWztCRfI6i3LfrpF4DfHpmqzfucgZ3Kfsp8Cb5gdZshE5nBgqc6k2Wadg3-HwN95fmLN80Vg70Ocw715RpTbAlTLLWX1uAn-2TFx3RF9PWwQK00xG8IlDkU3CGFE_e10Hmswjob20AA6S9LQt8a-TcU-f_Q\n", stderr: "" })
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::resources::apps] Create application: 35f59c3d-81e1-49b5-9581-0014447a8b86
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "35f59c3d-81e1-49b5-9581-0014447a8b86"
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 35f59c3d-81e1-49b5-9581-0014447a8b86 created.\n", stderr: "" })
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "35f59c3d-81e1-49b5-9581-0014447a8b86" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::tests::mqtt] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzExNjYsImlhdCI6MTYyOTQ3MDg2NiwiYXV0aF90aW1lIjoxNjI5NDcwODYxLCJqdGkiOiI1NzU4NDE0Zi00OGU2LTRhNjItODQyNi00MjY5NDk4MmVlNDYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjM5YzdlYjJiLTg3YmItNDkzZi1iY2Y0LWY4ZTE2ZjZiNTRjYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.Dna5c0CRtIgKdyw6g2lnezD5PAy4VgLVVM3CwDHDhx8Tgq0JNVwtNCgIuXD3etwF2iYYhtleePK8acrZfgTWcj4SJYnPd8ZXWozyC_kOMCCNVTEfX6f6peVhtr57mPgPHI3w-K4h9luUbhH2BenQZ3NGS_78MxLRXJlxR2DeqWwxV8Y4YInpks9dOEnHWztCRfI6i3LfrpF4DfHpmqzfucgZ3Kfsp8Cb5gdZshE5nBgqc6k2Wadg3-HwN95fmLN80Vg70Ocw715RpTbAlTLLWX1uAn-2TFx3RF9PWwQK00xG8IlDkU3CGFE_e10Hmswjob20AA6S9LQt8a-TcU-f_Q\n", stderr: "" })
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::tests::mqtt] Receiver created
[2021-08-20T14:47:46Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-08-20T14:47:51Z INFO  drogue_cloud_tests::tests::mqtt] Sending payload
[2021-08-20T14:47:51Z INFO  drogue_cloud_tests::tests::mqtt] Payload sent, waiting for messages
thread 'main' panicked at 'No timeout: Time elapsed', src/tests/mqtt/mod.rs:107:10
[2021-08-20T14:47:56Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-08-20T14:47:56Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-08-20T14:47:56Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-08-20T14:47:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "35f59c3d-81e1-49b5-9581-0014447a8b86" "device1"
[2021-08-20T14:47:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-08-20T14:47:56Z INFO  drogue_cloud_tests::resources::apps] Destroy application '35f59c3d-81e1-49b5-9581-0014447a8b86'
[2021-08-20T14:47:56Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "35f59c3d-81e1-49b5-9581-0014447a8b86"
[2021-08-20T14:47:56Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 35f59c3d-81e1-49b5-9581-0014447a8b86 deleted.\n", stderr: "" })

</pre>

</details>

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_2
**Duration**: 17.010077683s
## ❌ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_3
**Duration**: 21.725198749s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-08-20T14:48:16Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzI3MDIsImlhdCI6MTYyOTQ3MDkwMiwianRpIjoiZDA4NTQ2MTQtOTI0YS00YWY1LTkwOGQtMjMwODM4MDNlZTkzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjM5NjYzMGEtYzI2MS00NjZiLTgyNDMtM2M2ODNmMjI4MWQwIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.LQcBNpsFd7DdFMacneHr_admusyOsWqekwIoWfQeNqE
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI1NjI3ODU5Yi1jYTQ4LTQwOTctOGEzNC00ZmU0OTk2NmJhNWUifQ.eyJleHAiOjE2Mjk0NzI3MDIsImlhdCI6MTYyOTQ3MDkwMiwianRpIjoiZDA4NTQ2MTQtOTI0YS00YWY1LTkwOGQtMjMwODM4MDNlZTkzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6IjJhODk1MzE3LWZhZTQtNDUxOS1hNDU0LTUxOGQ0MmRhMTA0NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjM5NjYzMGEtYzI2MS00NjZiLTgyNDMtM2M2ODNmMjI4MWQwIiwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCJ9.LQcBNpsFd7DdFMacneHr_admusyOsWqekwIoWfQeNqE" "--context" "system-tests"
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzEyMDQsImlhdCI6MTYyOTQ3MDkwNCwiYXV0aF90aW1lIjoxNjI5NDcwODk5LCJqdGkiOiIwYzM0NTIzYy0yMjg0LTQ1MGYtODRkMi02ZGFmOGRiMDVlYjIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImYzOTY2MzBhLWMyNjEtNDY2Yi04MjQzLTNjNjgzZjIyODFkMCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.QXelGNJwOQ3ZI_9BujXA2E_P0QZ4_Oa-sMQTVM3GeGm2WDpbEBXHX5_IJ9GAyt9OdMgpvkBieuzbHoJ-fbbV8wrqXAjn2Ir4wlAA67-yHV3mOTSaAzqhNM3JDVsXg4M2EDVv6ovpQzCZgxr5US5sB0jtIiRW8q27ODS2AZZZnV79QvnGdfRtK7YsVSBvl9i2CRlUs25nnQj1cGfvgLAeoYsnAz_uNRXJoaS4jnuxNOvSoOqq2HoBmYJDcg7ZzNXAHivx9Ge3nS0mio4Zj-gjHV5CbFOgT52C4S6iK_60AcYZyoWngB6mjSx5wy9lwZAAlNEtHMWgwaGkcQ5Tml0xNQ\n", stderr: "" })
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::resources::apps] Create application: c034c5a9-02c3-499c-bbe2-f45e4cf71d7a
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "c034c5a9-02c3-499c-bbe2-f45e4cf71d7a"
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c034c5a9-02c3-499c-bbe2-f45e4cf71d7a created.\n", stderr: "" })
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "c034c5a9-02c3-499c-bbe2-f45e4cf71d7a" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::tests::mqtt] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJLQXJkdXpNUTM5Y1Z3M1RQZWJORjE1Y3BzY005T1Z1Y2EzdzJ3T0pYejMwIn0.eyJleHAiOjE2Mjk0NzEyMDQsImlhdCI6MTYyOTQ3MDkwNCwiYXV0aF90aW1lIjoxNjI5NDcwODk5LCJqdGkiOiIwYzM0NTIzYy0yMjg0LTQ1MGYtODRkMi02ZGFmOGRiMDVlYjIiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiMmE4OTUzMTctZmFlNC00NTE5LWE0NTQtNTE4ZDQyZGExMDQ2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImYzOTY2MzBhLWMyNjEtNDY2Yi04MjQzLTNjNjgzZjIyODFkMCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJtYW5hZ2UtdXNlcnMiXX0sImdyYWZhbmEiOnsicm9sZXMiOlsiZ3JhZmFuYS1lZGl0b3IiLCJncmFmYW5hLWFkbWluIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.QXelGNJwOQ3ZI_9BujXA2E_P0QZ4_Oa-sMQTVM3GeGm2WDpbEBXHX5_IJ9GAyt9OdMgpvkBieuzbHoJ-fbbV8wrqXAjn2Ir4wlAA67-yHV3mOTSaAzqhNM3JDVsXg4M2EDVv6ovpQzCZgxr5US5sB0jtIiRW8q27ODS2AZZZnV79QvnGdfRtK7YsVSBvl9i2CRlUs25nnQj1cGfvgLAeoYsnAz_uNRXJoaS4jnuxNOvSoOqq2HoBmYJDcg7ZzNXAHivx9Ge3nS0mio4Zj-gjHV5CbFOgT52C4S6iK_60AcYZyoWngB6mjSx5wy9lwZAAlNEtHMWgwaGkcQ5Tml0xNQ\n", stderr: "" })
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::tests::mqtt] Receiver created
[2021-08-20T14:48:24Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-08-20T14:48:29Z INFO  drogue_cloud_tests::tests::mqtt] Sending payload
[2021-08-20T14:48:29Z INFO  drogue_cloud_tests::tests::mqtt] Payload sent, waiting for messages
thread 'main' panicked at 'No timeout: Time elapsed', src/tests/mqtt/mod.rs:107:10
[2021-08-20T14:48:34Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-08-20T14:48:34Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-08-20T14:48:35Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-08-20T14:48:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "c034c5a9-02c3-499c-bbe2-f45e4cf71d7a" "device1"
[2021-08-20T14:48:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-08-20T14:48:35Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'c034c5a9-02c3-499c-bbe2-f45e4cf71d7a'
[2021-08-20T14:48:35Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "c034c5a9-02c3-499c-bbe2-f45e4cf71d7a"
[2021-08-20T14:48:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c034c5a9-02c3-499c-bbe2-f45e4cf71d7a deleted.\n", stderr: "" })

</pre>

</details>

## ✅ tests::registry::test_registry_create_and_delete
**Duration**: 11.090872946s
## ✅ tests::registry::test_registry_create_app
**Duration**: 10.488847208s
## ✅ tests::registry::test_registry_create_app_and_device
**Duration**: 11.299649928s
## ✅ tests::registry::test_registry_create_app_and_device_twice
**Duration**: 10.019600135s
## ✅ tests::registry::test_registry_create_app_twice
**Duration**: 11.012171213s
## ✅ tests::registry::test_registry_device_create_and_delete
**Duration**: 11.707156975s
