---
title: "Test Result 1241436267"
date: 2021-09-16T12:51:18.256460567+00:00
categories: test-report
---


| Passed | Failed | Ignored | Filtered |
| ------ | ------ | ------- | -------- |
| 29 | 22 | 0 | 0 |


# Index

| Name | Result | Duration |
| ---- | ------ | -------- |
| [init::web::test::test_web_destroy](#initwebtesttest_web_destroy) | ✅ | 7.006202935s | 
| [init::web::test::test_web_test](#initwebtesttest_web_test) | ✅ | 6.252831317s | 
| [tests::coap::command::test_command::version_1](#testscoapcommandtest_commandversion_1) | ❌ | 55.7742835s | 
| [tests::coap::command::test_command::version_2](#testscoapcommandtest_commandversion_2) | ❌ | 54.661733278s | 
| [tests::coap::command::test_command::version_3](#testscoapcommandtest_commandversion_3) | ❌ | 55.720911012s | 
| [tests::coap::telemetry::test_send_telemetry_pass::version_1](#testscoaptelemetrytest_send_telemetry_passversion_1) | ❌ | 53.041188012s | 
| [tests::coap::telemetry::test_send_telemetry_pass::version_2](#testscoaptelemetrytest_send_telemetry_passversion_2) | ❌ | 55.078501193s | 
| [tests::coap::telemetry::test_send_telemetry_pass::version_3](#testscoaptelemetrytest_send_telemetry_passversion_3) | ❌ | 54.161910238s | 
| [tests::coap::telemetry::test_send_telemetry_user::version_1](#testscoaptelemetrytest_send_telemetry_userversion_1) | ❌ | 44.472384308s | 
| [tests::coap::telemetry::test_send_telemetry_user::version_2](#testscoaptelemetrytest_send_telemetry_userversion_2) | ❌ | 49.38000755s | 
| [tests::coap::telemetry::test_send_telemetry_user::version_3](#testscoaptelemetrytest_send_telemetry_userversion_3) | ❌ | 42.715339358s | 
| [tests::coap::telemetry::test_send_telemetry_user_alias::version_1](#testscoaptelemetrytest_send_telemetry_user_aliasversion_1) | ❌ | 53.159013559s | 
| [tests::coap::telemetry::test_send_telemetry_user_alias::version_2](#testscoaptelemetrytest_send_telemetry_user_aliasversion_2) | ❌ | 53.079673294s | 
| [tests::coap::telemetry::test_send_telemetry_user_alias::version_3](#testscoaptelemetrytest_send_telemetry_user_aliasversion_3) | ❌ | 53.33935181s | 
| [tests::coap::telemetry::test_send_telemetry_user_only::version_1](#testscoaptelemetrytest_send_telemetry_user_onlyversion_1) | ❌ | 43.592733196s | 
| [tests::coap::telemetry::test_send_telemetry_user_only::version_2](#testscoaptelemetrytest_send_telemetry_user_onlyversion_2) | ❌ | 43.262767884s | 
| [tests::coap::telemetry::test_send_telemetry_user_only::version_3](#testscoaptelemetrytest_send_telemetry_user_onlyversion_3) | ❌ | 42.878923303s | 
| [tests::drg::test_drg_version](#testsdrgtest_drg_version) | ✅ | 11.294011383s | 
| [tests::http::command::test_command::version_1](#testshttpcommandtest_commandversion_1) | ✅ | 18.646347064s | 
| [tests::http::command::test_command::version_2](#testshttpcommandtest_commandversion_2) | ✅ | 20.141299731s | 
| [tests::http::command::test_command::version_3](#testshttpcommandtest_commandversion_3) | ✅ | 18.852711999s | 
| [tests::http::telemetry::test_send_telemetry_pass::version_1](#testshttptelemetrytest_send_telemetry_passversion_1) | ✅ | 20.455365486s | 
| [tests::http::telemetry::test_send_telemetry_pass::version_2](#testshttptelemetrytest_send_telemetry_passversion_2) | ✅ | 18.445226872s | 
| [tests::http::telemetry::test_send_telemetry_pass::version_3](#testshttptelemetrytest_send_telemetry_passversion_3) | ✅ | 18.159205854s | 
| [tests::http::telemetry::test_send_telemetry_user::version_1](#testshttptelemetrytest_send_telemetry_userversion_1) | ❌ | 42.801535311s | 
| [tests::http::telemetry::test_send_telemetry_user::version_2](#testshttptelemetrytest_send_telemetry_userversion_2) | ❌ | 42.519865566s | 
| [tests::http::telemetry::test_send_telemetry_user::version_3](#testshttptelemetrytest_send_telemetry_userversion_3) | ❌ | 42.664208486s | 
| [tests::http::telemetry::test_send_telemetry_user_alias::version_1](#testshttptelemetrytest_send_telemetry_user_aliasversion_1) | ✅ | 18.027195077s | 
| [tests::http::telemetry::test_send_telemetry_user_alias::version_2](#testshttptelemetrytest_send_telemetry_user_aliasversion_2) | ✅ | 17.988763839s | 
| [tests::http::telemetry::test_send_telemetry_user_alias::version_3](#testshttptelemetrytest_send_telemetry_user_aliasversion_3) | ✅ | 18.998629549s | 
| [tests::http::telemetry::test_send_telemetry_user_only::version_1](#testshttptelemetrytest_send_telemetry_user_onlyversion_1) | ❌ | 42.641438223s | 
| [tests::http::telemetry::test_send_telemetry_user_only::version_2](#testshttptelemetrytest_send_telemetry_user_onlyversion_2) | ❌ | 43.566046533s | 
| [tests::http::telemetry::test_send_telemetry_user_only::version_3](#testshttptelemetrytest_send_telemetry_user_onlyversion_3) | ❌ | 43.155309711s | 
| [tests::mqtt::command::test_command::version_1](#testsmqttcommandtest_commandversion_1) | ✅ | 13.305937993s | 
| [tests::mqtt::command::test_command::version_2](#testsmqttcommandtest_commandversion_2) | ✅ | 12.857934529s | 
| [tests::mqtt::command::test_command::version_3](#testsmqttcommandtest_commandversion_3) | ✅ | 12.460610184s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_1](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_1integration_version_1) | ✅ | 19.269018989s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_2](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_1integration_version_2) | ✅ | 19.310119078s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_3](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_1integration_version_3) | ✅ | 18.970951869s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_1](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_2integration_version_1) | ✅ | 19.996157121s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_2](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_2integration_version_2) | ✅ | 18.142399275s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_3](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_2integration_version_3) | ✅ | 18.693215793s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_1](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_3integration_version_1) | ✅ | 19.857989451s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_2](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_3integration_version_2) | ✅ | 19.096280719s | 
| [tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_3](#testsmqtttelemetrytest_send_telemetry_passendpoint_version_3integration_version_3) | ✅ | 18.874914902s | 
| [tests::registry::test_registry_create_and_delete](#testsregistrytest_registry_create_and_delete) | ❌ | 12.450445392s | 
| [tests::registry::test_registry_create_app](#testsregistrytest_registry_create_app) | ✅ | 11.800114845s | 
| [tests::registry::test_registry_create_app_and_device](#testsregistrytest_registry_create_app_and_device) | ✅ | 12.373536356s | 
| [tests::registry::test_registry_create_app_and_device_twice](#testsregistrytest_registry_create_app_and_device_twice) | ✅ | 11.946395816s | 
| [tests::registry::test_registry_create_app_twice](#testsregistrytest_registry_create_app_twice) | ✅ | 12.318720896s | 
| [tests::registry::test_registry_device_create_and_delete](#testsregistrytest_registry_device_create_and_delete) | ✅ | 12.452203811s | 


# Details

## ✅ init::web::test::test_web_destroy

**Duration**: 7.006202935s

## ✅ init::web::test::test_web_test

**Duration**: 6.252831317s

## ❌ tests::coap::command::test_command::version_1

**Duration**: 55.7742835s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:26:40Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:26:48Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTcwMDcsImlhdCI6MTYzMTc5NTIwNywianRpIjoiMmZkYjZjYzYtYWEwNC00NzgyLWIzODgtYjU1NzJmYTVkZmEzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDIzNTBmNjEtY2JhNC00YWZjLTkyYjItNWYyZjNlODJjZDVkIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImQyMzUwZjYxLWNiYTQtNGFmYy05MmIyLTVmMmYzZTgyY2Q1ZCJ9.Ah9PnhxdFIPKFpksWwuDlkG5YUKSJ0MHgYoI6colH28
[2021-09-16T12:26:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:26:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(256)), stdout: "", stderr: "Error: Error loading config file\n\nCaused by:\n    0: Unable to open configuration file. Did you log into a drogue cloud cluster ?\n    1: No such file or directory (os error 2)\n" })
[2021-09-16T12:26:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTcwMDcsImlhdCI6MTYzMTc5NTIwNywianRpIjoiMmZkYjZjYzYtYWEwNC00NzgyLWIzODgtYjU1NzJmYTVkZmEzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDIzNTBmNjEtY2JhNC00YWZjLTkyYjItNWYyZjNlODJjZDVkIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImQyMzUwZjYxLWNiYTQtNGFmYy05MmIyLTVmMmYzZTgyY2Q1ZCJ9.Ah9PnhxdFIPKFpksWwuDlkG5YUKSJ0MHgYoI6colH28" "--context" "system-tests"
[2021-09-16T12:26:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:26:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:26:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:26:48Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU1MDgsImlhdCI6MTYzMTc5NTIwOCwiYXV0aF90aW1lIjoxNjMxNzk1MjAzLCJqdGkiOiI5YWZkY2U3NC1jYzg4LTQxYzMtYTY5ZC0zYzNhYzhkY2Q0NDEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiI4ODZmYjAyOC0yOTM1LTQ0Y2MtYjE5Ny04ZDUwYjhlODI4OTYiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDIzNTBmNjEtY2JhNC00YWZjLTkyYjItNWYyZjNlODJjZDVkIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBwcm9maWxlIiwic2lkIjoiZDIzNTBmNjEtY2JhNC00YWZjLTkyYjItNWYyZjNlODJjZDVkIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.QX0UYeadb1u9F1XIbxWead3W-xeh0pirHpLg8sefBL_TCdqIVWmLRYpWC6NmC8JzZTuI-P84OpXPkQoBxvE1jmb0wXq-_x4RGAgN7TMnETaC-H6K0mxqrQsqEGQIc3S37pl2KQ_wk6uOUcfX0q-A02i38tLNHQRGpkhTvXmBqnkgtLvn8P3KehTZn_QACQAWvr4ndndWmM3TgwJ9aUQTgd7E9zUV91YTTZc-5HcUMfFGaechDVPiF5liphPtQBEcfiHgRUFjXGdhDU50y08qFf-1OU8-yfVOfHS3hUrogQ6VDncgG0hPy-eD_YNh9jLgsm1hGGPmRpxuXM6fDmBbOg\n", stderr: "" })
[2021-09-16T12:26:48Z INFO  drogue_cloud_tests::resources::apps] Create application: 1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a
[2021-09-16T12:26:48Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a"
[2021-09-16T12:26:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a created.\n", stderr: "" })
[2021-09-16T12:26:49Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a"
[2021-09-16T12:26:49Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:26:48.708671Z\",\n    \"generation\": 0,\n    \"name\": \"1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a\",\n    \"resourceVersion\": \"eecb4c73-00a2-497a-a371-c35a157c904d\",\n    \"uid\": \"ec18536d-5c9d-4419-9212-631c6da6ab1c\"\n  }\n}", stderr: "" })
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a"
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:26:48.708671Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a\",\n    \"resourceVersion\": \"f8aa5ea6-3dfd-43e3-a1ab-c076ec74fa4d\",\n    \"uid\": \"ec18536d-5c9d-4419-9212-631c6da6ab1c\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:26:49.869776058Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:26:49.869806414Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:26:49.400441961Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:26:49.411552010Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:26:49.650276968Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:26:49.657340214Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:26:49.869750Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:26:49.869751283Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"CF8cnnZY9tSq\",\n        \"username\": \"user-1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a"
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:26:48.708671Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a\",\n    \"resourceVersion\": \"f8aa5ea6-3dfd-43e3-a1ab-c076ec74fa4d\",\n    \"uid\": \"ec18536d-5c9d-4419-9212-631c6da6ab1c\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:26:49.869776058Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:26:49.869806414Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:26:49.400441961Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:26:49.411552010Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:26:49.650276968Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:26:49.657340214Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:26:49.869750Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:26:49.869751283Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"CF8cnnZY9tSq\",\n        \"username\": \"user-1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::tests::coap::command] Sending payload
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::tests::coap::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU1MDgsImlhdCI6MTYzMTc5NTIwOCwiYXV0aF90aW1lIjoxNjMxNzk1MjAzLCJqdGkiOiI5YWZkY2U3NC1jYzg4LTQxYzMtYTY5ZC0zYzNhYzhkY2Q0NDEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiI4ODZmYjAyOC0yOTM1LTQ0Y2MtYjE5Ny04ZDUwYjhlODI4OTYiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZDIzNTBmNjEtY2JhNC00YWZjLTkyYjItNWYyZjNlODJjZDVkIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBwcm9maWxlIiwic2lkIjoiZDIzNTBmNjEtY2JhNC00YWZjLTkyYjItNWYyZjNlODJjZDVkIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.QX0UYeadb1u9F1XIbxWead3W-xeh0pirHpLg8sefBL_TCdqIVWmLRYpWC6NmC8JzZTuI-P84OpXPkQoBxvE1jmb0wXq-_x4RGAgN7TMnETaC-H6K0mxqrQsqEGQIc3S37pl2KQ_wk6uOUcfX0q-A02i38tLNHQRGpkhTvXmBqnkgtLvn8P3KehTZn_QACQAWvr4ndndWmM3TgwJ9aUQTgd7E9zUV91YTTZc-5HcUMfFGaechDVPiF5liphPtQBEcfiHgRUFjXGdhDU50y08qFf-1OU8-yfVOfHS3hUrogQ6VDncgG0hPy-eD_YNh9jLgsm1hGGPmRpxuXM6fDmBbOg\n", stderr: "" })
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:26:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:26:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:26:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:26:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:26:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:26:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:26:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:26:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:26:55Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:26:55Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 443, payload: 0x7fb65c015b80, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } }, data: MessageData { topic: "app/1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 101, 100, 100, 50, 52, 57, 98, 52, 45, 51, 49, 102, 97, 45, 52, 57, 51, 101, 45, 97, 100, 56, 49, 45, 48, 98, 48, 99, 99, 102, 49, 55, 51, 48, 56, 52, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 49, 99, 48, 54, 53, 100, 99, 48, 37, 50, 68, 98, 57, 98, 52, 37, 50, 68, 52, 98, 100, 55, 37, 50, 68, 98, 102, 53, 99, 37, 50, 68, 53, 54, 50, 56, 54, 100, 57, 97, 48, 101, 56, 97, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 106, 115, 111, 110, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 119, 97, 114, 109, 117, 112, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 50, 58, 50, 54, 58, 53, 53, 46, 49, 52, 49, 48, 55, 53, 48, 53, 52, 90, 34, 44, 34, 100, 97, 116, 97, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 52, 125, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 49, 99, 48, 54, 53, 100, 99, 48, 45, 98, 57, 98, 52, 45, 52, 98, 100, 55, 45, 98, 102, 53, 99, 45, 53, 54, 50, 56, 54, 100, 57, 97, 48, 101, 56, 97, 34, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 49, 99, 48, 54, 53, 100, 99, 48, 37, 50, 68, 98, 57, 98, 52, 37, 50, 68, 52, 98, 100, 55, 37, 50, 68, 98, 102, 53, 99, 37, 50, 68, 53, 54, 50, 56, 54, 100, 57, 97, 48, 101, 56, 97, 47, 100, 101, 118, 105, 99, 101, 49, 34, 125], props: Properties { cprops: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } } } }
[2021-09-16T12:26:55Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a", content_type: None, user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"edd249b4-31fa-493e-ad81-0b0ccf173084\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://1c065dc0%2Db9b4%2D4bd7%2Dbf5c%2D56286d9a0e8a/device1\",\"datacontenttype\":\"application/json\",\"subject\":\"warmup\",\"time\":\"2021-09-16T12:26:55.141075054Z\",\"data\":{\"index\":4},\"application\":\"1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a\",\"device\":\"device1\",\"instance\":\"drogue\",\"partitionkey\":\"1c065dc0%2Db9b4%2D4bd7%2Dbf5c%2D56286d9a0e8a/device1\"}" }
[2021-09-16T12:26:56Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 4 attempts
[2021-09-16T12:26:56Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [
                    99,
                    116,
                    61,
                    54,
                    48,
                    48,
                    48,
                ],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    71,
                    86,
                    50,
                    97,
                    87,
                    78,
                    108,
                    77,
                    85,
                    65,
                    120,
                    89,
                    122,
                    65,
                    50,
                    78,
                    87,
                    82,
                    106,
                    77,
                    67,
                    49,
                    105,
                    79,
                    87,
                    73,
                    48,
                    76,
                    84,
                    82,
                    105,
                    90,
                    68,
                    99,
                    116,
                    89,
                    109,
                    89,
                    49,
                    89,
                    121,
                    48,
                    49,
                    78,
                    106,
                    73,
                    52,
                    78,
                    109,
                    81,
                    53,
                    89,
                    84,
                    66,
                    108,
                    79,
                    71,
                    69,
                    54,
                    90,
                    109,
                    57,
                    118,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
[2021-09-16T12:26:57Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 452, payload: 0x7fb65c015da0, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } }, data: MessageData { topic: "app/1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 55, 102, 97, 48, 49, 50, 102, 49, 45, 100, 97, 48, 102, 45, 52, 54, 52, 52, 45, 97, 51, 50, 55, 45, 99, 51, 98, 48, 99, 53, 55, 49, 97, 99, 49, 54, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 49, 99, 48, 54, 53, 100, 99, 48, 37, 50, 68, 98, 57, 98, 52, 37, 50, 68, 52, 98, 100, 55, 37, 50, 68, 98, 102, 53, 99, 37, 50, 68, 53, 54, 50, 56, 54, 100, 57, 97, 48, 101, 56, 97, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 111, 99, 116, 101, 116, 45, 115, 116, 114, 101, 97, 109, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 116, 101, 108, 101, 109, 101, 116, 114, 121, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 50, 58, 50, 54, 58, 53, 54, 46, 50, 50, 57, 53, 57, 52, 55, 48, 56, 90, 34, 44, 34, 100, 97, 116, 97, 95, 98, 97, 115, 101, 54, 52, 34, 58, 34, 34, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 49, 99, 48, 54, 53, 100, 99, 48, 45, 98, 57, 98, 52, 45, 52, 98, 100, 55, 45, 98, 102, 53, 99, 45, 53, 54, 50, 56, 54, 100, 57, 97, 48, 101, 56, 97, 34, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 49, 99, 48, 54, 53, 100, 99, 48, 37, 50, 68, 98, 57, 98, 52, 37, 50, 68, 52, 98, 100, 55, 37, 50, 68, 98, 102, 53, 99, 37, 50, 68, 53, 54, 50, 56, 54, 100, 57, 97, 48, 101, 56, 97, 47, 100, 101, 118, 105, 99, 101, 49, 34, 125], props: Properties { cprops: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } } } }
[2021-09-16T12:26:57Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a", content_type: None, user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"7fa012f1-da0f-4644-a327-c3b0c571ac16\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://1c065dc0%2Db9b4%2D4bd7%2Dbf5c%2D56286d9a0e8a/device1\",\"datacontenttype\":\"application/octet-stream\",\"subject\":\"telemetry\",\"time\":\"2021-09-16T12:26:56.229594708Z\",\"data_base64\":\"\",\"device\":\"device1\",\"instance\":\"drogue\",\"application\":\"1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a\",\"partitionkey\":\"1c065dc0%2Db9b4%2D4bd7%2Dbf5c%2D56286d9a0e8a/device1\"}" }
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T12:27:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:27:32Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:27:33Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:27:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a" "device1"
[2021-09-16T12:27:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:27:33Z INFO  drogue_cloud_tests::resources::apps] Destroy application '1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a'
[2021-09-16T12:27:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a"
[2021-09-16T12:27:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 1c065dc0-b9b4-4bd7-bf5c-56286d9a0e8a deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::command::test_command::version_2

**Duration**: 54.661733278s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:27:36Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTcwNjMsImlhdCI6MTYzMTc5NTI2MywianRpIjoiOWIxNjEzZjMtMzA5Ny00NjA5LTkxZmQtZWRkZmE3Y2RmYzg0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMDJmY2YyOGYtNWQyMi00ZTUyLWEzYmMtZTI2NzE5ZmY3MTI0Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjAyZmNmMjhmLTVkMjItNGU1Mi1hM2JjLWUyNjcxOWZmNzEyNCJ9.5YribZGXt02nVTHJsvzLY1iKygMo57O8B9bexQ-ri3Q
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTcwNjMsImlhdCI6MTYzMTc5NTI2MywianRpIjoiOWIxNjEzZjMtMzA5Ny00NjA5LTkxZmQtZWRkZmE3Y2RmYzg0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMDJmY2YyOGYtNWQyMi00ZTUyLWEzYmMtZTI2NzE5ZmY3MTI0Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjAyZmNmMjhmLTVkMjItNGU1Mi1hM2JjLWUyNjcxOWZmNzEyNCJ9.5YribZGXt02nVTHJsvzLY1iKygMo57O8B9bexQ-ri3Q" "--context" "system-tests"
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU1NjQsImlhdCI6MTYzMTc5NTI2NCwiYXV0aF90aW1lIjoxNjMxNzk1MjU5LCJqdGkiOiI0MzIzMzJlOC1kNjU5LTQyNDEtYWI2MS1lMDRiZmIxNDIzNTEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiI4ODZmYjAyOC0yOTM1LTQ0Y2MtYjE5Ny04ZDUwYjhlODI4OTYiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMDJmY2YyOGYtNWQyMi00ZTUyLWEzYmMtZTI2NzE5ZmY3MTI0IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBwcm9maWxlIiwic2lkIjoiMDJmY2YyOGYtNWQyMi00ZTUyLWEzYmMtZTI2NzE5ZmY3MTI0IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.mephM13SJ85Ke25YYNm1emGJWWA5EMGJQBDcjouUH11OEXJK-Her2ZiOjjivlnco_HQggFYNDMIrVu5jzXo-6EfkDDLmHKJF0aducZJQJhyKdTPUGuwCKZ04JJs5_vzPOvodvdnvfyV6x2scKV1hAxbHbDl9URQzuF__nR6s_aO0xStN_LHnMheG9MRJ1neaVVW_c-LkTN4bxZyeuJgLP3ROfE5AFxw5Zta9_q9w3xbOhBjF0Ya9oEV5p9gs6SdVUBvbrFiA6jhJPNwl9F2ta2k51CA-mJBbLUHtfN4kV9TEQEaq_Tmumpm-MaXRCNX3B0SIu1tecekf6J2s6KTBJA\n", stderr: "" })
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::resources::apps] Create application: 48fe8ce0-a9e2-4f84-8662-7ba3bea22970
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "48fe8ce0-a9e2-4f84-8662-7ba3bea22970"
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 48fe8ce0-a9e2-4f84-8662-7ba3bea22970 created.\n", stderr: "" })
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "48fe8ce0-a9e2-4f84-8662-7ba3bea22970"
[2021-09-16T12:27:44Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:27:44.564804Z\",\n    \"generation\": 1,\n    \"name\": \"48fe8ce0-a9e2-4f84-8662-7ba3bea22970\",\n    \"resourceVersion\": \"2d5e89ab-34cd-4aa9-ae03-91091d25bc62\",\n    \"uid\": \"33ec73b7-c9a5-49fc-af05-4b3827c1db9e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:27:44.583324560Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}", stderr: "" })
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "48fe8ce0-a9e2-4f84-8662-7ba3bea22970"
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:27:44.564804Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"48fe8ce0-a9e2-4f84-8662-7ba3bea22970\",\n    \"resourceVersion\": \"73d1ca59-b303-4f63-97ae-9ee577fcc1e7\",\n    \"uid\": \"33ec73b7-c9a5-49fc-af05-4b3827c1db9e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:27:45.094061144Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:27:45.094022281Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:27:44.650958922Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:27:44.658368722Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:27:44.869142691Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:27:44.888127437Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:27:45.093987048Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:27:45.093988561Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Lojv9Uh0iIOi\",\n        \"username\": \"user-48fe8ce0-a9e2-4f84-8662-7ba3bea22970\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "48fe8ce0-a9e2-4f84-8662-7ba3bea22970"
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:27:44.564804Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"48fe8ce0-a9e2-4f84-8662-7ba3bea22970\",\n    \"resourceVersion\": \"73d1ca59-b303-4f63-97ae-9ee577fcc1e7\",\n    \"uid\": \"33ec73b7-c9a5-49fc-af05-4b3827c1db9e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:27:45.094061144Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:27:45.094022281Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:27:44.650958922Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:27:44.658368722Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:27:44.869142691Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:27:44.888127437Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:27:45.093987048Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:27:45.093988561Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Lojv9Uh0iIOi\",\n        \"username\": \"user-48fe8ce0-a9e2-4f84-8662-7ba3bea22970\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "48fe8ce0-a9e2-4f84-8662-7ba3bea22970" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::tests::coap::command] Sending payload
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::tests::coap::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU1NjQsImlhdCI6MTYzMTc5NTI2NCwiYXV0aF90aW1lIjoxNjMxNzk1MjU5LCJqdGkiOiI0MzIzMzJlOC1kNjU5LTQyNDEtYWI2MS1lMDRiZmIxNDIzNTEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiI4ODZmYjAyOC0yOTM1LTQ0Y2MtYjE5Ny04ZDUwYjhlODI4OTYiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMDJmY2YyOGYtNWQyMi00ZTUyLWEzYmMtZTI2NzE5ZmY3MTI0IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBwcm9maWxlIiwic2lkIjoiMDJmY2YyOGYtNWQyMi00ZTUyLWEzYmMtZTI2NzE5ZmY3MTI0IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.mephM13SJ85Ke25YYNm1emGJWWA5EMGJQBDcjouUH11OEXJK-Her2ZiOjjivlnco_HQggFYNDMIrVu5jzXo-6EfkDDLmHKJF0aducZJQJhyKdTPUGuwCKZ04JJs5_vzPOvodvdnvfyV6x2scKV1hAxbHbDl9URQzuF__nR6s_aO0xStN_LHnMheG9MRJ1neaVVW_c-LkTN4bxZyeuJgLP3ROfE5AFxw5Zta9_q9w3xbOhBjF0Ya9oEV5p9gs6SdVUBvbrFiA6jhJPNwl9F2ta2k51CA-mJBbLUHtfN4kV9TEQEaq_Tmumpm-MaXRCNX3B0SIu1tecekf6J2s6KTBJA\n", stderr: "" })
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:27:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:27:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:27:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:27:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:27:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:27:49Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:27:49Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:27:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:27:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:27:50Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 443, payload: 0x7fb664016c50, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 2, max_count: 10, length: 48, array: 0x7fb664016e20 } }, data: MessageData { topic: "app/48fe8ce0-a9e2-4f84-8662-7ba3bea22970", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 56, 55, 52, 48, 102, 48, 50, 52, 45, 48, 100, 48, 100, 45, 52, 100, 53, 99, 45, 57, 55, 52, 52, 45, 101, 99, 52, 52, 57, 102, 101, 100, 55, 53, 97, 54, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 52, 56, 102, 101, 56, 99, 101, 48, 37, 50, 68, 97, 57, 101, 50, 37, 50, 68, 52, 102, 56, 52, 37, 50, 68, 56, 54, 54, 50, 37, 50, 68, 55, 98, 97, 51, 98, 101, 97, 50, 50, 57, 55, 48, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 106, 115, 111, 110, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 119, 97, 114, 109, 117, 112, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 50, 58, 50, 55, 58, 53, 48, 46, 49, 52, 55, 49, 56, 55, 55, 49, 49, 90, 34, 44, 34, 100, 97, 116, 97, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 52, 125, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 52, 56, 102, 101, 56, 99, 101, 48, 45, 97, 57, 101, 50, 45, 52, 102, 56, 52, 45, 56, 54, 54, 50, 45, 55, 98, 97, 51, 98, 101, 97, 50, 50, 57, 55, 48, 34, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 52, 56, 102, 101, 56, 99, 101, 48, 37, 50, 68, 97, 57, 101, 50, 37, 50, 68, 52, 102, 56, 52, 37, 50, 68, 56, 54, 54, 50, 37, 50, 68, 55, 98, 97, 51, 98, 101, 97, 50, 50, 57, 55, 48, 47, 100, 101, 118, 105, 99, 101, 49, 34, 125], props: Properties { cprops: MQTTProperties { count: 2, max_count: 10, length: 48, array: 0x7fb664016e20 } } } }
[2021-09-16T12:27:50Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/48fe8ce0-a9e2-4f84-8662-7ba3bea22970", content_type: Some("application/cloudevents+json; charset=utf-8"), user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"8740f024-0d0d-4d5c-9744-ec449fed75a6\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://48fe8ce0%2Da9e2%2D4f84%2D8662%2D7ba3bea22970/device1\",\"datacontenttype\":\"application/json\",\"subject\":\"warmup\",\"time\":\"2021-09-16T12:27:50.147187711Z\",\"data\":{\"index\":4},\"instance\":\"drogue\",\"device\":\"device1\",\"application\":\"48fe8ce0-a9e2-4f84-8662-7ba3bea22970\",\"partitionkey\":\"48fe8ce0%2Da9e2%2D4f84%2D8662%2D7ba3bea22970/device1\"}" }
[2021-09-16T12:27:51Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 4 attempts
[2021-09-16T12:27:51Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [
                    99,
                    116,
                    61,
                    54,
                    48,
                    48,
                    48,
                ],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    71,
                    86,
                    50,
                    97,
                    87,
                    78,
                    108,
                    77,
                    85,
                    65,
                    48,
                    79,
                    71,
                    90,
                    108,
                    79,
                    71,
                    78,
                    108,
                    77,
                    67,
                    49,
                    104,
                    79,
                    87,
                    85,
                    121,
                    76,
                    84,
                    82,
                    109,
                    79,
                    68,
                    81,
                    116,
                    79,
                    68,
                    89,
                    50,
                    77,
                    105,
                    48,
                    51,
                    89,
                    109,
                    69,
                    122,
                    89,
                    109,
                    86,
                    104,
                    77,
                    106,
                    73,
                    53,
                    78,
                    122,
                    65,
                    54,
                    90,
                    109,
                    57,
                    118,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T12:28:27Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:28:27Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:28:27Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:28:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "48fe8ce0-a9e2-4f84-8662-7ba3bea22970" "device1"
[2021-09-16T12:28:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:28:27Z INFO  drogue_cloud_tests::resources::apps] Destroy application '48fe8ce0-a9e2-4f84-8662-7ba3bea22970'
[2021-09-16T12:28:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "48fe8ce0-a9e2-4f84-8662-7ba3bea22970"
[2021-09-16T12:28:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 48fe8ce0-a9e2-4f84-8662-7ba3bea22970 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::command::test_command::version_3

**Duration**: 55.720911012s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:28:31Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTcxMTcsImlhdCI6MTYzMTc5NTMxNywianRpIjoiZmM1NDAyODktYzk3Ni00NjY5LThkOWItZDA0MTQ5ZDM4OTFiIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYjViNzYyNjctNWRmMC00OTllLThmZWMtYjlmM2RjODI5OWQ4Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImI1Yjc2MjY3LTVkZjAtNDk5ZS04ZmVjLWI5ZjNkYzgyOTlkOCJ9.0rluKFbnv3BsLcZJoKggpy6O36c9WoYDDZKMkEJWbs0
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTcxMTcsImlhdCI6MTYzMTc5NTMxNywianRpIjoiZmM1NDAyODktYzk3Ni00NjY5LThkOWItZDA0MTQ5ZDM4OTFiIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYjViNzYyNjctNWRmMC00OTllLThmZWMtYjlmM2RjODI5OWQ4Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImI1Yjc2MjY3LTVkZjAtNDk5ZS04ZmVjLWI5ZjNkYzgyOTlkOCJ9.0rluKFbnv3BsLcZJoKggpy6O36c9WoYDDZKMkEJWbs0" "--context" "system-tests"
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU2MTksImlhdCI6MTYzMTc5NTMxOSwiYXV0aF90aW1lIjoxNjMxNzk1MzE0LCJqdGkiOiJiMTBlMDk2ZC02ZTVkLTQyNWQtYTNjMC04MjdlODkwMzhkNzkiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiI4ODZmYjAyOC0yOTM1LTQ0Y2MtYjE5Ny04ZDUwYjhlODI4OTYiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYjViNzYyNjctNWRmMC00OTllLThmZWMtYjlmM2RjODI5OWQ4IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBwcm9maWxlIiwic2lkIjoiYjViNzYyNjctNWRmMC00OTllLThmZWMtYjlmM2RjODI5OWQ4IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.tSOe4SOo1oxvmApb8DB0MrDYNdegY-ZgYwErDcxBZ5XUKMPm4XsncIlnHBOlDdVYPsCfuXQUAgPyn-9ie2yG-QHhavw3XAQQz2tdoAX62_8XFmDeMu73AYIcGc5dwVN5wPqoucsnv_PsKrGQvAi35gXcfUzaljMULZ-xq9v29wfu3DwCy3hyZ7b-h175uGvOsceuCrTQK-50rwcRuYoNkYJLk3CTy33bdVTRA5AIXS19sV-ZBHEd6a2zOAh59kO4V7fWG2Hv7MstauXhwl5IS2cYv150wVkOG8w5iqEFEBXqH7nX2174im6wieTaXeSad1x_lGUdumj5aGEnXE1cgw\n", stderr: "" })
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::resources::apps] Create application: b5fe694f-9217-4bab-91a4-fbda241727c6
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "b5fe694f-9217-4bab-91a4-fbda241727c6"
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b5fe694f-9217-4bab-91a4-fbda241727c6 created.\n", stderr: "" })
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b5fe694f-9217-4bab-91a4-fbda241727c6"
[2021-09-16T12:28:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:28:39.417914Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"b5fe694f-9217-4bab-91a4-fbda241727c6\",\n    \"resourceVersion\": \"4dc1e7fa-ff3f-4aa9-8023-0ab03c3c1910\",\n    \"uid\": \"99254158-a5c6-4df5-b8c3-9e5a1b14c335\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:28:39.443982824Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:28:39.443995798Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.443944743Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.443945785Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.443946336Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.443946878Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.443948280Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.443949993Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b5fe694f-9217-4bab-91a4-fbda241727c6"
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:28:39.417914Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"b5fe694f-9217-4bab-91a4-fbda241727c6\",\n    \"resourceVersion\": \"4bfe5d75-c5d0-439f-91c0-d86727b3b330\",\n    \"uid\": \"99254158-a5c6-4df5-b8c3-9e5a1b14c335\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:28:39.990358917Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:28:39.990397048Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.470714229Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.480373796Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.706432644Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.717239052Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.990328672Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.990330205Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"GyP1boB20Go8\",\n        \"username\": \"user-b5fe694f-9217-4bab-91a4-fbda241727c6\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b5fe694f-9217-4bab-91a4-fbda241727c6"
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:28:39.417914Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"b5fe694f-9217-4bab-91a4-fbda241727c6\",\n    \"resourceVersion\": \"4bfe5d75-c5d0-439f-91c0-d86727b3b330\",\n    \"uid\": \"99254158-a5c6-4df5-b8c3-9e5a1b14c335\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:28:39.990358917Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:28:39.990397048Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.470714229Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.480373796Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.706432644Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.717239052Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.990328672Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:28:39.990330205Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"GyP1boB20Go8\",\n        \"username\": \"user-b5fe694f-9217-4bab-91a4-fbda241727c6\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "b5fe694f-9217-4bab-91a4-fbda241727c6" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::tests::coap::command] Sending payload
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::tests::coap::command] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU2MTksImlhdCI6MTYzMTc5NTMxOSwiYXV0aF90aW1lIjoxNjMxNzk1MzE0LCJqdGkiOiJiMTBlMDk2ZC02ZTVkLTQyNWQtYTNjMC04MjdlODkwMzhkNzkiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiI4ODZmYjAyOC0yOTM1LTQ0Y2MtYjE5Ny04ZDUwYjhlODI4OTYiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiYjViNzYyNjctNWRmMC00OTllLThmZWMtYjlmM2RjODI5OWQ4IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBwcm9maWxlIiwic2lkIjoiYjViNzYyNjctNWRmMC00OTllLThmZWMtYjlmM2RjODI5OWQ4IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.tSOe4SOo1oxvmApb8DB0MrDYNdegY-ZgYwErDcxBZ5XUKMPm4XsncIlnHBOlDdVYPsCfuXQUAgPyn-9ie2yG-QHhavw3XAQQz2tdoAX62_8XFmDeMu73AYIcGc5dwVN5wPqoucsnv_PsKrGQvAi35gXcfUzaljMULZ-xq9v29wfu3DwCy3hyZ7b-h175uGvOsceuCrTQK-50rwcRuYoNkYJLk3CTy33bdVTRA5AIXS19sV-ZBHEd6a2zOAh59kO4V7fWG2Hv7MstauXhwl5IS2cYv150wVkOG8w5iqEFEBXqH7nX2174im6wieTaXeSad1x_lGUdumj5aGEnXE1cgw\n", stderr: "" })
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:28:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:28:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:28:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:28:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:28:43Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:28:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:28:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:28:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:28:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:28:45Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 11, payload: 0x7fb65c015350, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 11, max_count: 20, length: 400, array: 0x562647d77430 } }, data: MessageData { topic: "app/b5fe694f-9217-4bab-91a4-fbda241727c6", payload: [123, 34, 105, 110, 100, 101, 120, 34, 58, 52, 125], props: Properties { cprops: MQTTProperties { count: 11, max_count: 20, length: 400, array: 0x562647d77430 } } } }
[2021-09-16T12:28:45Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/b5fe694f-9217-4bab-91a4-fbda241727c6", content_type: Some("application/json"), user_properties: {"specversion": "1.0", "type": "io.drogue.event.v1", "time": "2021-09-16T12:28:45.185561655+00:00", "application": "b5fe694f-9217-4bab-91a4-fbda241727c6", "subject": "warmup", "instance": "drogue", "source": "drogue://b5fe694f%2D9217%2D4bab%2D91a4%2Dfbda241727c6/device1", "device": "device1", "partitionkey": "b5fe694f%2D9217%2D4bab%2D91a4%2Dfbda241727c6/device1", "id": "730c5b2f-a0fc-40fe-9c8d-53662b2ed7ac"}, payload: "{\"index\":4}" }
[2021-09-16T12:28:46Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 4 attempts
[2021-09-16T12:28:46Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [
                    99,
                    116,
                    61,
                    54,
                    48,
                    48,
                    48,
                ],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    71,
                    86,
                    50,
                    97,
                    87,
                    78,
                    108,
                    77,
                    85,
                    66,
                    105,
                    78,
                    87,
                    90,
                    108,
                    78,
                    106,
                    107,
                    48,
                    90,
                    105,
                    48,
                    53,
                    77,
                    106,
                    69,
                    51,
                    76,
                    84,
                    82,
                    105,
                    89,
                    87,
                    73,
                    116,
                    79,
                    84,
                    70,
                    104,
                    78,
                    67,
                    49,
                    109,
                    89,
                    109,
                    82,
                    104,
                    77,
                    106,
                    81,
                    120,
                    78,
                    122,
                    73,
                    51,
                    89,
                    122,
                    89,
                    54,
                    90,
                    109,
                    57,
                    118,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T12:29:23Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:29:23Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:29:23Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:29:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "b5fe694f-9217-4bab-91a4-fbda241727c6" "device1"
[2021-09-16T12:29:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:29:23Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'b5fe694f-9217-4bab-91a4-fbda241727c6'
[2021-09-16T12:29:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "b5fe694f-9217-4bab-91a4-fbda241727c6"
[2021-09-16T12:29:23Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b5fe694f-9217-4bab-91a4-fbda241727c6 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_pass::version_1

**Duration**: 53.041188012s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:29:24Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T12:29:27Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:29:34Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTcxNzMsImlhdCI6MTYzMTc5NTM3MywianRpIjoiNWZkZmE3NDgtMDE5Zi00YmZlLWI0OWQtOGQ5NjcyZjBkNzI0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOGE3YjQzOWYtZmQ5ZS00YTIxLWFiYWMtNzM3NzliODU2NDI2Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjhhN2I0MzlmLWZkOWUtNGEyMS1hYmFjLTczNzc5Yjg1NjQyNiJ9.kKyJcCm1f_x9l7T7bLLNEtyadoui5uEr1ng-1TPEQDM
[2021-09-16T12:29:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:29:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:29:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTcxNzMsImlhdCI6MTYzMTc5NTM3MywianRpIjoiNWZkZmE3NDgtMDE5Zi00YmZlLWI0OWQtOGQ5NjcyZjBkNzI0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOGE3YjQzOWYtZmQ5ZS00YTIxLWFiYWMtNzM3NzliODU2NDI2Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjhhN2I0MzlmLWZkOWUtNGEyMS1hYmFjLTczNzc5Yjg1NjQyNiJ9.kKyJcCm1f_x9l7T7bLLNEtyadoui5uEr1ng-1TPEQDM" "--context" "system-tests"
[2021-09-16T12:29:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:29:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:29:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:29:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU2NzQsImlhdCI6MTYzMTc5NTM3NCwiYXV0aF90aW1lIjoxNjMxNzk1MzY5LCJqdGkiOiJmZWEzMmU2ZS1kNDIwLTRhZGItODc0Ni1mMTE2YzI1NzFjZWYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiI4ODZmYjAyOC0yOTM1LTQ0Y2MtYjE5Ny04ZDUwYjhlODI4OTYiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOGE3YjQzOWYtZmQ5ZS00YTIxLWFiYWMtNzM3NzliODU2NDI2IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBwcm9maWxlIiwic2lkIjoiOGE3YjQzOWYtZmQ5ZS00YTIxLWFiYWMtNzM3NzliODU2NDI2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.mOdKJFIAEaXNvNrfNpEG1TMvap_BPU7BiR8JX9wOulHrNNF5N5keMFGX7V0Wb6WTgWZ5mNf0dwu_3UW2l8c9F0zZ1VTK-V2FkW3Ep74B59o0GHTjxXLexnsPLUr2FtzAq6askE6E4dk5cgFB-NwP-OABoUUXqjTJ2vxrUEjN5HaAFXHcEAv8nLIOMVKMIthehj0NXV31JeYpiUeFGxFiLt-Yn8uv7XcT6p8t9_PekZqnRq90eybwv3K_LMPQLD-6foaHMO2IOlM4XzyVJhp6KX65ilZ5or4AYVKbY0kf0dPR062yBNvkHdSWmHOvHdVrWjxcBphPfdE2oglF67obSQ\n", stderr: "" })
[2021-09-16T12:29:34Z INFO  drogue_cloud_tests::resources::apps] Create application: 27ea9121-6dbf-4d17-a67a-af8a54997743
[2021-09-16T12:29:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "27ea9121-6dbf-4d17-a67a-af8a54997743"
[2021-09-16T12:29:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 27ea9121-6dbf-4d17-a67a-af8a54997743 created.\n", stderr: "" })
[2021-09-16T12:29:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "27ea9121-6dbf-4d17-a67a-af8a54997743"
[2021-09-16T12:29:35Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:29:34.979909Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"27ea9121-6dbf-4d17-a67a-af8a54997743\",\n    \"resourceVersion\": \"5a3a96db-8d4f-407d-bc4b-12ee626949f4\",\n    \"uid\": \"ac48f94b-7520-48e2-89ae-519632747c80\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:29:34.996951058Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:29:34.996964853Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:34.996757359Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:34.996758331Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:34.996758751Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:34.996759323Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:34.996760695Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:34.996761987Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "27ea9121-6dbf-4d17-a67a-af8a54997743"
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:29:34.979909Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"27ea9121-6dbf-4d17-a67a-af8a54997743\",\n    \"resourceVersion\": \"f384f5d9-7b6e-479a-962f-8d6130dd694b\",\n    \"uid\": \"ac48f94b-7520-48e2-89ae-519632747c80\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:29:35.641251274Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:29:35.641284866Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:35.034844200Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:35.043963578Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:35.353937232Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:35.368675396Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:35.641222570Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:35.641224113Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Uq6qrsDYxyf6\",\n        \"username\": \"user-27ea9121-6dbf-4d17-a67a-af8a54997743\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "27ea9121-6dbf-4d17-a67a-af8a54997743"
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:29:34.979909Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"27ea9121-6dbf-4d17-a67a-af8a54997743\",\n    \"resourceVersion\": \"f384f5d9-7b6e-479a-962f-8d6130dd694b\",\n    \"uid\": \"ac48f94b-7520-48e2-89ae-519632747c80\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:29:35.641251274Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:29:35.641284866Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:35.034844200Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:35.043963578Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:35.353937232Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:35.368675396Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:35.641222570Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:29:35.641224113Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Uq6qrsDYxyf6\",\n        \"username\": \"user-27ea9121-6dbf-4d17-a67a-af8a54997743\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "27ea9121-6dbf-4d17-a67a-af8a54997743" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU2NzQsImlhdCI6MTYzMTc5NTM3NCwiYXV0aF90aW1lIjoxNjMxNzk1MzY5LCJqdGkiOiJmZWEzMmU2ZS1kNDIwLTRhZGItODc0Ni1mMTE2YzI1NzFjZWYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiYWNjb3VudCJdLCJzdWIiOiI4ODZmYjAyOC0yOTM1LTQ0Y2MtYjE5Ny04ZDUwYjhlODI4OTYiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiOGE3YjQzOWYtZmQ5ZS00YTIxLWFiYWMtNzM3NzliODU2NDI2IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vY29uc29sZS4xNzIuMTguMC4yLm5pcC5pbyIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZHJvZ3VlLXVzZXIiLCJkcm9ndWUtYWRtaW4iLCJvZmZsaW5lX2FjY2VzcyJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXVzZXJzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBwcm9maWxlIiwic2lkIjoiOGE3YjQzOWYtZmQ5ZS00YTIxLWFiYWMtNzM3NzliODU2NDI2IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiU3lzdGVtIEFkbWluIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4iLCJnaXZlbl9uYW1lIjoiU3lzdGVtIiwiZmFtaWx5X25hbWUiOiJBZG1pbiIsImVtYWlsIjoidXNlckBleGFtcGxlLmNvbSJ9.mOdKJFIAEaXNvNrfNpEG1TMvap_BPU7BiR8JX9wOulHrNNF5N5keMFGX7V0Wb6WTgWZ5mNf0dwu_3UW2l8c9F0zZ1VTK-V2FkW3Ep74B59o0GHTjxXLexnsPLUr2FtzAq6askE6E4dk5cgFB-NwP-OABoUUXqjTJ2vxrUEjN5HaAFXHcEAv8nLIOMVKMIthehj0NXV31JeYpiUeFGxFiLt-Yn8uv7XcT6p8t9_PekZqnRq90eybwv3K_LMPQLD-6foaHMO2IOlM4XzyVJhp6KX65ilZ5or4AYVKbY0kf0dPR062yBNvkHdSWmHOvHdVrWjxcBphPfdE2oglF67obSQ\n", stderr: "" })
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:29:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:29:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:29:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:29:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:29:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:29:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:29:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:29:40Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 443, payload: 0x7fb658015b80, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } }, data: MessageData { topic: "app/27ea9121-6dbf-4d17-a67a-af8a54997743", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 55, 52, 100, 57, 97, 99, 54, 56, 45, 102, 48, 101, 49, 45, 52, 56, 52, 50, 45, 97, 97, 102, 52, 45, 97, 50, 54, 55, 101, 99, 53, 100, 48, 54, 57, 99, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 50, 55, 101, 97, 57, 49, 50, 49, 37, 50, 68, 54, 100, 98, 102, 37, 50, 68, 52, 100, 49, 55, 37, 50, 68, 97, 54, 55, 97, 37, 50, 68, 97, 102, 56, 97, 53, 52, 57, 57, 55, 55, 52, 51, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 106, 115, 111, 110, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 119, 97, 114, 109, 117, 112, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 50, 58, 50, 57, 58, 52, 48, 46, 50, 51, 50, 48, 48, 48, 51, 55, 51, 90, 34, 44, 34, 100, 97, 116, 97, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 51, 125, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 50, 55, 101, 97, 57, 49, 50, 49, 45, 54, 100, 98, 102, 45, 52, 100, 49, 55, 45, 97, 54, 55, 97, 45, 97, 102, 56, 97, 53, 52, 57, 57, 55, 55, 52, 51, 34, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 50, 55, 101, 97, 57, 49, 50, 49, 37, 50, 68, 54, 100, 98, 102, 37, 50, 68, 52, 100, 49, 55, 37, 50, 68, 97, 54, 55, 97, 37, 50, 68, 97, 102, 56, 97, 53, 52, 57, 57, 55, 55, 52, 51, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 125], props: Properties { cprops: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } } } }
[2021-09-16T12:29:40Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/27ea9121-6dbf-4d17-a67a-af8a54997743", content_type: None, user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"74d9ac68-f0e1-4842-aaf4-a267ec5d069c\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://27ea9121%2D6dbf%2D4d17%2Da67a%2Daf8a54997743/device1\",\"datacontenttype\":\"application/json\",\"subject\":\"warmup\",\"time\":\"2021-09-16T12:29:40.232000373Z\",\"data\":{\"index\":3},\"application\":\"27ea9121-6dbf-4d17-a67a-af8a54997743\",\"instance\":\"drogue\",\"partitionkey\":\"27ea9121%2D6dbf%2D4d17%2Da67a%2Daf8a54997743/device1\",\"device\":\"device1\"}" }
[2021-09-16T12:29:41Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 3 attempts
[2021-09-16T12:29:41Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
[2021-09-16T12:29:41Z INFO  drogue_cloud_tests::tests::coap] Sending payload
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    71,
                    86,
                    50,
                    97,
                    87,
                    78,
                    108,
                    77,
                    85,
                    65,
                    121,
                    78,
                    50,
                    86,
                    104,
                    79,
                    84,
                    69,
                    121,
                    77,
                    83,
                    48,
                    50,
                    90,
                    71,
                    74,
                    109,
                    76,
                    84,
                    82,
                    107,
                    77,
                    84,
                    99,
                    116,
                    89,
                    84,
                    89,
                    51,
                    89,
                    83,
                    49,
                    104,
                    90,
                    106,
                    104,
                    104,
                    78,
                    84,
                    81,
                    53,
                    79,
                    84,
                    99,
                    51,
                    78,
                    68,
                    77,
                    54,
                    90,
                    109,
                    57,
                    118,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T12:30:16Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:30:16Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:30:16Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:30:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "27ea9121-6dbf-4d17-a67a-af8a54997743" "device1"
[2021-09-16T12:30:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:30:16Z INFO  drogue_cloud_tests::resources::apps] Destroy application '27ea9121-6dbf-4d17-a67a-af8a54997743'
[2021-09-16T12:30:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "27ea9121-6dbf-4d17-a67a-af8a54997743"
[2021-09-16T12:30:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 27ea9121-6dbf-4d17-a67a-af8a54997743 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_pass::version_2

**Duration**: 55.078501193s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:30:17Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T12:30:20Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTcyMjYsImlhdCI6MTYzMTc5NTQyNiwianRpIjoiMmM3NTE1MDItMGZiNy00YTU5LWExZTQtMjk4N2I5ZWEyY2NmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjY1YjFhZDEtMTVmNS00MTBiLThhNmItZWUyZjhhZDhkNzVjIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjI2NWIxYWQxLTE1ZjUtNDEwYi04YTZiLWVlMmY4YWQ4ZDc1YyJ9.csbxS962E2YRKJxARrjvH1yWiV8BnIUw2-jfchYZ09c
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTcyMjYsImlhdCI6MTYzMTc5NTQyNiwianRpIjoiMmM3NTE1MDItMGZiNy00YTU5LWExZTQtMjk4N2I5ZWEyY2NmIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjY1YjFhZDEtMTVmNS00MTBiLThhNmItZWUyZjhhZDhkNzVjIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjI2NWIxYWQxLTE1ZjUtNDEwYi04YTZiLWVlMmY4YWQ4ZDc1YyJ9.csbxS962E2YRKJxARrjvH1yWiV8BnIUw2-jfchYZ09c" "--context" "system-tests"
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU3MjcsImlhdCI6MTYzMTc5NTQyNywiYXV0aF90aW1lIjoxNjMxNzk1NDIzLCJqdGkiOiIwYmMxN2U5MC01NzcyLTRmNzAtYTViMy04MzYwMjE1NGNjOTgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjI2NWIxYWQxLTE1ZjUtNDEwYi04YTZiLWVlMmY4YWQ4ZDc1YyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIyNjViMWFkMS0xNWY1LTQxMGItOGE2Yi1lZTJmOGFkOGQ3NWMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.yMhnmzgFiA-UUJQlRFh3gpGTLzrTuDKqaQtlDUzyZzZ7C9E26e2_IrfmbW9jU9ePjIPEptqEwbNfhOIgiyUdSdsxkJKo61kC7i4IrlTzO_eoTYvjWbvv184YSUl_dxSNlaHLH9-WhgltLhtw-okXV_FSpyQidT3mBY-0qk_y-giXA5EaFfVdH8P5zVsrfYMjDjDwYt4lM7onvqNa5rgiax-ruLT1g_T-V9knQ-1Tzcapvo4oAo7VUwrjJlJ54qhdTSFCME4y3PbQByCqEKw3BIZWFd5HNL9diNQ3ejPogLJchsdWSOB44pjb19J1Gf0nlSa75ee3oVb6WtSRjvoSRQ\n", stderr: "" })
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::resources::apps] Create application: e1fed336-063f-41c0-91aa-ec640136d701
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "e1fed336-063f-41c0-91aa-ec640136d701"
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App e1fed336-063f-41c0-91aa-ec640136d701 created.\n", stderr: "" })
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e1fed336-063f-41c0-91aa-ec640136d701"
[2021-09-16T12:30:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:30:27.910032Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"e1fed336-063f-41c0-91aa-ec640136d701\",\n    \"resourceVersion\": \"3532dc1d-77ca-4486-b573-2d0ac83e9b46\",\n    \"uid\": \"92942ca3-0a7d-4930-9fd3-887938a5df6e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:30:27.950831478Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:30:27.950846565Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:27.950801342Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:27.950802774Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:27.950803356Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:27.950804016Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:27.950805379Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:27.950807222Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:30:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e1fed336-063f-41c0-91aa-ec640136d701"
[2021-09-16T12:30:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:30:27.910032Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"e1fed336-063f-41c0-91aa-ec640136d701\",\n    \"resourceVersion\": \"fa7efce0-60bf-4f35-b016-8d74a3a466a8\",\n    \"uid\": \"92942ca3-0a7d-4930-9fd3-887938a5df6e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:30:28.510961687Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:30:28.510988638Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:28.004915485Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:28.021192221Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:28.251555623Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:28.264755795Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:28.510942522Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:28.510943604Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"QysLXDpK9zxD\",\n        \"username\": \"user-e1fed336-063f-41c0-91aa-ec640136d701\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:30:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e1fed336-063f-41c0-91aa-ec640136d701"
[2021-09-16T12:30:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:30:27.910032Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"e1fed336-063f-41c0-91aa-ec640136d701\",\n    \"resourceVersion\": \"fa7efce0-60bf-4f35-b016-8d74a3a466a8\",\n    \"uid\": \"92942ca3-0a7d-4930-9fd3-887938a5df6e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:30:28.510961687Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:30:28.510988638Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:28.004915485Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:28.021192221Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:28.251555623Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:28.264755795Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:28.510942522Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:30:28.510943604Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"QysLXDpK9zxD\",\n        \"username\": \"user-e1fed336-063f-41c0-91aa-ec640136d701\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:30:29Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:30:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "e1fed336-063f-41c0-91aa-ec640136d701" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-09-16T12:30:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:30:29Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:30:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:30:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU3MjcsImlhdCI6MTYzMTc5NTQyNywiYXV0aF90aW1lIjoxNjMxNzk1NDIzLCJqdGkiOiIwYmMxN2U5MC01NzcyLTRmNzAtYTViMy04MzYwMjE1NGNjOTgiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjI2NWIxYWQxLTE1ZjUtNDEwYi04YTZiLWVlMmY4YWQ4ZDc1YyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIyNjViMWFkMS0xNWY1LTQxMGItOGE2Yi1lZTJmOGFkOGQ3NWMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.yMhnmzgFiA-UUJQlRFh3gpGTLzrTuDKqaQtlDUzyZzZ7C9E26e2_IrfmbW9jU9ePjIPEptqEwbNfhOIgiyUdSdsxkJKo61kC7i4IrlTzO_eoTYvjWbvv184YSUl_dxSNlaHLH9-WhgltLhtw-okXV_FSpyQidT3mBY-0qk_y-giXA5EaFfVdH8P5zVsrfYMjDjDwYt4lM7onvqNa5rgiax-ruLT1g_T-V9knQ-1Tzcapvo4oAo7VUwrjJlJ54qhdTSFCME4y3PbQByCqEKw3BIZWFd5HNL9diNQ3ejPogLJchsdWSOB44pjb19J1Gf0nlSa75ee3oVb6WtSRjvoSRQ\n", stderr: "" })
[2021-09-16T12:30:29Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T12:30:29Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:30:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:30:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:30:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:30:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:30:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:30:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:30:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:30:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:30:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:30:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:30:34Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 443, payload: 0x7fb65c0152e0, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 2, max_count: 10, length: 48, array: 0x7fb65c0154b0 } }, data: MessageData { topic: "app/e1fed336-063f-41c0-91aa-ec640136d701", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 51, 99, 53, 53, 52, 102, 56, 51, 45, 49, 54, 52, 51, 45, 52, 57, 97, 52, 45, 57, 54, 98, 53, 45, 56, 53, 99, 51, 101, 100, 52, 98, 48, 49, 54, 55, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 101, 49, 102, 101, 100, 51, 51, 54, 37, 50, 68, 48, 54, 51, 102, 37, 50, 68, 52, 49, 99, 48, 37, 50, 68, 57, 49, 97, 97, 37, 50, 68, 101, 99, 54, 52, 48, 49, 51, 54, 100, 55, 48, 49, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 106, 115, 111, 110, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 119, 97, 114, 109, 117, 112, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 50, 58, 51, 48, 58, 51, 52, 46, 50, 55, 49, 48, 55, 53, 57, 53, 52, 90, 34, 44, 34, 100, 97, 116, 97, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 52, 125, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 101, 49, 102, 101, 100, 51, 51, 54, 45, 48, 54, 51, 102, 45, 52, 49, 99, 48, 45, 57, 49, 97, 97, 45, 101, 99, 54, 52, 48, 49, 51, 54, 100, 55, 48, 49, 34, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 101, 49, 102, 101, 100, 51, 51, 54, 37, 50, 68, 48, 54, 51, 102, 37, 50, 68, 52, 49, 99, 48, 37, 50, 68, 57, 49, 97, 97, 37, 50, 68, 101, 99, 54, 52, 48, 49, 51, 54, 100, 55, 48, 49, 47, 100, 101, 118, 105, 99, 101, 49, 34, 125], props: Properties { cprops: MQTTProperties { count: 2, max_count: 10, length: 48, array: 0x7fb65c0154b0 } } } }
[2021-09-16T12:30:34Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/e1fed336-063f-41c0-91aa-ec640136d701", content_type: Some("application/cloudevents+json; charset=utf-8"), user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"3c554f83-1643-49a4-96b5-85c3ed4b0167\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://e1fed336%2D063f%2D41c0%2D91aa%2Dec640136d701/device1\",\"datacontenttype\":\"application/json\",\"subject\":\"warmup\",\"time\":\"2021-09-16T12:30:34.271075954Z\",\"data\":{\"index\":4},\"device\":\"device1\",\"application\":\"e1fed336-063f-41c0-91aa-ec640136d701\",\"instance\":\"drogue\",\"partitionkey\":\"e1fed336%2D063f%2D41c0%2D91aa%2Dec640136d701/device1\"}" }
[2021-09-16T12:30:35Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 4 attempts
[2021-09-16T12:30:35Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
[2021-09-16T12:30:35Z INFO  drogue_cloud_tests::tests::coap] Sending payload
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    71,
                    86,
                    50,
                    97,
                    87,
                    78,
                    108,
                    77,
                    85,
                    66,
                    108,
                    77,
                    87,
                    90,
                    108,
                    90,
                    68,
                    77,
                    122,
                    78,
                    105,
                    48,
                    119,
                    78,
                    106,
                    78,
                    109,
                    76,
                    84,
                    81,
                    120,
                    89,
                    122,
                    65,
                    116,
                    79,
                    84,
                    70,
                    104,
                    89,
                    83,
                    49,
                    108,
                    89,
                    122,
                    89,
                    48,
                    77,
                    68,
                    69,
                    122,
                    78,
                    109,
                    81,
                    51,
                    77,
                    68,
                    69,
                    54,
                    90,
                    109,
                    57,
                    118,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T12:31:11Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:31:11Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:31:11Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:31:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "e1fed336-063f-41c0-91aa-ec640136d701" "device1"
[2021-09-16T12:31:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:31:11Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'e1fed336-063f-41c0-91aa-ec640136d701'
[2021-09-16T12:31:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "e1fed336-063f-41c0-91aa-ec640136d701"
[2021-09-16T12:31:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App e1fed336-063f-41c0-91aa-ec640136d701 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_pass::version_3

**Duration**: 54.161910238s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:31:12Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T12:31:15Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTcyODEsImlhdCI6MTYzMTc5NTQ4MSwianRpIjoiMzYxNWIxNzAtMDUwMS00MjdlLThiZDMtNjlhMTg4MDRkYjIxIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjI1OTY0MTctZWNjZS00MTQzLTk1ODItNGRlNjNmNjFkYmRjIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjIyNTk2NDE3LWVjY2UtNDE0My05NTgyLTRkZTYzZjYxZGJkYyJ9.82WyTW7KpFqxPePO-hVquJmQTKrPKr6_yBnWLKqL_3g
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTcyODEsImlhdCI6MTYzMTc5NTQ4MSwianRpIjoiMzYxNWIxNzAtMDUwMS00MjdlLThiZDMtNjlhMTg4MDRkYjIxIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjI1OTY0MTctZWNjZS00MTQzLTk1ODItNGRlNjNmNjFkYmRjIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjIyNTk2NDE3LWVjY2UtNDE0My05NTgyLTRkZTYzZjYxZGJkYyJ9.82WyTW7KpFqxPePO-hVquJmQTKrPKr6_yBnWLKqL_3g" "--context" "system-tests"
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU3ODIsImlhdCI6MTYzMTc5NTQ4MiwiYXV0aF90aW1lIjoxNjMxNzk1NDc4LCJqdGkiOiIyZmRiMTA2My0zY2UwLTRkNGQtYTkzZS0xYWUyODg1ODFkODUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjIyNTk2NDE3LWVjY2UtNDE0My05NTgyLTRkZTYzZjYxZGJkYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIyMjU5NjQxNy1lY2NlLTQxNDMtOTU4Mi00ZGU2M2Y2MWRiZGMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.bqRoQC7T3fqsJT63pP_sVxD2g5adsNXAcvc6bet-Itf1EE2g63Jc_XQ8ZuvbefMl0qAsjtAO_6yb2PJbJz0uez9XA4BK43rBY3jQjnlUferfebbDt7-YByi-_zXwY6yxJyl5dSzR6OVJdcX1j5Y-UyQw0p6ynumhEbPTeVaQp4ObFrWFy2FuXgP-WK0dK6HPfmbn3DQysDRC9wjWqaCC8i3Z1TIpea4Q8cV5t2SMsNfWwHH7E7oTIVPRzPB7EZol14r_sBaKSyZR-eykuqCgD5B3XNBp-ix-myiqU3MkOvefkdE9TR7zvEqE7P_H8OEFRxO52otdqXiN0hEvEt524A\n", stderr: "" })
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::resources::apps] Create application: dd09d4f4-0e99-41b8-bf75-95f20925300f
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "dd09d4f4-0e99-41b8-bf75-95f20925300f"
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App dd09d4f4-0e99-41b8-bf75-95f20925300f created.\n", stderr: "" })
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "dd09d4f4-0e99-41b8-bf75-95f20925300f"
[2021-09-16T12:31:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:31:22.914897Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"dd09d4f4-0e99-41b8-bf75-95f20925300f\",\n    \"resourceVersion\": \"dd975983-3d9d-4ae8-94f8-9f0f8a56644e\",\n    \"uid\": \"e636c566-1045-45d9-806b-fcde2906c41a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:31:22.942423835Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:31:22.942437169Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:22.942402155Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:22.942403016Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:22.942403487Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:22.942404439Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:22.942404789Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:22.942406002Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:31:23Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "dd09d4f4-0e99-41b8-bf75-95f20925300f"
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:31:22.914897Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"dd09d4f4-0e99-41b8-bf75-95f20925300f\",\n    \"resourceVersion\": \"370c69f7-e73a-43af-ad00-1206ce535bc1\",\n    \"uid\": \"e636c566-1045-45d9-806b-fcde2906c41a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:31:23.421071550Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:31:23.421104361Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:22.996691219Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:23.010421353Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:23.177442318Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:23.184429121Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:23.421050621Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:23.421052063Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Hl0WmXhkPZds\",\n        \"username\": \"user-dd09d4f4-0e99-41b8-bf75-95f20925300f\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "dd09d4f4-0e99-41b8-bf75-95f20925300f"
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:31:22.914897Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"dd09d4f4-0e99-41b8-bf75-95f20925300f\",\n    \"resourceVersion\": \"370c69f7-e73a-43af-ad00-1206ce535bc1\",\n    \"uid\": \"e636c566-1045-45d9-806b-fcde2906c41a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:31:23.421071550Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:31:23.421104361Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:22.996691219Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:23.010421353Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:23.177442318Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:23.184429121Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:23.421050621Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:31:23.421052063Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"Hl0WmXhkPZds\",\n        \"username\": \"user-dd09d4f4-0e99-41b8-bf75-95f20925300f\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "dd09d4f4-0e99-41b8-bf75-95f20925300f" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"pass\":\"foo\"}]}}"
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU3ODIsImlhdCI6MTYzMTc5NTQ4MiwiYXV0aF90aW1lIjoxNjMxNzk1NDc4LCJqdGkiOiIyZmRiMTA2My0zY2UwLTRkNGQtYTkzZS0xYWUyODg1ODFkODUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjIyNTk2NDE3LWVjY2UtNDE0My05NTgyLTRkZTYzZjYxZGJkYyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIyMjU5NjQxNy1lY2NlLTQxNDMtOTU4Mi00ZGU2M2Y2MWRiZGMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.bqRoQC7T3fqsJT63pP_sVxD2g5adsNXAcvc6bet-Itf1EE2g63Jc_XQ8ZuvbefMl0qAsjtAO_6yb2PJbJz0uez9XA4BK43rBY3jQjnlUferfebbDt7-YByi-_zXwY6yxJyl5dSzR6OVJdcX1j5Y-UyQw0p6ynumhEbPTeVaQp4ObFrWFy2FuXgP-WK0dK6HPfmbn3DQysDRC9wjWqaCC8i3Z1TIpea4Q8cV5t2SMsNfWwHH7E7oTIVPRzPB7EZol14r_sBaKSyZR-eykuqCgD5B3XNBp-ix-myiqU3MkOvefkdE9TR7zvEqE7P_H8OEFRxO52otdqXiN0hEvEt524A\n", stderr: "" })
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:31:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:31:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:31:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:31:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:31:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:31:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:31:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:31:28Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 11, payload: 0x7fb658010200, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 11, max_count: 20, length: 400, array: 0x562647dd6d60 } }, data: MessageData { topic: "app/dd09d4f4-0e99-41b8-bf75-95f20925300f", payload: [123, 34, 105, 110, 100, 101, 120, 34, 58, 51, 125], props: Properties { cprops: MQTTProperties { count: 11, max_count: 20, length: 400, array: 0x562647dd6d60 } } } }
[2021-09-16T12:31:28Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/dd09d4f4-0e99-41b8-bf75-95f20925300f", content_type: Some("application/json"), user_properties: {"time": "2021-09-16T12:31:28.238297264+00:00", "instance": "drogue", "type": "io.drogue.event.v1", "id": "d02cc326-bc75-4881-bd01-340aa88cd75f", "device": "device1", "subject": "warmup", "partitionkey": "dd09d4f4%2D0e99%2D41b8%2Dbf75%2D95f20925300f/device1", "application": "dd09d4f4-0e99-41b8-bf75-95f20925300f", "specversion": "1.0", "source": "drogue://dd09d4f4%2D0e99%2D41b8%2Dbf75%2D95f20925300f/device1"}, payload: "{\"index\":3}" }
[2021-09-16T12:31:29Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 3 attempts
[2021-09-16T12:31:29Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
[2021-09-16T12:31:29Z INFO  drogue_cloud_tests::tests::coap] Sending payload
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    71,
                    86,
                    50,
                    97,
                    87,
                    78,
                    108,
                    77,
                    85,
                    66,
                    107,
                    90,
                    68,
                    65,
                    53,
                    90,
                    68,
                    82,
                    109,
                    78,
                    67,
                    48,
                    119,
                    90,
                    84,
                    107,
                    53,
                    76,
                    84,
                    81,
                    120,
                    89,
                    106,
                    103,
                    116,
                    89,
                    109,
                    89,
                    51,
                    78,
                    83,
                    48,
                    53,
                    78,
                    87,
                    89,
                    121,
                    77,
                    68,
                    107,
                    121,
                    78,
                    84,
                    77,
                    119,
                    77,
                    71,
                    89,
                    54,
                    90,
                    109,
                    57,
                    118,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T12:32:04Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:32:04Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:32:05Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:32:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "dd09d4f4-0e99-41b8-bf75-95f20925300f" "device1"
[2021-09-16T12:32:05Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:32:05Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'dd09d4f4-0e99-41b8-bf75-95f20925300f'
[2021-09-16T12:32:05Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "dd09d4f4-0e99-41b8-bf75-95f20925300f"
[2021-09-16T12:32:06Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App dd09d4f4-0e99-41b8-bf75-95f20925300f deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user::version_1

**Duration**: 44.472384308s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:32:06Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T12:32:09Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTczMzUsImlhdCI6MTYzMTc5NTUzNSwianRpIjoiY2NlMWNmMDQtYTU3MC00NjRhLTkwNTAtNzY3YzFiYzBkNmUzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMDE2NjBlMTQtYzIzNS00MmJjLWE1ODUtZjljZjQ3MGNjM2NkIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjAxNjYwZTE0LWMyMzUtNDJiYy1hNTg1LWY5Y2Y0NzBjYzNjZCJ9.FQKvmFFqxHKhi2NtDht_uy1tKmlA_cEjyrB9j29jw9M
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTczMzUsImlhdCI6MTYzMTc5NTUzNSwianRpIjoiY2NlMWNmMDQtYTU3MC00NjRhLTkwNTAtNzY3YzFiYzBkNmUzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMDE2NjBlMTQtYzIzNS00MmJjLWE1ODUtZjljZjQ3MGNjM2NkIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjAxNjYwZTE0LWMyMzUtNDJiYy1hNTg1LWY5Y2Y0NzBjYzNjZCJ9.FQKvmFFqxHKhi2NtDht_uy1tKmlA_cEjyrB9j29jw9M" "--context" "system-tests"
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU4MzcsImlhdCI6MTYzMTc5NTUzNywiYXV0aF90aW1lIjoxNjMxNzk1NTMyLCJqdGkiOiJiODEzNDE5MC1jN2E3LTQ2NDQtOTFhYi03MTE2ZmUxN2NhMTAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjAxNjYwZTE0LWMyMzUtNDJiYy1hNTg1LWY5Y2Y0NzBjYzNjZCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIwMTY2MGUxNC1jMjM1LTQyYmMtYTU4NS1mOWNmNDcwY2MzY2QiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.zEJsPJWgpKQWw3pwixJoGNAxxUZgy_hHW-rhR3jDwBKitPZ3OIEcWgeuLRK0K04vD7qcN3LhFlROmRyxOq0XHsKb6taOGsMNfaKemm1XL80GcdSIh3CCaDpQ3qcHlPEizf81RdLJ2bdyjYhRJ-oWpm4uTGextYpKAIIUR4yVfHdeue5cUwspa5A4xcVr-sZFa5Kh4QnoaHlbaw_KMvqZZsN9PP6OE8wzRG3JL8933A8TDStxECSZzhH9AIl2fcSJ99LWF1vAoCK9RF-e062MXgOi0NBu47gmelyb5rtXiSw-SzhV5dBZyivorMV8bdvEehP8YUb5cuHuDEZ1B46opA\n", stderr: "" })
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::resources::apps] Create application: b303361a-f4d7-4d62-bd76-73d4ec438921
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "b303361a-f4d7-4d62-bd76-73d4ec438921"
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b303361a-f4d7-4d62-bd76-73d4ec438921 created.\n", stderr: "" })
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b303361a-f4d7-4d62-bd76-73d4ec438921"
[2021-09-16T12:32:17Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:32:17.344977Z\",\n    \"generation\": 0,\n    \"name\": \"b303361a-f4d7-4d62-bd76-73d4ec438921\",\n    \"resourceVersion\": \"4126b8ce-fc3d-433c-9f0f-6c8f64c5fa41\",\n    \"uid\": \"77d0f4de-a175-479a-8c0d-284cb8d2d0b2\"\n  }\n}", stderr: "" })
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b303361a-f4d7-4d62-bd76-73d4ec438921"
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:32:17.344977Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"b303361a-f4d7-4d62-bd76-73d4ec438921\",\n    \"resourceVersion\": \"5bbde9f0-c29f-4ce4-b907-b9fe8f35de5e\",\n    \"uid\": \"77d0f4de-a175-479a-8c0d-284cb8d2d0b2\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:32:17.939630639Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:32:17.939596936Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:32:17.439795644Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:32:17.445258296Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:32:17.681199495Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:32:17.701296099Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:32:17.939568543Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:32:17.939569925Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"ZJHCXGKVzkMM\",\n        \"username\": \"user-b303361a-f4d7-4d62-bd76-73d4ec438921\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "b303361a-f4d7-4d62-bd76-73d4ec438921"
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:32:17.344977Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"b303361a-f4d7-4d62-bd76-73d4ec438921\",\n    \"resourceVersion\": \"5bbde9f0-c29f-4ce4-b907-b9fe8f35de5e\",\n    \"uid\": \"77d0f4de-a175-479a-8c0d-284cb8d2d0b2\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:32:17.939630639Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:32:17.939596936Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:32:17.439795644Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:32:17.445258296Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:32:17.681199495Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:32:17.701296099Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:32:17.939568543Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:32:17.939569925Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"ZJHCXGKVzkMM\",\n        \"username\": \"user-b303361a-f4d7-4d62-bd76-73d4ec438921\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "b303361a-f4d7-4d62-bd76-73d4ec438921" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU4MzcsImlhdCI6MTYzMTc5NTUzNywiYXV0aF90aW1lIjoxNjMxNzk1NTMyLCJqdGkiOiJiODEzNDE5MC1jN2E3LTQ2NDQtOTFhYi03MTE2ZmUxN2NhMTAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjAxNjYwZTE0LWMyMzUtNDJiYy1hNTg1LWY5Y2Y0NzBjYzNjZCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIwMTY2MGUxNC1jMjM1LTQyYmMtYTU4NS1mOWNmNDcwY2MzY2QiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.zEJsPJWgpKQWw3pwixJoGNAxxUZgy_hHW-rhR3jDwBKitPZ3OIEcWgeuLRK0K04vD7qcN3LhFlROmRyxOq0XHsKb6taOGsMNfaKemm1XL80GcdSIh3CCaDpQ3qcHlPEizf81RdLJ2bdyjYhRJ-oWpm4uTGextYpKAIIUR4yVfHdeue5cUwspa5A4xcVr-sZFa5Kh4QnoaHlbaw_KMvqZZsN9PP6OE8wzRG3JL8933A8TDStxECSZzhH9AIl2fcSJ99LWF1vAoCK9RF-e062MXgOi0NBu47gmelyb5rtXiSw-SzhV5dBZyivorMV8bdvEehP8YUb5cuHuDEZ1B46opA\n", stderr: "" })
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:32:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:37Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:43Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:32:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:32:49Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T12:32:49Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:32:49Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:32:50Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:32:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "b303361a-f4d7-4d62-bd76-73d4ec438921" "device1"
[2021-09-16T12:32:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:32:50Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'b303361a-f4d7-4d62-bd76-73d4ec438921'
[2021-09-16T12:32:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "b303361a-f4d7-4d62-bd76-73d4ec438921"
[2021-09-16T12:32:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App b303361a-f4d7-4d62-bd76-73d4ec438921 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user::version_2

**Duration**: 49.38000755s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:32:51Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T12:32:53Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTczODEsImlhdCI6MTYzMTc5NTU4MSwianRpIjoiOTY5OTk5MzctMDFkMi00MWI5LTk5OTMtYWZlYmI5ZDVkZWU1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNWNlODE2ZTAtZTEwMi00ZmExLWFjNGUtZTcxZjRlZjZhZDhkIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjVjZTgxNmUwLWUxMDItNGZhMS1hYzRlLWU3MWY0ZWY2YWQ4ZCJ9.n-Gl5a40LngSTcW2GaQbg-CoikIHScqqywCP13NRyyY
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTczODEsImlhdCI6MTYzMTc5NTU4MSwianRpIjoiOTY5OTk5MzctMDFkMi00MWI5LTk5OTMtYWZlYmI5ZDVkZWU1IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNWNlODE2ZTAtZTEwMi00ZmExLWFjNGUtZTcxZjRlZjZhZDhkIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjVjZTgxNmUwLWUxMDItNGZhMS1hYzRlLWU3MWY0ZWY2YWQ4ZCJ9.n-Gl5a40LngSTcW2GaQbg-CoikIHScqqywCP13NRyyY" "--context" "system-tests"
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU4ODIsImlhdCI6MTYzMTc5NTU4MiwiYXV0aF90aW1lIjoxNjMxNzk1NTc2LCJqdGkiOiIxYjliNzYxZS00ZDAyLTQ3ZGEtYWMzZS05OTAxZTZiNGNlZDUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjVjZTgxNmUwLWUxMDItNGZhMS1hYzRlLWU3MWY0ZWY2YWQ4ZCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiI1Y2U4MTZlMC1lMTAyLTRmYTEtYWM0ZS1lNzFmNGVmNmFkOGQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.YA8FT3cK3VbhjvME5fALDnU39Q80Zqo7fHi1keMeYGeKtdPzr2YGW4P5AZil27363Q-MouWdrBPGTdeqp9LzH2Zo9xpAd1c0YynkddsimK11zfxaErJK5gAssucvmYX8SEJTyyTf7gHjFWlD2in-98RXFD4yrW3-zMyc3UIk7OEXu6C-xmArydiYbj2tlFPN3pcKenOXgV5rjWo07xzI5TeKScPZeYus3tGrB6CSgLNiJZMqCUJaWWpfJ5NNcan460sj5Ek-hOtgSgfkPE-_YY3zchY88-zrZ4CjjbiXP0EvgYWhQt8Sv6311vM1PoT3r787FdYELlPX5IjGifpbDQ\n", stderr: "" })
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::resources::apps] Create application: 9b770447-fbad-46aa-9a4f-2968b82d9266
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "9b770447-fbad-46aa-9a4f-2968b82d9266"
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 9b770447-fbad-46aa-9a4f-2968b82d9266 created.\n", stderr: "" })
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "9b770447-fbad-46aa-9a4f-2968b82d9266"
[2021-09-16T12:33:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:33:02.429321Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"9b770447-fbad-46aa-9a4f-2968b82d9266\",\n    \"resourceVersion\": \"69352c02-039a-4417-b341-25f9a574d9cf\",\n    \"uid\": \"0ed1d0af-9b93-45ae-ac18-2c0ab747e23a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:33:02.443994862Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:33:02.444012774Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.443963553Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.443964935Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.443965697Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.443966439Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.443967931Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.443969875Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "9b770447-fbad-46aa-9a4f-2968b82d9266"
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:33:02.429321Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"9b770447-fbad-46aa-9a4f-2968b82d9266\",\n    \"resourceVersion\": \"dc51461c-1f29-46dd-be42-8d97278c3b8c\",\n    \"uid\": \"0ed1d0af-9b93-45ae-ac18-2c0ab747e23a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:33:02.972365622Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:33:02.972414012Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.479384615Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.486400369Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.682802311Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.699071506Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.972335466Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.972337389Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"aDlkuR5JTCnL\",\n        \"username\": \"user-9b770447-fbad-46aa-9a4f-2968b82d9266\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "9b770447-fbad-46aa-9a4f-2968b82d9266"
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:33:02.429321Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"9b770447-fbad-46aa-9a4f-2968b82d9266\",\n    \"resourceVersion\": \"dc51461c-1f29-46dd-be42-8d97278c3b8c\",\n    \"uid\": \"0ed1d0af-9b93-45ae-ac18-2c0ab747e23a\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:33:02.972365622Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:33:02.972414012Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.479384615Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.486400369Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.682802311Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.699071506Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.972335466Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:02.972337389Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"aDlkuR5JTCnL\",\n        \"username\": \"user-9b770447-fbad-46aa-9a4f-2968b82d9266\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "9b770447-fbad-46aa-9a4f-2968b82d9266" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU4ODIsImlhdCI6MTYzMTc5NTU4MiwiYXV0aF90aW1lIjoxNjMxNzk1NTc2LCJqdGkiOiIxYjliNzYxZS00ZDAyLTQ3ZGEtYWMzZS05OTAxZTZiNGNlZDUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjVjZTgxNmUwLWUxMDItNGZhMS1hYzRlLWU3MWY0ZWY2YWQ4ZCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiI1Y2U4MTZlMC1lMTAyLTRmYTEtYWM0ZS1lNzFmNGVmNmFkOGQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.YA8FT3cK3VbhjvME5fALDnU39Q80Zqo7fHi1keMeYGeKtdPzr2YGW4P5AZil27363Q-MouWdrBPGTdeqp9LzH2Zo9xpAd1c0YynkddsimK11zfxaErJK5gAssucvmYX8SEJTyyTf7gHjFWlD2in-98RXFD4yrW3-zMyc3UIk7OEXu6C-xmArydiYbj2tlFPN3pcKenOXgV5rjWo07xzI5TeKScPZeYus3tGrB6CSgLNiJZMqCUJaWWpfJ5NNcan460sj5Ek-hOtgSgfkPE-_YY3zchY88-zrZ4CjjbiXP0EvgYWhQt8Sv6311vM1PoT3r787FdYELlPX5IjGifpbDQ\n", stderr: "" })
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:33:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:12Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:13Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:39Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T12:33:39Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:33:39Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:33:39Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:33:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "9b770447-fbad-46aa-9a4f-2968b82d9266" "device1"
[2021-09-16T12:33:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:33:39Z INFO  drogue_cloud_tests::resources::apps] Destroy application '9b770447-fbad-46aa-9a4f-2968b82d9266'
[2021-09-16T12:33:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "9b770447-fbad-46aa-9a4f-2968b82d9266"
[2021-09-16T12:33:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 9b770447-fbad-46aa-9a4f-2968b82d9266 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user::version_3

**Duration**: 42.715339358s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:33:40Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T12:33:42Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc0MjksImlhdCI6MTYzMTc5NTYyOSwianRpIjoiZjRjNzc0ZTMtNmZlZS00NjdiLTk2YWQtMDY0MWUxMmY4NDA0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMDAzMDJkZDgtOGYwZi00ZWVhLTg1MWQtOGM1ZTg2YzI0YjVjIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjAwMzAyZGQ4LThmMGYtNGVlYS04NTFkLThjNWU4NmMyNGI1YyJ9.r1uljEvymLXiosJmT1cJGgId8RYw-cE_xKj9RdVCYGc
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc0MjksImlhdCI6MTYzMTc5NTYyOSwianRpIjoiZjRjNzc0ZTMtNmZlZS00NjdiLTk2YWQtMDY0MWUxMmY4NDA0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMDAzMDJkZDgtOGYwZi00ZWVhLTg1MWQtOGM1ZTg2YzI0YjVjIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjAwMzAyZGQ4LThmMGYtNGVlYS04NTFkLThjNWU4NmMyNGI1YyJ9.r1uljEvymLXiosJmT1cJGgId8RYw-cE_xKj9RdVCYGc" "--context" "system-tests"
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU5MzAsImlhdCI6MTYzMTc5NTYzMCwiYXV0aF90aW1lIjoxNjMxNzk1NjI1LCJqdGkiOiIzN2RjYTI0Yy1jOWI0LTQ0YjgtOTAyYi1lYTVmMTE2ODg4YzEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjAwMzAyZGQ4LThmMGYtNGVlYS04NTFkLThjNWU4NmMyNGI1YyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIwMDMwMmRkOC04ZjBmLTRlZWEtODUxZC04YzVlODZjMjRiNWMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.fDuTUBN6LPH_qnCDQZVgjT4HsfxRsO24-GWM6u_kdDSG4-LehIwpCOI7Dd45-QbbNUv0Qr9suYxpudl-58ae3ASUxL6HrwxTsXeYkLobniRxiroFoGyK5kIlAb-tQ6jpsaqO3GeJyDYgRj392In6BS0Omkz8Gp5DI7HNPqtrXxUZgX_I-L1BUUf3gxO3vuIkXRzNB4BqnZLWLLorsNSX5BrXVa0cE8TZ90ThnB19QPJw-qxshHrG_a-Z8zoT-inwM6QlVwXBsn1r_rwEwSGcERx4QTUIeRqISQGeSEFU2wRN_dv8SAzWLhKXGMWfSaIANm0bRT5MYWNNaQskc5emkQ\n", stderr: "" })
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::resources::apps] Create application: 27abba44-0fa5-4462-a77c-e33af3847010
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "27abba44-0fa5-4462-a77c-e33af3847010"
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 27abba44-0fa5-4462-a77c-e33af3847010 created.\n", stderr: "" })
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "27abba44-0fa5-4462-a77c-e33af3847010"
[2021-09-16T12:33:50Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:33:50.636698Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"27abba44-0fa5-4462-a77c-e33af3847010\",\n    \"resourceVersion\": \"6733ad36-8d2d-433f-98f0-dd3968b772d7\",\n    \"uid\": \"52b063e4-3376-473c-93c6-9866d59f8ee2\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:33:50.654723025Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:33:50.654736480Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.654700783Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.654701695Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.654702096Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.654702697Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.654704130Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.654705542Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "27abba44-0fa5-4462-a77c-e33af3847010"
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:33:50.636698Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"27abba44-0fa5-4462-a77c-e33af3847010\",\n    \"resourceVersion\": \"002879ff-7a8a-46b9-9432-1bb3fab35aa4\",\n    \"uid\": \"52b063e4-3376-473c-93c6-9866d59f8ee2\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:33:51.108410833Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:33:51.108443984Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.693224832Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.700136518Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.831724422Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.839987302Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:51.108390985Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:51.108392137Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"bzSr7tekpFIO\",\n        \"username\": \"user-27abba44-0fa5-4462-a77c-e33af3847010\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "27abba44-0fa5-4462-a77c-e33af3847010"
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:33:50.636698Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"27abba44-0fa5-4462-a77c-e33af3847010\",\n    \"resourceVersion\": \"002879ff-7a8a-46b9-9432-1bb3fab35aa4\",\n    \"uid\": \"52b063e4-3376-473c-93c6-9866d59f8ee2\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:33:51.108410833Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:33:51.108443984Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.693224832Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.700136518Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.831724422Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:50.839987302Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:51.108390985Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:33:51.108392137Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"bzSr7tekpFIO\",\n        \"username\": \"user-27abba44-0fa5-4462-a77c-e33af3847010\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "27abba44-0fa5-4462-a77c-e33af3847010" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU5MzAsImlhdCI6MTYzMTc5NTYzMCwiYXV0aF90aW1lIjoxNjMxNzk1NjI1LCJqdGkiOiIzN2RjYTI0Yy1jOWI0LTQ0YjgtOTAyYi1lYTVmMTE2ODg4YzEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjAwMzAyZGQ4LThmMGYtNGVlYS04NTFkLThjNWU4NmMyNGI1YyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIwMDMwMmRkOC04ZjBmLTRlZWEtODUxZC04YzVlODZjMjRiNWMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.fDuTUBN6LPH_qnCDQZVgjT4HsfxRsO24-GWM6u_kdDSG4-LehIwpCOI7Dd45-QbbNUv0Qr9suYxpudl-58ae3ASUxL6HrwxTsXeYkLobniRxiroFoGyK5kIlAb-tQ6jpsaqO3GeJyDYgRj392In6BS0Omkz8Gp5DI7HNPqtrXxUZgX_I-L1BUUf3gxO3vuIkXRzNB4BqnZLWLLorsNSX5BrXVa0cE8TZ90ThnB19QPJw-qxshHrG_a-Z8zoT-inwM6QlVwXBsn1r_rwEwSGcERx4QTUIeRqISQGeSEFU2wRN_dv8SAzWLhKXGMWfSaIANm0bRT5MYWNNaQskc5emkQ\n", stderr: "" })
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:51Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:55Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:33:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:33:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:12Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:13Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:22Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T12:34:22Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:34:22Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:34:22Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:34:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "27abba44-0fa5-4462-a77c-e33af3847010" "device1"
[2021-09-16T12:34:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:34:22Z INFO  drogue_cloud_tests::resources::apps] Destroy application '27abba44-0fa5-4462-a77c-e33af3847010'
[2021-09-16T12:34:22Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "27abba44-0fa5-4462-a77c-e33af3847010"
[2021-09-16T12:34:22Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 27abba44-0fa5-4462-a77c-e33af3847010 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_alias::version_1

**Duration**: 53.159013559s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:34:23Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T12:34:25Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc0NzEsImlhdCI6MTYzMTc5NTY3MSwianRpIjoiNmY3NmEzZGQtNWJjNC00MzkzLTg4MDctOGQ2YjE5YTU0ODg3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZTc3ZTNjYzEtYmRmNS00Zjk5LWEwOWYtNTA1NTFjMGQ5YWJmIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImU3N2UzY2MxLWJkZjUtNGY5OS1hMDlmLTUwNTUxYzBkOWFiZiJ9.hMnUSsuEWjqPOpf6Mrw8yrRp9bV4LSzId-BxJtm835A
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc0NzEsImlhdCI6MTYzMTc5NTY3MSwianRpIjoiNmY3NmEzZGQtNWJjNC00MzkzLTg4MDctOGQ2YjE5YTU0ODg3IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZTc3ZTNjYzEtYmRmNS00Zjk5LWEwOWYtNTA1NTFjMGQ5YWJmIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImU3N2UzY2MxLWJkZjUtNGY5OS1hMDlmLTUwNTUxYzBkOWFiZiJ9.hMnUSsuEWjqPOpf6Mrw8yrRp9bV4LSzId-BxJtm835A" "--context" "system-tests"
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU5NzMsImlhdCI6MTYzMTc5NTY3MywiYXV0aF90aW1lIjoxNjMxNzk1NjY4LCJqdGkiOiJiYTBjMzI0Ni1mNDBiLTQ4ZmMtOWRmZi02NDc2NWI2NTI0MDEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImU3N2UzY2MxLWJkZjUtNGY5OS1hMDlmLTUwNTUxYzBkOWFiZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiJlNzdlM2NjMS1iZGY1LTRmOTktYTA5Zi01MDU1MWMwZDlhYmYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.cRfsY7bEukh5pN4h2maF8irlp2fvrxGyDs6w1T4MMIXs1gW60JqD2MWlxnHKCwvxncyiEhZuM_XTYXXkabOSVNLA5oEGE5aiwrLuGpCoOBsPxKRBCsDr9qgAxMPBg-mEEskFDxbixe41NCxq7iqBgpanNb9-Y1JOT4mJ3z1eiZBpJb9jtM0IP_HIgLe9A5SMTGLFF1qIfc7tIs1Wr_ecBagcIHnBtYId81taqkwkKPe0_3ewvbB1cWuxF3Wh5lujL4IvycZBe_VaaJR5D_IPhj31Vzpc7Mjo2ktfFrEXPaO1BN_dhtUnPpHCM-QAKfqOkO7CbQOFj3CrjXpdLe2FHg\n", stderr: "" })
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::resources::apps] Create application: e06492d8-2581-4fb0-a276-0d4caf269365
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "e06492d8-2581-4fb0-a276-0d4caf269365"
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App e06492d8-2581-4fb0-a276-0d4caf269365 created.\n", stderr: "" })
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e06492d8-2581-4fb0-a276-0d4caf269365"
[2021-09-16T12:34:33Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:34:33.169262Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"e06492d8-2581-4fb0-a276-0d4caf269365\",\n    \"resourceVersion\": \"f42eee83-8420-4725-8986-ba8652ab8cf3\",\n    \"uid\": \"63295697-a2b4-49b4-b2f9-1f11eb34519c\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:34:33.203683110Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:34:33.203670266Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.203622858Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.203623729Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.203624140Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.203626194Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.203626694Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.203628017Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e06492d8-2581-4fb0-a276-0d4caf269365"
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:34:33.169262Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"e06492d8-2581-4fb0-a276-0d4caf269365\",\n    \"resourceVersion\": \"b83fa5a4-1b20-4d02-a2a2-015653f82496\",\n    \"uid\": \"63295697-a2b4-49b4-b2f9-1f11eb34519c\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:34:33.771240445Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:34:33.771207673Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.255366774Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.271803980Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.435242161Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.449307991Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.771180242Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.771181965Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"V8USbPaWvVR8\",\n        \"username\": \"user-e06492d8-2581-4fb0-a276-0d4caf269365\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "e06492d8-2581-4fb0-a276-0d4caf269365"
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:34:33.169262Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"e06492d8-2581-4fb0-a276-0d4caf269365\",\n    \"resourceVersion\": \"b83fa5a4-1b20-4d02-a2a2-015653f82496\",\n    \"uid\": \"63295697-a2b4-49b4-b2f9-1f11eb34519c\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:34:33.771240445Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:34:33.771207673Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.255366774Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.271803980Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.435242161Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.449307991Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.771180242Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:34:33.771181965Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"V8USbPaWvVR8\",\n        \"username\": \"user-e06492d8-2581-4fb0-a276-0d4caf269365\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "e06492d8-2581-4fb0-a276-0d4caf269365" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"unique\":true,\"username\":\"foo\"}}]}}"
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTU5NzMsImlhdCI6MTYzMTc5NTY3MywiYXV0aF90aW1lIjoxNjMxNzk1NjY4LCJqdGkiOiJiYTBjMzI0Ni1mNDBiLTQ4ZmMtOWRmZi02NDc2NWI2NTI0MDEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImU3N2UzY2MxLWJkZjUtNGY5OS1hMDlmLTUwNTUxYzBkOWFiZiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiJlNzdlM2NjMS1iZGY1LTRmOTktYTA5Zi01MDU1MWMwZDlhYmYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.cRfsY7bEukh5pN4h2maF8irlp2fvrxGyDs6w1T4MMIXs1gW60JqD2MWlxnHKCwvxncyiEhZuM_XTYXXkabOSVNLA5oEGE5aiwrLuGpCoOBsPxKRBCsDr9qgAxMPBg-mEEskFDxbixe41NCxq7iqBgpanNb9-Y1JOT4mJ3z1eiZBpJb9jtM0IP_HIgLe9A5SMTGLFF1qIfc7tIs1Wr_ecBagcIHnBtYId81taqkwkKPe0_3ewvbB1cWuxF3Wh5lujL4IvycZBe_VaaJR5D_IPhj31Vzpc7Mjo2ktfFrEXPaO1BN_dhtUnPpHCM-QAKfqOkO7CbQOFj3CrjXpdLe2FHg\n", stderr: "" })
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:34:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:37Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:34:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:34:38Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 443, payload: 0x7fb6640168b0, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } }, data: MessageData { topic: "app/e06492d8-2581-4fb0-a276-0d4caf269365", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 50, 50, 53, 53, 97, 100, 52, 57, 45, 57, 51, 55, 102, 45, 52, 54, 54, 102, 45, 57, 56, 101, 100, 45, 54, 53, 48, 57, 51, 101, 54, 50, 56, 98, 49, 51, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 101, 48, 54, 52, 57, 50, 100, 56, 37, 50, 68, 50, 53, 56, 49, 37, 50, 68, 52, 102, 98, 48, 37, 50, 68, 97, 50, 55, 54, 37, 50, 68, 48, 100, 52, 99, 97, 102, 50, 54, 57, 51, 54, 53, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 106, 115, 111, 110, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 119, 97, 114, 109, 117, 112, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 50, 58, 51, 52, 58, 51, 56, 46, 51, 52, 56, 53, 50, 53, 51, 56, 52, 90, 34, 44, 34, 100, 97, 116, 97, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 51, 125, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 101, 48, 54, 52, 57, 50, 100, 56, 37, 50, 68, 50, 53, 56, 49, 37, 50, 68, 52, 102, 98, 48, 37, 50, 68, 97, 50, 55, 54, 37, 50, 68, 48, 100, 52, 99, 97, 102, 50, 54, 57, 51, 54, 53, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 101, 48, 54, 52, 57, 50, 100, 56, 45, 50, 53, 56, 49, 45, 52, 102, 98, 48, 45, 97, 50, 55, 54, 45, 48, 100, 52, 99, 97, 102, 50, 54, 57, 51, 54, 53, 34, 125], props: Properties { cprops: MQTTProperties { count: 0, max_count: 0, length: 0, array: 0x0 } } } }
[2021-09-16T12:34:38Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/e06492d8-2581-4fb0-a276-0d4caf269365", content_type: None, user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"2255ad49-937f-466f-98ed-65093e628b13\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://e06492d8%2D2581%2D4fb0%2Da276%2D0d4caf269365/device1\",\"datacontenttype\":\"application/json\",\"subject\":\"warmup\",\"time\":\"2021-09-16T12:34:38.348525384Z\",\"data\":{\"index\":3},\"partitionkey\":\"e06492d8%2D2581%2D4fb0%2Da276%2D0d4caf269365/device1\",\"instance\":\"drogue\",\"device\":\"device1\",\"application\":\"e06492d8-2581-4fb0-a276-0d4caf269365\"}" }
[2021-09-16T12:34:39Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 3 attempts
[2021-09-16T12:34:39Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
[2021-09-16T12:34:39Z INFO  drogue_cloud_tests::tests::coap] Sending payload
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    109,
                    57,
                    118,
                    81,
                    71,
                    85,
                    119,
                    78,
                    106,
                    81,
                    53,
                    77,
                    109,
                    81,
                    52,
                    76,
                    84,
                    73,
                    49,
                    79,
                    68,
                    69,
                    116,
                    78,
                    71,
                    90,
                    105,
                    77,
                    67,
                    49,
                    104,
                    77,
                    106,
                    99,
                    50,
                    76,
                    84,
                    66,
                    107,
                    78,
                    71,
                    78,
                    104,
                    90,
                    106,
                    73,
                    50,
                    79,
                    84,
                    77,
                    50,
                    78,
                    84,
                    112,
                    105,
                    89,
                    88,
                    73,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T12:35:15Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:35:15Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:35:15Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:35:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "e06492d8-2581-4fb0-a276-0d4caf269365" "device1"
[2021-09-16T12:35:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:35:15Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'e06492d8-2581-4fb0-a276-0d4caf269365'
[2021-09-16T12:35:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "e06492d8-2581-4fb0-a276-0d4caf269365"
[2021-09-16T12:35:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App e06492d8-2581-4fb0-a276-0d4caf269365 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_alias::version_2

**Duration**: 53.079673294s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:35:16Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T12:35:19Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc1MjUsImlhdCI6MTYzMTc5NTcyNSwianRpIjoiNzU5NWYwMDEtZDQ1OS00ZmZkLWFlMWUtYjgyZDRmZGM4YzAxIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNjQyMmM3YzAtYzhhMS00NWM5LWI2NzgtMzAwMTJiMGViYjc2Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjY0MjJjN2MwLWM4YTEtNDVjOS1iNjc4LTMwMDEyYjBlYmI3NiJ9.zfG1fyNvPTFU9PwJAN-WBkq90vabQqrbUO8sej6yM8k
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc1MjUsImlhdCI6MTYzMTc5NTcyNSwianRpIjoiNzU5NWYwMDEtZDQ1OS00ZmZkLWFlMWUtYjgyZDRmZGM4YzAxIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNjQyMmM3YzAtYzhhMS00NWM5LWI2NzgtMzAwMTJiMGViYjc2Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjY0MjJjN2MwLWM4YTEtNDVjOS1iNjc4LTMwMDEyYjBlYmI3NiJ9.zfG1fyNvPTFU9PwJAN-WBkq90vabQqrbUO8sej6yM8k" "--context" "system-tests"
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTYwMjYsImlhdCI6MTYzMTc5NTcyNiwiYXV0aF90aW1lIjoxNjMxNzk1NzIxLCJqdGkiOiI3ZjkwYmJiYy0wYWU2LTQ3ODEtOGMyNy0zODkxZDY1MjE4NmUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjY0MjJjN2MwLWM4YTEtNDVjOS1iNjc4LTMwMDEyYjBlYmI3NiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiI2NDIyYzdjMC1jOGExLTQ1YzktYjY3OC0zMDAxMmIwZWJiNzYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.BnJmj9lZ033HDIgeTOuxRQr5PHD66r1c4pa2kRkbJ9IeR5xUyjsMncj5Rz5JnoBM-UBUlBI0V8hRpLikwBvItCoT9hIRoMTr39x0PwDNp6PQqXG7e3MSy5k7FS6dH3TUa4tNzzySv5UlO3VDQX_kfEgjPOrVOeR3JyeJHmX9jsdQrLqLNX9qsqwiFi7NOL-YKPR9s0CtmR44WvggcwHvvGlLMCrjCOZVzSbIoCvQdfQU9gyAWvLAjVcW8ankg-VGTSP5Ma_AWMp7RH_g6CfZNmsfDDj4Jeu4dBbqHnrPajPCSy5i1hNQfTj-OAGCQpKDuMw_gkSP801SbPDmFFfigg\n", stderr: "" })
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::resources::apps] Create application: 3266d013-9e7f-4ccc-903c-81751acfde62
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "3266d013-9e7f-4ccc-903c-81751acfde62"
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3266d013-9e7f-4ccc-903c-81751acfde62 created.\n", stderr: "" })
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3266d013-9e7f-4ccc-903c-81751acfde62"
[2021-09-16T12:35:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:35:26.846817Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"3266d013-9e7f-4ccc-903c-81751acfde62\",\n    \"resourceVersion\": \"ef94fe32-80d2-486d-9da4-a144424b8cc8\",\n    \"uid\": \"fa325c4d-8f45-4d24-8564-6c0422dae26c\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:35:26.878878701Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:35:26.878898609Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:26.878836462Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:26.878838446Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:26.878839298Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:26.878840229Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:26.878842383Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:26.878845288Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:35:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3266d013-9e7f-4ccc-903c-81751acfde62"
[2021-09-16T12:35:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:35:26.846817Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"3266d013-9e7f-4ccc-903c-81751acfde62\",\n    \"resourceVersion\": \"6c566900-cf0c-40fb-b137-18c07bd3cde6\",\n    \"uid\": \"fa325c4d-8f45-4d24-8564-6c0422dae26c\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:35:27.418401570Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:35:27.418445002Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:26.905068894Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:26.914782242Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:27.097456232Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:27.107365158Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:27.418375181Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:27.418376673Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"lKYen0DKM8Py\",\n        \"username\": \"user-3266d013-9e7f-4ccc-903c-81751acfde62\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:35:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "3266d013-9e7f-4ccc-903c-81751acfde62"
[2021-09-16T12:35:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:35:26.846817Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"3266d013-9e7f-4ccc-903c-81751acfde62\",\n    \"resourceVersion\": \"6c566900-cf0c-40fb-b137-18c07bd3cde6\",\n    \"uid\": \"fa325c4d-8f45-4d24-8564-6c0422dae26c\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:35:27.418401570Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:35:27.418445002Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:26.905068894Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:26.914782242Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:27.097456232Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:27.107365158Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:27.418375181Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:35:27.418376673Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"lKYen0DKM8Py\",\n        \"username\": \"user-3266d013-9e7f-4ccc-903c-81751acfde62\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:35:27Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:35:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "3266d013-9e7f-4ccc-903c-81751acfde62" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"unique\":true,\"username\":\"foo\"}}]}}"
[2021-09-16T12:35:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:35:27Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:35:27Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:35:27Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTYwMjYsImlhdCI6MTYzMTc5NTcyNiwiYXV0aF90aW1lIjoxNjMxNzk1NzIxLCJqdGkiOiI3ZjkwYmJiYy0wYWU2LTQ3ODEtOGMyNy0zODkxZDY1MjE4NmUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjY0MjJjN2MwLWM4YTEtNDVjOS1iNjc4LTMwMDEyYjBlYmI3NiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiI2NDIyYzdjMC1jOGExLTQ1YzktYjY3OC0zMDAxMmIwZWJiNzYiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.BnJmj9lZ033HDIgeTOuxRQr5PHD66r1c4pa2kRkbJ9IeR5xUyjsMncj5Rz5JnoBM-UBUlBI0V8hRpLikwBvItCoT9hIRoMTr39x0PwDNp6PQqXG7e3MSy5k7FS6dH3TUa4tNzzySv5UlO3VDQX_kfEgjPOrVOeR3JyeJHmX9jsdQrLqLNX9qsqwiFi7NOL-YKPR9s0CtmR44WvggcwHvvGlLMCrjCOZVzSbIoCvQdfQU9gyAWvLAjVcW8ankg-VGTSP5Ma_AWMp7RH_g6CfZNmsfDDj4Jeu4dBbqHnrPajPCSy5i1hNQfTj-OAGCQpKDuMw_gkSP801SbPDmFFfigg\n", stderr: "" })
[2021-09-16T12:35:28Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T12:35:28Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:35:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:35:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:35:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:35:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:35:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:35:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:35:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:35:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:35:31Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 443, payload: 0x7fb658015d70, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 2, max_count: 10, length: 48, array: 0x7fb658015f40 } }, data: MessageData { topic: "app/3266d013-9e7f-4ccc-903c-81751acfde62", payload: [123, 34, 115, 112, 101, 99, 118, 101, 114, 115, 105, 111, 110, 34, 58, 34, 49, 46, 48, 34, 44, 34, 105, 100, 34, 58, 34, 56, 52, 52, 102, 98, 55, 99, 56, 45, 98, 48, 49, 98, 45, 52, 55, 57, 48, 45, 56, 55, 101, 100, 45, 50, 57, 52, 53, 55, 51, 101, 50, 48, 97, 54, 56, 34, 44, 34, 116, 121, 112, 101, 34, 58, 34, 105, 111, 46, 100, 114, 111, 103, 117, 101, 46, 101, 118, 101, 110, 116, 46, 118, 49, 34, 44, 34, 115, 111, 117, 114, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 58, 47, 47, 51, 50, 54, 54, 100, 48, 49, 51, 37, 50, 68, 57, 101, 55, 102, 37, 50, 68, 52, 99, 99, 99, 37, 50, 68, 57, 48, 51, 99, 37, 50, 68, 56, 49, 55, 53, 49, 97, 99, 102, 100, 101, 54, 50, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 97, 116, 97, 99, 111, 110, 116, 101, 110, 116, 116, 121, 112, 101, 34, 58, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 47, 106, 115, 111, 110, 34, 44, 34, 115, 117, 98, 106, 101, 99, 116, 34, 58, 34, 119, 97, 114, 109, 117, 112, 34, 44, 34, 116, 105, 109, 101, 34, 58, 34, 50, 48, 50, 49, 45, 48, 57, 45, 49, 54, 84, 49, 50, 58, 51, 53, 58, 51, 49, 46, 51, 57, 51, 54, 53, 50, 48, 52, 51, 90, 34, 44, 34, 100, 97, 116, 97, 34, 58, 123, 34, 105, 110, 100, 101, 120, 34, 58, 51, 125, 44, 34, 105, 110, 115, 116, 97, 110, 99, 101, 34, 58, 34, 100, 114, 111, 103, 117, 101, 34, 44, 34, 112, 97, 114, 116, 105, 116, 105, 111, 110, 107, 101, 121, 34, 58, 34, 51, 50, 54, 54, 100, 48, 49, 51, 37, 50, 68, 57, 101, 55, 102, 37, 50, 68, 52, 99, 99, 99, 37, 50, 68, 57, 48, 51, 99, 37, 50, 68, 56, 49, 55, 53, 49, 97, 99, 102, 100, 101, 54, 50, 47, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 100, 101, 118, 105, 99, 101, 34, 58, 34, 100, 101, 118, 105, 99, 101, 49, 34, 44, 34, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 34, 58, 34, 51, 50, 54, 54, 100, 48, 49, 51, 45, 57, 101, 55, 102, 45, 52, 99, 99, 99, 45, 57, 48, 51, 99, 45, 56, 49, 55, 53, 49, 97, 99, 102, 100, 101, 54, 50, 34, 125], props: Properties { cprops: MQTTProperties { count: 2, max_count: 10, length: 48, array: 0x7fb658015f40 } } } }
[2021-09-16T12:35:31Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/3266d013-9e7f-4ccc-903c-81751acfde62", content_type: Some("application/cloudevents+json; charset=utf-8"), user_properties: {}, payload: "{\"specversion\":\"1.0\",\"id\":\"844fb7c8-b01b-4790-87ed-294573e20a68\",\"type\":\"io.drogue.event.v1\",\"source\":\"drogue://3266d013%2D9e7f%2D4ccc%2D903c%2D81751acfde62/device1\",\"datacontenttype\":\"application/json\",\"subject\":\"warmup\",\"time\":\"2021-09-16T12:35:31.393652043Z\",\"data\":{\"index\":3},\"instance\":\"drogue\",\"partitionkey\":\"3266d013%2D9e7f%2D4ccc%2D903c%2D81751acfde62/device1\",\"device\":\"device1\",\"application\":\"3266d013-9e7f-4ccc-903c-81751acfde62\"}" }
[2021-09-16T12:35:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 3 attempts
[2021-09-16T12:35:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
[2021-09-16T12:35:32Z INFO  drogue_cloud_tests::tests::coap] Sending payload
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    109,
                    57,
                    118,
                    81,
                    68,
                    77,
                    121,
                    78,
                    106,
                    90,
                    107,
                    77,
                    68,
                    69,
                    122,
                    76,
                    84,
                    108,
                    108,
                    78,
                    50,
                    89,
                    116,
                    78,
                    71,
                    78,
                    106,
                    89,
                    121,
                    48,
                    53,
                    77,
                    68,
                    78,
                    106,
                    76,
                    84,
                    103,
                    120,
                    78,
                    122,
                    85,
                    120,
                    89,
                    87,
                    78,
                    109,
                    90,
                    71,
                    85,
                    50,
                    77,
                    106,
                    112,
                    105,
                    89,
                    88,
                    73,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T12:36:08Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:36:08Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:36:08Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:36:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "3266d013-9e7f-4ccc-903c-81751acfde62" "device1"
[2021-09-16T12:36:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:36:08Z INFO  drogue_cloud_tests::resources::apps] Destroy application '3266d013-9e7f-4ccc-903c-81751acfde62'
[2021-09-16T12:36:08Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "3266d013-9e7f-4ccc-903c-81751acfde62"
[2021-09-16T12:36:08Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 3266d013-9e7f-4ccc-903c-81751acfde62 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_alias::version_3

**Duration**: 53.33935181s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:36:09Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T12:36:12Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc1NzgsImlhdCI6MTYzMTc5NTc3OCwianRpIjoiYjZiNDc0ZDUtNWI2ZS00ZmJjLThlNzktNzNmMWM1ODJhMzZkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMTM3YTIyODYtMWQwYS00YjI3LTkwYmYtMzdkY2Y0OGU0YmRlIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjEzN2EyMjg2LTFkMGEtNGIyNy05MGJmLTM3ZGNmNDhlNGJkZSJ9.BCNdn5xxaey9D_Pv9V87_10uae9AdWxjOPwW7qbdBpw
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc1NzgsImlhdCI6MTYzMTc5NTc3OCwianRpIjoiYjZiNDc0ZDUtNWI2ZS00ZmJjLThlNzktNzNmMWM1ODJhMzZkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMTM3YTIyODYtMWQwYS00YjI3LTkwYmYtMzdkY2Y0OGU0YmRlIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjEzN2EyMjg2LTFkMGEtNGIyNy05MGJmLTM3ZGNmNDhlNGJkZSJ9.BCNdn5xxaey9D_Pv9V87_10uae9AdWxjOPwW7qbdBpw" "--context" "system-tests"
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTYwNzksImlhdCI6MTYzMTc5NTc3OSwiYXV0aF90aW1lIjoxNjMxNzk1Nzc1LCJqdGkiOiIzNTU1ZTUyZS1hZjA4LTQzY2UtYTY3Mi1jOGRhYTU2NGRiMjQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjEzN2EyMjg2LTFkMGEtNGIyNy05MGJmLTM3ZGNmNDhlNGJkZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIxMzdhMjI4Ni0xZDBhLTRiMjctOTBiZi0zN2RjZjQ4ZTRiZGUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.dkJr_z0rzGQ4MpQqwFZXGCYGH0m0XbAxhoWaxrfp60Zc8BuFdoITPjqgiCEU72-vf9tOti0Q24rm_dgzC6cm55AU9rZZdf7OBqYkmF2qmauYimhjWGLOCy3ww8VQmeBFe2Cmj_ERe9wx7T_0bimNB_2d6vADIAnejGv0MyF2ST4UlmJ5bx_UdbHYxK_AHpGdGvRkyLDyTLHwhZjae4gi8USBVB0GfzzWGihIAoKGmz4mzt6-ThyXcR5McyPJd2KA1acAX_nMQuFlpHkOfX5whRFcT6SeUs8CIfM_hQ5CP4-xmqjSl2o0yV6_5_kiv_aoSxc7oNMd5ciwKZcqt_aBbA\n", stderr: "" })
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::resources::apps] Create application: da54cae9-5f94-4fa5-88ec-f831fde2b829
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "da54cae9-5f94-4fa5-88ec-f831fde2b829"
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App da54cae9-5f94-4fa5-88ec-f831fde2b829 created.\n", stderr: "" })
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "da54cae9-5f94-4fa5-88ec-f831fde2b829"
[2021-09-16T12:36:19Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:36:19.896381Z\",\n    \"generation\": 0,\n    \"name\": \"da54cae9-5f94-4fa5-88ec-f831fde2b829\",\n    \"resourceVersion\": \"8854f01f-a366-40ac-b434-8d189cbbb173\",\n    \"uid\": \"09b4c6d1-36e5-4bf0-a375-5e306929c250\"\n  }\n}", stderr: "" })
[2021-09-16T12:36:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "da54cae9-5f94-4fa5-88ec-f831fde2b829"
[2021-09-16T12:36:20Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:36:19.896381Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"da54cae9-5f94-4fa5-88ec-f831fde2b829\",\n    \"resourceVersion\": \"a2153388-ba79-49b6-8323-e15135fb8c93\",\n    \"uid\": \"09b4c6d1-36e5-4bf0-a375-5e306929c250\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:36:20.447316896Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:36:20.447281378Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:36:19.970974835Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:36:19.981212585Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:36:20.147284094Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:36:20.160083666Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:36:20.447254660Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:36:20.447256443Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"rnBv64NpTqCO\",\n        \"username\": \"user-da54cae9-5f94-4fa5-88ec-f831fde2b829\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:36:20Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "da54cae9-5f94-4fa5-88ec-f831fde2b829"
[2021-09-16T12:36:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:36:19.896381Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"da54cae9-5f94-4fa5-88ec-f831fde2b829\",\n    \"resourceVersion\": \"a2153388-ba79-49b6-8323-e15135fb8c93\",\n    \"uid\": \"09b4c6d1-36e5-4bf0-a375-5e306929c250\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:36:20.447316896Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:36:20.447281378Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:36:19.970974835Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:36:19.981212585Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:36:20.147284094Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:36:20.160083666Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:36:20.447254660Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:36:20.447256443Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"rnBv64NpTqCO\",\n        \"username\": \"user-da54cae9-5f94-4fa5-88ec-f831fde2b829\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:36:21Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:36:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "da54cae9-5f94-4fa5-88ec-f831fde2b829" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"unique\":true,\"username\":\"foo\"}}]}}"
[2021-09-16T12:36:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:36:21Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:36:21Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:36:21Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTYwNzksImlhdCI6MTYzMTc5NTc3OSwiYXV0aF90aW1lIjoxNjMxNzk1Nzc1LCJqdGkiOiIzNTU1ZTUyZS1hZjA4LTQzY2UtYTY3Mi1jOGRhYTU2NGRiMjQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjEzN2EyMjg2LTFkMGEtNGIyNy05MGJmLTM3ZGNmNDhlNGJkZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIxMzdhMjI4Ni0xZDBhLTRiMjctOTBiZi0zN2RjZjQ4ZTRiZGUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.dkJr_z0rzGQ4MpQqwFZXGCYGH0m0XbAxhoWaxrfp60Zc8BuFdoITPjqgiCEU72-vf9tOti0Q24rm_dgzC6cm55AU9rZZdf7OBqYkmF2qmauYimhjWGLOCy3ww8VQmeBFe2Cmj_ERe9wx7T_0bimNB_2d6vADIAnejGv0MyF2ST4UlmJ5bx_UdbHYxK_AHpGdGvRkyLDyTLHwhZjae4gi8USBVB0GfzzWGihIAoKGmz4mzt6-ThyXcR5McyPJd2KA1acAX_nMQuFlpHkOfX5whRFcT6SeUs8CIfM_hQ5CP4-xmqjSl2o0yV6_5_kiv_aoSxc7oNMd5ciwKZcqt_aBbA\n", stderr: "" })
[2021-09-16T12:36:21Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T12:36:21Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:36:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:36:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:36:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:36:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:36:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:36:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:36:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:36:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:36:24Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Raw message: Message { cmsg: MQTTAsync_message { struct_id: [77, 81, 84, 77], struct_version: 1, payloadlen: 11, payload: 0x7fb65c014fb0, qos: 0, retained: 0, dup: 0, msgid: 0, properties: MQTTProperties { count: 11, max_count: 20, length: 400, array: 0x562647d3f910 } }, data: MessageData { topic: "app/da54cae9-5f94-4fa5-88ec-f831fde2b829", payload: [123, 34, 105, 110, 100, 101, 120, 34, 58, 51, 125], props: Properties { cprops: MQTTProperties { count: 11, max_count: 20, length: 400, array: 0x562647d3f910 } } } }
[2021-09-16T12:36:24Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received: MqttMessage { topic: "app/da54cae9-5f94-4fa5-88ec-f831fde2b829", content_type: Some("application/json"), user_properties: {"specversion": "1.0", "id": "a802d329-4d12-49f8-865d-8ba3790f1b96", "instance": "drogue", "subject": "warmup", "device": "device1", "application": "da54cae9-5f94-4fa5-88ec-f831fde2b829", "time": "2021-09-16T12:36:24.400366060+00:00", "partitionkey": "da54cae9%2D5f94%2D4fa5%2D88ec%2Df831fde2b829/device1", "source": "drogue://da54cae9%2D5f94%2D4fa5%2D88ec%2Df831fde2b829/device1", "type": "io.drogue.event.v1"}, payload: "{\"index\":3}" }
[2021-09-16T12:36:25Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received first message after 3 attempts
[2021-09-16T12:36:25Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Received most recent messages ... warmed up!
[2021-09-16T12:36:25Z INFO  drogue_cloud_tests::tests::coap] Sending payload
Client request: coap://coap-endpoint.172.18.0.2.nip.io:30003
CoapRequest {
    message: Packet {
        header: Header {
            ver_type_tkl: 64,
            code: Request(
                Get,
            ),
            message_id: 0,
        },
        token: [],
        options: {
            11: [
                [
                    118,
                    49,
                ],
                [
                    116,
                    101,
                    108,
                    101,
                    109,
                    101,
                    116,
                    114,
                    121,
                ],
            ],
            15: [
                [],
            ],
            4209: [
                [
                    66,
                    97,
                    115,
                    105,
                    99,
                    32,
                    90,
                    109,
                    57,
                    118,
                    81,
                    71,
                    82,
                    104,
                    78,
                    84,
                    82,
                    106,
                    89,
                    87,
                    85,
                    53,
                    76,
                    84,
                    86,
                    109,
                    79,
                    84,
                    81,
                    116,
                    78,
                    71,
                    90,
                    104,
                    78,
                    83,
                    48,
                    52,
                    79,
                    71,
                    86,
                    106,
                    76,
                    87,
                    89,
                    52,
                    77,
                    122,
                    70,
                    109,
                    90,
                    71,
                    85,
                    121,
                    89,
                    106,
                    103,
                    121,
                    79,
                    84,
                    112,
                    105,
                    89,
                    88,
                    73,
                ],
            ],
        },
        payload: [],
    },
    response: None,
    source: None,
}
thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 11, kind: WouldBlock, message: "Resource temporarily unavailable" }', src/tools/coap/mod.rs:32:75
[2021-09-16T12:37:01Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:37:01Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:37:02Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:37:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "da54cae9-5f94-4fa5-88ec-f831fde2b829" "device1"
[2021-09-16T12:37:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:37:02Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'da54cae9-5f94-4fa5-88ec-f831fde2b829'
[2021-09-16T12:37:02Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "da54cae9-5f94-4fa5-88ec-f831fde2b829"
[2021-09-16T12:37:02Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App da54cae9-5f94-4fa5-88ec-f831fde2b829 deleted.\n", stderr: "" })

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_only::version_1

**Duration**: 43.592733196s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:37:02Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T12:37:05Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc2MzIsImlhdCI6MTYzMTc5NTgzMiwianRpIjoiMmUzODA2MWYtN2ZkZC00NzEyLWIyNjYtYjg0ZGJlNzg0NmYwIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjU2Njg5MjgtMTNmOC00ZjVjLWFiNzAtYWVkNDc0NWY5NGIzIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImY1NjY4OTI4LTEzZjgtNGY1Yy1hYjcwLWFlZDQ3NDVmOTRiMyJ9.--9S37NtBsXPq3eXhBDnx_KLv-DjBEUOyuczrHlvdKo
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc2MzIsImlhdCI6MTYzMTc5NTgzMiwianRpIjoiMmUzODA2MWYtN2ZkZC00NzEyLWIyNjYtYjg0ZGJlNzg0NmYwIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjU2Njg5MjgtMTNmOC00ZjVjLWFiNzAtYWVkNDc0NWY5NGIzIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImY1NjY4OTI4LTEzZjgtNGY1Yy1hYjcwLWFlZDQ3NDVmOTRiMyJ9.--9S37NtBsXPq3eXhBDnx_KLv-DjBEUOyuczrHlvdKo" "--context" "system-tests"
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTYxMzMsImlhdCI6MTYzMTc5NTgzMywiYXV0aF90aW1lIjoxNjMxNzk1ODI5LCJqdGkiOiI1OGZkMmU2Mi01OWQ4LTRlODAtOGRhYi0zNDUyYjk0Yzc1NGQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImY1NjY4OTI4LTEzZjgtNGY1Yy1hYjcwLWFlZDQ3NDVmOTRiMyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiJmNTY2ODkyOC0xM2Y4LTRmNWMtYWI3MC1hZWQ0NzQ1Zjk0YjMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.UuYyte4MPSUudxVVREGLnQ9cgP0_iOYsontQEss2K3rhb4udwRBU3DjSVAjIJpdBGBs6Euh7FoouRvY7RPTfZvbNd7xZ7HencMc7YZW7U14epMP2DWGgTLq56gGxrvwjsj_9k6lfCVjxUh3GBbcL_Z8kS9K1vB-3YcT3No3NjfxLhY0c9YGAQUPDJHzT5k8qVWrNmH6bOnUBaS2IOuuC2gsXM83uYsVSex3sPaf0D1I9zMjLvt4r7HOGv-XMlFeet2DjNg2y1KZ9Ua3YhaIjB5D1d7tc7P6iZMi0RpxlLzQFaFq9s9JQLW7e8Qw2yfa_XHueLTPpRq9XrHWVW3IT6w\n", stderr: "" })
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::resources::apps] Create application: 5b4c4347-a24f-4a43-b8ff-901f037ae10e
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "5b4c4347-a24f-4a43-b8ff-901f037ae10e"
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 5b4c4347-a24f-4a43-b8ff-901f037ae10e created.\n", stderr: "" })
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "5b4c4347-a24f-4a43-b8ff-901f037ae10e"
[2021-09-16T12:37:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:37:13.682248Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"5b4c4347-a24f-4a43-b8ff-901f037ae10e\",\n    \"resourceVersion\": \"c9450249-6807-4cef-86fd-250f303ce9b9\",\n    \"uid\": \"939b2b33-5882-471c-9471-5f70b9ee230e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:37:13.705779441Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:37:13.705793518Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.705749165Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.705750387Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.705751008Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.705751689Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.705753012Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.705755216Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:37:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "5b4c4347-a24f-4a43-b8ff-901f037ae10e"
[2021-09-16T12:37:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:37:13.682248Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"5b4c4347-a24f-4a43-b8ff-901f037ae10e\",\n    \"resourceVersion\": \"7e998e00-de79-4a2a-b17c-01d733a54275\",\n    \"uid\": \"939b2b33-5882-471c-9471-5f70b9ee230e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:37:14.562115852Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:37:14.562149315Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.764244298Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.778111795Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.967219169Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.975968995Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:14.562089843Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:14.562091356Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"oUfvQ2Rw7SPt\",\n        \"username\": \"user-5b4c4347-a24f-4a43-b8ff-901f037ae10e\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:37:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "5b4c4347-a24f-4a43-b8ff-901f037ae10e"
[2021-09-16T12:37:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:37:13.682248Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"5b4c4347-a24f-4a43-b8ff-901f037ae10e\",\n    \"resourceVersion\": \"7e998e00-de79-4a2a-b17c-01d733a54275\",\n    \"uid\": \"939b2b33-5882-471c-9471-5f70b9ee230e\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:37:14.562115852Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:37:14.562149315Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.764244298Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.778111795Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.967219169Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:13.975968995Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:14.562089843Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:14.562091356Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"oUfvQ2Rw7SPt\",\n        \"username\": \"user-5b4c4347-a24f-4a43-b8ff-901f037ae10e\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:37:14Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:37:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "5b4c4347-a24f-4a43-b8ff-901f037ae10e" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T12:37:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:37:14Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:37:14Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:37:14Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTYxMzMsImlhdCI6MTYzMTc5NTgzMywiYXV0aF90aW1lIjoxNjMxNzk1ODI5LCJqdGkiOiI1OGZkMmU2Mi01OWQ4LTRlODAtOGRhYi0zNDUyYjk0Yzc1NGQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImY1NjY4OTI4LTEzZjgtNGY1Yy1hYjcwLWFlZDQ3NDVmOTRiMyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiJmNTY2ODkyOC0xM2Y4LTRmNWMtYWI3MC1hZWQ0NzQ1Zjk0YjMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.UuYyte4MPSUudxVVREGLnQ9cgP0_iOYsontQEss2K3rhb4udwRBU3DjSVAjIJpdBGBs6Euh7FoouRvY7RPTfZvbNd7xZ7HencMc7YZW7U14epMP2DWGgTLq56gGxrvwjsj_9k6lfCVjxUh3GBbcL_Z8kS9K1vB-3YcT3No3NjfxLhY0c9YGAQUPDJHzT5k8qVWrNmH6bOnUBaS2IOuuC2gsXM83uYsVSex3sPaf0D1I9zMjLvt4r7HOGv-XMlFeet2DjNg2y1KZ9Ua3YhaIjB5D1d7tc7P6iZMi0RpxlLzQFaFq9s9JQLW7e8Qw2yfa_XHueLTPpRq9XrHWVW3IT6w\n", stderr: "" })
[2021-09-16T12:37:15Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T12:37:15Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:37:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:37Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:43Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:45Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T12:37:45Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:37:45Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:37:45Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:37:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "5b4c4347-a24f-4a43-b8ff-901f037ae10e" "device1"
[2021-09-16T12:37:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:37:45Z INFO  drogue_cloud_tests::resources::apps] Destroy application '5b4c4347-a24f-4a43-b8ff-901f037ae10e'
[2021-09-16T12:37:45Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "5b4c4347-a24f-4a43-b8ff-901f037ae10e"
[2021-09-16T12:37:45Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 5b4c4347-a24f-4a43-b8ff-901f037ae10e deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_only::version_2

**Duration**: 43.262767884s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:37:46Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T12:37:48Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc2NzUsImlhdCI6MTYzMTc5NTg3NSwianRpIjoiYTgxMjQ4ZjctM2U4Ny00NThmLWExM2MtYjFhMTM4MTQ1ZTY0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNTA2NWQ4ZDUtNWIyYy00NTViLWExYzEtNjU4ZTM2N2I2NTQ5Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjUwNjVkOGQ1LTViMmMtNDU1Yi1hMWMxLTY1OGUzNjdiNjU0OSJ9.e_y4KgVuz326LE0hiulZsIENp07Cu3uCKpa1vAIXSzU
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc2NzUsImlhdCI6MTYzMTc5NTg3NSwianRpIjoiYTgxMjQ4ZjctM2U4Ny00NThmLWExM2MtYjFhMTM4MTQ1ZTY0IiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNTA2NWQ4ZDUtNWIyYy00NTViLWExYzEtNjU4ZTM2N2I2NTQ5Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjUwNjVkOGQ1LTViMmMtNDU1Yi1hMWMxLTY1OGUzNjdiNjU0OSJ9.e_y4KgVuz326LE0hiulZsIENp07Cu3uCKpa1vAIXSzU" "--context" "system-tests"
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTYxNzcsImlhdCI6MTYzMTc5NTg3NywiYXV0aF90aW1lIjoxNjMxNzk1ODcyLCJqdGkiOiJjNTdkYmQzMS0yMzVkLTRiMWItOTgzNi1mN2U4YjA3ZTZmN2UiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjUwNjVkOGQ1LTViMmMtNDU1Yi1hMWMxLTY1OGUzNjdiNjU0OSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiI1MDY1ZDhkNS01YjJjLTQ1NWItYTFjMS02NThlMzY3YjY1NDkiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Jbr9IRfdTnBSoH096_YpHAhJAEcHNoe0oDsFQ621XPxS88NqMHGBdX0NJ4pzniVorSESL18CynWhjuq6v_Hjn0-G_wS9cnfmGBOQuk23aJSKv3SDzbYfCQBzl-VCbOSAmgd81pfIYIJS47yoiftMEJA-eE1tBT4ySJW0YMSxmMVGe40I00K5aEN8so1_96kXwaw1MNmg30kMixzvJBVVVhmCHmTMew3WSJ-eY7jxo6FS0FN_uhp56t6vZeIXOYTF2hAziUEHAXKNZHqoWwpmC5JTkOHqGBtMEQt6C_C2u_yCNK6N_mzpjAN6NxtF5xWm-mzpQxc4rqSF8MqZw0l3zA\n", stderr: "" })
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::resources::apps] Create application: 7334816e-1485-49ec-a8d8-0b355387f8d5
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "7334816e-1485-49ec-a8d8-0b355387f8d5"
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 7334816e-1485-49ec-a8d8-0b355387f8d5 created.\n", stderr: "" })
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7334816e-1485-49ec-a8d8-0b355387f8d5"
[2021-09-16T12:37:57Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:37:57.178405Z\",\n    \"generation\": 1,\n    \"name\": \"7334816e-1485-49ec-a8d8-0b355387f8d5\",\n    \"resourceVersion\": \"06acd60a-b52c-4feb-afc4-965ed468dfe6\",\n    \"uid\": \"1259d603-9b42-4093-b672-67a40d856978\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:37:57.190707049Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}", stderr: "" })
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7334816e-1485-49ec-a8d8-0b355387f8d5"
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:37:57.178405Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"7334816e-1485-49ec-a8d8-0b355387f8d5\",\n    \"resourceVersion\": \"85398216-cfcc-406f-a5e9-d234ed31c0f1\",\n    \"uid\": \"1259d603-9b42-4093-b672-67a40d856978\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:37:57.653076041Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:37:57.653049792Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:57.240012012Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:57.247561935Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:57.412459879Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:57.419924572Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:57.653030685Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:57.653031967Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"WvXvc6xFF2ee\",\n        \"username\": \"user-7334816e-1485-49ec-a8d8-0b355387f8d5\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7334816e-1485-49ec-a8d8-0b355387f8d5"
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:37:57.178405Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"7334816e-1485-49ec-a8d8-0b355387f8d5\",\n    \"resourceVersion\": \"e18055d6-4067-4399-82c4-26b12e59769a\",\n    \"uid\": \"1259d603-9b42-4093-b672-67a40d856978\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:37:57.653076041Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:37:57.653049792Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:57.240012012Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:57.247561935Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:57.412459879Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:57.419924572Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:57.653030685Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:37:57.653031967Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"WvXvc6xFF2ee\",\n        \"username\": \"user-7334816e-1485-49ec-a8d8-0b355387f8d5\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "7334816e-1485-49ec-a8d8-0b355387f8d5" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTYxNzcsImlhdCI6MTYzMTc5NTg3NywiYXV0aF90aW1lIjoxNjMxNzk1ODcyLCJqdGkiOiJjNTdkYmQzMS0yMzVkLTRiMWItOTgzNi1mN2U4YjA3ZTZmN2UiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjUwNjVkOGQ1LTViMmMtNDU1Yi1hMWMxLTY1OGUzNjdiNjU0OSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiI1MDY1ZDhkNS01YjJjLTQ1NWItYTFjMS02NThlMzY3YjY1NDkiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Jbr9IRfdTnBSoH096_YpHAhJAEcHNoe0oDsFQ621XPxS88NqMHGBdX0NJ4pzniVorSESL18CynWhjuq6v_Hjn0-G_wS9cnfmGBOQuk23aJSKv3SDzbYfCQBzl-VCbOSAmgd81pfIYIJS47yoiftMEJA-eE1tBT4ySJW0YMSxmMVGe40I00K5aEN8so1_96kXwaw1MNmg30kMixzvJBVVVhmCHmTMew3WSJ-eY7jxo6FS0FN_uhp56t6vZeIXOYTF2hAziUEHAXKNZHqoWwpmC5JTkOHqGBtMEQt6C_C2u_yCNK6N_mzpjAN6NxtF5xWm-mzpQxc4rqSF8MqZw0l3zA\n", stderr: "" })
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:37:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:37:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:12Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:13Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:29Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T12:38:29Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:38:29Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:38:29Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:38:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "7334816e-1485-49ec-a8d8-0b355387f8d5" "device1"
[2021-09-16T12:38:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:38:29Z INFO  drogue_cloud_tests::resources::apps] Destroy application '7334816e-1485-49ec-a8d8-0b355387f8d5'
[2021-09-16T12:38:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "7334816e-1485-49ec-a8d8-0b355387f8d5"
[2021-09-16T12:38:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 7334816e-1485-49ec-a8d8-0b355387f8d5 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::coap::telemetry::test_send_telemetry_user_only::version_3

**Duration**: 42.878923303s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:38:29Z INFO  drogue_cloud_tests::tests::coap] entered coap_to_mqtt!
[2021-09-16T12:38:32Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc3MTgsImlhdCI6MTYzMTc5NTkxOCwianRpIjoiY2E4YWU4NzEtM2YzMi00Njg5LTkzYTUtNDI4ZDczZjQ4M2JlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjA1NGQyOGMtZmVmNy00ZWFiLWIwZDMtMDhjNDMyOTliN2QwIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImYwNTRkMjhjLWZlZjctNGVhYi1iMGQzLTA4YzQzMjk5YjdkMCJ9.9_BdJljBZu41-eT-J2G56gcH2DnYph66P2B_w3P1CC4
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc3MTgsImlhdCI6MTYzMTc5NTkxOCwianRpIjoiY2E4YWU4NzEtM2YzMi00Njg5LTkzYTUtNDI4ZDczZjQ4M2JlIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjA1NGQyOGMtZmVmNy00ZWFiLWIwZDMtMDhjNDMyOTliN2QwIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImYwNTRkMjhjLWZlZjctNGVhYi1iMGQzLTA4YzQzMjk5YjdkMCJ9.9_BdJljBZu41-eT-J2G56gcH2DnYph66P2B_w3P1CC4" "--context" "system-tests"
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTYyMTksImlhdCI6MTYzMTc5NTkxOSwiYXV0aF90aW1lIjoxNjMxNzk1OTE1LCJqdGkiOiIyZDNhMTEzMi0zYjU5LTRhMWEtOWZlZC0zNTBhYzNjMGEyYTEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImYwNTRkMjhjLWZlZjctNGVhYi1iMGQzLTA4YzQzMjk5YjdkMCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiJmMDU0ZDI4Yy1mZWY3LTRlYWItYjBkMy0wOGM0MzI5OWI3ZDAiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.sLpl1OFoiJehZDqa6x7ettGCbkloUXZm0wOC535CwUB-waHmXZBmYULzuq-At6FdQmZ1DDqzQPW9NWHvHn01nCcbvNHF6NR-xTOppS96UFcW5YFi37s6RWT6zhtDxZzarwPruKA8M7CxuwwYaZLGZQ6pYrRy4olX0wLkXeAXVFfUMX-Pxwdekm3DRaKx_XAa2p6yEU1avjLgavHRl0axIX5tPmf3w2B-6HIEnToDotC1vKsO82ZtaCIl12a_Vt7H6JZu0_T3Ghu3kzINa0ab99F9dKhGYKWEF7QXJJaaaWyi2tUTaQy7swpgKlvlOvSPJGbAzoLOA6QwmzqaSCHJBg\n", stderr: "" })
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::resources::apps] Create application: c3214f09-4e1f-4b01-aee6-73e2bec36ccf
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "c3214f09-4e1f-4b01-aee6-73e2bec36ccf"
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c3214f09-4e1f-4b01-aee6-73e2bec36ccf created.\n", stderr: "" })
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c3214f09-4e1f-4b01-aee6-73e2bec36ccf"
[2021-09-16T12:38:39Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:38:39.938863Z\",\n    \"generation\": 0,\n    \"name\": \"c3214f09-4e1f-4b01-aee6-73e2bec36ccf\",\n    \"resourceVersion\": \"defa029f-e7f0-4da5-827e-939245139e47\",\n    \"uid\": \"81267f20-0c3e-4b49-9c37-f5e7e87f7528\"\n  }\n}", stderr: "" })
[2021-09-16T12:38:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c3214f09-4e1f-4b01-aee6-73e2bec36ccf"
[2021-09-16T12:38:40Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:38:39.938863Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"c3214f09-4e1f-4b01-aee6-73e2bec36ccf\",\n    \"resourceVersion\": \"3ec0a24c-27a2-489d-b89d-0c1dc5560fc0\",\n    \"uid\": \"81267f20-0c3e-4b49-9c37-f5e7e87f7528\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:38:40.463857415Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:38:40.463823360Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:38:40.025807654Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:38:40.036607551Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:38:40.145258110Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:38:40.160378903Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:38:40.463795768Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:38:40.463797121Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"jZQ2NQQJLllS\",\n        \"username\": \"user-c3214f09-4e1f-4b01-aee6-73e2bec36ccf\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:38:40Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c3214f09-4e1f-4b01-aee6-73e2bec36ccf"
[2021-09-16T12:38:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:38:39.938863Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"c3214f09-4e1f-4b01-aee6-73e2bec36ccf\",\n    \"resourceVersion\": \"3ec0a24c-27a2-489d-b89d-0c1dc5560fc0\",\n    \"uid\": \"81267f20-0c3e-4b49-9c37-f5e7e87f7528\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:38:40.463857415Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:38:40.463823360Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:38:40.025807654Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:38:40.036607551Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:38:40.145258110Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:38:40.160378903Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:38:40.463795768Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:38:40.463797121Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"jZQ2NQQJLllS\",\n        \"username\": \"user-c3214f09-4e1f-4b01-aee6-73e2bec36ccf\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:38:41Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:38:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "c3214f09-4e1f-4b01-aee6-73e2bec36ccf" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T12:38:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:38:41Z INFO  drogue_cloud_tests::tests::coap] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:38:41Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:38:41Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTYyMTksImlhdCI6MTYzMTc5NTkxOSwiYXV0aF90aW1lIjoxNjMxNzk1OTE1LCJqdGkiOiIyZDNhMTEzMi0zYjU5LTRhMWEtOWZlZC0zNTBhYzNjMGEyYTEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImYwNTRkMjhjLWZlZjctNGVhYi1iMGQzLTA4YzQzMjk5YjdkMCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiJmMDU0ZDI4Yy1mZWY3LTRlYWItYjBkMy0wOGM0MzI5OWI3ZDAiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.sLpl1OFoiJehZDqa6x7ettGCbkloUXZm0wOC535CwUB-waHmXZBmYULzuq-At6FdQmZ1DDqzQPW9NWHvHn01nCcbvNHF6NR-xTOppS96UFcW5YFi37s6RWT6zhtDxZzarwPruKA8M7CxuwwYaZLGZQ6pYrRy4olX0wLkXeAXVFfUMX-Pxwdekm3DRaKx_XAa2p6yEU1avjLgavHRl0axIX5tPmf3w2B-6HIEnToDotC1vKsO82ZtaCIl12a_Vt7H6JZu0_T3Ghu3kzINa0ab99F9dKhGYKWEF7QXJJaaaWyi2tUTaQy7swpgKlvlOvSPJGbAzoLOA6QwmzqaSCHJBg\n", stderr: "" })
[2021-09-16T12:38:41Z INFO  drogue_cloud_tests::tests::coap] Receiver created
[2021-09-16T12:38:41Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:38:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:43Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:49Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:49Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:51Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:55Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:38:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:38:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:39:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:39:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:39:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:39:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:39:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:39:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:39:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:39:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:39:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:39:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:39:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:39:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:39:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:39:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:39:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:39:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:39:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:39:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:39:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:39:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:39:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:39:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:39:11Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T12:39:11Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:39:11Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:39:11Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:39:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "c3214f09-4e1f-4b01-aee6-73e2bec36ccf" "device1"
[2021-09-16T12:39:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:39:11Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'c3214f09-4e1f-4b01-aee6-73e2bec36ccf'
[2021-09-16T12:39:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "c3214f09-4e1f-4b01-aee6-73e2bec36ccf"
[2021-09-16T12:39:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c3214f09-4e1f-4b01-aee6-73e2bec36ccf deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ✅ tests::drg::test_drg_version

**Duration**: 11.294011383s

## ✅ tests::http::command::test_command::version_1

**Duration**: 18.646347064s

## ✅ tests::http::command::test_command::version_2

**Duration**: 20.141299731s

## ✅ tests::http::command::test_command::version_3

**Duration**: 18.852711999s

## ✅ tests::http::telemetry::test_send_telemetry_pass::version_1

**Duration**: 20.455365486s

## ✅ tests::http::telemetry::test_send_telemetry_pass::version_2

**Duration**: 18.445226872s

## ✅ tests::http::telemetry::test_send_telemetry_pass::version_3

**Duration**: 18.159205854s

## ❌ tests::http::telemetry::test_send_telemetry_user::version_1

**Duration**: 42.801535311s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:41:21Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc4ODcsImlhdCI6MTYzMTc5NjA4NywianRpIjoiMzg1NjFiNGEtMTEyMS00ODA3LTk1ZDUtZTk1ZWEyN2ZkOTUyIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODEyZDJjNjItMzAwNi00OTAwLTk1OWMtZGM0YzFhNTFiMTM3Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjgxMmQyYzYyLTMwMDYtNDkwMC05NTljLWRjNGMxYTUxYjEzNyJ9.psYIYGSJ9oH-Y_Moqiscc0KkJPPJnHnEbsZ9075sheg
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc4ODcsImlhdCI6MTYzMTc5NjA4NywianRpIjoiMzg1NjFiNGEtMTEyMS00ODA3LTk1ZDUtZTk1ZWEyN2ZkOTUyIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiODEyZDJjNjItMzAwNi00OTAwLTk1OWMtZGM0YzFhNTFiMTM3Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjgxMmQyYzYyLTMwMDYtNDkwMC05NTljLWRjNGMxYTUxYjEzNyJ9.psYIYGSJ9oH-Y_Moqiscc0KkJPPJnHnEbsZ9075sheg" "--context" "system-tests"
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTYzODgsImlhdCI6MTYzMTc5NjA4OCwiYXV0aF90aW1lIjoxNjMxNzk2MDgzLCJqdGkiOiJhNTY5NjljYS1kODRhLTRlY2EtODRhZS1kMGU5N2E5NGZjYWYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjgxMmQyYzYyLTMwMDYtNDkwMC05NTljLWRjNGMxYTUxYjEzNyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiI4MTJkMmM2Mi0zMDA2LTQ5MDAtOTU5Yy1kYzRjMWE1MWIxMzciLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Zo7LepfFNFp_Xbh1_3dcse4JaP0A3F3gmrs4wefw-pFammEYQPswGjeWm5-09cPzN-o9XdRNMI3gON-0rVAkOW3UXkL9V8_KfWnNBgUwPdzYoRScaipXZ-Dkqwnxub2_XqXhhHUCHRG1nUZBis6v-AYajnULHjMWB-4502VdL3BF0BeUftsm3wGsdTmbM06ax71iVva_OjCR-hXxiZ5nekW8xGlHbxqGyL5xUYi7m4TBnRieRPbgnMTV-mfihC_rz-cXFzojIiHHnFwPk2bgF-ucnmtzPBm4Kue4n8HzZ6yCOaUr8MHHRMbxsoNrrKTyFb1c3aSylxnZSWVqNxOLsw\n", stderr: "" })
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::resources::apps] Create application: 7985da83-fc4e-44f4-811d-0b2658e78801
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "7985da83-fc4e-44f4-811d-0b2658e78801"
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 7985da83-fc4e-44f4-811d-0b2658e78801 created.\n", stderr: "" })
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7985da83-fc4e-44f4-811d-0b2658e78801"
[2021-09-16T12:41:28Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:41:28.597056Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"7985da83-fc4e-44f4-811d-0b2658e78801\",\n    \"resourceVersion\": \"b0d7e61e-d252-4664-b690-75dfb74ec094\",\n    \"uid\": \"ac9789fd-363c-4700-9328-083ed92df3b0\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:41:28.611578750Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:41:28.611595952Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.611526832Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.611528165Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.611528806Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.611530189Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.611530840Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.611532914Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7985da83-fc4e-44f4-811d-0b2658e78801"
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:41:28.597056Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"7985da83-fc4e-44f4-811d-0b2658e78801\",\n    \"resourceVersion\": \"e36ee718-ed4d-4876-92ed-9f4b3b702cd8\",\n    \"uid\": \"ac9789fd-363c-4700-9328-083ed92df3b0\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:41:29.029943760Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:41:29.029972776Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.643558198Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.653682343Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.748690055Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.768626388Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:29.029911280Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:29.029912391Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"dp9IxCU28wa5\",\n        \"username\": \"user-7985da83-fc4e-44f4-811d-0b2658e78801\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "7985da83-fc4e-44f4-811d-0b2658e78801"
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:41:28.597056Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"7985da83-fc4e-44f4-811d-0b2658e78801\",\n    \"resourceVersion\": \"e36ee718-ed4d-4876-92ed-9f4b3b702cd8\",\n    \"uid\": \"ac9789fd-363c-4700-9328-083ed92df3b0\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:41:29.029943760Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:41:29.029972776Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.643558198Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.653682343Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.748690055Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:28.768626388Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:29.029911280Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:41:29.029912391Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"dp9IxCU28wa5\",\n        \"username\": \"user-7985da83-fc4e-44f4-811d-0b2658e78801\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "7985da83-fc4e-44f4-811d-0b2658e78801" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTYzODgsImlhdCI6MTYzMTc5NjA4OCwiYXV0aF90aW1lIjoxNjMxNzk2MDgzLCJqdGkiOiJhNTY5NjljYS1kODRhLTRlY2EtODRhZS1kMGU5N2E5NGZjYWYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjgxMmQyYzYyLTMwMDYtNDkwMC05NTljLWRjNGMxYTUxYjEzNyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiI4MTJkMmM2Mi0zMDA2LTQ5MDAtOTU5Yy1kYzRjMWE1MWIxMzciLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.Zo7LepfFNFp_Xbh1_3dcse4JaP0A3F3gmrs4wefw-pFammEYQPswGjeWm5-09cPzN-o9XdRNMI3gON-0rVAkOW3UXkL9V8_KfWnNBgUwPdzYoRScaipXZ-Dkqwnxub2_XqXhhHUCHRG1nUZBis6v-AYajnULHjMWB-4502VdL3BF0BeUftsm3wGsdTmbM06ax71iVva_OjCR-hXxiZ5nekW8xGlHbxqGyL5xUYi7m4TBnRieRPbgnMTV-mfihC_rz-cXFzojIiHHnFwPk2bgF-ucnmtzPBm4Kue4n8HzZ6yCOaUr8MHHRMbxsoNrrKTyFb1c3aSylxnZSWVqNxOLsw\n", stderr: "" })
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:41:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:43Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:49Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:49Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:51Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:55Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:41:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:41:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:00Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T12:42:00Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:42:00Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:42:00Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:42:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "7985da83-fc4e-44f4-811d-0b2658e78801" "device1"
[2021-09-16T12:42:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:42:00Z INFO  drogue_cloud_tests::resources::apps] Destroy application '7985da83-fc4e-44f4-811d-0b2658e78801'
[2021-09-16T12:42:00Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "7985da83-fc4e-44f4-811d-0b2658e78801"
[2021-09-16T12:42:00Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 7985da83-fc4e-44f4-811d-0b2658e78801 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user::version_2

**Duration**: 42.519865566s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:42:03Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc5MjksImlhdCI6MTYzMTc5NjEyOSwianRpIjoiYjQwMGZjMGItM2YwNS00N2VlLTg0YjgtYjJmYjEzYjE1ZWIzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjFhMTg5NjgtNmQ3MS00YzY5LTkxMGUtNmM1YmVhNTZlNDUzIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjIxYTE4OTY4LTZkNzEtNGM2OS05MTBlLTZjNWJlYTU2ZTQ1MyJ9.iH0Ik1oa71mS0-NapraNHvB2zmfBsOUgM5FMYzy1Eig
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc5MjksImlhdCI6MTYzMTc5NjEyOSwianRpIjoiYjQwMGZjMGItM2YwNS00N2VlLTg0YjgtYjJmYjEzYjE1ZWIzIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMjFhMTg5NjgtNmQ3MS00YzY5LTkxMGUtNmM1YmVhNTZlNDUzIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjIxYTE4OTY4LTZkNzEtNGM2OS05MTBlLTZjNWJlYTU2ZTQ1MyJ9.iH0Ik1oa71mS0-NapraNHvB2zmfBsOUgM5FMYzy1Eig" "--context" "system-tests"
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTY0MzEsImlhdCI6MTYzMTc5NjEzMSwiYXV0aF90aW1lIjoxNjMxNzk2MTI2LCJqdGkiOiIyYjRhMDNhMS1hMDgxLTQwNWYtODE0ZC02MjdmYTg2NzAyOWQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjIxYTE4OTY4LTZkNzEtNGM2OS05MTBlLTZjNWJlYTU2ZTQ1MyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIyMWExODk2OC02ZDcxLTRjNjktOTEwZS02YzViZWE1NmU0NTMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.UYpU7NiEMKKw0uQOp4rHNMQY1Wk_aaavmNmuz90_QHewI4ONw4O9E0XtRVQVFRglGs5OikTegoAbw9iS_Lrz5JYpQQKqd5EY-hRw0hB60eyeJkA1umDde-y_k08kaRjimTPCheEeHMx6vyrVO7mZClaCcb6rwLtRrUk5mIsRkMUd5woKSZUdB5k87iAMEsbzwboHyjfWjik9wwwofsFhNZ4U64ndHTc_DzX8mzleU0pEEKsEkODgpbpe2EQ2TLBY6Tk-_iivqwqWKMbMgSqCv1M0ryxk0EySYZECpuMRmFrngHQZaGPLqSX2hJ87yNxv0tdF5k6o4ju6yUmKieZVQg\n", stderr: "" })
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::resources::apps] Create application: d0201c5d-43fe-4b58-b66e-1569d62e4ca8
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "d0201c5d-43fe-4b58-b66e-1569d62e4ca8"
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App d0201c5d-43fe-4b58-b66e-1569d62e4ca8 created.\n", stderr: "" })
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "d0201c5d-43fe-4b58-b66e-1569d62e4ca8"
[2021-09-16T12:42:11Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:42:11.352936Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"d0201c5d-43fe-4b58-b66e-1569d62e4ca8\",\n    \"resourceVersion\": \"b64ff7ac-0198-4821-8ee4-ec1b6be37f84\",\n    \"uid\": \"ee31363e-0747-47d7-8f38-c790b2968581\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:42:11.373168307Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:42:11.373227728Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.373134883Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.373136245Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.373136957Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.373137929Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.373139612Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.373141876Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "d0201c5d-43fe-4b58-b66e-1569d62e4ca8"
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:42:11.352936Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"d0201c5d-43fe-4b58-b66e-1569d62e4ca8\",\n    \"resourceVersion\": \"332ad5c0-aecb-4953-aa6b-0cfbda48e071\",\n    \"uid\": \"ee31363e-0747-47d7-8f38-c790b2968581\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:42:11.806258163Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:42:11.806287950Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.414241381Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.423515101Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.577528944Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.584696610Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.806232825Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.806233947Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"FnzaeKNEZcO2\",\n        \"username\": \"user-d0201c5d-43fe-4b58-b66e-1569d62e4ca8\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "d0201c5d-43fe-4b58-b66e-1569d62e4ca8"
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:42:11.352936Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"d0201c5d-43fe-4b58-b66e-1569d62e4ca8\",\n    \"resourceVersion\": \"332ad5c0-aecb-4953-aa6b-0cfbda48e071\",\n    \"uid\": \"ee31363e-0747-47d7-8f38-c790b2968581\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:42:11.806258163Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:42:11.806287950Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.414241381Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.423515101Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.577528944Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.584696610Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.806232825Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:11.806233947Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"FnzaeKNEZcO2\",\n        \"username\": \"user-d0201c5d-43fe-4b58-b66e-1569d62e4ca8\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "d0201c5d-43fe-4b58-b66e-1569d62e4ca8" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTY0MzEsImlhdCI6MTYzMTc5NjEzMSwiYXV0aF90aW1lIjoxNjMxNzk2MTI2LCJqdGkiOiIyYjRhMDNhMS1hMDgxLTQwNWYtODE0ZC02MjdmYTg2NzAyOWQiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjIxYTE4OTY4LTZkNzEtNGM2OS05MTBlLTZjNWJlYTU2ZTQ1MyIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIyMWExODk2OC02ZDcxLTRjNjktOTEwZS02YzViZWE1NmU0NTMiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.UYpU7NiEMKKw0uQOp4rHNMQY1Wk_aaavmNmuz90_QHewI4ONw4O9E0XtRVQVFRglGs5OikTegoAbw9iS_Lrz5JYpQQKqd5EY-hRw0hB60eyeJkA1umDde-y_k08kaRjimTPCheEeHMx6vyrVO7mZClaCcb6rwLtRrUk5mIsRkMUd5woKSZUdB5k87iAMEsbzwboHyjfWjik9wwwofsFhNZ4U64ndHTc_DzX8mzleU0pEEKsEkODgpbpe2EQ2TLBY6Tk-_iivqwqWKMbMgSqCv1M0ryxk0EySYZECpuMRmFrngHQZaGPLqSX2hJ87yNxv0tdF5k6o4ju6yUmKieZVQg\n", stderr: "" })
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:12Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:13Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:37Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:43Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T12:42:43Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:42:43Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:42:43Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:42:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "d0201c5d-43fe-4b58-b66e-1569d62e4ca8" "device1"
[2021-09-16T12:42:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:42:43Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'd0201c5d-43fe-4b58-b66e-1569d62e4ca8'
[2021-09-16T12:42:43Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "d0201c5d-43fe-4b58-b66e-1569d62e4ca8"
[2021-09-16T12:42:43Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App d0201c5d-43fe-4b58-b66e-1569d62e4ca8 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user::version_3

**Duration**: 42.664208486s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:42:46Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:42:53Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc5NzIsImlhdCI6MTYzMTc5NjE3MiwianRpIjoiMjVjYmViY2ItOTVjMi00Mzk2LWExZmQtNjE0YjIxNDk1YjRiIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMTI4NGIyNjUtNTU2MS00ZDQ1LWJjNjQtMWJlMmFjZjYzYzNhIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjEyODRiMjY1LTU1NjEtNGQ0NS1iYzY0LTFiZTJhY2Y2M2MzYSJ9.TjshSHYpF5TD7lIPD0UMOItZR3u1qFkH93Z-Q8tSg8k
[2021-09-16T12:42:53Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:42:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:42:53Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTc5NzIsImlhdCI6MTYzMTc5NjE3MiwianRpIjoiMjVjYmViY2ItOTVjMi00Mzk2LWExZmQtNjE0YjIxNDk1YjRiIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMTI4NGIyNjUtNTU2MS00ZDQ1LWJjNjQtMWJlMmFjZjYzYzNhIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjEyODRiMjY1LTU1NjEtNGQ0NS1iYzY0LTFiZTJhY2Y2M2MzYSJ9.TjshSHYpF5TD7lIPD0UMOItZR3u1qFkH93Z-Q8tSg8k" "--context" "system-tests"
[2021-09-16T12:42:53Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:42:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:42:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTY0NzMsImlhdCI6MTYzMTc5NjE3MywiYXV0aF90aW1lIjoxNjMxNzk2MTY5LCJqdGkiOiIwNjAxNTA5NC01ZmE3LTRmZDctYTU2Yi0zMTFlOTg3N2E4ZmEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjEyODRiMjY1LTU1NjEtNGQ0NS1iYzY0LTFiZTJhY2Y2M2MzYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIxMjg0YjI2NS01NTYxLTRkNDUtYmM2NC0xYmUyYWNmNjNjM2EiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.O_AKvw84tvbXDV1PyvQ1wDdtBII7jqXe29yzNpdUyCWMIvCLXFSritsVYNgoLWQOez45pxt-wCdPtQQPYZQ61UU9lDUs7yW7jnhETA6hCMVEPsZkV1JNo_tgIR28ZUb-f0d8MFJDy4xTbdeoJyYi9O0YnncW68EiAXk4qUKoGmYI1vzzQ7n-BySdmhemLaHCHdgPicBP-q9HSRVtHdjWPKcUW3pJDKl4i72hApgC68GOb_NBb0k9LgveeLwrU-XlRGarmydtoxshcjGEcRJzoheca-zpSH_KbX0PhWhCNRLHSX0-oQ2YdJ-IGtK_GqL_zr_1L1n66U2lAC6uch_16A\n", stderr: "" })
[2021-09-16T12:42:54Z INFO  drogue_cloud_tests::resources::apps] Create application: 93fcb95a-0dde-442d-908b-75ce475dcc62
[2021-09-16T12:42:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "93fcb95a-0dde-442d-908b-75ce475dcc62"
[2021-09-16T12:42:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 93fcb95a-0dde-442d-908b-75ce475dcc62 created.\n", stderr: "" })
[2021-09-16T12:42:54Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "93fcb95a-0dde-442d-908b-75ce475dcc62"
[2021-09-16T12:42:54Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:42:54.058195Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"93fcb95a-0dde-442d-908b-75ce475dcc62\",\n    \"resourceVersion\": \"bf1e5de6-8858-4ad9-aefa-c289e47dfe67\",\n    \"uid\": \"1ddf02a6-5e5b-45e6-959d-dd49e71339d1\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:42:54.083761577Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:42:54.083773930Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.083739716Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.083740628Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.083741099Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.083741680Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.083743172Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.083744846Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "93fcb95a-0dde-442d-908b-75ce475dcc62"
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:42:54.058195Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"93fcb95a-0dde-442d-908b-75ce475dcc62\",\n    \"resourceVersion\": \"0c794161-c8fa-4951-b5b3-fcc0523da640\",\n    \"uid\": \"1ddf02a6-5e5b-45e6-959d-dd49e71339d1\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:42:54.583194350Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:42:54.583232262Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.112692950Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.119567629Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.264514790Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.280941990Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.583167319Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.583169022Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"C35XQCMUYN9n\",\n        \"username\": \"user-93fcb95a-0dde-442d-908b-75ce475dcc62\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "93fcb95a-0dde-442d-908b-75ce475dcc62"
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:42:54.058195Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"93fcb95a-0dde-442d-908b-75ce475dcc62\",\n    \"resourceVersion\": \"0c794161-c8fa-4951-b5b3-fcc0523da640\",\n    \"uid\": \"1ddf02a6-5e5b-45e6-959d-dd49e71339d1\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:42:54.583194350Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:42:54.583232262Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.112692950Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.119567629Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.264514790Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.280941990Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.583167319Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:42:54.583169022Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"C35XQCMUYN9n\",\n        \"username\": \"user-93fcb95a-0dde-442d-908b-75ce475dcc62\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "93fcb95a-0dde-442d-908b-75ce475dcc62" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTY0NzMsImlhdCI6MTYzMTc5NjE3MywiYXV0aF90aW1lIjoxNjMxNzk2MTY5LCJqdGkiOiIwNjAxNTA5NC01ZmE3LTRmZDctYTU2Yi0zMTFlOTg3N2E4ZmEiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjEyODRiMjY1LTU1NjEtNGQ0NS1iYzY0LTFiZTJhY2Y2M2MzYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIxMjg0YjI2NS01NTYxLTRkNDUtYmM2NC0xYmUyYWNmNjNjM2EiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.O_AKvw84tvbXDV1PyvQ1wDdtBII7jqXe29yzNpdUyCWMIvCLXFSritsVYNgoLWQOez45pxt-wCdPtQQPYZQ61UU9lDUs7yW7jnhETA6hCMVEPsZkV1JNo_tgIR28ZUb-f0d8MFJDy4xTbdeoJyYi9O0YnncW68EiAXk4qUKoGmYI1vzzQ7n-BySdmhemLaHCHdgPicBP-q9HSRVtHdjWPKcUW3pJDKl4i72hApgC68GOb_NBb0k9LgveeLwrU-XlRGarmydtoxshcjGEcRJzoheca-zpSH_KbX0PhWhCNRLHSX0-oQ2YdJ-IGtK_GqL_zr_1L1n66U2lAC6uch_16A\n", stderr: "" })
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:55Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:42:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:42:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:12Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:13Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:14Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:43:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:43:25Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T12:43:25Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:43:25Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:43:25Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:43:25Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "93fcb95a-0dde-442d-908b-75ce475dcc62" "device1"
[2021-09-16T12:43:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:43:26Z INFO  drogue_cloud_tests::resources::apps] Destroy application '93fcb95a-0dde-442d-908b-75ce475dcc62'
[2021-09-16T12:43:26Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "93fcb95a-0dde-442d-908b-75ce475dcc62"
[2021-09-16T12:43:26Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 93fcb95a-0dde-442d-908b-75ce475dcc62 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ✅ tests::http::telemetry::test_send_telemetry_user_alias::version_1

**Duration**: 18.027195077s

## ✅ tests::http::telemetry::test_send_telemetry_user_alias::version_2

**Duration**: 17.988763839s

## ✅ tests::http::telemetry::test_send_telemetry_user_alias::version_3

**Duration**: 18.998629549s

## ❌ tests::http::telemetry::test_send_telemetry_user_only::version_1

**Duration**: 42.641438223s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:44:24Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTgwNzAsImlhdCI6MTYzMTc5NjI3MCwianRpIjoiMTliNGRlMzEtMTI3ZC00ZjNkLTg3ZTMtOTlmYzZhMjllYzZjIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMDZhYzU2NTYtYjY0Mi00NDdlLTgxZTEtNWZiY2MyZjE5MGJlIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjA2YWM1NjU2LWI2NDItNDQ3ZS04MWUxLTVmYmNjMmYxOTBiZSJ9.HbL7CrXzrVSxjCSUNLG5yzHGgETNYKJu9xYI1uG929o
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTgwNzAsImlhdCI6MTYzMTc5NjI3MCwianRpIjoiMTliNGRlMzEtMTI3ZC00ZjNkLTg3ZTMtOTlmYzZhMjllYzZjIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiMDZhYzU2NTYtYjY0Mi00NDdlLTgxZTEtNWZiY2MyZjE5MGJlIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjA2YWM1NjU2LWI2NDItNDQ3ZS04MWUxLTVmYmNjMmYxOTBiZSJ9.HbL7CrXzrVSxjCSUNLG5yzHGgETNYKJu9xYI1uG929o" "--context" "system-tests"
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTY1NzEsImlhdCI6MTYzMTc5NjI3MSwiYXV0aF90aW1lIjoxNjMxNzk2MjY2LCJqdGkiOiI0NDM2ZjljMi0zODYzLTQ4ODktOGY5YS1mYjM1OTAyYmViNjAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjA2YWM1NjU2LWI2NDItNDQ3ZS04MWUxLTVmYmNjMmYxOTBiZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIwNmFjNTY1Ni1iNjQyLTQ0N2UtODFlMS01ZmJjYzJmMTkwYmUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.pXtqgzkXZSJeqT_e9toR1deJbOKOtc3RlR5-fvCXBfTB6Us92OmFVTTQmhvFVczsmoKTbMFGXHMZzUGnvbKFuKQFeQyBAhYd5qlomLk75hx2xbD79qIgCBx4zPDuq_CRt7LjNsXKDo2R_WXLmnrbZ2ZIon_3yv4JWupYXWF8beedAY3_uIJSF1i7U9rRScMJsVZKGsqPTtb5M6XJMwTuL7PaevnU8gf2VZuJfaK1pdlXoKuaw4IHDUkeDyDT8qXEZJoWJIM5xW7xoemJF-akSaZMCUnpNBZ_m2uqT2mc83cfDLTDeuVJTjt4yC7QbvLBLaANnyQSjHHoy_-OJPUxQw\n", stderr: "" })
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::resources::apps] Create application: c9872554-a491-4a3f-afab-adec0c065a65
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "c9872554-a491-4a3f-afab-adec0c065a65"
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c9872554-a491-4a3f-afab-adec0c065a65 created.\n", stderr: "" })
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c9872554-a491-4a3f-afab-adec0c065a65"
[2021-09-16T12:44:31Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:44:31.671233Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 1,\n    \"name\": \"c9872554-a491-4a3f-afab-adec0c065a65\",\n    \"resourceVersion\": \"91ddacb3-a3ff-456b-a18f-2cd14a4e3f4e\",\n    \"uid\": \"2968e488-dde8-4a62-a32c-982dd457eecf\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:44:31.695595207Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:44:31.695611657Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.695565289Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.695566732Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.695567364Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.695568075Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.695569427Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.695571030Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 0\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c9872554-a491-4a3f-afab-adec0c065a65"
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:44:31.671233Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"c9872554-a491-4a3f-afab-adec0c065a65\",\n    \"resourceVersion\": \"ab8605f0-123a-408f-9443-1f585cd65b56\",\n    \"uid\": \"2968e488-dde8-4a62-a32c-982dd457eecf\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:44:32.203659276Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:44:32.203698100Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.725871172Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.747520840Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.901846754Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.916013567Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:32.203632145Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:32.203633668Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"df6N0DUOzqiL\",\n        \"username\": \"user-c9872554-a491-4a3f-afab-adec0c065a65\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "c9872554-a491-4a3f-afab-adec0c065a65"
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:44:31.671233Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 8,\n    \"name\": \"c9872554-a491-4a3f-afab-adec0c065a65\",\n    \"resourceVersion\": \"ab8605f0-123a-408f-9443-1f585cd65b56\",\n    \"uid\": \"2968e488-dde8-4a62-a32c-982dd457eecf\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:44:32.203659276Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:44:32.203698100Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.725871172Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.747520840Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.901846754Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:31.916013567Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:32.203632145Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:44:32.203633668Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 7,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"df6N0DUOzqiL\",\n        \"username\": \"user-c9872554-a491-4a3f-afab-adec0c065a65\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "c9872554-a491-4a3f-afab-adec0c065a65" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTY1NzEsImlhdCI6MTYzMTc5NjI3MSwiYXV0aF90aW1lIjoxNjMxNzk2MjY2LCJqdGkiOiI0NDM2ZjljMi0zODYzLTQ4ODktOGY5YS1mYjM1OTAyYmViNjAiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjA2YWM1NjU2LWI2NDItNDQ3ZS04MWUxLTVmYmNjMmYxOTBiZSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiIwNmFjNTY1Ni1iNjQyLTQ0N2UtODFlMS01ZmJjYzJmMTkwYmUiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.pXtqgzkXZSJeqT_e9toR1deJbOKOtc3RlR5-fvCXBfTB6Us92OmFVTTQmhvFVczsmoKTbMFGXHMZzUGnvbKFuKQFeQyBAhYd5qlomLk75hx2xbD79qIgCBx4zPDuq_CRt7LjNsXKDo2R_WXLmnrbZ2ZIon_3yv4JWupYXWF8beedAY3_uIJSF1i7U9rRScMJsVZKGsqPTtb5M6XJMwTuL7PaevnU8gf2VZuJfaK1pdlXoKuaw4IHDUkeDyDT8qXEZJoWJIM5xW7xoemJF-akSaZMCUnpNBZ_m2uqT2mc83cfDLTDeuVJTjt4yC7QbvLBLaANnyQSjHHoy_-OJPUxQw\n", stderr: "" })
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:37Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:43Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:44Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:45Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:47Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:47Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:48Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:48Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:49Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:49Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:50Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:50Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:51Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:51Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:52Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:52Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:53Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:53Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:54Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:54Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:55Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:55Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:56Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:56Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:57Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:57Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:58Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:44:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:44:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:03Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T12:45:03Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:45:03Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:45:03Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:45:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "c9872554-a491-4a3f-afab-adec0c065a65" "device1"
[2021-09-16T12:45:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:45:03Z INFO  drogue_cloud_tests::resources::apps] Destroy application 'c9872554-a491-4a3f-afab-adec0c065a65'
[2021-09-16T12:45:03Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "c9872554-a491-4a3f-afab-adec0c065a65"
[2021-09-16T12:45:03Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App c9872554-a491-4a3f-afab-adec0c065a65 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user_only::version_2

**Duration**: 43.566046533s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:45:06Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTgxMTMsImlhdCI6MTYzMTc5NjMxMywianRpIjoiODI5YmM0NjItNjk3MC00ZDY2LTllODctNDUwNDUyYTVjMWVkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNTc2YmE2ZmItOGQ2Ni00ZjI1LWJhMjktYTkwMmE1YmQ1ZDYxIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjU3NmJhNmZiLThkNjYtNGYyNS1iYTI5LWE5MDJhNWJkNWQ2MSJ9.ZVckBpBn_DSdMAseLQqzN4UKSEh3XkZDygl3RZXzUWo
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTgxMTMsImlhdCI6MTYzMTc5NjMxMywianRpIjoiODI5YmM0NjItNjk3MC00ZDY2LTllODctNDUwNDUyYTVjMWVkIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNTc2YmE2ZmItOGQ2Ni00ZjI1LWJhMjktYTkwMmE1YmQ1ZDYxIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjU3NmJhNmZiLThkNjYtNGYyNS1iYTI5LWE5MDJhNWJkNWQ2MSJ9.ZVckBpBn_DSdMAseLQqzN4UKSEh3XkZDygl3RZXzUWo" "--context" "system-tests"
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTY2MTUsImlhdCI6MTYzMTc5NjMxNSwiYXV0aF90aW1lIjoxNjMxNzk2MzA5LCJqdGkiOiI4MmQxNzUyOS0yNmYxLTQ1YzItYWI1OC0wMDQ3ZWExOGJmMGYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjU3NmJhNmZiLThkNjYtNGYyNS1iYTI5LWE5MDJhNWJkNWQ2MSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiI1NzZiYTZmYi04ZDY2LTRmMjUtYmEyOS1hOTAyYTViZDVkNjEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.pCkRlyYGMtUyeKq7-hYqRcbVo2V2yyjpmscLucHDTRIbPtaes2k76eIN9z-99oN42RbF5kt-yyBw9zgQhhFuRwb3n3-0pNZJ2TuYZewyAHpND9scyd4qcWPEzmBAjNT70Ijn9fUwDEkijpbyfmUKcLIP4AqyjVjiWd1FxNAyV9_-5AxWJolJRp45bFFR_2mj1pjdW_bx9mlEvSiRkiweVm_dWEAPtyKwGmIh31QMGZ3QeiEI2Ye71h5nEbXC5kJJUQLhWpWJXUSw3MzJPiOn5pA8NmmJ8f99lz0hzcqQh0dEYhL5HSCCeeLhgqxumbjWNWFoFaRMeL60tWX4vkLwvQ\n", stderr: "" })
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::resources::apps] Create application: 9f755e57-5941-4ceb-8ce9-f262e66cc18c
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "9f755e57-5941-4ceb-8ce9-f262e66cc18c"
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 9f755e57-5941-4ceb-8ce9-f262e66cc18c created.\n", stderr: "" })
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "9f755e57-5941-4ceb-8ce9-f262e66cc18c"
[2021-09-16T12:45:15Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:45:15.191307Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 2,\n    \"name\": \"9f755e57-5941-4ceb-8ce9-f262e66cc18c\",\n    \"resourceVersion\": \"6c922e2a-0c38-4c28-8dc2-24d29e4c35fe\",\n    \"uid\": \"51a953fc-6e35-41dd-8e19-b311b2bd2316\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:45:15.219389784Z\",\n        \"reason\": \"NonReadyConditions\",\n        \"status\": \"False\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:45:15.219379404Z\",\n        \"message\": \"Waiting to become ready: HasFinalizer\",\n        \"reason\": \"WaitingForReady\",\n        \"status\": \"False\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.219333369Z\",\n          \"status\": \"False\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.219334150Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.219334440Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.219334781Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.219335382Z\",\n          \"status\": \"Unknown\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.219336274Z\",\n          \"reason\": \"Progressing\",\n          \"status\": \"False\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 1\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "9f755e57-5941-4ceb-8ce9-f262e66cc18c"
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:45:15.191307Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"9f755e57-5941-4ceb-8ce9-f262e66cc18c\",\n    \"resourceVersion\": \"db51c79a-740b-4a59-8298-ce0a2421bf30\",\n    \"uid\": \"51a953fc-6e35-41dd-8e19-b311b2bd2316\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:45:15.598490334Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:45:15.598449357Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.248509948Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.258677528Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.391501626Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.400807271Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.598420102Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.598421625Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"STwiCpS3583k\",\n        \"username\": \"user-9f755e57-5941-4ceb-8ce9-f262e66cc18c\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "9f755e57-5941-4ceb-8ce9-f262e66cc18c"
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:45:15.191307Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"9f755e57-5941-4ceb-8ce9-f262e66cc18c\",\n    \"resourceVersion\": \"db51c79a-740b-4a59-8298-ce0a2421bf30\",\n    \"uid\": \"51a953fc-6e35-41dd-8e19-b311b2bd2316\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:45:15.598490334Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:45:15.598449357Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.248509948Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.258677528Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.391501626Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.400807271Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.598420102Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:15.598421625Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"STwiCpS3583k\",\n        \"username\": \"user-9f755e57-5941-4ceb-8ce9-f262e66cc18c\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "9f755e57-5941-4ceb-8ce9-f262e66cc18c" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTY2MTUsImlhdCI6MTYzMTc5NjMxNSwiYXV0aF90aW1lIjoxNjMxNzk2MzA5LCJqdGkiOiI4MmQxNzUyOS0yNmYxLTQ1YzItYWI1OC0wMDQ3ZWExOGJmMGYiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6IjU3NmJhNmZiLThkNjYtNGYyNS1iYTI5LWE5MDJhNWJkNWQ2MSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiI1NzZiYTZmYi04ZDY2LTRmMjUtYmEyOS1hOTAyYTViZDVkNjEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.pCkRlyYGMtUyeKq7-hYqRcbVo2V2yyjpmscLucHDTRIbPtaes2k76eIN9z-99oN42RbF5kt-yyBw9zgQhhFuRwb3n3-0pNZJ2TuYZewyAHpND9scyd4qcWPEzmBAjNT70Ijn9fUwDEkijpbyfmUKcLIP4AqyjVjiWd1FxNAyV9_-5AxWJolJRp45bFFR_2mj1pjdW_bx9mlEvSiRkiweVm_dWEAPtyKwGmIh31QMGZ3QeiEI2Ye71h5nEbXC5kJJUQLhWpWJXUSw3MzJPiOn5pA8NmmJ8f99lz0hzcqQh0dEYhL5HSCCeeLhgqxumbjWNWFoFaRMeL60tWX4vkLwvQ\n", stderr: "" })
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:30Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:30Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:31Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:31Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:32Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:32Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:33Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:33Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:34Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:34Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:35Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:35Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:36Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:36Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:37Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:37Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:38Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:38Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:39Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:39Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:40Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:40Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:41Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:41Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:42Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:42Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:43Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:43Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:44Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:45Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:46Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:46Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:45:47Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T12:45:47Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:45:47Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:45:47Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:45:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "9f755e57-5941-4ceb-8ce9-f262e66cc18c" "device1"
[2021-09-16T12:45:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:45:47Z INFO  drogue_cloud_tests::resources::apps] Destroy application '9f755e57-5941-4ceb-8ce9-f262e66cc18c'
[2021-09-16T12:45:47Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "9f755e57-5941-4ceb-8ce9-f262e66cc18c"
[2021-09-16T12:45:47Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 9f755e57-5941-4ceb-8ce9-f262e66cc18c deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ❌ tests::http::telemetry::test_send_telemetry_user_only::version_3

**Duration**: 43.155309711s

<details>

<summary>Test output</summary>

<pre>
-------------- TEST START --------------
[2021-09-16T12:45:50Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTgxNTYsImlhdCI6MTYzMTc5NjM1NiwianRpIjoiYTdhYTgxZjctYjI3Yy00OGY0LTliMWMtN2EwNmI0NGNiNDczIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjA4NGNlZDQtOTgxNC00MGQ1LWJmMjYtNzk2NGZkOTllN2FhIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImYwODRjZWQ0LTk4MTQtNDBkNS1iZjI2LTc5NjRmZDk5ZTdhYSJ9.iOCeDBWuoyz803-_he71XhXqhUq2Ia1b1bQBCDJgLfE
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTgxNTYsImlhdCI6MTYzMTc5NjM1NiwianRpIjoiYTdhYTgxZjctYjI3Yy00OGY0LTliMWMtN2EwNmI0NGNiNDczIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiZjA4NGNlZDQtOTgxNC00MGQ1LWJmMjYtNzk2NGZkOTllN2FhIiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6ImYwODRjZWQ0LTk4MTQtNDBkNS1iZjI2LTc5NjRmZDk5ZTdhYSJ9.iOCeDBWuoyz803-_he71XhXqhUq2Ia1b1bQBCDJgLfE" "--context" "system-tests"
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTY2NTgsImlhdCI6MTYzMTc5NjM1OCwiYXV0aF90aW1lIjoxNjMxNzk2MzUzLCJqdGkiOiI2NjUzZGIwOS1hYmE4LTQyOWItOGE2MS01ZmM2NmRjNDc4NDUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImYwODRjZWQ0LTk4MTQtNDBkNS1iZjI2LTc5NjRmZDk5ZTdhYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiJmMDg0Y2VkNC05ODE0LTQwZDUtYmYyNi03OTY0ZmQ5OWU3YWEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.LA2NWs6n5Q_GjAyvdX5H7Heyg1bu4tWWAYe7V5vVLRxVGAmbrS5tQ17UPdaV8B727I8nPOx_BQXqVZ9cXeaaoA7mc-3RsZJSD7tiVDo59-weKDuX-O2w0TLFrGC0On0TzclFA_sDthtkhMgPg6P4feYir7HT3AKGZh7eT1lwiTytdb3HPMS9fTWRhLVJMLPUcmFGnDA5jXPRaLyfI_hNvEleliDPQWhhNOMNh5NArvsjlk37uY2U65I0XtY6iNBAGCSwyDfwqkjLiOXJ1r7jQCQ56ybDJV7dThYSxCgOmElcroToA5s2X4cjciiuRbPVlcT2qy6y8DQEJ_08xjyspA\n", stderr: "" })
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::resources::apps] Create application: 1c30547e-42d3-47dc-b725-7367838820d5
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "1c30547e-42d3-47dc-b725-7367838820d5"
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 1c30547e-42d3-47dc-b725-7367838820d5 created.\n", stderr: "" })
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1c30547e-42d3-47dc-b725-7367838820d5"
[2021-09-16T12:45:58Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:45:58.554936Z\",\n    \"generation\": 0,\n    \"name\": \"1c30547e-42d3-47dc-b725-7367838820d5\",\n    \"resourceVersion\": \"3bf71033-5f2a-4849-8947-7a919c45f7cb\",\n    \"uid\": \"8c780aec-f2db-41c1-bc14-3fd7e33d777f\"\n  }\n}", stderr: "" })
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1c30547e-42d3-47dc-b725-7367838820d5"
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:45:58.554936Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"1c30547e-42d3-47dc-b725-7367838820d5\",\n    \"resourceVersion\": \"e5e6df72-cfdd-4b00-ada6-7e47042cb5f8\",\n    \"uid\": \"8c780aec-f2db-41c1-bc14-3fd7e33d777f\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:45:59.188753559Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:45:59.188708153Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:58.668861267Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:58.682362108Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:58.885915568Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:58.896922295Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:59.188680591Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:59.188682564Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"MkAxcJlc0l9t\",\n        \"username\": \"user-1c30547e-42d3-47dc-b725-7367838820d5\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "1c30547e-42d3-47dc-b725-7367838820d5"
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:45:58.554936Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 10,\n    \"name\": \"1c30547e-42d3-47dc-b725-7367838820d5\",\n    \"resourceVersion\": \"e5e6df72-cfdd-4b00-ada6-7e47042cb5f8\",\n    \"uid\": \"8c780aec-f2db-41c1-bc14-3fd7e33d777f\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:45:59.188753559Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:45:59.188708153Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:58.668861267Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:58.682362108Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:58.885915568Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:58.896922295Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:59.188680591Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:45:59.188682564Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 9,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"MkAxcJlc0l9t\",\n        \"username\": \"user-1c30547e-42d3-47dc-b725-7367838820d5\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::resources::devices] Create device: device1
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "device" "--app" "1c30547e-42d3-47dc-b725-7367838820d5" "device1" "--spec" "{\"credentials\":{\"credentials\":[{\"user\":{\"password\":\"bar\",\"username\":\"foo\"}}]}}"
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 created.\n", stderr: "" })
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::tests::http] MQTT integration URL: ssl://mqtt-integration.172.18.0.2.nip.io:30002
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "whoami" "-t"
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0bTNXUmxDTmtSd0I5a2VJbEtUWW9HRDV3MGlHV1Z5a3NKWjRveHkzckRVIn0.eyJleHAiOjE2MzE3OTY2NTgsImlhdCI6MTYzMTc5NjM1OCwiYXV0aF90aW1lIjoxNjMxNzk2MzUzLCJqdGkiOiI2NjUzZGIwOS1hYmE4LTQyOWItOGE2MS01ZmM2NmRjNDc4NDUiLCJpc3MiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsImF1ZCI6WyJkcm9ndWUiLCJyZWFsbS1tYW5hZ2VtZW50IiwiZ3JhZmFuYSIsImFjY291bnQiXSwic3ViIjoiODg2ZmIwMjgtMjkzNS00NGNjLWIxOTctOGQ1MGI4ZTgyODk2IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiZHJvZ3VlIiwic2Vzc2lvbl9zdGF0ZSI6ImYwODRjZWQ0LTk4MTQtNDBkNS1iZjI2LTc5NjRmZDk5ZTdhYSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovL2NvbnNvbGUuMTcyLjE4LjAuMi5uaXAuaW8iLCJodHRwOi8vbG9jYWxob3N0OioiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImRyb2d1ZS11c2VyIiwiZHJvZ3VlLWFkbWluIiwib2ZmbGluZV9hY2Nlc3MiXX0sInJlc291cmNlX2FjY2VzcyI6eyJyZWFsbS1tYW5hZ2VtZW50Ijp7InJvbGVzIjpbIm1hbmFnZS11c2VycyJdfSwiZ3JhZmFuYSI6eyJyb2xlcyI6WyJncmFmYW5hLWVkaXRvciIsImdyYWZhbmEtYWRtaW4iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIHByb2ZpbGUiLCJzaWQiOiJmMDg0Y2VkNC05ODE0LTQwZDUtYmYyNi03OTY0ZmQ5OWU3YWEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJTeXN0ZW0gQWRtaW4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJhZG1pbiIsImdpdmVuX25hbWUiOiJTeXN0ZW0iLCJmYW1pbHlfbmFtZSI6IkFkbWluIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIn0.LA2NWs6n5Q_GjAyvdX5H7Heyg1bu4tWWAYe7V5vVLRxVGAmbrS5tQ17UPdaV8B727I8nPOx_BQXqVZ9cXeaaoA7mc-3RsZJSD7tiVDo59-weKDuX-O2w0TLFrGC0On0TzclFA_sDthtkhMgPg6P4feYir7HT3AKGZh7eT1lwiTytdb3HPMS9fTWRhLVJMLPUcmFGnDA5jXPRaLyfI_hNvEleliDPQWhhNOMNh5NArvsjlk37uY2U65I0XtY6iNBAGCSwyDfwqkjLiOXJ1r7jQCQ56ybDJV7dThYSxCgOmElcroToA5s2X4cjciiuRbPVlcT2qy6y8DQEJ_08xjyspA\n", stderr: "" })
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::tests::http] Receiver created
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Starting message stream...
[2021-09-16T12:45:59Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:00Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:00Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:01Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:01Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:02Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:02Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:03Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:03Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:04Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:04Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:05Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:05Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:06Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:06Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:07Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:07Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:08Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:08Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:09Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:09Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:10Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:10Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:11Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:11Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:12Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:12Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:13Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:14Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:15Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:15Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:16Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:16Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:17Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:17Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:18Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:18Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:19Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:19Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:20Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:20Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:21Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:21Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:22Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:22Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:23Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:23Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:24Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:24Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:25Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:25Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:26Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:26Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:27Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:27Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:28Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:28Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:29Z INFO  drogue_cloud_tests::context] Adding root certificate
[2021-09-16T12:46:29Z INFO  drogue_cloud_tests::tools::http] Sending payload
[2021-09-16T12:46:30Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Timeout waiting for first warmup message
[2021-09-16T12:46:30Z INFO  drogue_cloud_tests::tools::mqtt::receiver] Dropping MQTT receiver
[2021-09-16T12:46:30Z ERROR paho_mqtt::async_client] Stream error: TrySendError { kind: Disconnected }
[2021-09-16T12:46:30Z INFO  drogue_cloud_tests::resources::devices] Destroy application 'device1'
[2021-09-16T12:46:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "device" "--app" "1c30547e-42d3-47dc-b725-7367838820d5" "device1"
[2021-09-16T12:46:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "Device device1 deleted.\n", stderr: "" })
[2021-09-16T12:46:30Z INFO  drogue_cloud_tests::resources::apps] Destroy application '1c30547e-42d3-47dc-b725-7367838820d5'
[2021-09-16T12:46:30Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "1c30547e-42d3-47dc-b725-7367838820d5"
[2021-09-16T12:46:30Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 1c30547e-42d3-47dc-b725-7367838820d5 deleted.\n", stderr: "" })
Error: Unable to warm up listener: Timeout
thread 'main' panicked at 'assertion failed: `(left == right)`
  left: `1`,
 right: `0`: the test returned a termination value with a non-zero status code (1) which indicates a failure', /rustc/c8dfcfe046a7680554bf4eb612bad840e7631c4b/library/test/src/lib.rs:194:5

</pre>

</details>

## ✅ tests::mqtt::command::test_command::version_1

**Duration**: 13.305937993s

## ✅ tests::mqtt::command::test_command::version_2

**Duration**: 12.857934529s

## ✅ tests::mqtt::command::test_command::version_3

**Duration**: 12.460610184s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_1

**Duration**: 19.269018989s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_2

**Duration**: 19.310119078s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_1::integration_version_3

**Duration**: 18.970951869s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_1

**Duration**: 19.996157121s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_2

**Duration**: 18.142399275s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_2::integration_version_3

**Duration**: 18.693215793s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_1

**Duration**: 19.857989451s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_2

**Duration**: 19.096280719s

## ✅ tests::mqtt::telemetry::test_send_telemetry_pass::endpoint_version_3::integration_version_3

**Duration**: 18.874914902s

## ❌ tests::registry::test_registry_create_and_delete

**Duration**: 12.450445392s

<details>

<summary>Test output</summary>

<pre>
[2021-09-16T12:50:04Z INFO  drogue_cloud_tests::init::drg] Endpoints: Object({
        "api": String(
            "http://api.172.18.0.2.nip.io",
        ),
        "console": String(
            "http://console.172.18.0.2.nip.io",
        ),
        "issuer_url": String(
            "http://sso.172.18.0.2.nip.io/auth/realms/drogue",
        ),
        "registry": Object({
            "url": String(
                "http://api.172.18.0.2.nip.io",
            ),
        }),
        "sso": String(
            "http://sso.172.18.0.2.nip.io",
        ),
    })
[2021-09-16T12:50:12Z INFO  drogue_cloud_tests::init::drg] Refresh token: eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTg0MTEsImlhdCI6MTYzMTc5NjYxMSwianRpIjoiMWI2OGMyMmEtODI5Mi00ZTM0LWE2MWEtYjczOTZlMjE3NzIxIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNmE1NjA5ZGEtYzc5Ni00YTY2LTk3ZjgtMDI5ZGM2NjAyYzI1Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjZhNTYwOWRhLWM3OTYtNGE2Ni05N2Y4LTAyOWRjNjYwMmMyNSJ9.L-zsy0d4UfAK-0lBaCWluYhJGgowu_STUogXn6Hgolk
[2021-09-16T12:50:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "context" "delete" "system-tests"
[2021-09-16T12:50:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "", stderr: "" })
[2021-09-16T12:50:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "login" "http://api.172.18.0.2.nip.io/" "-t" "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZmQwOWIzOC0yYjk2LTRiY2QtYTY2NS0xNmU2MjhjMmM4YzIifQ.eyJleHAiOjE2MzE3OTg0MTEsImlhdCI6MTYzMTc5NjYxMSwianRpIjoiMWI2OGMyMmEtODI5Mi00ZTM0LWE2MWEtYjczOTZlMjE3NzIxIiwiaXNzIjoiaHR0cDovL3Nzby4xNzIuMTguMC4yLm5pcC5pby9hdXRoL3JlYWxtcy9kcm9ndWUiLCJhdWQiOiJodHRwOi8vc3NvLjE3Mi4xOC4wLjIubmlwLmlvL2F1dGgvcmVhbG1zL2Ryb2d1ZSIsInN1YiI6Ijg4NmZiMDI4LTI5MzUtNDRjYy1iMTk3LThkNTBiOGU4Mjg5NiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJkcm9ndWUiLCJzZXNzaW9uX3N0YXRlIjoiNmE1NjA5ZGEtYzc5Ni00YTY2LTk3ZjgtMDI5ZGM2NjAyYzI1Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgcHJvZmlsZSIsInNpZCI6IjZhNTYwOWRhLWM3OTYtNGE2Ni05N2Y4LTAyOWRjNjYwMmMyNSJ9.L-zsy0d4UfAK-0lBaCWluYhJGgowu_STUogXn6Hgolk" "--context" "system-tests"
[2021-09-16T12:50:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "\nSuccessfully authenticated to drogue cloud : http://api.172.18.0.2.nip.io/\nSwitched active context to: system-tests\n", stderr: "" })
[2021-09-16T12:50:12Z INFO  drogue_cloud_tests::resources::apps] Create application: 02da2d91-3757-4cc3-aaed-0d30d03189fd
[2021-09-16T12:50:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "create" "app" "02da2d91-3757-4cc3-aaed-0d30d03189fd"
[2021-09-16T12:50:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 02da2d91-3757-4cc3-aaed-0d30d03189fd created.\n", stderr: "" })
[2021-09-16T12:50:12Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "02da2d91-3757-4cc3-aaed-0d30d03189fd"
[2021-09-16T12:50:12Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:50:12.476034Z\",\n    \"generation\": 1,\n    \"name\": \"02da2d91-3757-4cc3-aaed-0d30d03189fd\",\n    \"resourceVersion\": \"70f42db5-1d4e-4fe1-97c1-f0bf13a0e290\",\n    \"uid\": \"3b23f751-8801-48a4-8336-c0fe954860e6\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:50:12.494050956Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      }\n    ]\n  }\n}", stderr: "" })
[2021-09-16T12:50:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "02da2d91-3757-4cc3-aaed-0d30d03189fd"
[2021-09-16T12:50:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:50:12.476034Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"02da2d91-3757-4cc3-aaed-0d30d03189fd\",\n    \"resourceVersion\": \"f7435dbf-820a-4868-8a03-6060ba79c77b\",\n    \"uid\": \"3b23f751-8801-48a4-8336-c0fe954860e6\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:50:13.064960399Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:50:13.064911306Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:50:12.564311590Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:50:12.584283778Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:50:12.734148556Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:50:12.741801114Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:50:13.064881561Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:50:13.064883324Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"FqssdiWCR6vU\",\n        \"username\": \"user-02da2d91-3757-4cc3-aaed-0d30d03189fd\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:50:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "get" "app" "02da2d91-3757-4cc3-aaed-0d30d03189fd"
[2021-09-16T12:50:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "{\n  \"metadata\": {\n    \"creationTimestamp\": \"2021-09-16T12:50:12.476034Z\",\n    \"finalizers\": [\n      \"kafka\"\n    ],\n    \"generation\": 9,\n    \"name\": \"02da2d91-3757-4cc3-aaed-0d30d03189fd\",\n    \"resourceVersion\": \"f7435dbf-820a-4868-8a03-6060ba79c77b\",\n    \"uid\": \"3b23f751-8801-48a4-8336-c0fe954860e6\"\n  },\n  \"status\": {\n    \"conditions\": [\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:50:13.064960399Z\",\n        \"status\": \"True\",\n        \"type\": \"Ready\"\n      },\n      {\n        \"lastTransitionTime\": \"2021-09-16T12:50:13.064911306Z\",\n        \"status\": \"True\",\n        \"type\": \"KafkaReady\"\n      }\n    ],\n    \"kafka\": {\n      \"conditions\": [\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:50:12.564311590Z\",\n          \"status\": \"True\",\n          \"type\": \"HasFinalizer\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:50:12.584283778Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateTopics\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:50:12.734148556Z\",\n          \"status\": \"True\",\n          \"type\": \"TopicsReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:50:12.741801114Z\",\n          \"status\": \"True\",\n          \"type\": \"CreateUser\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:50:13.064881561Z\",\n          \"status\": \"True\",\n          \"type\": \"UserReady\"\n        },\n        {\n          \"lastTransitionTime\": \"2021-09-16T12:50:13.064883324Z\",\n          \"reason\": \"AsExpected\",\n          \"status\": \"True\",\n          \"type\": \"Reconciled\"\n        }\n      ],\n      \"observedGeneration\": 8,\n      \"user\": {\n        \"mechanism\": \"SCRAM-SHA-512\",\n        \"password\": \"FqssdiWCR6vU\",\n        \"username\": \"user-02da2d91-3757-4cc3-aaed-0d30d03189fd\"\n      }\n    }\n  }\n}", stderr: "" })
[2021-09-16T12:50:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "02da2d91-3757-4cc3-aaed-0d30d03189fd"
[2021-09-16T12:50:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 02da2d91-3757-4cc3-aaed-0d30d03189fd deleted.\n", stderr: "" })
[2021-09-16T12:50:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "02da2d91-3757-4cc3-aaed-0d30d03189fd"
[2021-09-16T12:50:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 02da2d91-3757-4cc3-aaed-0d30d03189fd deleted.\n", stderr: "" })
thread 'main' panicked at 'assertion failed: r.is_err()', src/tests/registry/mod.rs:54:5
[2021-09-16T12:50:13Z INFO  drogue_cloud_tests::resources::apps] Destroy application '02da2d91-3757-4cc3-aaed-0d30d03189fd'
[2021-09-16T12:50:13Z INFO  drogue_cloud_tests::init::drg] Running: "drg" "delete" "app" "02da2d91-3757-4cc3-aaed-0d30d03189fd"
[2021-09-16T12:50:13Z INFO  drogue_cloud_tests::init::drg] Output: Ok(Output { status: ExitStatus(ExitStatus(0)), stdout: "App 02da2d91-3757-4cc3-aaed-0d30d03189fd deleted.\n", stderr: "" })

</pre>

</details>

## ✅ tests::registry::test_registry_create_app

**Duration**: 11.800114845s

## ✅ tests::registry::test_registry_create_app_and_device

**Duration**: 12.373536356s

## ✅ tests::registry::test_registry_create_app_and_device_twice

**Duration**: 11.946395816s

## ✅ tests::registry::test_registry_create_app_twice

**Duration**: 12.318720896s

## ✅ tests::registry::test_registry_device_create_and_delete

**Duration**: 12.452203811s
